var tO=Object.defineProperty;var rO=(t,e,r)=>e in t?tO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Wc=(t,e,r)=>rO(t,typeof e!="symbol"?e+"":e,r);function nO(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ci(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var aE={exports:{}},bp={},iE={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd=Symbol.for("react.element"),aO=Symbol.for("react.portal"),iO=Symbol.for("react.fragment"),sO=Symbol.for("react.strict_mode"),oO=Symbol.for("react.profiler"),lO=Symbol.for("react.provider"),cO=Symbol.for("react.context"),uO=Symbol.for("react.forward_ref"),dO=Symbol.for("react.suspense"),fO=Symbol.for("react.memo"),hO=Symbol.for("react.lazy"),a_=Symbol.iterator;function pO(t){return t===null||typeof t!="object"?null:(t=a_&&t[a_]||t["@@iterator"],typeof t=="function"?t:null)}var sE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,lE={};function jc(t,e,r){this.props=t,this.context=e,this.refs=lE,this.updater=r||sE}jc.prototype.isReactComponent={};jc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cE(){}cE.prototype=jc.prototype;function fb(t,e,r){this.props=t,this.context=e,this.refs=lE,this.updater=r||sE}var hb=fb.prototype=new cE;hb.constructor=fb;oE(hb,jc.prototype);hb.isPureReactComponent=!0;var i_=Array.isArray,uE=Object.prototype.hasOwnProperty,pb={current:null},dE={key:!0,ref:!0,__self:!0,__source:!0};function fE(t,e,r){var n,a={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)uE.call(e,n)&&!dE.hasOwnProperty(n)&&(a[n]=e[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Hd,type:t,key:i,ref:s,props:a,_owner:pb.current}}function mO(t,e){return{$$typeof:Hd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hd}function gO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var s_=/\/+/g;function Qm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gO(""+t.key):e.toString(36)}function Ih(t,e,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hd:case aO:s=!0}}if(s)return s=t,a=a(s),t=n===""?"."+Qm(s,0):n,i_(a)?(r="",t!=null&&(r=t.replace(s_,"$&/")+"/"),Ih(a,e,r,"",function(u){return u})):a!=null&&(mb(a)&&(a=mO(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(s_,"$&/")+"/")+t)),e.push(a)),1;if(s=0,n=n===""?".":n+":",i_(t))for(var o=0;o<t.length;o++){i=t[o];var c=n+Qm(i,o);s+=Ih(i,e,r,c,a)}else if(c=pO(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=n+Qm(i,o++),s+=Ih(i,e,r,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Pf(t,e,r){if(t==null)return t;var n=[],a=0;return Ih(t,n,"","",function(i){return e.call(r,i,a++)}),n}function vO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Oh={transition:null},xO={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Oh,ReactCurrentOwner:pb};function hE(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Pf,forEach:function(t,e,r){Pf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Pf(t,function(){e++}),e},toArray:function(t){return Pf(t,function(e){return e})||[]},only:function(t){if(!mb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=jc;He.Fragment=iO;He.Profiler=oO;He.PureComponent=fb;He.StrictMode=sO;He.Suspense=dO;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xO;He.act=hE;He.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=oE({},t.props),a=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=pb.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)uE.call(e,c)&&!dE.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Hd,type:t.type,key:a,ref:i,props:n,_owner:s}};He.createContext=function(t){return t={$$typeof:cO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lO,_context:t},t.Consumer=t};He.createElement=fE;He.createFactory=function(t){var e=fE.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:uO,render:t}};He.isValidElement=mb;He.lazy=function(t){return{$$typeof:hO,_payload:{_status:-1,_result:t},_init:vO}};He.memo=function(t,e){return{$$typeof:fO,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=Oh.transition;Oh.transition={};try{t()}finally{Oh.transition=e}};He.unstable_act=hE;He.useCallback=function(t,e){return tn.current.useCallback(t,e)};He.useContext=function(t){return tn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};He.useEffect=function(t,e){return tn.current.useEffect(t,e)};He.useId=function(){return tn.current.useId()};He.useImperativeHandle=function(t,e,r){return tn.current.useImperativeHandle(t,e,r)};He.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return tn.current.useMemo(t,e)};He.useReducer=function(t,e,r){return tn.current.useReducer(t,e,r)};He.useRef=function(t){return tn.current.useRef(t)};He.useState=function(t){return tn.current.useState(t)};He.useSyncExternalStore=function(t,e,r){return tn.current.useSyncExternalStore(t,e,r)};He.useTransition=function(){return tn.current.useTransition()};He.version="18.3.1";iE.exports=He;var _=iE.exports;const ne=ci(_),Kv=nO({__proto__:null,default:ne},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO=_,bO=Symbol.for("react.element"),wO=Symbol.for("react.fragment"),_O=Object.prototype.hasOwnProperty,kO=yO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NO={key:!0,ref:!0,__self:!0,__source:!0};function pE(t,e,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)_O.call(e,n)&&!NO.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:bO,type:t,key:i,ref:s,props:a,_owner:kO.current}}bp.Fragment=wO;bp.jsx=pE;bp.jsxs=pE;aE.exports=bp;var l=aE.exports,mE={exports:{}},Ln={},gE={exports:{}},vE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,M){var L=R.length;R.push(M);e:for(;0<L;){var B=L-1>>>1,U=R[B];if(0<a(U,M))R[B]=M,R[L]=U,L=B;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var M=R[0],L=R.pop();if(L!==M){R[0]=L;e:for(var B=0,U=R.length,q=U>>>1;B<q;){var te=2*(B+1)-1,V=R[te],re=te+1,ue=R[re];if(0>a(V,L))re<U&&0>a(ue,V)?(R[B]=ue,R[re]=L,B=re):(R[B]=V,R[te]=L,B=te);else if(re<U&&0>a(ue,L))R[B]=ue,R[re]=L,B=re;else break e}}return M}function a(R,M){var L=R.sortIndex-M.sortIndex;return L!==0?L:R.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=R)n(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=r(u)}}function w(R){if(g=!1,b(R),!m)if(r(c)!==null)m=!0,$(S);else{var M=r(u);M!==null&&D(w,M.startTime-R)}}function S(R,M){m=!1,g&&(g=!1,x(I),I=-1),p=!0;var L=h;try{for(b(M),f=r(c);f!==null&&(!(f.expirationTime>M)||R&&!F());){var B=f.callback;if(typeof B=="function"){f.callback=null,h=f.priorityLevel;var U=B(f.expirationTime<=M);M=t.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&n(c),b(M)}else n(c);f=r(c)}if(f!==null)var q=!0;else{var te=r(u);te!==null&&D(w,te.startTime-M),q=!1}return q}finally{f=null,h=L,p=!1}}var E=!1,j=null,I=-1,N=5,T=-1;function F(){return!(t.unstable_now()-T<N)}function C(){if(j!==null){var R=t.unstable_now();T=R;var M=!0;try{M=j(!0,R)}finally{M?A():(E=!1,j=null)}}else E=!1}var A;if(typeof v=="function")A=function(){v(C)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,O=k.port2;k.port1.onmessage=C,A=function(){O.postMessage(null)}}else A=function(){y(C,0)};function $(R){j=R,E||(E=!0,A())}function D(R,M){I=y(function(){R(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(S))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var L=h;h=M;try{return R()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var L=h;h=R;try{return M()}finally{h=L}},t.unstable_scheduleCallback=function(R,M,L){var B=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?B+L:B):L=B,R){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=L+U,R={id:d++,callback:M,priorityLevel:R,startTime:L,expirationTime:U,sortIndex:-1},L>B?(R.sortIndex=L,e(u,R),r(c)===null&&R===r(u)&&(g?(x(I),I=-1):g=!0,D(w,L-B))):(R.sortIndex=U,e(c,R),m||p||(m=!0,$(S))),R},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(R){var M=h;return function(){var L=h;h=M;try{return R.apply(this,arguments)}finally{h=L}}}})(vE);gE.exports=vE;var SO=gE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO=_,Pn=SO;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xE=new Set,sd={};function Jo(t,e){nc(t,e),nc(t+"Capture",e)}function nc(t,e){for(sd[t]=e,t=0;t<e.length;t++)xE.add(e[t])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zv=Object.prototype.hasOwnProperty,CO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o_={},l_={};function jO(t){return Zv.call(l_,t)?!0:Zv.call(o_,t)?!1:CO.test(t)?l_[t]=!0:(o_[t]=!0,!1)}function AO(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TO(t,e,r,n){if(e===null||typeof e>"u"||AO(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,r,n,a,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ar[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ar[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ar[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ar[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ar[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ar[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ar[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ar[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ar[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var gb=/[\-:]([a-z])/g;function vb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gb,vb);Ar[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gb,vb);Ar[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gb,vb);Ar[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ar[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ar.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ar[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function xb(t,e,r,n){var a=Ar.hasOwnProperty(e)?Ar[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TO(e,r,a,n)&&(r=null),n||a===null?jO(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ui=EO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rf=Symbol.for("react.element"),_l=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),yb=Symbol.for("react.strict_mode"),Qv=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),bE=Symbol.for("react.context"),bb=Symbol.for("react.forward_ref"),Jv=Symbol.for("react.suspense"),ex=Symbol.for("react.suspense_list"),wb=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),wE=Symbol.for("react.offscreen"),c_=Symbol.iterator;function Vc(t){return t===null||typeof t!="object"?null:(t=c_&&t[c_]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,Jm;function bu(t){if(Jm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Jm=e&&e[1]||""}return`
`+Jm+t}var eg=!1;function tg(t,e){if(!t||eg)return"";eg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var c=`
`+a[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=o);break}}}finally{eg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?bu(t):""}function IO(t){switch(t.tag){case 5:return bu(t.type);case 16:return bu("Lazy");case 13:return bu("Suspense");case 19:return bu("SuspenseList");case 0:case 2:case 15:return t=tg(t.type,!1),t;case 11:return t=tg(t.type.render,!1),t;case 1:return t=tg(t.type,!0),t;default:return""}}function tx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kl:return"Fragment";case _l:return"Portal";case Qv:return"Profiler";case yb:return"StrictMode";case Jv:return"Suspense";case ex:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bE:return(t.displayName||"Context")+".Consumer";case yE:return(t._context.displayName||"Context")+".Provider";case bb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wb:return e=t.displayName||null,e!==null?e:tx(t.type)||"Memo";case rs:e=t._payload,t=t._init;try{return tx(t(e))}catch{}}return null}function OO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tx(e);case 8:return e===yb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _E(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DO(t){var e=_E(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mf(t){t._valueTracker||(t._valueTracker=DO(t))}function kE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=_E(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function r0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rx(t,e){var r=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function u_(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Bs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NE(t,e){e=e.checked,e!=null&&xb(t,"checked",e,!1)}function nx(t,e){NE(t,e);var r=Bs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ax(t,e.type,r):e.hasOwnProperty("defaultValue")&&ax(t,e.type,Bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d_(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ax(t,e,r){(e!=="number"||r0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wu=Array.isArray;function zl(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Bs(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function ix(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f_(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(le(92));if(wu(r)){if(1<r.length)throw Error(le(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Bs(r)}}function SE(t,e){var r=Bs(e.value),n=Bs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function h_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lf,CE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lf=Lf||document.createElement("div"),Lf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function od(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PO=["Webkit","ms","Moz","O"];Object.keys(Du).forEach(function(t){PO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Du[e]=Du[t]})});function jE(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Du.hasOwnProperty(t)&&Du[t]?(""+e).trim():e+"px"}function AE(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=jE(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var RO=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ox(t,e){if(e){if(RO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function lx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cx=null;function _b(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ux=null,Hl=null,Wl=null;function p_(t){if(t=Gd(t)){if(typeof ux!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Sp(e),ux(t.stateNode,t.type,e))}}function TE(t){Hl?Wl?Wl.push(t):Wl=[t]:Hl=t}function IE(){if(Hl){var t=Hl,e=Wl;if(Wl=Hl=null,p_(t),e)for(t=0;t<e.length;t++)p_(e[t])}}function OE(t,e){return t(e)}function DE(){}var rg=!1;function PE(t,e,r){if(rg)return t(e,r);rg=!0;try{return OE(t,e,r)}finally{rg=!1,(Hl!==null||Wl!==null)&&(DE(),IE())}}function ld(t,e){var r=t.stateNode;if(r===null)return null;var n=Sp(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(le(231,e,typeof r));return r}var dx=!1;if(Oi)try{var Gc={};Object.defineProperty(Gc,"passive",{get:function(){dx=!0}}),window.addEventListener("test",Gc,Gc),window.removeEventListener("test",Gc,Gc)}catch{dx=!1}function MO(t,e,r,n,a,i,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Pu=!1,n0=null,a0=!1,fx=null,LO={onError:function(t){Pu=!0,n0=t}};function BO(t,e,r,n,a,i,s,o,c){Pu=!1,n0=null,MO.apply(LO,arguments)}function FO(t,e,r,n,a,i,s,o,c){if(BO.apply(this,arguments),Pu){if(Pu){var u=n0;Pu=!1,n0=null}else throw Error(le(198));a0||(a0=!0,fx=u)}}function el(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m_(t){if(el(t)!==t)throw Error(le(188))}function $O(t){var e=t.alternate;if(!e){if(e=el(t),e===null)throw Error(le(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return m_(a),t;if(i===n)return m_(a),e;i=i.sibling}throw Error(le(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s)throw Error(le(189))}}if(r.alternate!==n)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?t:e}function ME(t){return t=$O(t),t!==null?LE(t):null}function LE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LE(t);if(e!==null)return e;t=t.sibling}return null}var BE=Pn.unstable_scheduleCallback,g_=Pn.unstable_cancelCallback,UO=Pn.unstable_shouldYield,zO=Pn.unstable_requestPaint,Ht=Pn.unstable_now,HO=Pn.unstable_getCurrentPriorityLevel,kb=Pn.unstable_ImmediatePriority,FE=Pn.unstable_UserBlockingPriority,i0=Pn.unstable_NormalPriority,WO=Pn.unstable_LowPriority,$E=Pn.unstable_IdlePriority,wp=null,Za=null;function VO(t){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(wp,t,void 0,(t.current.flags&128)===128)}catch{}}var Aa=Math.clz32?Math.clz32:qO,GO=Math.log,XO=Math.LN2;function qO(t){return t>>>=0,t===0?32:31-(GO(t)/XO|0)|0}var Bf=64,Ff=4194304;function _u(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function s0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,s=r&268435455;if(s!==0){var o=s&~a;o!==0?n=_u(o):(i&=s,i!==0&&(n=_u(i)))}else s=r&~a,s!==0?n=_u(s):i!==0&&(n=_u(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Aa(e),a=1<<r,n|=t[r],e&=~a;return n}function YO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KO(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Aa(i),o=1<<s,c=a[s];c===-1?(!(o&r)||o&n)&&(a[s]=YO(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function hx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UE(){var t=Bf;return Bf<<=1,!(Bf&4194240)&&(Bf=64),t}function ng(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Aa(e),t[e]=r}function ZO(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Aa(r),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function Nb(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Aa(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var ct=0;function zE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HE,Sb,WE,VE,GE,px=!1,$f=[],_s=null,ks=null,Ns=null,cd=new Map,ud=new Map,ls=[],QO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v_(t,e){switch(t){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":cd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(e.pointerId)}}function Xc(t,e,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Gd(e),e!==null&&Sb(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function JO(t,e,r,n,a){switch(e){case"focusin":return _s=Xc(_s,t,e,r,n,a),!0;case"dragenter":return ks=Xc(ks,t,e,r,n,a),!0;case"mouseover":return Ns=Xc(Ns,t,e,r,n,a),!0;case"pointerover":var i=a.pointerId;return cd.set(i,Xc(cd.get(i)||null,t,e,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ud.set(i,Xc(ud.get(i)||null,t,e,r,n,a)),!0}return!1}function XE(t){var e=No(t.target);if(e!==null){var r=el(e);if(r!==null){if(e=r.tag,e===13){if(e=RE(r),e!==null){t.blockedOn=e,GE(t.priority,function(){WE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=mx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);cx=n,r.target.dispatchEvent(n),cx=null}else return e=Gd(r),e!==null&&Sb(e),t.blockedOn=r,!1;e.shift()}return!0}function x_(t,e,r){Dh(t)&&r.delete(e)}function eD(){px=!1,_s!==null&&Dh(_s)&&(_s=null),ks!==null&&Dh(ks)&&(ks=null),Ns!==null&&Dh(Ns)&&(Ns=null),cd.forEach(x_),ud.forEach(x_)}function qc(t,e){t.blockedOn===e&&(t.blockedOn=null,px||(px=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,eD)))}function dd(t){function e(a){return qc(a,t)}if(0<$f.length){qc($f[0],t);for(var r=1;r<$f.length;r++){var n=$f[r];n.blockedOn===t&&(n.blockedOn=null)}}for(_s!==null&&qc(_s,t),ks!==null&&qc(ks,t),Ns!==null&&qc(Ns,t),cd.forEach(e),ud.forEach(e),r=0;r<ls.length;r++)n=ls[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ls.length&&(r=ls[0],r.blockedOn===null);)XE(r),r.blockedOn===null&&ls.shift()}var Vl=Ui.ReactCurrentBatchConfig,o0=!0;function tD(t,e,r,n){var a=ct,i=Vl.transition;Vl.transition=null;try{ct=1,Eb(t,e,r,n)}finally{ct=a,Vl.transition=i}}function rD(t,e,r,n){var a=ct,i=Vl.transition;Vl.transition=null;try{ct=4,Eb(t,e,r,n)}finally{ct=a,Vl.transition=i}}function Eb(t,e,r,n){if(o0){var a=mx(t,e,r,n);if(a===null)hg(t,e,n,l0,r),v_(t,n);else if(JO(a,t,e,r,n))n.stopPropagation();else if(v_(t,n),e&4&&-1<QO.indexOf(t)){for(;a!==null;){var i=Gd(a);if(i!==null&&HE(i),i=mx(t,e,r,n),i===null&&hg(t,e,n,l0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else hg(t,e,n,null,r)}}var l0=null;function mx(t,e,r,n){if(l0=null,t=_b(n),t=No(t),t!==null)if(e=el(t),e===null)t=null;else if(r=e.tag,r===13){if(t=RE(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return l0=t,null}function qE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HO()){case kb:return 1;case FE:return 4;case i0:case WO:return 16;case $E:return 536870912;default:return 16}default:return 16}}var ps=null,Cb=null,Ph=null;function YE(){if(Ph)return Ph;var t,e=Cb,r=e.length,n,a="value"in ps?ps.value:ps.textContent,i=a.length;for(t=0;t<r&&e[t]===a[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===a[i-n];n++);return Ph=a.slice(t,1<n?1-n:void 0)}function Rh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uf(){return!0}function y_(){return!1}function Bn(t){function e(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Uf:y_,this.isPropagationStopped=y_,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Uf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Uf)},persist:function(){},isPersistent:Uf}),e}var Ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jb=Bn(Ac),Vd=Ft({},Ac,{view:0,detail:0}),nD=Bn(Vd),ag,ig,Yc,_p=Ft({},Vd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ab,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yc&&(Yc&&t.type==="mousemove"?(ag=t.screenX-Yc.screenX,ig=t.screenY-Yc.screenY):ig=ag=0,Yc=t),ag)},movementY:function(t){return"movementY"in t?t.movementY:ig}}),b_=Bn(_p),aD=Ft({},_p,{dataTransfer:0}),iD=Bn(aD),sD=Ft({},Vd,{relatedTarget:0}),sg=Bn(sD),oD=Ft({},Ac,{animationName:0,elapsedTime:0,pseudoElement:0}),lD=Bn(oD),cD=Ft({},Ac,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uD=Bn(cD),dD=Ft({},Ac,{data:0}),w_=Bn(dD),fD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pD[t])?!!e[t]:!1}function Ab(){return mD}var gD=Ft({},Vd,{key:function(t){if(t.key){var e=fD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ab,charCode:function(t){return t.type==="keypress"?Rh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vD=Bn(gD),xD=Ft({},_p,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),__=Bn(xD),yD=Ft({},Vd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ab}),bD=Bn(yD),wD=Ft({},Ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),_D=Bn(wD),kD=Ft({},_p,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ND=Bn(kD),SD=[9,13,27,32],Tb=Oi&&"CompositionEvent"in window,Ru=null;Oi&&"documentMode"in document&&(Ru=document.documentMode);var ED=Oi&&"TextEvent"in window&&!Ru,KE=Oi&&(!Tb||Ru&&8<Ru&&11>=Ru),k_=" ",N_=!1;function ZE(t,e){switch(t){case"keyup":return SD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nl=!1;function CD(t,e){switch(t){case"compositionend":return QE(e);case"keypress":return e.which!==32?null:(N_=!0,k_);case"textInput":return t=e.data,t===k_&&N_?null:t;default:return null}}function jD(t,e){if(Nl)return t==="compositionend"||!Tb&&ZE(t,e)?(t=YE(),Ph=Cb=ps=null,Nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KE&&e.locale!=="ko"?null:e.data;default:return null}}var AD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AD[t.type]:e==="textarea"}function JE(t,e,r,n){TE(n),e=c0(e,"onChange"),0<e.length&&(r=new jb("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Mu=null,fd=null;function TD(t){uC(t,0)}function kp(t){var e=Cl(t);if(kE(e))return t}function ID(t,e){if(t==="change")return e}var eC=!1;if(Oi){var og;if(Oi){var lg="oninput"in document;if(!lg){var E_=document.createElement("div");E_.setAttribute("oninput","return;"),lg=typeof E_.oninput=="function"}og=lg}else og=!1;eC=og&&(!document.documentMode||9<document.documentMode)}function C_(){Mu&&(Mu.detachEvent("onpropertychange",tC),fd=Mu=null)}function tC(t){if(t.propertyName==="value"&&kp(fd)){var e=[];JE(e,fd,t,_b(t)),PE(TD,e)}}function OD(t,e,r){t==="focusin"?(C_(),Mu=e,fd=r,Mu.attachEvent("onpropertychange",tC)):t==="focusout"&&C_()}function DD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kp(fd)}function PD(t,e){if(t==="click")return kp(e)}function RD(t,e){if(t==="input"||t==="change")return kp(e)}function MD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Da=typeof Object.is=="function"?Object.is:MD;function hd(t,e){if(Da(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Zv.call(e,a)||!Da(t[a],e[a]))return!1}return!0}function j_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var r=j_(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=j_(r)}}function rC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nC(){for(var t=window,e=r0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=r0(t.document)}return e}function Ib(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LD(t){var e=nC(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&rC(r.ownerDocument.documentElement,r)){if(n!==null&&Ib(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=A_(r,i);var s=A_(r,n);a&&s&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BD=Oi&&"documentMode"in document&&11>=document.documentMode,Sl=null,gx=null,Lu=null,vx=!1;function T_(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vx||Sl==null||Sl!==r0(n)||(n=Sl,"selectionStart"in n&&Ib(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Lu&&hd(Lu,n)||(Lu=n,n=c0(gx,"onSelect"),0<n.length&&(e=new jb("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Sl)))}function zf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var El={animationend:zf("Animation","AnimationEnd"),animationiteration:zf("Animation","AnimationIteration"),animationstart:zf("Animation","AnimationStart"),transitionend:zf("Transition","TransitionEnd")},cg={},aC={};Oi&&(aC=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Np(t){if(cg[t])return cg[t];if(!El[t])return t;var e=El[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in aC)return cg[t]=e[r];return t}var iC=Np("animationend"),sC=Np("animationiteration"),oC=Np("animationstart"),lC=Np("transitionend"),cC=new Map,I_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(t,e){cC.set(t,e),Jo(e,[t])}for(var ug=0;ug<I_.length;ug++){var dg=I_[ug],FD=dg.toLowerCase(),$D=dg[0].toUpperCase()+dg.slice(1);Ws(FD,"on"+$D)}Ws(iC,"onAnimationEnd");Ws(sC,"onAnimationIteration");Ws(oC,"onAnimationStart");Ws("dblclick","onDoubleClick");Ws("focusin","onFocus");Ws("focusout","onBlur");Ws(lC,"onTransitionEnd");nc("onMouseEnter",["mouseout","mouseover"]);nc("onMouseLeave",["mouseout","mouseover"]);nc("onPointerEnter",["pointerout","pointerover"]);nc("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ku));function O_(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,FO(n,e,void 0,t),t.currentTarget=null}function uC(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;O_(a,o,u),i=c}else for(s=0;s<n.length;s++){if(o=n[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;O_(a,o,u),i=c}}}if(a0)throw t=fx,a0=!1,fx=null,t}function bt(t,e){var r=e[_x];r===void 0&&(r=e[_x]=new Set);var n=t+"__bubble";r.has(n)||(dC(e,t,2,!1),r.add(n))}function fg(t,e,r){var n=0;e&&(n|=4),dC(r,t,n,e)}var Hf="_reactListening"+Math.random().toString(36).slice(2);function pd(t){if(!t[Hf]){t[Hf]=!0,xE.forEach(function(r){r!=="selectionchange"&&(UD.has(r)||fg(r,!1,t),fg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hf]||(e[Hf]=!0,fg("selectionchange",!1,e))}}function dC(t,e,r,n){switch(qE(e)){case 1:var a=tD;break;case 4:a=rD;break;default:a=Eb}r=a.bind(null,e,r,t),a=void 0,!dx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function hg(t,e,r,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;o!==null;){if(s=No(o),s===null)return;if(c=s.tag,c===5||c===6){n=i=s;continue e}o=o.parentNode}}n=n.return}PE(function(){var u=i,d=_b(r),f=[];e:{var h=cC.get(t);if(h!==void 0){var p=jb,m=t;switch(t){case"keypress":if(Rh(r)===0)break e;case"keydown":case"keyup":p=vD;break;case"focusin":m="focus",p=sg;break;case"focusout":m="blur",p=sg;break;case"beforeblur":case"afterblur":p=sg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=iD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=bD;break;case iC:case sC:case oC:p=lD;break;case lC:p=_D;break;case"scroll":p=nD;break;case"wheel":p=ND;break;case"copy":case"cut":case"paste":p=uD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=__}var g=(e&4)!==0,y=!g&&t==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=ld(v,x),w!=null&&g.push(md(v,w,b)))),y)break;v=v.return}0<g.length&&(h=new p(h,m,null,r,d),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==cx&&(m=r.relatedTarget||r.fromElement)&&(No(m)||m[Di]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?No(m):null,m!==null&&(y=el(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=b_,w="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=__,w="onPointerLeave",x="onPointerEnter",v="pointer"),y=p==null?h:Cl(p),b=m==null?h:Cl(m),h=new g(w,v+"leave",p,r,d),h.target=y,h.relatedTarget=b,w=null,No(d)===u&&(g=new g(x,v+"enter",m,r,d),g.target=b,g.relatedTarget=y,w=g),y=w,p&&m)t:{for(g=p,x=m,v=0,b=g;b;b=ul(b))v++;for(b=0,w=x;w;w=ul(w))b++;for(;0<v-b;)g=ul(g),v--;for(;0<b-v;)x=ul(x),b--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=ul(g),x=ul(x)}g=null}else g=null;p!==null&&D_(f,h,p,g,!1),m!==null&&y!==null&&D_(f,y,m,g,!0)}}e:{if(h=u?Cl(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=ID;else if(S_(h))if(eC)S=RD;else{S=DD;var E=OD}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=PD);if(S&&(S=S(t,u))){JE(f,S,r,d);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&ax(h,"number",h.value)}switch(E=u?Cl(u):window,t){case"focusin":(S_(E)||E.contentEditable==="true")&&(Sl=E,gx=u,Lu=null);break;case"focusout":Lu=gx=Sl=null;break;case"mousedown":vx=!0;break;case"contextmenu":case"mouseup":case"dragend":vx=!1,T_(f,r,d);break;case"selectionchange":if(BD)break;case"keydown":case"keyup":T_(f,r,d)}var j;if(Tb)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Nl?ZE(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(KE&&r.locale!=="ko"&&(Nl||I!=="onCompositionStart"?I==="onCompositionEnd"&&Nl&&(j=YE()):(ps=d,Cb="value"in ps?ps.value:ps.textContent,Nl=!0)),E=c0(u,I),0<E.length&&(I=new w_(I,t,null,r,d),f.push({event:I,listeners:E}),j?I.data=j:(j=QE(r),j!==null&&(I.data=j)))),(j=ED?CD(t,r):jD(t,r))&&(u=c0(u,"onBeforeInput"),0<u.length&&(d=new w_("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}uC(f,e)})}function md(t,e,r){return{instance:t,listener:e,currentTarget:r}}function c0(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ld(t,r),i!=null&&n.unshift(md(t,i,a)),i=ld(t,e),i!=null&&n.push(md(t,i,a))),t=t.return}return n}function ul(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function D_(t,e,r,n,a){for(var i=e._reactName,s=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=ld(r,i),c!=null&&s.unshift(md(r,c,o))):a||(c=ld(r,i),c!=null&&s.push(md(r,c,o)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var zD=/\r\n?/g,HD=/\u0000|\uFFFD/g;function P_(t){return(typeof t=="string"?t:""+t).replace(zD,`
`).replace(HD,"")}function Wf(t,e,r){if(e=P_(e),P_(t)!==e&&r)throw Error(le(425))}function u0(){}var xx=null,yx=null;function bx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wx=typeof setTimeout=="function"?setTimeout:void 0,WD=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,VD=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(GD)}:wx;function GD(t){setTimeout(function(){throw t})}function pg(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),dd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);dd(e)}function Ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function M_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Tc=Math.random().toString(36).slice(2),Wa="__reactFiber$"+Tc,gd="__reactProps$"+Tc,Di="__reactContainer$"+Tc,_x="__reactEvents$"+Tc,XD="__reactListeners$"+Tc,qD="__reactHandles$"+Tc;function No(t){var e=t[Wa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Di]||r[Wa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=M_(t);t!==null;){if(r=t[Wa])return r;t=M_(t)}return e}t=r,r=t.parentNode}return null}function Gd(t){return t=t[Wa]||t[Di],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Sp(t){return t[gd]||null}var kx=[],jl=-1;function Vs(t){return{current:t}}function Nt(t){0>jl||(t.current=kx[jl],kx[jl]=null,jl--)}function vt(t,e){jl++,kx[jl]=t.current,t.current=e}var Fs={},Br=Vs(Fs),vn=Vs(!1),$o=Fs;function ac(t,e){var r=t.type.contextTypes;if(!r)return Fs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function xn(t){return t=t.childContextTypes,t!=null}function d0(){Nt(vn),Nt(Br)}function L_(t,e,r){if(Br.current!==Fs)throw Error(le(168));vt(Br,e),vt(vn,r)}function fC(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(le(108,OO(t)||"Unknown",a));return Ft({},r,n)}function f0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fs,$o=Br.current,vt(Br,t),vt(vn,vn.current),!0}function B_(t,e,r){var n=t.stateNode;if(!n)throw Error(le(169));r?(t=fC(t,e,$o),n.__reactInternalMemoizedMergedChildContext=t,Nt(vn),Nt(Br),vt(Br,t)):Nt(vn),vt(vn,r)}var wi=null,Ep=!1,mg=!1;function hC(t){wi===null?wi=[t]:wi.push(t)}function YD(t){Ep=!0,hC(t)}function Gs(){if(!mg&&wi!==null){mg=!0;var t=0,e=ct;try{var r=wi;for(ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}wi=null,Ep=!1}catch(a){throw wi!==null&&(wi=wi.slice(t+1)),BE(kb,Gs),a}finally{ct=e,mg=!1}}return null}var Al=[],Tl=0,h0=null,p0=0,ta=[],ra=0,Uo=null,Ni=1,Si="";function lo(t,e){Al[Tl++]=p0,Al[Tl++]=h0,h0=t,p0=e}function pC(t,e,r){ta[ra++]=Ni,ta[ra++]=Si,ta[ra++]=Uo,Uo=t;var n=Ni;t=Si;var a=32-Aa(n)-1;n&=~(1<<a),r+=1;var i=32-Aa(e)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Ni=1<<32-Aa(e)+a|r<<a|n,Si=i+t}else Ni=1<<i|r<<a|n,Si=t}function Ob(t){t.return!==null&&(lo(t,1),pC(t,1,0))}function Db(t){for(;t===h0;)h0=Al[--Tl],Al[Tl]=null,p0=Al[--Tl],Al[Tl]=null;for(;t===Uo;)Uo=ta[--ra],ta[ra]=null,Si=ta[--ra],ta[ra]=null,Ni=ta[--ra],ta[ra]=null}var Tn=null,En=null,Tt=!1,ka=null;function mC(t,e){var r=aa(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function F_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,En=Ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Uo!==null?{id:Ni,overflow:Si}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=aa(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Tn=t,En=null,!0):!1;default:return!1}}function Nx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sx(t){if(Tt){var e=En;if(e){var r=e;if(!F_(t,e)){if(Nx(t))throw Error(le(418));e=Ss(r.nextSibling);var n=Tn;e&&F_(t,e)?mC(n,r):(t.flags=t.flags&-4097|2,Tt=!1,Tn=t)}}else{if(Nx(t))throw Error(le(418));t.flags=t.flags&-4097|2,Tt=!1,Tn=t}}}function $_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Vf(t){if(t!==Tn)return!1;if(!Tt)return $_(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bx(t.type,t.memoizedProps)),e&&(e=En)){if(Nx(t))throw gC(),Error(le(418));for(;e;)mC(t,e),e=Ss(e.nextSibling)}if($_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){En=Ss(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}En=null}}else En=Tn?Ss(t.stateNode.nextSibling):null;return!0}function gC(){for(var t=En;t;)t=Ss(t.nextSibling)}function ic(){En=Tn=null,Tt=!1}function Pb(t){ka===null?ka=[t]:ka.push(t)}var KD=Ui.ReactCurrentBatchConfig;function Kc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var n=r.stateNode}if(!n)throw Error(le(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,t))}return t}function Gf(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function U_(t){var e=t._init;return e(t._payload)}function vC(t){function e(x,v){if(t){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function r(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function n(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function a(x,v){return x=As(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,v,b,w){return v===null||v.tag!==6?(v=_g(b,x.mode,w),v.return=x,v):(v=a(v,b),v.return=x,v)}function c(x,v,b,w){var S=b.type;return S===kl?d(x,v,b.props.children,w,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rs&&U_(S)===v.type)?(w=a(v,b.props),w.ref=Kc(x,v,b),w.return=x,w):(w=zh(b.type,b.key,b.props,null,x.mode,w),w.ref=Kc(x,v,b),w.return=x,w)}function u(x,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=kg(b,x.mode,w),v.return=x,v):(v=a(v,b.children||[]),v.return=x,v)}function d(x,v,b,w,S){return v===null||v.tag!==7?(v=Po(b,x.mode,w,S),v.return=x,v):(v=a(v,b),v.return=x,v)}function f(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_g(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Rf:return b=zh(v.type,v.key,v.props,null,x.mode,b),b.ref=Kc(x,null,v),b.return=x,b;case _l:return v=kg(v,x.mode,b),v.return=x,v;case rs:var w=v._init;return f(x,w(v._payload),b)}if(wu(v)||Vc(v))return v=Po(v,x.mode,b,null),v.return=x,v;Gf(x,v)}return null}function h(x,v,b,w){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:o(x,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rf:return b.key===S?c(x,v,b,w):null;case _l:return b.key===S?u(x,v,b,w):null;case rs:return S=b._init,h(x,v,S(b._payload),w)}if(wu(b)||Vc(b))return S!==null?null:d(x,v,b,w,null);Gf(x,b)}return null}function p(x,v,b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,o(v,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rf:return x=x.get(w.key===null?b:w.key)||null,c(v,x,w,S);case _l:return x=x.get(w.key===null?b:w.key)||null,u(v,x,w,S);case rs:var E=w._init;return p(x,v,b,E(w._payload),S)}if(wu(w)||Vc(w))return x=x.get(b)||null,d(v,x,w,S,null);Gf(v,w)}return null}function m(x,v,b,w){for(var S=null,E=null,j=v,I=v=0,N=null;j!==null&&I<b.length;I++){j.index>I?(N=j,j=null):N=j.sibling;var T=h(x,j,b[I],w);if(T===null){j===null&&(j=N);break}t&&j&&T.alternate===null&&e(x,j),v=i(T,v,I),E===null?S=T:E.sibling=T,E=T,j=N}if(I===b.length)return r(x,j),Tt&&lo(x,I),S;if(j===null){for(;I<b.length;I++)j=f(x,b[I],w),j!==null&&(v=i(j,v,I),E===null?S=j:E.sibling=j,E=j);return Tt&&lo(x,I),S}for(j=n(x,j);I<b.length;I++)N=p(j,x,I,b[I],w),N!==null&&(t&&N.alternate!==null&&j.delete(N.key===null?I:N.key),v=i(N,v,I),E===null?S=N:E.sibling=N,E=N);return t&&j.forEach(function(F){return e(x,F)}),Tt&&lo(x,I),S}function g(x,v,b,w){var S=Vc(b);if(typeof S!="function")throw Error(le(150));if(b=S.call(b),b==null)throw Error(le(151));for(var E=S=null,j=v,I=v=0,N=null,T=b.next();j!==null&&!T.done;I++,T=b.next()){j.index>I?(N=j,j=null):N=j.sibling;var F=h(x,j,T.value,w);if(F===null){j===null&&(j=N);break}t&&j&&F.alternate===null&&e(x,j),v=i(F,v,I),E===null?S=F:E.sibling=F,E=F,j=N}if(T.done)return r(x,j),Tt&&lo(x,I),S;if(j===null){for(;!T.done;I++,T=b.next())T=f(x,T.value,w),T!==null&&(v=i(T,v,I),E===null?S=T:E.sibling=T,E=T);return Tt&&lo(x,I),S}for(j=n(x,j);!T.done;I++,T=b.next())T=p(j,x,I,T.value,w),T!==null&&(t&&T.alternate!==null&&j.delete(T.key===null?I:T.key),v=i(T,v,I),E===null?S=T:E.sibling=T,E=T);return t&&j.forEach(function(C){return e(x,C)}),Tt&&lo(x,I),S}function y(x,v,b,w){if(typeof b=="object"&&b!==null&&b.type===kl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Rf:e:{for(var S=b.key,E=v;E!==null;){if(E.key===S){if(S=b.type,S===kl){if(E.tag===7){r(x,E.sibling),v=a(E,b.props.children),v.return=x,x=v;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rs&&U_(S)===E.type){r(x,E.sibling),v=a(E,b.props),v.ref=Kc(x,E,b),v.return=x,x=v;break e}r(x,E);break}else e(x,E);E=E.sibling}b.type===kl?(v=Po(b.props.children,x.mode,w,b.key),v.return=x,x=v):(w=zh(b.type,b.key,b.props,null,x.mode,w),w.ref=Kc(x,v,b),w.return=x,x=w)}return s(x);case _l:e:{for(E=b.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(x,v.sibling),v=a(v,b.children||[]),v.return=x,x=v;break e}else{r(x,v);break}else e(x,v);v=v.sibling}v=kg(b,x.mode,w),v.return=x,x=v}return s(x);case rs:return E=b._init,y(x,v,E(b._payload),w)}if(wu(b))return m(x,v,b,w);if(Vc(b))return g(x,v,b,w);Gf(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(x,v.sibling),v=a(v,b),v.return=x,x=v):(r(x,v),v=_g(b,x.mode,w),v.return=x,x=v),s(x)):r(x,v)}return y}var sc=vC(!0),xC=vC(!1),m0=Vs(null),g0=null,Il=null,Rb=null;function Mb(){Rb=Il=g0=null}function Lb(t){var e=m0.current;Nt(m0),t._currentValue=e}function Ex(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Gl(t,e){g0=t,Rb=Il=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function ua(t){var e=t._currentValue;if(Rb!==t)if(t={context:t,memoizedValue:e,next:null},Il===null){if(g0===null)throw Error(le(308));Il=t,g0.dependencies={lanes:0,firstContext:t}}else Il=Il.next=t;return e}var So=null;function Bb(t){So===null?So=[t]:So.push(t)}function yC(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,Bb(e)):(r.next=a.next,a.next=r),e.interleaved=r,Pi(t,n)}function Pi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ns=!1;function Fb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ze&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Pi(t,r)}return a=n.interleaved,a===null?(e.next=e,Bb(n)):(e.next=a.next,a.next=e),n.interleaved=e,Pi(t,r)}function Mh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Nb(t,r)}}function z_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=e:i=i.next=e}else a=i=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function v0(t,e,r,n){var a=t.updateQueue;ns=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;s=0,d=u=c=null,o=i;do{var h=o.lane,p=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,g=o;switch(h=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=Ft({},f,h);break e;case 2:ns=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,s|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do s|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Ho|=s,t.lanes=s,t.memoizedState=f}}function H_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(le(191,a));a.call(n)}}}var Xd={},Qa=Vs(Xd),vd=Vs(Xd),xd=Vs(Xd);function Eo(t){if(t===Xd)throw Error(le(174));return t}function $b(t,e){switch(vt(xd,e),vt(vd,t),vt(Qa,Xd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sx(e,t)}Nt(Qa),vt(Qa,e)}function oc(){Nt(Qa),Nt(vd),Nt(xd)}function wC(t){Eo(xd.current);var e=Eo(Qa.current),r=sx(e,t.type);e!==r&&(vt(vd,t),vt(Qa,r))}function Ub(t){vd.current===t&&(Nt(Qa),Nt(vd))}var Pt=Vs(0);function x0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gg=[];function zb(){for(var t=0;t<gg.length;t++)gg[t]._workInProgressVersionPrimary=null;gg.length=0}var Lh=Ui.ReactCurrentDispatcher,vg=Ui.ReactCurrentBatchConfig,zo=0,Mt=null,er=null,dr=null,y0=!1,Bu=!1,yd=0,ZD=0;function Or(){throw Error(le(321))}function Hb(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Da(t[r],e[r]))return!1;return!0}function Wb(t,e,r,n,a,i){if(zo=i,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lh.current=t===null||t.memoizedState===null?tP:rP,t=r(n,a),Bu){i=0;do{if(Bu=!1,yd=0,25<=i)throw Error(le(301));i+=1,dr=er=null,e.updateQueue=null,Lh.current=nP,t=r(n,a)}while(Bu)}if(Lh.current=b0,e=er!==null&&er.next!==null,zo=0,dr=er=Mt=null,y0=!1,e)throw Error(le(300));return t}function Vb(){var t=yd!==0;return yd=0,t}function Ha(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Mt.memoizedState=dr=t:dr=dr.next=t,dr}function da(){if(er===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=er.next;var e=dr===null?Mt.memoizedState:dr.next;if(e!==null)dr=e,er=t;else{if(t===null)throw Error(le(310));er=t,t={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},dr===null?Mt.memoizedState=dr=t:dr=dr.next=t}return dr}function bd(t,e){return typeof e=="function"?e(t):e}function xg(t){var e=da(),r=e.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=t;var n=er,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=s=null,c=null,u=i;do{var d=u.lane;if((zo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=n):c=c.next=f,Mt.lanes|=d,Ho|=d}u=u.next}while(u!==null&&u!==i);c===null?s=n:c.next=o,Da(n,e.memoizedState)||(gn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,Mt.lanes|=i,Ho|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yg(t){var e=da(),r=e.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=e.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=t(i,s.action),s=s.next;while(s!==a);Da(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function _C(){}function kC(t,e){var r=Mt,n=da(),a=e(),i=!Da(n.memoizedState,a);if(i&&(n.memoizedState=a,gn=!0),n=n.queue,Gb(EC.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||dr!==null&&dr.memoizedState.tag&1){if(r.flags|=2048,wd(9,SC.bind(null,r,n,a,e),void 0,null),pr===null)throw Error(le(349));zo&30||NC(r,e,a)}return a}function NC(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function SC(t,e,r,n){e.value=r,e.getSnapshot=n,CC(e)&&jC(t)}function EC(t,e,r){return r(function(){CC(e)&&jC(t)})}function CC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Da(t,r)}catch{return!0}}function jC(t){var e=Pi(t,1);e!==null&&Ta(e,t,1,-1)}function W_(t){var e=Ha();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:t},e.queue=t,t=t.dispatch=eP.bind(null,Mt,t),[e.memoizedState,t]}function wd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function AC(){return da().memoizedState}function Bh(t,e,r,n){var a=Ha();Mt.flags|=t,a.memoizedState=wd(1|e,r,void 0,n===void 0?null:n)}function Cp(t,e,r,n){var a=da();n=n===void 0?null:n;var i=void 0;if(er!==null){var s=er.memoizedState;if(i=s.destroy,n!==null&&Hb(n,s.deps)){a.memoizedState=wd(e,r,i,n);return}}Mt.flags|=t,a.memoizedState=wd(1|e,r,i,n)}function V_(t,e){return Bh(8390656,8,t,e)}function Gb(t,e){return Cp(2048,8,t,e)}function TC(t,e){return Cp(4,2,t,e)}function IC(t,e){return Cp(4,4,t,e)}function OC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DC(t,e,r){return r=r!=null?r.concat([t]):null,Cp(4,4,OC.bind(null,e,t),r)}function Xb(){}function PC(t,e){var r=da();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Hb(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function RC(t,e){var r=da();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Hb(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function MC(t,e,r){return zo&21?(Da(r,e)||(r=UE(),Mt.lanes|=r,Ho|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=r)}function QD(t,e){var r=ct;ct=r!==0&&4>r?r:4,t(!0);var n=vg.transition;vg.transition={};try{t(!1),e()}finally{ct=r,vg.transition=n}}function LC(){return da().memoizedState}function JD(t,e,r){var n=js(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},BC(t))FC(e,r);else if(r=yC(t,e,r,n),r!==null){var a=Jr();Ta(r,t,n,a),$C(r,e,n)}}function eP(t,e,r){var n=js(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(BC(t))FC(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,Da(o,s)){var c=e.interleaved;c===null?(a.next=a,Bb(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=yC(t,e,a,n),r!==null&&(a=Jr(),Ta(r,t,n,a),$C(r,e,n))}}function BC(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function FC(t,e){Bu=y0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function $C(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Nb(t,r)}}var b0={readContext:ua,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},tP={readContext:ua,useCallback:function(t,e){return Ha().memoizedState=[t,e===void 0?null:e],t},useContext:ua,useEffect:V_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Bh(4194308,4,OC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var r=Ha();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ha();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=JD.bind(null,Mt,t),[n.memoizedState,t]},useRef:function(t){var e=Ha();return t={current:t},e.memoizedState=t},useState:W_,useDebugValue:Xb,useDeferredValue:function(t){return Ha().memoizedState=t},useTransition:function(){var t=W_(!1),e=t[0];return t=QD.bind(null,t[1]),Ha().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Mt,a=Ha();if(Tt){if(r===void 0)throw Error(le(407));r=r()}else{if(r=e(),pr===null)throw Error(le(349));zo&30||NC(n,e,r)}a.memoizedState=r;var i={value:r,getSnapshot:e};return a.queue=i,V_(EC.bind(null,n,i,t),[t]),n.flags|=2048,wd(9,SC.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ha(),e=pr.identifierPrefix;if(Tt){var r=Si,n=Ni;r=(n&~(1<<32-Aa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=yd++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ZD++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rP={readContext:ua,useCallback:PC,useContext:ua,useEffect:Gb,useImperativeHandle:DC,useInsertionEffect:TC,useLayoutEffect:IC,useMemo:RC,useReducer:xg,useRef:AC,useState:function(){return xg(bd)},useDebugValue:Xb,useDeferredValue:function(t){var e=da();return MC(e,er.memoizedState,t)},useTransition:function(){var t=xg(bd)[0],e=da().memoizedState;return[t,e]},useMutableSource:_C,useSyncExternalStore:kC,useId:LC,unstable_isNewReconciler:!1},nP={readContext:ua,useCallback:PC,useContext:ua,useEffect:Gb,useImperativeHandle:DC,useInsertionEffect:TC,useLayoutEffect:IC,useMemo:RC,useReducer:yg,useRef:AC,useState:function(){return yg(bd)},useDebugValue:Xb,useDeferredValue:function(t){var e=da();return er===null?e.memoizedState=t:MC(e,er.memoizedState,t)},useTransition:function(){var t=yg(bd)[0],e=da().memoizedState;return[t,e]},useMutableSource:_C,useSyncExternalStore:kC,useId:LC,unstable_isNewReconciler:!1};function ba(t,e){if(t&&t.defaultProps){e=Ft({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Cx(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ft({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var jp={isMounted:function(t){return(t=t._reactInternals)?el(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Jr(),a=js(t),i=Ci(n,a);i.payload=e,r!=null&&(i.callback=r),e=Es(t,i,a),e!==null&&(Ta(e,t,a,n),Mh(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Jr(),a=js(t),i=Ci(n,a);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Es(t,i,a),e!==null&&(Ta(e,t,a,n),Mh(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Jr(),n=js(t),a=Ci(r,n);a.tag=2,e!=null&&(a.callback=e),e=Es(t,a,n),e!==null&&(Ta(e,t,n,r),Mh(e,t,n))}};function G_(t,e,r,n,a,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!hd(r,n)||!hd(a,i):!0}function UC(t,e,r){var n=!1,a=Fs,i=e.contextType;return typeof i=="object"&&i!==null?i=ua(i):(a=xn(e)?$o:Br.current,n=e.contextTypes,i=(n=n!=null)?ac(t,a):Fs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function X_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&jp.enqueueReplaceState(e,e.state,null)}function jx(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Fb(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=ua(i):(i=xn(e)?$o:Br.current,a.context=ac(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Cx(t,e,i,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&jp.enqueueReplaceState(a,a.state,null),v0(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function lc(t,e){try{var r="",n=e;do r+=IO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function bg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ax(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var aP=typeof WeakMap=="function"?WeakMap:Map;function zC(t,e,r){r=Ci(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){_0||(_0=!0,Fx=n),Ax(t,e)},r}function HC(t,e,r){r=Ci(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){Ax(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ax(t,e),typeof n!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function q_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new aP;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=xP.bind(null,t,e,r),e.then(t,t))}function Y_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function K_(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ci(-1,1),e.tag=2,Es(r,e,1))),r.lanes|=1),t)}var iP=Ui.ReactCurrentOwner,gn=!1;function Kr(t,e,r,n){e.child=t===null?xC(e,null,r,n):sc(e,t.child,r,n)}function Z_(t,e,r,n,a){r=r.render;var i=e.ref;return Gl(e,a),n=Wb(t,e,r,n,i,a),r=Vb(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ri(t,e,a)):(Tt&&r&&Ob(e),e.flags|=1,Kr(t,e,n,a),e.child)}function Q_(t,e,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!tw(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,WC(t,e,i,n,a)):(t=zh(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:hd,r(s,n)&&t.ref===e.ref)return Ri(t,e,a)}return e.flags|=1,t=As(i,n),t.ref=e.ref,t.return=e,e.child=t}function WC(t,e,r,n,a){if(t!==null){var i=t.memoizedProps;if(hd(i,n)&&t.ref===e.ref)if(gn=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,Ri(t,e,a)}return Tx(t,e,r,n,a)}function VC(t,e,r){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Dl,Sn),Sn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vt(Dl,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,vt(Dl,Sn),Sn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,vt(Dl,Sn),Sn|=n;return Kr(t,e,a,r),e.child}function GC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Tx(t,e,r,n,a){var i=xn(r)?$o:Br.current;return i=ac(e,i),Gl(e,a),r=Wb(t,e,r,n,i,a),n=Vb(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ri(t,e,a)):(Tt&&n&&Ob(e),e.flags|=1,Kr(t,e,r,a),e.child)}function J_(t,e,r,n,a){if(xn(r)){var i=!0;f0(e)}else i=!1;if(Gl(e,a),e.stateNode===null)Fh(t,e),UC(e,r,n),jx(e,r,n,a),n=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=ua(u):(u=xn(r)?$o:Br.current,u=ac(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||c!==u)&&X_(e,s,n,u),ns=!1;var h=e.memoizedState;s.state=h,v0(e,n,s,a),c=e.memoizedState,o!==n||h!==c||vn.current||ns?(typeof d=="function"&&(Cx(e,r,d,n),c=e.memoizedState),(o=ns||G_(e,r,o,n,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),s.props=n,s.state=c,s.context=u,n=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,bC(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ba(e.type,o),s.props=u,f=e.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=ua(c):(c=xn(r)?$o:Br.current,c=ac(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==c)&&X_(e,s,n,c),ns=!1,h=e.memoizedState,s.state=h,v0(e,n,s,a);var m=e.memoizedState;o!==f||h!==m||vn.current||ns?(typeof p=="function"&&(Cx(e,r,p,n),m=e.memoizedState),(u=ns||G_(e,r,u,n,h,m,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),s.props=n,s.state=m,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Ix(t,e,r,n,i,a)}function Ix(t,e,r,n,a,i){GC(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return a&&B_(e,r,!1),Ri(t,e,i);n=e.stateNode,iP.current=e;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=sc(e,t.child,null,i),e.child=sc(e,null,o,i)):Kr(t,e,o,i),e.memoizedState=n.state,a&&B_(e,r,!0),e.child}function XC(t){var e=t.stateNode;e.pendingContext?L_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&L_(t,e.context,!1),$b(t,e.containerInfo)}function ek(t,e,r,n,a){return ic(),Pb(a),e.flags|=256,Kr(t,e,r,n),e.child}var Ox={dehydrated:null,treeContext:null,retryLane:0};function Dx(t){return{baseLanes:t,cachePool:null,transitions:null}}function qC(t,e,r){var n=e.pendingProps,a=Pt.current,i=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),vt(Pt,a&1),t===null)return Sx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Ip(s,n,0,null),t=Po(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Dx(r),e.memoizedState=Ox,t):qb(e,s));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return sP(t,e,s,n,o,a,r);if(i){i=n.fallback,s=e.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=As(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=As(o,i):(i=Po(i,s,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=t.child.memoizedState,s=s===null?Dx(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~r,e.memoizedState=Ox,n}return i=t.child,t=i.sibling,n=As(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function qb(t,e){return e=Ip({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xf(t,e,r,n){return n!==null&&Pb(n),sc(e,t.child,null,r),t=qb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sP(t,e,r,n,a,i,s){if(r)return e.flags&256?(e.flags&=-257,n=bg(Error(le(422))),Xf(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=Ip({mode:"visible",children:n.children},a,0,null),i=Po(i,a,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&sc(e,t.child,null,s),e.child.memoizedState=Dx(s),e.memoizedState=Ox,i);if(!(e.mode&1))return Xf(t,e,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(le(419)),n=bg(i,n,void 0),Xf(t,e,s,n)}if(o=(s&t.childLanes)!==0,gn||o){if(n=pr,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Pi(t,a),Ta(n,t,a,-1))}return ew(),n=bg(Error(le(421))),Xf(t,e,s,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=yP.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,En=Ss(a.nextSibling),Tn=e,Tt=!0,ka=null,t!==null&&(ta[ra++]=Ni,ta[ra++]=Si,ta[ra++]=Uo,Ni=t.id,Si=t.overflow,Uo=e),e=qb(e,n.children),e.flags|=4096,e)}function tk(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ex(t.return,e,r)}function wg(t,e,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function YC(t,e,r){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Kr(t,e,n.children,r),n=Pt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tk(t,r,e);else if(t.tag===19)tk(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(vt(Pt,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&x0(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),wg(e,!1,a,r,i);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&x0(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}wg(e,!0,r,null,i);break;case"together":wg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ri(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,r=As(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=As(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function oP(t,e,r){switch(e.tag){case 3:XC(e),ic();break;case 5:wC(e);break;case 1:xn(e.type)&&f0(e);break;case 4:$b(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;vt(m0,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(vt(Pt,Pt.current&1),e.flags|=128,null):r&e.child.childLanes?qC(t,e,r):(vt(Pt,Pt.current&1),t=Ri(t,e,r),t!==null?t.sibling:null);vt(Pt,Pt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return YC(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),vt(Pt,Pt.current),n)break;return null;case 22:case 23:return e.lanes=0,VC(t,e,r)}return Ri(t,e,r)}var KC,Px,ZC,QC;KC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Px=function(){};ZC=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Eo(Qa.current);var i=null;switch(r){case"input":a=rx(t,a),n=rx(t,n),i=[];break;case"select":a=Ft({},a,{value:void 0}),n=Ft({},n,{value:void 0}),i=[];break;case"textarea":a=ix(t,a),n=ix(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=u0)}ox(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(sd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(sd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&bt("scroll",t),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};QC=function(t,e,r,n){r!==n&&(e.flags|=4)};function Zc(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Dr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function lP(t,e,r){var n=e.pendingProps;switch(Db(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return xn(e.type)&&d0(),Dr(e),null;case 3:return n=e.stateNode,oc(),Nt(vn),Nt(Br),zb(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Vf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ka!==null&&(zx(ka),ka=null))),Px(t,e),Dr(e),null;case 5:Ub(e);var a=Eo(xd.current);if(r=e.type,t!==null&&e.stateNode!=null)ZC(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(le(166));return Dr(e),null}if(t=Eo(Qa.current),Vf(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Wa]=e,n[gd]=i,t=(e.mode&1)!==0,r){case"dialog":bt("cancel",n),bt("close",n);break;case"iframe":case"object":case"embed":bt("load",n);break;case"video":case"audio":for(a=0;a<ku.length;a++)bt(ku[a],n);break;case"source":bt("error",n);break;case"img":case"image":case"link":bt("error",n),bt("load",n);break;case"details":bt("toggle",n);break;case"input":u_(n,i),bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},bt("invalid",n);break;case"textarea":f_(n,i),bt("invalid",n)}ox(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Wf(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Wf(n.textContent,o,t),a=["children",""+o]):sd.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&bt("scroll",n)}switch(r){case"input":Mf(n),d_(n,i,!0);break;case"textarea":Mf(n),h_(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=u0)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EE(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Wa]=e,t[gd]=n,KC(t,e,!1,!1),e.stateNode=t;e:{switch(s=lx(r,n),r){case"dialog":bt("cancel",t),bt("close",t),a=n;break;case"iframe":case"object":case"embed":bt("load",t),a=n;break;case"video":case"audio":for(a=0;a<ku.length;a++)bt(ku[a],t);a=n;break;case"source":bt("error",t),a=n;break;case"img":case"image":case"link":bt("error",t),bt("load",t),a=n;break;case"details":bt("toggle",t),a=n;break;case"input":u_(t,n),a=rx(t,n),bt("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Ft({},n,{value:void 0}),bt("invalid",t);break;case"textarea":f_(t,n),a=ix(t,n),bt("invalid",t);break;default:a=n}ox(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?AE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&CE(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&od(t,c):typeof c=="number"&&od(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&bt("scroll",t):c!=null&&xb(t,i,c,s))}switch(r){case"input":Mf(t),d_(t,n,!1);break;case"textarea":Mf(t),h_(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Bs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?zl(t,!!n.multiple,i,!1):n.defaultValue!=null&&zl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=u0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(t&&e.stateNode!=null)QC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(le(166));if(r=Eo(xd.current),Eo(Qa.current),Vf(e)){if(n=e.stateNode,r=e.memoizedProps,n[Wa]=e,(i=n.nodeValue!==r)&&(t=Tn,t!==null))switch(t.tag){case 3:Wf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wf(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wa]=e,e.stateNode=n}return Dr(e),null;case 13:if(Nt(Pt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&En!==null&&e.mode&1&&!(e.flags&128))gC(),ic(),e.flags|=98560,i=!1;else if(i=Vf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Wa]=e}else ic(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),i=!1}else ka!==null&&(zx(ka),ka=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?ar===0&&(ar=3):ew())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return oc(),Px(t,e),t===null&&pd(e.stateNode.containerInfo),Dr(e),null;case 10:return Lb(e.type._context),Dr(e),null;case 17:return xn(e.type)&&d0(),Dr(e),null;case 19:if(Nt(Pt),i=e.memoizedState,i===null)return Dr(e),null;if(n=(e.flags&128)!==0,s=i.rendering,s===null)if(n)Zc(i,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=x0(t),s!==null){for(e.flags|=128,Zc(i,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return vt(Pt,Pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ht()>cc&&(e.flags|=128,n=!0,Zc(i,!1),e.lanes=4194304)}else{if(!n)if(t=x0(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Tt)return Dr(e),null}else 2*Ht()-i.renderingStartTime>cc&&r!==1073741824&&(e.flags|=128,n=!0,Zc(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(r=i.last,r!==null?r.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ht(),e.sibling=null,r=Pt.current,vt(Pt,n?r&1|2:r&1),e):(Dr(e),null);case 22:case 23:return Jb(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Sn&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function cP(t,e){switch(Db(e),e.tag){case 1:return xn(e.type)&&d0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oc(),Nt(vn),Nt(Br),zb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ub(e),null;case 13:if(Nt(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));ic()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(Pt),null;case 4:return oc(),null;case 10:return Lb(e.type._context),null;case 22:case 23:return Jb(),null;case 24:return null;default:return null}}var qf=!1,Mr=!1,uP=typeof WeakSet=="function"?WeakSet:Set,be=null;function Ol(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ut(t,e,n)}else r.current=null}function Rx(t,e,r){try{r()}catch(n){Ut(t,e,n)}}var rk=!1;function dP(t,e){if(xx=o0,t=nC(),Ib(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(o=s+a),f!==i||n!==0&&f.nodeType!==3||(c=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===r&&++u===a&&(o=s),h===i&&++d===n&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(yx={focusedElem:t,selectionRange:r},o0=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:ba(e.type,g),y);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(w){Ut(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return m=rk,rk=!1,m}function Fu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Rx(e,r,i)}a=a.next}while(a!==n)}}function Ap(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Mx(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function JC(t){var e=t.alternate;e!==null&&(t.alternate=null,JC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wa],delete e[gd],delete e[_x],delete e[XD],delete e[qD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ej(t){return t.tag===5||t.tag===3||t.tag===4}function nk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ej(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lx(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=u0));else if(n!==4&&(t=t.child,t!==null))for(Lx(t,e,r),t=t.sibling;t!==null;)Lx(t,e,r),t=t.sibling}function Bx(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Bx(t,e,r),t=t.sibling;t!==null;)Bx(t,e,r),t=t.sibling}var Nr=null,wa=!1;function qi(t,e,r){for(r=r.child;r!==null;)tj(t,e,r),r=r.sibling}function tj(t,e,r){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(wp,r)}catch{}switch(r.tag){case 5:Mr||Ol(r,e);case 6:var n=Nr,a=wa;Nr=null,qi(t,e,r),Nr=n,wa=a,Nr!==null&&(wa?(t=Nr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Nr.removeChild(r.stateNode));break;case 18:Nr!==null&&(wa?(t=Nr,r=r.stateNode,t.nodeType===8?pg(t.parentNode,r):t.nodeType===1&&pg(t,r),dd(t)):pg(Nr,r.stateNode));break;case 4:n=Nr,a=wa,Nr=r.stateNode.containerInfo,wa=!0,qi(t,e,r),Nr=n,wa=a;break;case 0:case 11:case 14:case 15:if(!Mr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Rx(r,e,s),a=a.next}while(a!==n)}qi(t,e,r);break;case 1:if(!Mr&&(Ol(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ut(r,e,o)}qi(t,e,r);break;case 21:qi(t,e,r);break;case 22:r.mode&1?(Mr=(n=Mr)||r.memoizedState!==null,qi(t,e,r),Mr=n):qi(t,e,r);break;default:qi(t,e,r)}}function ak(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new uP),e.forEach(function(n){var a=bP.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ma(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:Nr=o.stateNode,wa=!1;break e;case 3:Nr=o.stateNode.containerInfo,wa=!0;break e;case 4:Nr=o.stateNode.containerInfo,wa=!0;break e}o=o.return}if(Nr===null)throw Error(le(160));tj(i,s,a),Nr=null,wa=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ut(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rj(e,t),e=e.sibling}function rj(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ma(e,t),Ua(t),n&4){try{Fu(3,t,t.return),Ap(3,t)}catch(g){Ut(t,t.return,g)}try{Fu(5,t,t.return)}catch(g){Ut(t,t.return,g)}}break;case 1:ma(e,t),Ua(t),n&512&&r!==null&&Ol(r,r.return);break;case 5:if(ma(e,t),Ua(t),n&512&&r!==null&&Ol(r,r.return),t.flags&32){var a=t.stateNode;try{od(a,"")}catch(g){Ut(t,t.return,g)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,s=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&NE(a,i),lx(o,s);var u=lx(o,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?AE(a,f):d==="dangerouslySetInnerHTML"?CE(a,f):d==="children"?od(a,f):xb(a,d,f,u)}switch(o){case"input":nx(a,i);break;case"textarea":SE(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?zl(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?zl(a,!!i.multiple,i.defaultValue,!0):zl(a,!!i.multiple,i.multiple?[]:"",!1))}a[gd]=i}catch(g){Ut(t,t.return,g)}}break;case 6:if(ma(e,t),Ua(t),n&4){if(t.stateNode===null)throw Error(le(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(g){Ut(t,t.return,g)}}break;case 3:if(ma(e,t),Ua(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{dd(e.containerInfo)}catch(g){Ut(t,t.return,g)}break;case 4:ma(e,t),Ua(t);break;case 13:ma(e,t),Ua(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Zb=Ht())),n&4&&ak(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Mr=(u=Mr)||d,ma(e,t),Mr=u):ma(e,t),Ua(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(f=be=d;be!==null;){switch(h=be,p=h.child,h.tag){case 0:case 11:case 14:case 15:Fu(4,h,h.return);break;case 1:Ol(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Ut(n,r,g)}}break;case 5:Ol(h,h.return);break;case 22:if(h.memoizedState!==null){sk(f);continue}}p!==null?(p.return=h,be=p):sk(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=jE("display",s))}catch(g){Ut(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ut(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ma(e,t),Ua(t),n&4&&ak(t);break;case 21:break;default:ma(e,t),Ua(t)}}function Ua(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ej(r)){var n=r;break e}r=r.return}throw Error(le(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(od(a,""),n.flags&=-33);var i=nk(t);Bx(t,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,o=nk(t);Lx(t,o,s);break;default:throw Error(le(161))}}catch(c){Ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fP(t,e,r){be=t,nj(t)}function nj(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var a=be,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||qf;if(!s){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Mr;o=qf;var u=Mr;if(qf=s,(Mr=c)&&!u)for(be=a;be!==null;)s=be,c=s.child,s.tag===22&&s.memoizedState!==null?ok(a):c!==null?(c.return=s,be=c):ok(a);for(;i!==null;)be=i,nj(i),i=i.sibling;be=a,qf=o,Mr=u}ik(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,be=i):ik(t)}}function ik(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mr||Ap(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Mr)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:ba(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&H_(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}H_(e,s,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&dd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Mr||e.flags&512&&Mx(e)}catch(h){Ut(e,e.return,h)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function sk(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function ok(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ap(4,e)}catch(c){Ut(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){Ut(e,a,c)}}var i=e.return;try{Mx(e)}catch(c){Ut(e,i,c)}break;case 5:var s=e.return;try{Mx(e)}catch(c){Ut(e,s,c)}}}catch(c){Ut(e,e.return,c)}if(e===t){be=null;break}var o=e.sibling;if(o!==null){o.return=e.return,be=o;break}be=e.return}}var hP=Math.ceil,w0=Ui.ReactCurrentDispatcher,Yb=Ui.ReactCurrentOwner,oa=Ui.ReactCurrentBatchConfig,Ze=0,pr=null,qt=null,jr=0,Sn=0,Dl=Vs(0),ar=0,_d=null,Ho=0,Tp=0,Kb=0,$u=null,hn=null,Zb=0,cc=1/0,yi=null,_0=!1,Fx=null,Cs=null,Yf=!1,ms=null,k0=0,Uu=0,$x=null,$h=-1,Uh=0;function Jr(){return Ze&6?Ht():$h!==-1?$h:$h=Ht()}function js(t){return t.mode&1?Ze&2&&jr!==0?jr&-jr:KD.transition!==null?(Uh===0&&(Uh=UE()),Uh):(t=ct,t!==0||(t=window.event,t=t===void 0?16:qE(t.type)),t):1}function Ta(t,e,r,n){if(50<Uu)throw Uu=0,$x=null,Error(le(185));Wd(t,r,n),(!(Ze&2)||t!==pr)&&(t===pr&&(!(Ze&2)&&(Tp|=r),ar===4&&cs(t,jr)),yn(t,n),r===1&&Ze===0&&!(e.mode&1)&&(cc=Ht()+500,Ep&&Gs()))}function yn(t,e){var r=t.callbackNode;KO(t,e);var n=s0(t,t===pr?jr:0);if(n===0)r!==null&&g_(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&g_(r),e===1)t.tag===0?YD(lk.bind(null,t)):hC(lk.bind(null,t)),VD(function(){!(Ze&6)&&Gs()}),r=null;else{switch(zE(n)){case 1:r=kb;break;case 4:r=FE;break;case 16:r=i0;break;case 536870912:r=$E;break;default:r=i0}r=dj(r,aj.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function aj(t,e){if($h=-1,Uh=0,Ze&6)throw Error(le(327));var r=t.callbackNode;if(Xl()&&t.callbackNode!==r)return null;var n=s0(t,t===pr?jr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=N0(t,n);else{e=n;var a=Ze;Ze|=2;var i=sj();(pr!==t||jr!==e)&&(yi=null,cc=Ht()+500,Do(t,e));do try{gP();break}catch(o){ij(t,o)}while(!0);Mb(),w0.current=i,Ze=a,qt!==null?e=0:(pr=null,jr=0,e=ar)}if(e!==0){if(e===2&&(a=hx(t),a!==0&&(n=a,e=Ux(t,a))),e===1)throw r=_d,Do(t,0),cs(t,n),yn(t,Ht()),r;if(e===6)cs(t,n);else{if(a=t.current.alternate,!(n&30)&&!pP(a)&&(e=N0(t,n),e===2&&(i=hx(t),i!==0&&(n=i,e=Ux(t,i))),e===1))throw r=_d,Do(t,0),cs(t,n),yn(t,Ht()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(le(345));case 2:co(t,hn,yi);break;case 3:if(cs(t,n),(n&130023424)===n&&(e=Zb+500-Ht(),10<e)){if(s0(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Jr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=wx(co.bind(null,t,hn,yi),e);break}co(t,hn,yi);break;case 4:if(cs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var s=31-Aa(n);i=1<<s,s=e[s],s>a&&(a=s),n&=~i}if(n=a,n=Ht()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hP(n/1960))-n,10<n){t.timeoutHandle=wx(co.bind(null,t,hn,yi),n);break}co(t,hn,yi);break;case 5:co(t,hn,yi);break;default:throw Error(le(329))}}}return yn(t,Ht()),t.callbackNode===r?aj.bind(null,t):null}function Ux(t,e){var r=$u;return t.current.memoizedState.isDehydrated&&(Do(t,e).flags|=256),t=N0(t,e),t!==2&&(e=hn,hn=r,e!==null&&zx(e)),t}function zx(t){hn===null?hn=t:hn.push.apply(hn,t)}function pP(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Da(i(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cs(t,e){for(e&=~Kb,e&=~Tp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Aa(e),n=1<<r;t[r]=-1,e&=~n}}function lk(t){if(Ze&6)throw Error(le(327));Xl();var e=s0(t,0);if(!(e&1))return yn(t,Ht()),null;var r=N0(t,e);if(t.tag!==0&&r===2){var n=hx(t);n!==0&&(e=n,r=Ux(t,n))}if(r===1)throw r=_d,Do(t,0),cs(t,e),yn(t,Ht()),r;if(r===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,co(t,hn,yi),yn(t,Ht()),null}function Qb(t,e){var r=Ze;Ze|=1;try{return t(e)}finally{Ze=r,Ze===0&&(cc=Ht()+500,Ep&&Gs())}}function Wo(t){ms!==null&&ms.tag===0&&!(Ze&6)&&Xl();var e=Ze;Ze|=1;var r=oa.transition,n=ct;try{if(oa.transition=null,ct=1,t)return t()}finally{ct=n,oa.transition=r,Ze=e,!(Ze&6)&&Gs()}}function Jb(){Sn=Dl.current,Nt(Dl)}function Do(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,WD(r)),qt!==null)for(r=qt.return;r!==null;){var n=r;switch(Db(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&d0();break;case 3:oc(),Nt(vn),Nt(Br),zb();break;case 5:Ub(n);break;case 4:oc();break;case 13:Nt(Pt);break;case 19:Nt(Pt);break;case 10:Lb(n.type._context);break;case 22:case 23:Jb()}r=r.return}if(pr=t,qt=t=As(t.current,null),jr=Sn=e,ar=0,_d=null,Kb=Tp=Ho=0,hn=$u=null,So!==null){for(e=0;e<So.length;e++)if(r=So[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}So=null}return t}function ij(t,e){do{var r=qt;try{if(Mb(),Lh.current=b0,y0){for(var n=Mt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}y0=!1}if(zo=0,dr=er=Mt=null,Bu=!1,yd=0,Yb.current=null,r===null||r.return===null){ar=1,_d=e,qt=null;break}e:{var i=t,s=r.return,o=r,c=e;if(e=jr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Y_(s);if(p!==null){p.flags&=-257,K_(p,s,o,i,e),p.mode&1&&q_(i,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break e}else{if(!(e&1)){q_(i,u,e),ew();break e}c=Error(le(426))}}else if(Tt&&o.mode&1){var y=Y_(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),K_(y,s,o,i,e),Pb(lc(c,o));break e}}i=c=lc(c,o),ar!==4&&(ar=2),$u===null?$u=[i]:$u.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=zC(i,c,e);z_(i,x);break e;case 1:o=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Cs===null||!Cs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=HC(i,o,e);z_(i,w);break e}}i=i.return}while(i!==null)}lj(r)}catch(S){e=S,qt===r&&r!==null&&(qt=r=r.return);continue}break}while(!0)}function sj(){var t=w0.current;return w0.current=b0,t===null?b0:t}function ew(){(ar===0||ar===3||ar===2)&&(ar=4),pr===null||!(Ho&268435455)&&!(Tp&268435455)||cs(pr,jr)}function N0(t,e){var r=Ze;Ze|=2;var n=sj();(pr!==t||jr!==e)&&(yi=null,Do(t,e));do try{mP();break}catch(a){ij(t,a)}while(!0);if(Mb(),Ze=r,w0.current=n,qt!==null)throw Error(le(261));return pr=null,jr=0,ar}function mP(){for(;qt!==null;)oj(qt)}function gP(){for(;qt!==null&&!UO();)oj(qt)}function oj(t){var e=uj(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?lj(t):qt=e,Yb.current=null}function lj(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=cP(r,e),r!==null){r.flags&=32767,qt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,qt=null;return}}else if(r=lP(r,e,Sn),r!==null){qt=r;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);ar===0&&(ar=5)}function co(t,e,r){var n=ct,a=oa.transition;try{oa.transition=null,ct=1,vP(t,e,r,n)}finally{oa.transition=a,ct=n}return null}function vP(t,e,r,n){do Xl();while(ms!==null);if(Ze&6)throw Error(le(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(ZO(t,i),t===pr&&(qt=pr=null,jr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yf||(Yf=!0,dj(i0,function(){return Xl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=oa.transition,oa.transition=null;var s=ct;ct=1;var o=Ze;Ze|=4,Yb.current=null,dP(t,r),rj(r,t),LD(yx),o0=!!xx,yx=xx=null,t.current=r,fP(r),zO(),Ze=o,ct=s,oa.transition=i}else t.current=r;if(Yf&&(Yf=!1,ms=t,k0=a),i=t.pendingLanes,i===0&&(Cs=null),VO(r.stateNode),yn(t,Ht()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(_0)throw _0=!1,t=Fx,Fx=null,t;return k0&1&&t.tag!==0&&Xl(),i=t.pendingLanes,i&1?t===$x?Uu++:(Uu=0,$x=t):Uu=0,Gs(),null}function Xl(){if(ms!==null){var t=zE(k0),e=oa.transition,r=ct;try{if(oa.transition=null,ct=16>t?16:t,ms===null)var n=!1;else{if(t=ms,ms=null,k0=0,Ze&6)throw Error(le(331));var a=Ze;for(Ze|=4,be=t.current;be!==null;){var i=be,s=i.child;if(be.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(be=u;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:Fu(8,d,i)}var f=d.child;if(f!==null)f.return=d,be=f;else for(;be!==null;){d=be;var h=d.sibling,p=d.return;if(JC(d),d===u){be=null;break}if(h!==null){h.return=p,be=h;break}be=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}be=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,be=s;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fu(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,be=x;break e}be=i.return}}var v=t.current;for(be=v;be!==null;){s=be;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,be=b;else e:for(s=v;be!==null;){if(o=be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ap(9,o)}}catch(S){Ut(o,o.return,S)}if(o===s){be=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,be=w;break e}be=o.return}}if(Ze=a,Gs(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(wp,t)}catch{}n=!0}return n}finally{ct=r,oa.transition=e}}return!1}function ck(t,e,r){e=lc(r,e),e=zC(t,e,1),t=Es(t,e,1),e=Jr(),t!==null&&(Wd(t,1,e),yn(t,e))}function Ut(t,e,r){if(t.tag===3)ck(t,t,r);else for(;e!==null;){if(e.tag===3){ck(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cs===null||!Cs.has(n))){t=lc(r,t),t=HC(e,t,1),e=Es(e,t,1),t=Jr(),e!==null&&(Wd(e,1,t),yn(e,t));break}}e=e.return}}function xP(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Jr(),t.pingedLanes|=t.suspendedLanes&r,pr===t&&(jr&r)===r&&(ar===4||ar===3&&(jr&130023424)===jr&&500>Ht()-Zb?Do(t,0):Kb|=r),yn(t,e)}function cj(t,e){e===0&&(t.mode&1?(e=Ff,Ff<<=1,!(Ff&130023424)&&(Ff=4194304)):e=1);var r=Jr();t=Pi(t,e),t!==null&&(Wd(t,e,r),yn(t,r))}function yP(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),cj(t,r)}function bP(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(e),cj(t,r)}var uj;uj=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)gn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return gn=!1,oP(t,e,r);gn=!!(t.flags&131072)}else gn=!1,Tt&&e.flags&1048576&&pC(e,p0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Fh(t,e),t=e.pendingProps;var a=ac(e,Br.current);Gl(e,r),a=Wb(null,e,n,t,a,r);var i=Vb();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(n)?(i=!0,f0(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Fb(e),a.updater=jp,e.stateNode=a,a._reactInternals=e,jx(e,n,t,r),e=Ix(null,e,n,!0,i,r)):(e.tag=0,Tt&&i&&Ob(e),Kr(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Fh(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=_P(n),t=ba(n,t),a){case 0:e=Tx(null,e,n,t,r);break e;case 1:e=J_(null,e,n,t,r);break e;case 11:e=Z_(null,e,n,t,r);break e;case 14:e=Q_(null,e,n,ba(n.type,t),r);break e}throw Error(le(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ba(n,a),Tx(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ba(n,a),J_(t,e,n,a,r);case 3:e:{if(XC(e),t===null)throw Error(le(387));n=e.pendingProps,i=e.memoizedState,a=i.element,bC(t,e),v0(e,n,null,r);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=lc(Error(le(423)),e),e=ek(t,e,n,r,a);break e}else if(n!==a){a=lc(Error(le(424)),e),e=ek(t,e,n,r,a);break e}else for(En=Ss(e.stateNode.containerInfo.firstChild),Tn=e,Tt=!0,ka=null,r=xC(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ic(),n===a){e=Ri(t,e,r);break e}Kr(t,e,n,r)}e=e.child}return e;case 5:return wC(e),t===null&&Sx(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,s=a.children,bx(n,a)?s=null:i!==null&&bx(n,i)&&(e.flags|=32),GC(t,e),Kr(t,e,s,r),e.child;case 6:return t===null&&Sx(e),null;case 13:return qC(t,e,r);case 4:return $b(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=sc(e,null,n,r):Kr(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ba(n,a),Z_(t,e,n,a,r);case 7:return Kr(t,e,e.pendingProps,r),e.child;case 8:return Kr(t,e,e.pendingProps.children,r),e.child;case 12:return Kr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,s=a.value,vt(m0,n._currentValue),n._currentValue=s,i!==null)if(Da(i.value,s)){if(i.children===a.children&&!vn.current){e=Ri(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ci(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ex(i.return,r,e),o.lanes|=r;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(le(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),Ex(s,r,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Kr(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Gl(e,r),a=ua(a),n=n(a),e.flags|=1,Kr(t,e,n,r),e.child;case 14:return n=e.type,a=ba(n,e.pendingProps),a=ba(n.type,a),Q_(t,e,n,a,r);case 15:return WC(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ba(n,a),Fh(t,e),e.tag=1,xn(n)?(t=!0,f0(e)):t=!1,Gl(e,r),UC(e,n,a),jx(e,n,a,r),Ix(null,e,n,!0,t,r);case 19:return YC(t,e,r);case 22:return VC(t,e,r)}throw Error(le(156,e.tag))};function dj(t,e){return BE(t,e)}function wP(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(t,e,r,n){return new wP(t,e,r,n)}function tw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _P(t){if(typeof t=="function")return tw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bb)return 11;if(t===wb)return 14}return 2}function As(t,e){var r=t.alternate;return r===null?(r=aa(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function zh(t,e,r,n,a,i){var s=2;if(n=t,typeof t=="function")tw(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case kl:return Po(r.children,a,i,e);case yb:s=8,a|=8;break;case Qv:return t=aa(12,r,e,a|2),t.elementType=Qv,t.lanes=i,t;case Jv:return t=aa(13,r,e,a),t.elementType=Jv,t.lanes=i,t;case ex:return t=aa(19,r,e,a),t.elementType=ex,t.lanes=i,t;case wE:return Ip(r,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yE:s=10;break e;case bE:s=9;break e;case bb:s=11;break e;case wb:s=14;break e;case rs:s=16,n=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=aa(s,r,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function Po(t,e,r,n){return t=aa(7,t,n,e),t.lanes=r,t}function Ip(t,e,r,n){return t=aa(22,t,n,e),t.elementType=wE,t.lanes=r,t.stateNode={isHidden:!1},t}function _g(t,e,r){return t=aa(6,t,null,e),t.lanes=r,t}function kg(t,e,r){return e=aa(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kP(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ng(0),this.expirationTimes=ng(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ng(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function rw(t,e,r,n,a,i,s,o,c){return t=new kP(t,e,r,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=aa(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fb(i),t}function NP(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_l,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function fj(t){if(!t)return Fs;t=t._reactInternals;e:{if(el(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var r=t.type;if(xn(r))return fC(t,r,e)}return e}function hj(t,e,r,n,a,i,s,o,c){return t=rw(r,n,!0,t,a,i,s,o,c),t.context=fj(null),r=t.current,n=Jr(),a=js(r),i=Ci(n,a),i.callback=e??null,Es(r,i,a),t.current.lanes=a,Wd(t,a,n),yn(t,n),t}function Op(t,e,r,n){var a=e.current,i=Jr(),s=js(a);return r=fj(r),e.context===null?e.context=r:e.pendingContext=r,e=Ci(i,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Es(a,e,s),t!==null&&(Ta(t,a,s,i),Mh(t,a,s)),s}function S0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function nw(t,e){uk(t,e),(t=t.alternate)&&uk(t,e)}function SP(){return null}var pj=typeof reportError=="function"?reportError:function(t){console.error(t)};function aw(t){this._internalRoot=t}Dp.prototype.render=aw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Op(t,e,null,null)};Dp.prototype.unmount=aw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wo(function(){Op(null,t,null,null)}),e[Di]=null}};function Dp(t){this._internalRoot=t}Dp.prototype.unstable_scheduleHydration=function(t){if(t){var e=VE();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ls.length&&e!==0&&e<ls[r].priority;r++);ls.splice(r,0,t),r===0&&XE(t)}};function iw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dk(){}function EP(t,e,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=S0(s);i.call(u)}}var s=hj(e,n,t,0,null,!1,!1,"",dk);return t._reactRootContainer=s,t[Di]=s.current,pd(t.nodeType===8?t.parentNode:t),Wo(),s}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=S0(c);o.call(u)}}var c=rw(t,0,!1,null,null,!1,!1,"",dk);return t._reactRootContainer=c,t[Di]=c.current,pd(t.nodeType===8?t.parentNode:t),Wo(function(){Op(e,c,r,n)}),c}function Rp(t,e,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var c=S0(s);o.call(c)}}Op(e,s,t,a)}else s=EP(r,e,t,a,n);return S0(s)}HE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=_u(e.pendingLanes);r!==0&&(Nb(e,r|1),yn(e,Ht()),!(Ze&6)&&(cc=Ht()+500,Gs()))}break;case 13:Wo(function(){var n=Pi(t,1);if(n!==null){var a=Jr();Ta(n,t,1,a)}}),nw(t,1)}};Sb=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var r=Jr();Ta(e,t,134217728,r)}nw(t,134217728)}};WE=function(t){if(t.tag===13){var e=js(t),r=Pi(t,e);if(r!==null){var n=Jr();Ta(r,t,e,n)}nw(t,e)}};VE=function(){return ct};GE=function(t,e){var r=ct;try{return ct=t,e()}finally{ct=r}};ux=function(t,e,r){switch(e){case"input":if(nx(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=Sp(n);if(!a)throw Error(le(90));kE(n),nx(n,a)}}}break;case"textarea":SE(t,r);break;case"select":e=r.value,e!=null&&zl(t,!!r.multiple,e,!1)}};OE=Qb;DE=Wo;var CP={usingClientEntryPoint:!1,Events:[Gd,Cl,Sp,TE,IE,Qb]},Qc={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jP={bundleType:Qc.bundleType,version:Qc.version,rendererPackageName:Qc.rendererPackageName,rendererConfig:Qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ME(t),t===null?null:t.stateNode},findFiberByHostInstance:Qc.findFiberByHostInstance||SP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{wp=Kf.inject(jP),Za=Kf}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CP;Ln.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iw(e))throw Error(le(200));return NP(t,e,null,r)};Ln.createRoot=function(t,e){if(!iw(t))throw Error(le(299));var r=!1,n="",a=pj;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=rw(t,1,!1,null,null,r,!1,n,a),t[Di]=e.current,pd(t.nodeType===8?t.parentNode:t),new aw(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=ME(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return Wo(t)};Ln.hydrate=function(t,e,r){if(!Pp(e))throw Error(le(200));return Rp(null,t,e,!0,r)};Ln.hydrateRoot=function(t,e,r){if(!iw(t))throw Error(le(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=pj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=hj(e,null,t,1,r??null,a,!1,i,s),t[Di]=e.current,pd(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Dp(e)};Ln.render=function(t,e,r){if(!Pp(e))throw Error(le(200));return Rp(null,t,e,!1,r)};Ln.unmountComponentAtNode=function(t){if(!Pp(t))throw Error(le(40));return t._reactRootContainer?(Wo(function(){Rp(null,null,t,!1,function(){t._reactRootContainer=null,t[Di]=null})}),!0):!1};Ln.unstable_batchedUpdates=Qb;Ln.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Pp(r))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Rp(t,e,r,!1,n)};Ln.version="18.3.1-next-f1338f8080-20240426";function mj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mj)}catch(t){console.error(t)}}mj(),mE.exports=Ln;var Mp=mE.exports;const AP=ci(Mp);var gj,fk=Mp;gj=fk.createRoot,fk.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kd.apply(this,arguments)}var gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gs||(gs={}));const hk="popstate";function TP(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:s,hash:o}=n.location;return Hx("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:E0(a)}return OP(e,r,null,t)}function Lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IP(){return Math.random().toString(36).substr(2,8)}function pk(t,e){return{usr:t.state,key:t.key,idx:e}}function Hx(t,e,r,n){return r===void 0&&(r=null),kd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ic(e):e,{state:r,key:e&&e.key||n||IP()})}function E0(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ic(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function OP(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o=gs.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(kd({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=gs.Pop;let y=d(),x=y==null?null:y-u;u=y,c&&c({action:o,location:g.location,delta:x})}function h(y,x){o=gs.Push;let v=Hx(g.location,y,x);u=d()+1;let b=pk(v,u),w=g.createHref(v);try{s.pushState(b,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(w)}i&&c&&c({action:o,location:g.location,delta:1})}function p(y,x){o=gs.Replace;let v=Hx(g.location,y,x);u=d();let b=pk(v,u),w=g.createHref(v);s.replaceState(b,"",w),i&&c&&c({action:o,location:g.location,delta:0})}function m(y){let x=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof y=="string"?y:E0(y);return v=v.replace(/ $/,"%20"),Lt(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let g={get action(){return o},get location(){return t(a,s)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(hk,f),c=y,()=>{a.removeEventListener(hk,f),c=null}},createHref(y){return e(a,y)},createURL:m,encodeLocation(y){let x=m(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(y){return s.go(y)}};return g}var mk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mk||(mk={}));function DP(t,e,r){return r===void 0&&(r="/"),PP(t,e,r)}function PP(t,e,r,n){let a=typeof e=="string"?Ic(e):e,i=uc(a.pathname||"/",r);if(i==null)return null;let s=xj(t);RP(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=GP(i);o=WP(s[c],u)}return o}function xj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Lt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ts([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Lt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xj(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:zP(u,i.index),routesMeta:d})};return t.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,s);else for(let c of yj(i.path))a(i,s,c)}),e}function yj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=yj(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function RP(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:HP(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const MP=/^:[\w-]+$/,LP=3,BP=2,FP=1,$P=10,UP=-2,gk=t=>t==="*";function zP(t,e){let r=t.split("/"),n=r.length;return r.some(gk)&&(n+=UP),e&&(n+=BP),r.filter(a=>!gk(a)).reduce((a,i)=>a+(MP.test(i)?LP:i===""?FP:$P),n)}function HP(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function WP(t,e,r){let{routesMeta:n}=t,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=Wx({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Ts([i,f.pathname]),pathnameBase:KP(Ts([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Ts([i,f.pathnameBase]))}return s}function Wx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=VP(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let g=o[f]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[f];return p&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:t}}function VP(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),vj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function GP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function XP(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Ic(t):t;return{pathname:r?r.startsWith("/")?r:qP(r,e):e,search:ZP(n),hash:QP(a)}}function qP(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ng(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YP(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function sw(t,e){let r=YP(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ow(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Ic(t):(a=kd({},t),Lt(!a.pathname||!a.pathname.includes("?"),Ng("?","pathname","search",a)),Lt(!a.pathname||!a.pathname.includes("#"),Ng("#","pathname","hash",a)),Lt(!a.search||!a.search.includes("#"),Ng("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?e[f]:"/"}let c=XP(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ts=t=>t.join("/").replace(/\/\/+/g,"/"),KP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bj=["post","put","patch","delete"];new Set(bj);const eR=["get",...bj];new Set(eR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nd.apply(this,arguments)}const Lp=_.createContext(null),wj=_.createContext(null),zi=_.createContext(null),Bp=_.createContext(null),ui=_.createContext({outlet:null,matches:[],isDataRoute:!1}),_j=_.createContext(null);function tR(t,e){let{relative:r}=e===void 0?{}:e;Oc()||Lt(!1);let{basename:n,navigator:a}=_.useContext(zi),{hash:i,pathname:s,search:o}=Fp(t,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:Ts([n,s])),a.createHref({pathname:c,search:o,hash:i})}function Oc(){return _.useContext(Bp)!=null}function Hi(){return Oc()||Lt(!1),_.useContext(Bp).location}function kj(t){_.useContext(zi).static||_.useLayoutEffect(t)}function Ma(){let{isDataRoute:t}=_.useContext(ui);return t?gR():rR()}function rR(){Oc()||Lt(!1);let t=_.useContext(Lp),{basename:e,future:r,navigator:n}=_.useContext(zi),{matches:a}=_.useContext(ui),{pathname:i}=Hi(),s=JSON.stringify(sw(a,r.v7_relativeSplatPath)),o=_.useRef(!1);return kj(()=>{o.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=ow(u,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ts([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}const nR=_.createContext(null);function aR(t){let e=_.useContext(ui).outlet;return e&&_.createElement(nR.Provider,{value:t},e)}function lw(){let{matches:t}=_.useContext(ui),e=t[t.length-1];return e?e.params:{}}function Fp(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=_.useContext(zi),{matches:a}=_.useContext(ui),{pathname:i}=Hi(),s=JSON.stringify(sw(a,n.v7_relativeSplatPath));return _.useMemo(()=>ow(t,JSON.parse(s),i,r==="path"),[t,s,i,r])}function iR(t,e){return sR(t,e)}function sR(t,e,r,n){Oc()||Lt(!1);let{navigator:a}=_.useContext(zi),{matches:i}=_.useContext(ui),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Hi(),d;if(e){var f;let y=typeof e=="string"?Ic(e):e;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Lt(!1),d=y}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=DP(t,{pathname:p}),g=dR(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Ts([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Ts([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return e&&g?_.createElement(Bp.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gs.Pop}},g):g}function oR(){let t=mR(),e=JP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),r?_.createElement("pre",{style:a},r):null,null)}const lR=_.createElement(oR,null);class cR extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?_.createElement(ui.Provider,{value:this.props.routeContext},_.createElement(_j.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uR(t){let{routeContext:e,match:r,children:n}=t,a=_.useContext(Lp);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(ui.Provider,{value:e},n)}function dR(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=(a=r)==null?void 0:a.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Lt(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,m=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let p,m=!1,g=null,y=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||lR,c&&(u<0&&h===0?(vR("route-fallback"),m=!0,y=null):u===h&&(m=!0,y=f.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,h+1)),v=()=>{let b;return p?b=g:m?b=y:f.route.Component?b=_.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,_.createElement(uR,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?_.createElement(cR,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var Nj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Nj||{}),Sj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sj||{});function fR(t){let e=_.useContext(Lp);return e||Lt(!1),e}function hR(t){let e=_.useContext(wj);return e||Lt(!1),e}function pR(t){let e=_.useContext(ui);return e||Lt(!1),e}function Ej(t){let e=pR(),r=e.matches[e.matches.length-1];return r.route.id||Lt(!1),r.route.id}function mR(){var t;let e=_.useContext(_j),r=hR(),n=Ej();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function gR(){let{router:t}=fR(Nj.UseNavigateStable),e=Ej(Sj.UseNavigateStable),r=_.useRef(!1);return kj(()=>{r.current=!0}),_.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Nd({fromRouteId:e},i)))},[t,e])}const vk={};function vR(t,e,r){vk[t]||(vk[t]=!0)}function xR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yR(t){let{to:e,replace:r,state:n,relative:a}=t;Oc()||Lt(!1);let{future:i,static:s}=_.useContext(zi),{matches:o}=_.useContext(ui),{pathname:c}=Hi(),u=Ma(),d=ow(e,sw(o,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function bR(t){return aR(t.context)}function dt(t){Lt(!1)}function wR(t){let{basename:e="/",children:r=null,location:n,navigationType:a=gs.Pop,navigator:i,static:s=!1,future:o}=t;Oc()&&Lt(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:s,future:Nd({v7_relativeSplatPath:!1},o)}),[c,o,i,s]);typeof n=="string"&&(n=Ic(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=n,g=_.useMemo(()=>{let y=uc(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:p,key:m},navigationType:a}},[c,d,f,h,p,m,a]);return g==null?null:_.createElement(zi.Provider,{value:u},_.createElement(Bp.Provider,{children:r,value:g}))}function _R(t){let{children:e,location:r}=t;return iR(Vx(e),r)}new Promise(()=>{});function Vx(t,e){e===void 0&&(e=[]);let r=[];return _.Children.forEach(t,(n,a)=>{if(!_.isValidElement(n))return;let i=[...e,a];if(n.type===_.Fragment){r.push.apply(r,Vx(n.props.children,i));return}n.type!==dt&&Lt(!1),!n.props.index||!n.props.children||Lt(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Vx(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C0(){return C0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C0.apply(this,arguments)}function Cj(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function kR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NR(t,e){return t.button===0&&(!e||e==="_self")&&!kR(t)}const SR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ER=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],CR="6";try{window.__reactRouterVersion=CR}catch{}const jR=_.createContext({isTransitioning:!1}),AR="startTransition",xk=Kv[AR];function TR(t){let{basename:e,children:r,future:n,window:a}=t,i=_.useRef();i.current==null&&(i.current=TP({window:a,v5Compat:!0}));let s=i.current,[o,c]=_.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=_.useCallback(f=>{u&&xk?xk(()=>c(f)):c(f)},[c,u]);return _.useLayoutEffect(()=>s.listen(d),[s,d]),_.useEffect(()=>xR(n),[n]),_.createElement(wR,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const IR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Be=_.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,h=Cj(e,SR),{basename:p}=_.useContext(zi),m,g=!1;if(typeof u=="string"&&OR.test(u)&&(m=u,IR))try{let b=new URL(window.location.href),w=u.startsWith("//")?new URL(b.protocol+u):new URL(u),S=uc(w.pathname,p);w.origin===b.origin&&S!=null?u=S+w.search+w.hash:g=!0}catch{}let y=tR(u,{relative:a}),x=RR(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function v(b){n&&n(b),b.defaultPrevented||x(b)}return _.createElement("a",C0({},h,{href:m||y,onClick:g||i?n:v,ref:r,target:c}))}),DR=_.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:u,children:d}=e,f=Cj(e,ER),h=Fp(c,{relative:f.relative}),p=Hi(),m=_.useContext(wj),{navigator:g,basename:y}=_.useContext(zi),x=m!=null&&MR(h)&&u===!0,v=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=p.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;a||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&y&&(w=uc(w,y)||w);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let E=b===v||!s&&b.startsWith(v)&&b.charAt(S)==="/",j=w!=null&&(w===v||!s&&w.startsWith(v)&&w.charAt(v.length)==="/"),I={isActive:E,isPending:j,isTransitioning:x},N=E?n:void 0,T;typeof i=="function"?T=i(I):T=[i,E?"active":null,j?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(I):o;return _.createElement(Be,C0({},f,{"aria-current":N,className:T,ref:r,style:F,to:c,viewTransition:u}),typeof d=="function"?d(I):d)});var Gx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gx||(Gx={}));var yk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yk||(yk={}));function PR(t){let e=_.useContext(Lp);return e||Lt(!1),e}function RR(t,e){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}=e===void 0?{}:e,c=Ma(),u=Hi(),d=Fp(t,{relative:s});return _.useCallback(f=>{if(NR(f,r)){f.preventDefault();let h=n!==void 0?n:E0(u)===E0(d);c(t,{replace:h,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[u,c,d,n,a,r,t,i,s,o])}function MR(t,e){e===void 0&&(e={});let r=_.useContext(jR);r==null&&Lt(!1);let{basename:n}=PR(Gx.useViewTransitionState),a=Fp(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=uc(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=uc(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Wx(a.pathname,s)!=null||Wx(a.pathname,i)!=null}let LR={data:""},BR=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||LR,FR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$R=/\/\*[^]*?\*\/|  +/g,bk=/\n+/g,us=(t,e)=>{let r="",n="",a="";for(let i in t){let s=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+s+";":n+=i[1]=="f"?us(s,i):i+"{"+us(s,i[1]=="k"?"":e)+"}":typeof s=="object"?n+=us(s,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):s!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=us.p?us.p(i,s):i+":"+s+";")}return r+(e&&a?e+"{"+a+"}":a)+n},gi={},jj=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+jj(t[r]);return e}return t},UR=(t,e,r,n,a)=>{let i=jj(t),s=gi[i]||(gi[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!gi[s]){let c=i!==t?t:(u=>{let d,f,h=[{}];for(;d=FR.exec(u.replace($R,""));)d[4]?h.shift():d[3]?(f=d[3].replace(bk," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(bk," ").trim();return h[0]})(t);gi[s]=us(a?{["@keyframes "+s]:c}:c,r?"":"."+s)}let o=r&&gi.g?gi.g:null;return r&&(gi.g=gi[s]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(gi[s],e,n,o),s},zR=(t,e,r)=>t.reduce((n,a,i)=>{let s=e[i];if(s&&s.call){let o=s(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=c?"."+c:o&&typeof o=="object"?o.props?"":us(o,""):o===!1?"":o}return n+a+(s??"")},"");function $p(t){let e=this||{},r=t.call?t(e.p):t;return UR(r.unshift?r.raw?zR(r,[].slice.call(arguments,1),e.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(e.p):a),{}):r,BR(e.target),e.g,e.o,e.k)}let Aj,Xx,qx;$p.bind({g:1});let Mi=$p.bind({k:1});function HR(t,e,r,n){us.p=e,Aj=t,Xx=r,qx=n}function Xs(t,e){let r=this||{};return function(){let n=arguments;function a(i,s){let o=Object.assign({},i),c=o.className||a.className;r.p=Object.assign({theme:Xx&&Xx()},o),r.o=/ *go\d+/.test(c),o.className=$p.apply(r,n)+(c?" "+c:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),qx&&u[0]&&qx(o),Aj(u,o)}return a}}var WR=t=>typeof t=="function",j0=(t,e)=>WR(t)?t(e):t,VR=(()=>{let t=0;return()=>(++t).toString()})(),Tj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),GR=20,Ij=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,GR)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return Ij(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},Hh=[],Co={toasts:[],pausedAt:void 0},tl=t=>{Co=Ij(Co,t),Hh.forEach(e=>{e(Co)})},XR={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qR=(t={})=>{let[e,r]=_.useState(Co),n=_.useRef(Co);_.useEffect(()=>(n.current!==Co&&r(Co),Hh.push(r),()=>{let i=Hh.indexOf(r);i>-1&&Hh.splice(i,1)}),[]);let a=e.toasts.map(i=>{var s,o,c;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||(t==null?void 0:t.duration)||XR[i.type],style:{...t.style,...(c=t[i.type])==null?void 0:c.style,...i.style}}});return{...e,toasts:a}},YR=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||VR()}),qd=t=>(e,r)=>{let n=YR(e,t,r);return tl({type:2,toast:n}),n.id},K=(t,e)=>qd("blank")(t,e);K.error=qd("error");K.success=qd("success");K.loading=qd("loading");K.custom=qd("custom");K.dismiss=t=>{tl({type:3,toastId:t})};K.remove=t=>tl({type:4,toastId:t});K.promise=(t,e,r)=>{let n=K.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let i=e.success?j0(e.success,a):void 0;return i?K.success(i,{id:n,...r,...r==null?void 0:r.success}):K.dismiss(n),a}).catch(a=>{let i=e.error?j0(e.error,a):void 0;i?K.error(i,{id:n,...r,...r==null?void 0:r.error}):K.dismiss(n)}),t};var KR=(t,e)=>{tl({type:1,toast:{id:t,height:e}})},ZR=()=>{tl({type:5,time:Date.now()})},zu=new Map,QR=1e3,JR=(t,e=QR)=>{if(zu.has(t))return;let r=setTimeout(()=>{zu.delete(t),tl({type:4,toastId:t})},e);zu.set(t,r)},eM=t=>{let{toasts:e,pausedAt:r}=qR(t);_.useEffect(()=>{if(r)return;let i=Date.now(),s=e.map(o=>{if(o.duration===1/0)return;let c=(o.duration||0)+o.pauseDuration-(i-o.createdAt);if(c<0){o.visible&&K.dismiss(o.id);return}return setTimeout(()=>K.dismiss(o.id),c)});return()=>{s.forEach(o=>o&&clearTimeout(o))}},[e,r]);let n=_.useCallback(()=>{r&&tl({type:6,time:Date.now()})},[r]),a=_.useCallback((i,s)=>{let{reverseOrder:o=!1,gutter:c=8,defaultPosition:u}=s||{},d=e.filter(p=>(p.position||u)===(i.position||u)&&p.height),f=d.findIndex(p=>p.id===i.id),h=d.filter((p,m)=>m<f&&p.visible).length;return d.filter(p=>p.visible).slice(...o?[h+1]:[0,h]).reduce((p,m)=>p+(m.height||0)+c,0)},[e]);return _.useEffect(()=>{e.forEach(i=>{if(i.dismissed)JR(i.id,i.removeDelay);else{let s=zu.get(i.id);s&&(clearTimeout(s),zu.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:KR,startPause:ZR,endPause:n,calculateOffset:a}}},tM=Mi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,rM=Mi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nM=Mi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,aM=Xs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${rM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${nM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iM=Mi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sM=Xs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${iM} 1s linear infinite;
`,oM=Mi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,lM=Mi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,cM=Xs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${lM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,uM=Xs("div")`
  position: absolute;
`,dM=Xs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fM=Mi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hM=Xs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pM=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?_.createElement(hM,null,e):e:r==="blank"?null:_.createElement(dM,null,_.createElement(sM,{...n}),r!=="loading"&&_.createElement(uM,null,r==="error"?_.createElement(aM,{...n}):_.createElement(cM,{...n})))},mM=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,gM=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,vM="0%{opacity:0;} 100%{opacity:1;}",xM="0%{opacity:1;} 100%{opacity:0;}",yM=Xs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,bM=Xs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,wM=(t,e)=>{let r=t.includes("top")?1:-1,[n,a]=Tj()?[vM,xM]:[mM(r),gM(r)];return{animation:e?`${Mi(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Mi(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},_M=_.memo(({toast:t,position:e,style:r,children:n})=>{let a=t.height?wM(t.position||e||"top-center",t.visible):{opacity:0},i=_.createElement(pM,{toast:t}),s=_.createElement(bM,{...t.ariaProps},j0(t.message,t));return _.createElement(yM,{className:t.className,style:{...a,...r,...t.style}},typeof n=="function"?n({icon:i,message:s}):_.createElement(_.Fragment,null,i,s))});HR(_.createElement);var kM=({id:t,className:e,style:r,onHeightUpdate:n,children:a})=>{let i=_.useCallback(s=>{if(s){let o=()=>{let c=s.getBoundingClientRect().height;n(t,c)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return _.createElement("div",{ref:i,className:e,style:r},a)},NM=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Tj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...a}},SM=$p`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zf=16,EM=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:s})=>{let{toasts:o,handlers:c}=eM(r);return _.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Zf,left:Zf,right:Zf,bottom:Zf,pointerEvents:"none",...i},className:s,onMouseEnter:c.startPause,onMouseLeave:c.endPause},o.map(u=>{let d=u.position||e,f=c.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),h=NM(d,f);return _.createElement(kM,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?SM:"",style:h},u.type==="custom"?j0(u.message,u):a?a(u):_.createElement(_M,{toast:u,position:d}))}))};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const r=_.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>_.createElement("svg",{ref:d,...CM,width:a,height:a,stroke:n,strokeWidth:s?Number(i)*24/Number(a):i,className:["lucide",`lucide-${jM(t)}`,o].join(" "),...u},[...e.map(([f,h])=>_.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=he("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=he("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=he("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=he("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=he("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=he("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=he("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=he("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=he("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=he("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=he("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=he("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=he("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=he("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=he("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=he("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=he("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=he("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=he("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=he("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=he("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=he("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),s7="modulepreload",o7=function(t){return"/"+t},kk={},Dc=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=o7(c),c in kk)return;kk[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":s7,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},l7=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Dc(async()=>{const{default:n}=await Promise.resolve().then(()=>Pc);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class dw extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class c7 extends dw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class u7 extends dw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class d7 extends dw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var e1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(e1||(e1={}));var f7=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};class h7{constructor(e,{headers:r={},customFetch:n,region:a=e1.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=l7(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return f7(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:s}=r;let o={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let u;s&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=s):typeof s=="string"?(o["Content-Type"]="text/plain",u=s):typeof FormData<"u"&&s instanceof FormData?u=s:(o["Content-Type"]="application/json",u=JSON.stringify(s)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(m=>{throw new c7(m)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new u7(d);if(!d.ok)throw new d7(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="text/event-stream"?p=d:h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(a){return{data:null,error:a}}})}}var pn={},fw={},Wp={},tf={},Vp={},Gp={},p7=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hc=p7();const m7=hc.fetch,$j=hc.fetch.bind(hc),Uj=hc.Headers,g7=hc.Request,v7=hc.Response,Pc=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uj,Request:g7,Response:v7,default:$j,fetch:m7},Symbol.toStringTag,{value:"Module"})),x7=nE(Pc);var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});let y7=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xp.default=y7;var zj=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gp,"__esModule",{value:!0});const b7=zj(x7),w7=zj(Xp);let _7=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=b7.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var s,o,c;let u=null,d=null,f=null,h=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const g=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),y=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await i.text();try{u=JSON.parse(g),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,p="OK")}catch{i.status===404&&g===""?(h=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new w7.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var s,o,c;return{error:{message:`${(s=i==null?void 0:i.name)!==null&&s!==void 0?s:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Gp.default=_7;var k7=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vp,"__esModule",{value:!0});const N7=k7(Gp);let S7=class extends N7.default{select(e){let r=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:s="text"}={}){var o;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${u}"; options=${c};`,s==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vp.default=S7;var E7=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tf,"__esModule",{value:!0});const C7=E7(Vp);let j7=class extends C7.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${s}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};tf.default=j7;var A7=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wp,"__esModule",{value:!0});const Jc=A7(tf);let T7=class{constructor(e,{headers:r={},schema:n,fetch:a}){this.url=e,this.headers=r,this.schema=n,this.fetch=a}select(e,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const s=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),new Jc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const s=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(s.length>0){const o=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Jc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const s="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Jc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Jc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Jc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Wp.default=T7;var qp={},Yp={};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.version=void 0;Yp.version="0.0.0-automated";Object.defineProperty(qp,"__esModule",{value:!0});qp.DEFAULT_HEADERS=void 0;const I7=Yp;qp.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${I7.version}`};var Hj=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fw,"__esModule",{value:!0});const O7=Hj(Wp),D7=Hj(tf),P7=qp;let R7=class Wj{constructor(e,{headers:r={},schema:n,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},P7.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new O7.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Wj(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:a=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let c;n||a?(s=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{o.searchParams.append(d,f)})):(s="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new D7.default({method:s,url:o,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};fw.default=R7;var Rc=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pn,"__esModule",{value:!0});pn.PostgrestError=pn.PostgrestBuilder=pn.PostgrestTransformBuilder=pn.PostgrestFilterBuilder=pn.PostgrestQueryBuilder=pn.PostgrestClient=void 0;const Vj=Rc(fw);pn.PostgrestClient=Vj.default;const Gj=Rc(Wp);pn.PostgrestQueryBuilder=Gj.default;const Xj=Rc(tf);pn.PostgrestFilterBuilder=Xj.default;const qj=Rc(Vp);pn.PostgrestTransformBuilder=qj.default;const Yj=Rc(Gp);pn.PostgrestBuilder=Yj.default;const Kj=Rc(Xp);pn.PostgrestError=Kj.default;var M7=pn.default={PostgrestClient:Vj.default,PostgrestQueryBuilder:Gj.default,PostgrestFilterBuilder:Xj.default,PostgrestTransformBuilder:qj.default,PostgrestBuilder:Yj.default,PostgrestError:Kj.default};const{PostgrestClient:L7,PostgrestQueryBuilder:cce,PostgrestFilterBuilder:uce,PostgrestTransformBuilder:dce,PostgrestBuilder:fce,PostgrestError:hce}=M7;let t1;typeof window>"u"?t1=require("ws"):t1=window.WebSocket;const B7="2.11.10",F7={"X-Client-Info":`realtime-js/${B7}`},$7="1.0.0",Zj=1e4,U7=1e3;var Yl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Yl||(Yl={}));var Xr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xr||(Xr={}));var _a;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(_a||(_a={}));var r1;(function(t){t.websocket="websocket"})(r1||(r1={}));var yo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yo||(yo={}));class z7{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),i=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(e.slice(s,s+a));s=s+a;const c=n.decode(e.slice(s,s+i));s=s+i;const u=JSON.parse(n.decode(e.slice(s,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class Qj{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gt||(gt={}));const Nk=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,s)=>(i[s]=H7(s,t,e,a),i),{})},H7=(t,e,r,n)=>{const a=e.find(o=>o.name===t),i=a==null?void 0:a.type,s=r[t];return i&&!n.includes(i)?Jj(i,s):n1(s)},Jj=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return X7(e,r)}switch(t){case gt.bool:return W7(e);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return V7(e);case gt.json:case gt.jsonb:return G7(e);case gt.timestamp:return q7(e);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return n1(e);default:return n1(e)}},n1=t=>t,W7=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},V7=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},G7=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},X7=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const s=t.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>Jj(e,o))}return t},q7=t=>typeof t=="string"?t.replace(" ","T"):t,e6=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Eg{constructor(e,r,n={},a=Zj){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sk;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Sk||(Sk={}));class Gu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gu.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=Gu.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Gu.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const i=this.cloneDeep(e),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),p=f.map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0),g=f.filter(y=>h.indexOf(y.presence_ref)<0);m.length>0&&(o[u]=m),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(e,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const f=e[o].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);e[o].unshift(...h)}n(o,d,c)}),this.map(s,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,a(o,u,c),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ek;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ek||(Ek={}));var Ck;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ck||(Ck={}));var bi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class hw{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Eg(this,_a.join,this.params,this.timeout),this.rejoinTimer=new Qj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_a.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Gu(this),this.broadcastEndpointURL=e6(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s,private:o}}=this.params;this._onError(d=>e==null?void 0:e(bi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(bi.CLOSED));const c={},u={broadcast:i,presence:s,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(bi.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,m=[];for(let g=0;g<p;g++){const y=h[g],{filter:{event:x,schema:v,table:b,filter:w}}=y,S=d&&d[g];if(S&&S.event===x&&S.schema===v&&S.table===b&&S.filter===w)m.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=Xr.errored,e==null||e(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(bi.SUBSCRIBED);return}}).receive("error",d=>{this.state=Xr.errored,e==null||e(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:s}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_a.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const a=new Eg(this,_a.leave,{},e);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Eg(this,e,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,i;const s=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=_a;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var m,g,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(p=>{var m,g,y,x,v,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const w=p.id,S=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((g=r.ids)===null||g===void 0?void 0:g.includes(w))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const w=(v=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return w==="*"||w===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:y,commit_timestamp:x,type:v,errors:b}=m;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:x,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(h,n)})}_isClosed(){return this.state===Xr.closed}_isJoined(){return this.state===Xr.joined}_isJoining(){return this.state===Xr.joining}_isLeaving(){return this.state===Xr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&hw.isEqual(a.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_a.close,{},e)}_onError(e){this._on(_a.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Nk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Nk(e.columns,e.old_record)),r}}const jk=()=>{},Y7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class K7{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=F7,this.params={},this.timeout=Zj,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jk,this.ref=0,this.logger=jk,this.conn=null,this.sendBuffer=[],this.serializer=new z7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>Dc(async()=>{const{default:c}=await Promise.resolve().then(()=>Pc);return{default:c}},void 0).then(({default:c})=>c(...o)):s=fetch,(...o)=>s(...o)},this.endPoint=`${e}/${r1.websocket}`,this.httpEndpoint=e6(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,s)=>s(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=t1),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Z7(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$7}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Yl.connecting:return yo.Connecting;case Yl.open:return yo.Open;case Yl.closing:return yo.Closing;default:return yo.Closed}}isConnected(){return this.connectionState()===yo.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new hw(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:a,ref:i}=e,s=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(_a.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(U7,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:a,payload:i,ref:s}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${s&&"("+s+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(a,i,s)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(_a.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Y7],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Z7{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Yl.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class pw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function cr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Q7 extends pw{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class a1 extends pw{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var J7=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const t6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Dc(async()=>{const{default:n}=await Promise.resolve().then(()=>Pc);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},e9=()=>J7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Dc(()=>Promise.resolve().then(()=>Pc),void 0)).Response:Response}),i1=t=>{if(Array.isArray(t))return t.map(r=>i1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=i1(n)}),e};var rl=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Cg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),t9=(t,e,r)=>rl(void 0,void 0,void 0,function*(){const n=yield e9();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{e(new Q7(Cg(a),t.status||500))}).catch(a=>{e(new a1(Cg(a),a))}):e(new a1(Cg(t),t))}),r9=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function rf(t,e,r,n,a,i){return rl(this,void 0,void 0,function*(){return new Promise((s,o)=>{t(r,r9(e,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>t9(c,o,n))})})}function I0(t,e,r,n){return rl(this,void 0,void 0,function*(){return rf(t,"GET",e,r,n)})}function as(t,e,r,n,a){return rl(this,void 0,void 0,function*(){return rf(t,"POST",e,n,a,r)})}function n9(t,e,r,n,a){return rl(this,void 0,void 0,function*(){return rf(t,"PUT",e,n,a,r)})}function a9(t,e,r,n){return rl(this,void 0,void 0,function*(){return rf(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function r6(t,e,r,n,a){return rl(this,void 0,void 0,function*(){return rf(t,"DELETE",e,n,a,r)})}var on=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const i9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ak={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s9{constructor(e,r={},n,a){this.url=e,this.headers=r,this.bucketId=n,this.fetch=t6(a)}uploadOrUpdate(e,r,n,a){return on(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Ak),a);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(cr(i))return{data:null,error:i};throw i}})}upload(e,r,n){return on(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return on(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Ak.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(cr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return on(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield as(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new pw("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(n){if(cr(n))return{data:null,error:n};throw n}})}update(e,r,n){return on(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return on(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(cr(a))return{data:null,error:a};throw a}})}copy(e,r,n){return on(this,void 0,void 0,function*(){try{return{data:{path:(yield as(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(cr(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return on(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield as(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(cr(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return on(this,void 0,void 0,function*(){try{const a=yield as(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(cr(a))return{data:null,error:a};throw a}})}download(e,r){return on(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield I0(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(cr(o))return{data:null,error:o};throw o}})}info(e){return on(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield I0(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:i1(n),error:null}}catch(n){if(cr(n))return{data:null,error:n};throw n}})}exists(e){return on(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield a9(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(cr(n)&&n instanceof a1){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return on(this,void 0,void 0,function*(){try{return{data:yield r6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(cr(r))return{data:null,error:r};throw r}})}list(e,r,n){return on(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},i9),r),{prefix:e||""});return{data:yield as(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(cr(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const o9="2.7.1",l9={"X-Client-Info":`storage-js/${o9}`};var dl=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};class c9{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},l9),r),this.fetch=t6(n)}listBuckets(){return dl(this,void 0,void 0,function*(){try{return{data:yield I0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}})}getBucket(e){return dl(this,void 0,void 0,function*(){try{return{data:yield I0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(cr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return dl(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(cr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return dl(this,void 0,void 0,function*(){try{return{data:yield n9(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(cr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return dl(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(cr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return dl(this,void 0,void 0,function*(){try{return{data:yield r6(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(cr(r))return{data:null,error:r};throw r}})}}class u9 extends c9{constructor(e,r={},n){super(e,r,n)}from(e){return new s9(this.url,this.headers,e,this.fetch)}}const d9="2.50.0";let Nu="";typeof Deno<"u"?Nu="deno":typeof document<"u"?Nu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nu="react-native":Nu="node";const f9={"X-Client-Info":`supabase-js-${Nu}/${d9}`},h9={headers:f9},p9={schema:"public"},m9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g9={};var v9=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const x9=t=>{let e;return t?e=t:typeof fetch>"u"?e=$j:e=fetch,(...r)=>e(...r)},y9=()=>typeof Headers>"u"?Uj:Headers,b9=(t,e,r)=>{const n=x9(r),a=y9();return(i,s)=>v9(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))})};var w9=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};function _9(t){return t.endsWith("/")?t:t+"/"}function k9(t,e){var r,n;const{db:a,auth:i,realtime:s,global:o}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>w9(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const n6="2.70.0",bl=30*1e3,s1=3,jg=s1*bl,N9="http://localhost:9999",S9="supabase.auth.token",E9={"X-Client-Info":`gotrue-js/${n6}`},o1="X-Supabase-Api-Version",a6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},C9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,j9=6e5;class mw extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Pe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class A9 extends mw{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function T9(t){return Pe(t)&&t.name==="AuthApiError"}class i6 extends mw{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class qs extends mw{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class es extends qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function I9(t){return Pe(t)&&t.name==="AuthSessionMissingError"}class Qf extends qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jf extends qs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class eh extends qs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function O9(t){return Pe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Tk extends qs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class l1 extends qs{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ag(t){return Pe(t)&&t.name==="AuthRetryableFetchError"}class Ik extends qs{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Xu extends qs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const O0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ok=` 	
\r=`.split(""),D9=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ok.length;e+=1)t[Ok[e].charCodeAt(0)]=-2;for(let e=0;e<O0.length;e+=1)t[O0[e].charCodeAt(0)]=e;return t})();function Dk(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(O0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(O0[n]),e.queuedBits-=6}}function s6(t,e,r){const n=D9[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Pk(t){const e=[],r=s=>{e.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{M9(s,n,r)};for(let s=0;s<t.length;s+=1)s6(t.charCodeAt(s),a,i);return e.join("")}function P9(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function R9(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}P9(n,e)}}function M9(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function L9(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)s6(t.charCodeAt(a),r,n);return new Uint8Array(e)}function B9(t){const e=[];return R9(t,r=>e.push(r)),new Uint8Array(e)}function F9(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>Dk(a,r,n)),Dk(null,r,n),e.join("")}function $9(t){return Math.round(Date.now()/1e3)+t}function U9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const xa=()=>typeof window<"u"&&typeof document<"u",eo={tested:!1,writable:!1},qu=()=>{if(!xa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(eo.tested)return eo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),eo.tested=!0,eo.writable=!0}catch{eo.tested=!0,eo.writable=!1}return eo.writable};function z9(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const o6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Dc(async()=>{const{default:n}=await Promise.resolve().then(()=>Pc);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},H9=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",l6=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},th=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rh=async(t,e)=>{await t.removeItem(e)};class Kp{constructor(){this.promise=new Kp.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Kp.promiseConstructor=Promise;function Tg(t){const e=t.split(".");if(e.length!==3)throw new Xu("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!C9.test(e[n]))throw new Xu("JWT not in base64url format");return{header:JSON.parse(Pk(e[0])),payload:JSON.parse(Pk(e[1])),signature:L9(e[2]),raw:{header:e[0],payload:e[1]}}}async function W9(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function V9(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await t(i);if(!e(i,null,s)){n(s);return}}catch(s){if(!e(i,s)){a(s);return}}})()})}function G9(t){return("0"+t.toString(16)).substr(-2)}function X9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,G9).join("")}async function q9(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Y9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await q9(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fl(t,e,r=!1){const n=X9();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await l6(t,`${e}-code-verifier`,a);const i=await Y9(n);return[i,n===i?"plain":"s256"]}const K9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Z9(t){const e=t.headers.get(o1);if(!e||!e.match(K9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Q9(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function J9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const eL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hl(t){if(!eL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var tL=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const uo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rL=[502,503,504];async function Rk(t){var e;if(!H9(t))throw new l1(uo(t),0);if(rL.includes(t.status))throw new l1(uo(t),t.status);let r;try{r=await t.json()}catch(i){throw new i6(uo(i),i)}let n;const a=Z9(t);if(a&&a.getTime()>=a6["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ik(uo(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new es}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new Ik(uo(r),t.status,r.weak_password.reasons);throw new A9(uo(r),t.status||500,n)}const nL=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function ze(t,e,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[o1]||(i[o1]=a6["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await aL(t,e,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function aL(t,e,r,n,a,i){const s=nL(e,n,a,i);let o;try{o=await t(r,Object.assign({},s))}catch(c){throw console.error(c),new l1(uo(c),0)}if(o.ok||await Rk(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Rk(c)}}function xi(t){var e;let r=null;lL(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=$9(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Mk(t){const e=xi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ds(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function iL(t){return{data:t,error:null}}function sL(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=t,s=tL(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function oL(t){return t}function lL(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ig=["global","local","others"];var cL=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};class uL{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=o6(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Ig[0]){if(Ig.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ig.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ds})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=cL(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:sL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Pe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ds})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:oL});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Pe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){hl(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ds})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){hl(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ds})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){hl(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ds})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){hl(e.userId);try{const{data:r,error:n}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){hl(e.userId),hl(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}}const dL={getItem:t=>qu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{qu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{qu()&&globalThis.localStorage.removeItem(t)}};function Lk(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function fL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pl={debug:!!(globalThis&&qu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class c6 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hL extends c6{}async function pL(t,e,r){pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),pl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new hL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(pl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}fL();const mL={url:N9,storageKey:S9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bk(t,e,r){return await r()}class jd{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jd.nextInstanceID,jd.nextInstanceID+=1,this.instanceID>0&&xa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},mL),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new uL({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=o6(a.fetch),this.lock=a.lock||Bk,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:xa()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=pL:this.lock=Bk,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:qu()?this.storage=dL:(this.memoryStorage={},this.storage=Lk(this.memoryStorage)):(this.memoryStorage={},this.storage=Lk(this.memoryStorage)),xa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${n6}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=z9(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),xa()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),O9(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Pe(r)?{error:r}:{error:new i6("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:xi}),{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Pe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,a;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await fl(this.storage,this.storageKey)),i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:xi})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:xi})}else throw new Jf("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Pe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:s,options:o}=e;r=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mk})}else if("phone"in e){const{phone:i,password:s,options:o}=e;r=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mk})}else throw new Jf("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Qf}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Pe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,a,i,s,o,c,u,d,f,h,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:y,wallet:x,statement:v,options:b}=e;let w;if(xa())if(typeof x=="object")w=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const S=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let j;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")j=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)j=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)m=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),g=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:y,error:x}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:F9(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:xi});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Qf}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(Pe(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await th(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:s}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:xi});if(await rh(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Qf}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(Pe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=e,o=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:xi}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Qf}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Pe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,a,i,s;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await fl(this.storage,this.storageKey));const{error:f}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Jf("You must provide either an email or phone number.")}catch(o){if(Pe(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:xi});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Pe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,n,a;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await fl(this.storage,this.storageKey)),await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:iL})}catch(i){if(Pe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new es;const{error:a}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:s}=await ze(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:s,error:o}=await ze(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o}}throw new Jf("You must provide either an email or phone number and a type")}catch(r){if(Pe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await th(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<jg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!s&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ds}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new es}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ds})})}catch(r){if(Pe(r))return I9(r)&&(await this._removeSession(),await rh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new es;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await fl(this.storage,this.storageKey));const{data:u,error:d}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:ds});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new es;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=Tg(e.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Pe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:s,error:o}=r;if(o)throw o;e=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new es;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Pe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!xa())throw new eh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Tk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Tk("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=e;if(!i||!o||!s||!u)throw new eh("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=bl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const m=h-f;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(Pe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await th(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(T9(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await rh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=U9(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await fl(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Pe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return xa()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Pe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await V9(async a=>(a>0&&await W9(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xi})),(a,i)=>{const s=200*Math.pow(2,a);return i&&Ag(i)&&Date.now()+s-n<bl})}catch(n){if(this._debug(r,"error",n),Pe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),xa()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await th(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<jg;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${jg}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Ag(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Kp;const{data:i,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new es;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),Pe(i)){const s={session:null,error:i};return Ag(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await l6(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/bl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${bl}ms, refresh threshold is ${s1} ticks`),a<=s1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof c6)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await fl(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return{data:null,error:s};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:s,error:o}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],a=n.filter(s=>s.factor_type==="totp"&&s.status==="verified"),i=n.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Tg(a.access_token);let o=null;s.aal&&(o=s.aal);let c=o;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=s.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n||(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+j9>Date.now()))return n;const{data:a,error:i}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new Xu("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(s=>s.kid===e),!n)throw new Xu("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=Tg(n);if(Q9(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:s},error:null}}const u=J9(a.alg),d=await this.fetchJwk(a.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,B9(`${o}.${c}`)))throw new Xu("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}}jd.nextInstanceID=0;const gL=jd;class vL extends gL{constructor(e){super(e)}}var xL=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};class yL{constructor(e,r,n){var a,i,s;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=_9(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:p9,realtime:g9,auth:Object.assign(Object.assign({},m9),{storageKey:u}),global:h9},f=k9(n??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=b9(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new L7(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new h7(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new u9(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return xL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:s,lock:o,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vL({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,flowType:s,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new K7(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Kt=(t,e,r)=>new yL(t,e,r),bL="https://jfvinriqydjtwsmayxix.supabase.co",wL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8",de=Kt(bL,wL,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),_L=t=>t?t.code==="PGRST116"?"Запись не найдена":t.code==="23505"?"Такая запись уже существует":t.code==="23503"?"Связанная запись не найдена":t.code==="row_level_security_violation"?"Недостаточно прав доступа":t.message?t.message:typeof t=="string"?t:"Произошла ошибка при выполнении операции":"Неизвестная ошибка",jn=(t,e=null,r)=>({data:t,error:e?_L(e):null,count:r}),u6=_.createContext(void 0),kL=({children:t})=>{const[e,r]=_.useState(()=>{const a=localStorage.getItem("theme");return a?a||"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});_.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const n=()=>{r(a=>a==="light"?"dark":"light")};return l.jsx(u6.Provider,{value:{theme:e,toggleTheme:n},children:t})},NL=()=>{const t=_.useContext(u6);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},gw=async()=>{try{const{data:t,error:e}=await de.from("sh_site_settings").select("*").eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(!e&&t)return jn(t);const{data:r,error:n}=await de.from("site_settings").select("*").limit(1).maybeSingle();return!n&&r?jn(r):(console.warn("Unable to fetch site settings, using defaults"),jn({site_title:"Science Hub",site_description:"Научное сообщество в Сербии",navigation_items:[{id:"1",label:"Главная",path:"/",visible:!0},{id:"2",label:"События",path:"/events",visible:!0},{id:"3",label:"Спикеры",path:"/speakers",visible:!0},{id:"4",label:"О нас",path:"/about",visible:!0},{id:"5",label:"Коворкинг",path:"/coworking",visible:!0},{id:"6",label:"Аренда",path:"/rent",visible:!0}],footer_settings:{email:"",phone:"",address:"",workingHours:"",socialLinks:{telegram:"",instagram:"",youtube:""}},topbar_settings:{height:"standard"}}))}catch(t){return console.error("Error fetching site settings:",t),jn({site_title:"Science Hub",site_description:"Научное сообщество в Сербии",navigation_items:[{id:"1",label:"Главная",path:"/",visible:!0},{id:"2",label:"События",path:"/events",visible:!0},{id:"3",label:"Спикеры",path:"/speakers",visible:!0},{id:"4",label:"О нас",path:"/about",visible:!0},{id:"5",label:"Коворкинг",path:"/coworking",visible:!0},{id:"6",label:"Аренда",path:"/rent",visible:!0}],footer_settings:{email:"",phone:"",address:"",workingHours:"",socialLinks:{telegram:"",instagram:"",youtube:""}},topbar_settings:{height:"standard"}})}},d6=async()=>{var t;try{const e=await gw();return e.error||!((t=e.data)!=null&&t.navigation_items)?jn([{id:"1",label:"Главная",path:"/",visible:!0},{id:"2",label:"События",path:"/events",visible:!0},{id:"3",label:"Спикеры",path:"/speakers",visible:!0},{id:"4",label:"О нас",path:"/about",visible:!0},{id:"5",label:"Коворкинг",path:"/coworking",visible:!0},{id:"6",label:"Аренда",path:"/rent",visible:!0}]):jn(e.data.navigation_items)}catch(e){return console.error("Error fetching navigation items:",e),jn([{id:"1",label:"Главная",path:"/",visible:!0},{id:"2",label:"События",path:"/events",visible:!0},{id:"3",label:"Спикеры",path:"/speakers",visible:!0},{id:"4",label:"О нас",path:"/about",visible:!0},{id:"5",label:"Коворкинг",path:"/coworking",visible:!0},{id:"6",label:"Аренда",path:"/rent",visible:!0}])}},SL=async()=>{var t;try{const e=await gw();return e.error||!((t=e.data)!=null&&t.footer_settings)?jn({email:"",phone:"",address:"",workingHours:"",socialLinks:{telegram:"",instagram:"",youtube:""}}):jn(e.data.footer_settings)}catch(e){return console.error("Error fetching footer settings:",e),jn({email:"",phone:"",address:"",workingHours:"",socialLinks:{telegram:"",instagram:"",youtube:""}})}},EL=async()=>{var t;try{const e=await gw();return e.error||!((t=e.data)!=null&&t.topbar_settings)?jn({height:"standard"}):jn(e.data.topbar_settings)}catch(e){return console.error("Error fetching topbar settings:",e),jn({height:"standard"})}},f6=({className:t="",inverted:e=!1})=>{const r=e?"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logo/logo_white_science_hub%20no_title.png":"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logo/logo_gray_science_hub%20no_title.png";return l.jsxs("div",{className:`flex items-center gap-2 ${t}`,children:[l.jsx("img",{src:r,alt:"ScienceHub Logo",className:"h-8 w-auto"}),l.jsx("span",{className:`font-heading font-bold text-xl ${e?"text-white":"text-dark-900 dark:text-white"}`,children:"ScienceHub"})]})},Mc=({isOpen:t,onClose:e,title:r,children:n,size:a="md"})=>{if(!t)return null;const i={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4 text-center",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:e}),l.jsxs("div",{className:`relative w-full ${i[a]} transform overflow-hidden rounded-lg bg-white dark:bg-dark-800 p-6 text-left shadow-xl transition-all`,children:[r&&l.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-medium",children:r}),l.jsx("button",{onClick:e,className:"rounded-full p-1 hover:bg-gray-100 dark:hover:bg-dark-700",children:l.jsx(Bt,{className:"h-5 w-5"})})]}),n]})]})})},vw=({isOpen:t,onClose:e})=>{const[r,n]=_.useState(""),[a,i]=_.useState(""),[s,o]=_.useState(""),[c,u]=_.useState(!1),[d,f]=_.useState(!1),[h,p]=_.useState(null),[m,g]=_.useState(!1),y=async v=>{v.preventDefault(),u(!0),p(null);try{if(m){const{error:b}=await de.auth.resetPasswordForEmail(r,{redirectTo:`${window.location.origin}/reset-password`});if(b)throw b;K.success("Инструкции по сбросу пароля отправлены на вашу почту"),g(!1)}else if(d){if(!s.trim()){p("Имя обязательно для заполнения"),u(!1);return}const{error:b}=await de.auth.signUp({email:r,password:a,options:{data:{name:s},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(b)throw b;K.success("Регистрация успешна! Проверьте почту для подтверждения.")}else{const{error:b}=await de.auth.signInWithPassword({email:r,password:a});if(b)throw b;K.success("Успешный вход"),e()}}catch(b){console.error("Auth error:",b),p(b.message||(d?"Ошибка регистрации":"Ошибка входа"))}finally{u(!1)}},x=()=>{n(""),i(""),o(""),p(null),g(!1)};return l.jsxs(Mc,{isOpen:t,onClose:()=>{e(),x()},title:m?"Сброс пароля":d?"Регистрация":"Вход в аккаунт",size:"md",children:[h&&l.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm flex items-start",children:[l.jsx(Sd,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:h})]}),l.jsxs("form",{onSubmit:y,className:"space-y-6",children:[!m&&d&&l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",className:"block font-medium mb-2",children:"Имя"}),l.jsxs("div",{className:"relative",children:[l.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",id:"name",value:s,onChange:v=>o(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-dark-600 dark:bg-dark-800",required:d})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",className:"block font-medium mb-2",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(ef,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"email",id:"email",value:r,onChange:v=>n(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-dark-600 dark:bg-dark-800",required:!0})]})]}),!m&&l.jsxs("div",{className:"form-group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{htmlFor:"password",className:"block font-medium",children:"Пароль"}),!d&&l.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:"Забыли пароль?"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"password",id:"password",value:a,onChange:v=>i(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-dark-600 dark:bg-dark-800",required:!0})]})]}),l.jsx("button",{type:"submit",disabled:c,className:"w-full btn-primary py-2",children:c?m?"Отправка...":d?"Регистрация...":"Вход...":m?"Отправить инструкции":d?"Зарегистрироваться":"Войти"}),m?l.jsx("button",{type:"button",onClick:()=>g(!1),className:"w-full text-center text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:"Вернуться к входу"}):l.jsx("button",{type:"button",onClick:()=>{f(!d),p(null)},className:"w-full text-center text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:d?"Уже есть аккаунт? Войти":"Создать аккаунт"})]})]})},CL={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},jL={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},Fk=({avatarUrl:t,name:e,size:r="md",className:n="",showFallback:a=!0})=>{const i=CL[r],s=jL[r];return l.jsx("div",{className:`${i} rounded-full overflow-hidden bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0 ${n}`,children:t?l.jsx("img",{src:t,alt:e||"User avatar",className:"w-full h-full object-cover",onError:o=>{const c=o.target;c.style.display="none"}}):a?l.jsx(Cn,{className:`${s} text-primary-600 dark:text-primary-400`}):null})},AL=({user:t,onLogout:e})=>{var i;const[r,n]=_.useState(!1),a=_.useRef(null);return _.useEffect(()=>{const s=o=>{a.current&&!a.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),l.jsxs("div",{className:"relative",ref:a,children:[l.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:[l.jsx(Fk,{avatarUrl:t.avatar,name:t.name||t.email,size:"sm"}),l.jsx(Cd,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})]}),r&&l.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-dark-800 rounded-lg shadow-lg py-2 z-50 border border-gray-200 dark:border-dark-700",children:[l.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-dark-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Fk,{avatarUrl:t.avatar,name:t.name||t.email,size:"md"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:t.name||((i=t.email)==null?void 0:i.split("@")[0])}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email}),t.role&&l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Роль: ",t.role]})]})]})}),l.jsxs(Be,{to:"/profile",className:"block w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",onClick:()=>n(!1),children:[l.jsx(Cn,{className:"h-4 w-4 inline mr-2"}),"Мой профиль"]}),t.role==="Admin"&&l.jsxs(Be,{to:"/admin",className:"block w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",onClick:()=>n(!1),children:[l.jsx(Vu,{className:"h-4 w-4 inline mr-2"}),"Панель управления"]}),l.jsxs("button",{onClick:()=>{e(),n(!1)},className:"block w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors text-red-600 dark:text-red-400",children:[l.jsx(Mj,{className:"h-4 w-4 inline mr-2"}),"Выйти"]})]})]})},TL=()=>{const[t,e]=_.useState(!1),[r,n]=_.useState(!1),[a,i]=_.useState(null),[s,o]=_.useState("standard"),{theme:c,toggleTheme:u}=NL(),d=Hi(),[f,h]=_.useState([]),p=_.useRef(null);_.useEffect(()=>{y(),x(),m();const{data:E}=de.auth.onAuthStateChange((I,N)=>{I==="SIGNED_IN"&&N?g(N.user.id):I==="SIGNED_OUT"&&i(null)}),j=I=>{p.current&&!p.current.contains(I.target)&&e(!1)};return document.addEventListener("mousedown",j),()=>{E.subscription.unsubscribe(),document.removeEventListener("mousedown",j)}},[]);const m=async()=>{try{const{data:{session:E}}=await de.auth.getSession();E&&g(E.user.id)}catch(E){console.error("Error checking user session:",E)}},g=async E=>{var j,I;try{const{data:N,error:T}=await de.from("profiles").select("*").eq("id",E).single();T&&console.warn("Error fetching user profile:",T);const{data:{session:F}}=await de.auth.getSession();i({id:E,email:(F==null?void 0:F.user.email)||"",name:(N==null?void 0:N.name)||((j=F==null?void 0:F.user.user_metadata)==null?void 0:j.name),role:N==null?void 0:N.role,avatar:N==null?void 0:N.avatar})}catch(N){console.error("Error fetching user profile:",N);const{data:{session:T}}=await de.auth.getSession();T&&i({id:T.user.id,email:T.user.email||"",name:(I=T.user.user_metadata)==null?void 0:I.name})}},y=async()=>{try{const E=await d6();E.data&&h(E.data)}catch(E){console.error("Error fetching navigation items:",E),h([{id:"1",label:"Главная",path:"/",visible:!0},{id:"2",label:"События",path:"/events",visible:!0},{id:"3",label:"Спикеры",path:"/speakers",visible:!0},{id:"4",label:"О нас",path:"/about",visible:!0},{id:"5",label:"Коворкинг",path:"/coworking",visible:!0},{id:"6",label:"Аренда",path:"/rent",visible:!0}])}},x=async()=>{var E;try{const j=await EL();(E=j.data)!=null&&E.height&&o(j.data.height)}catch(j){console.error("Error fetching topbar settings:",j)}},v=async()=>{try{await de.auth.signOut()}catch(E){console.error("Error signing out:",E)}},b=f.filter(E=>E.visible),w=`topbar-${s}`,S=()=>{switch(s){case"compact":return"top-12";case"standard":return"top-14";case"large":return"top-20";default:return"top-16"}};return l.jsxs("header",{className:`topbar ${w}`,children:[l.jsxs("div",{className:"container flex items-center justify-between",children:[l.jsx(Be,{to:"/",className:"flex items-center",onClick:()=>e(!1),children:l.jsx(f6,{className:"h-10 w-auto",inverted:c==="dark"})}),l.jsx("nav",{className:"hidden md:flex items-center justify-center flex-1 space-x-8",children:b.map(E=>l.jsx(Be,{to:E.path,className:`font-medium relative py-4 ${d.pathname===E.path?'text-primary dark:text-primary-400 after:content-[""] after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-primary-600 dark:after:bg-primary-400':"hover:text-primary dark:hover:text-primary-400"}`,children:E.label},E.id))}),l.jsxs("div",{className:"flex md:flex-none items-center gap-4",children:[l.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-dark-100 dark:hover:bg-dark-800","aria-label":c==="dark"?"Switch to light mode":"Switch to dark mode",children:c==="dark"?l.jsx(n7,{className:"h-5 w-5"}):l.jsx(YM,{className:"h-5 w-5"})}),a?l.jsx(AL,{user:a,onLogout:v}):l.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 p-2 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-md",children:[l.jsx(XM,{className:"h-5 w-5"}),l.jsx("span",{className:"hidden sm:inline",children:"Войти"})]}),l.jsx("button",{onClick:()=>e(!t),className:"p-2 md:hidden rounded-md text-dark-900 dark:text-white hover:bg-dark-100 dark:hover:bg-dark-800","aria-expanded":t,"aria-label":"Toggle menu",children:t?l.jsx(Bt,{className:"h-6 w-6"}):l.jsx(Jx,{className:"h-6 w-6"})})]}),t&&l.jsx("div",{ref:p,className:`mobile-menu md:hidden absolute ${S()} left-0 right-0 bg-white dark:bg-dark-900 shadow-lg z-50 animate-fade-in`,children:l.jsxs("nav",{className:"container py-5 flex flex-col space-y-4",children:[b.map(E=>l.jsx(Be,{to:E.path,className:`py-2 font-medium ${d.pathname===E.path?"text-primary-600 dark:text-primary-400":"hover:text-primary-600 dark:hover:text-primary-400"}`,onClick:()=>e(!1),children:E.label},E.id)),!a&&l.jsx("button",{onClick:()=>{n(!0),e(!1)},className:"py-2 font-medium text-left text-primary-600 dark:text-primary-400",children:"Войти / Зарегистрироваться"}),a&&l.jsxs(l.Fragment,{children:[l.jsx(Be,{to:"/profile",className:"py-2 font-medium hover:text-primary-600 dark:hover:text-primary-400",onClick:()=>e(!1),children:"Мой профиль"}),a.role==="Admin"&&l.jsx(Be,{to:"/admin",className:"py-2 font-medium hover:text-primary-600 dark:hover:text-primary-400",onClick:()=>e(!1),children:"Панель управления"}),l.jsx("button",{onClick:()=>{v(),e(!1)},className:"py-2 font-medium text-left text-red-600 dark:text-red-400",children:"Выйти"})]})]})})]}),l.jsx(vw,{isOpen:r,onClose:()=>n(!1)})]})};function IL(){const[t,e]=_.useState({email:"",phone:"",address:"",workingHours:"",socialLinks:{telegram:"",instagram:"",youtube:""}}),[r,n]=_.useState([]);_.useEffect(()=>{(async()=>{try{const s=await SL();s.data&&e({...t,...s.data});const o=await d6();if(o.data){const c=o.data.filter(u=>u.visible).sort((u,d)=>(u.order||0)-(d.order||0));n(c)}}catch(s){console.error("Error fetching footer data:",s),n([{id:"1",label:"Главная",path:"/",visible:!0},{id:"2",label:"События",path:"/events",visible:!0},{id:"3",label:"Спикеры",path:"/speakers",visible:!0},{id:"4",label:"О нас",path:"/about",visible:!0},{id:"5",label:"Коворкинг",path:"/coworking",visible:!0},{id:"6",label:"Аренда",path:"/rent",visible:!0}])}})()},[]);const a=i=>({telegram:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/tg-logo-100x100.png",instagram:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/ist-logo-100x100.png",youtube:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/yt_100x100.png"})[i];return l.jsx("footer",{className:"bg-dark-900 border-t border-dark-700",children:l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{children:[l.jsx(f6,{className:"h-10 w-auto mb-4",inverted:!0}),l.jsx("p",{className:"text-dark-300 mb-6 leading-relaxed",children:"Рассказываем в Сербии о науке легко и интересно через кинопоказы, лекции, фестивали, квизы, экскурсии. Помогаем понять, как устроен мир, и найти единомышленников."}),Object.entries(t.socialLinks).some(([i,s])=>s)&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Мы в соцсетях"}),l.jsx("div",{className:"flex gap-4",children:Object.entries(t.socialLinks).map(([i,s])=>{if(!s)return null;const o=a(i);return o?l.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"hover:scale-110 transition-transform duration-200",title:i.charAt(0).toUpperCase()+i.slice(1),children:l.jsx("img",{src:o,alt:i,className:"w-8 h-8 object-contain"})},i):null})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Навигация"}),l.jsx("ul",{className:"space-y-2",children:r.map(i=>l.jsx("li",{children:l.jsx(Be,{to:i.path,className:"text-dark-300 hover:text-white transition-colors duration-200",children:i.label})},i.id))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Контакты"}),l.jsxs("ul",{className:"space-y-3",children:[t.email&&l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(IM,{className:"h-5 w-5 mt-0.5 text-primary-400 flex-shrink-0"}),l.jsx("a",{href:`mailto:${t.email}`,className:"text-dark-300 hover:text-white transition-colors duration-200",children:t.email})]}),t.phone&&l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(T0,{className:"h-5 w-5 mt-0.5 text-primary-400 flex-shrink-0"}),l.jsx("a",{href:`tel:${t.phone}`,className:"text-dark-300 hover:text-white transition-colors duration-200",children:t.phone})]}),t.address&&l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(vr,{className:"h-5 w-5 mt-0.5 text-primary-400 flex-shrink-0"}),l.jsx("span",{className:"text-dark-300",children:t.address})]}),t.workingHours&&l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(qM,{className:"h-5 w-5 mt-0.5 text-primary-400 flex-shrink-0"}),l.jsx("span",{className:"text-dark-300",children:t.workingHours})]})]})]})]}),l.jsx("div",{className:"mt-8 pt-8 border-t border-dark-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("p",{className:"text-dark-400 text-sm",children:["© ",new Date().getFullYear()," ScienceHub. Все права защищены."]}),l.jsx("p",{className:"text-dark-400 text-sm mt-2 md:mt-0",children:"Сделано с ❤️ для научного сообщества"})]})})]})})}const Ot=({children:t})=>l.jsxs("div",{className:"flex flex-col min-h-screen",children:[l.jsx(TL,{}),l.jsx("main",{className:"flex-grow",children:t}),l.jsx(IL,{})]}),zt=t=>t?t.startsWith("http")?t:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${t}`:"",OL=async(t,e={})=>{try{const r=(await Dc(async()=>{const{default:s}=await import("./browser-image-compression-CBVwGt6Q.js");return{default:s}},[])).default,a={...{maxWidthOrHeight:5e3,maxSizeMB:5,useWebWorker:!0,fileType:"image/jpeg"},...e};return await r(t,a)}catch(r){return console.error("Error compressing image:",r),t}},DL=(t,e="")=>{const r=Date.now(),n=Math.random().toString(36).substring(2,8),a=t.name.split(".").pop()||"jpg";return`${e}${r}_${n}.${a}`},eu={style:"centered",centered:{title:"ScienceHub",subtitle:"Место для научного сообщества",logoLight:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logo/logo_science_hub%20no_title.png",logoDark:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logo/logo_white_science_hub%20no_title.png",logoSize:150},slideshow:{slides:[],settings:{autoplaySpeed:5e3,transition:"fade"}}},PL=({height:t=400})=>{const[e,r]=_.useState(eu),[n,a]=_.useState(0),[i,s]=_.useState(!0),[o,c]=_.useState(null);_.useRef(null);const u=_.useRef(),d=typeof t=="number"?`${t}px`:t,f=e.centered.logoSize?`${e.centered.logoSize}px`:"150px";_.useEffect(()=>{if(e.style!=="slideshow"||e.slideshow.slides.length<=1)return;const g=()=>{u.current=setInterval(()=>{p()},e.slideshow.settings.autoplaySpeed)},y=()=>{u.current&&clearInterval(u.current)};return g(),()=>y()},[e,n]);const h=g=>{a(g)},p=()=>{a(g=>(g+1)%e.slideshow.slides.length)},m=()=>{a(g=>g===0?e.slideshow.slides.length-1:g-1)};return _.useEffect(()=>{let g=!0;return(async()=>{var x;try{s(!0);const{data:v,error:b}=await de.from("site_settings").select("header_settings").single();if(!g)return;if(b)throw b;v!=null&&v.header_settings&&r({...eu,...v.header_settings,slideshow:{...eu.slideshow,...v.header_settings.slideshow,settings:{...eu.slideshow.settings,...(x=v.header_settings.slideshow)==null?void 0:x.settings}},centered:{...eu.centered,...v.header_settings.centered}})}catch(v){console.error("Error fetching header settings:",v),g&&c("Не удалось загрузить данные заголовка")}finally{g&&s(!1)}})(),()=>{g=!1}},[]),i?l.jsx("section",{className:"relative flex items-center justify-center bg-gray-100 dark:bg-dark-800",style:{height:d},children:l.jsx("div",{className:"text-center",children:"Загрузка..."})}):o?l.jsx("section",{className:"relative flex items-center justify-center bg-gray-100 dark:bg-dark-800",style:{height:d},children:l.jsx("div",{className:"text-center text-red-500",children:o})}):e.style==="slideshow"&&e.slideshow.slides.length>0?l.jsxs("section",{className:"relative overflow-hidden",style:{height:d},children:[l.jsx("div",{className:"relative h-full w-full",children:l.jsx("div",{className:"flex h-full transition-transform duration-500",style:{transform:`translateX(-${n*100}%)`,width:`${e.slideshow.slides.length*100}%`},children:e.slideshow.slides.map((g,y)=>l.jsxs("div",{className:"relative w-full h-full",style:{flex:`0 0 ${100/e.slideshow.slides.length}%`},children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("img",{src:zt(g.image),alt:"",className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}),l.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),l.jsx("div",{className:"relative h-full flex flex-col items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center text-center px-4",children:[l.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-4 text-white",children:g.title}),l.jsx("p",{className:"text-lg md:text-xl text-white/90 max-w-2xl",children:g.subtitle})]})})]},g.id))})}),l.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2",children:e.slideshow.slides.map((g,y)=>l.jsx("button",{onClick:()=>h(y),className:`w-2 h-2 rounded-full transition-all duration-300 ${y===n?"bg-white scale-125":"bg-white/50 hover:bg-white/75"}`,"aria-label":`Go to slide ${y+1}`},y))}),e.slideshow.slides.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:m,className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/30 hover:bg-black/50 text-white transition-colors","aria-label":"Previous slide",children:l.jsx(fa,{className:"rotate-180"})}),l.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/30 hover:bg-black/50 text-white transition-colors","aria-label":"Next slide",children:l.jsx(fa,{})})]})]}):l.jsx("section",{className:"relative flex items-center justify-center bg-gray-50 dark:bg-dark-900",style:{height:d},children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[l.jsxs("div",{className:"w-full flex items-center justify-center mb-8",style:{height:f},children:[l.jsx("img",{src:e.centered.logoLight,alt:"ScienceHub Logo",className:"h-full w-auto object-contain dark:hidden",loading:"lazy",decoding:"async"}),l.jsx("img",{src:e.centered.logoDark,alt:"ScienceHub Logo",className:"h-full w-auto object-contain hidden dark:block",loading:"lazy",decoding:"async"})]}),l.jsxs("div",{className:"text-center px-4 max-w-2xl",children:[l.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-4",children:e.centered.title}),l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 dark:text-gray-300",children:e.centered.subtitle})]})]})})},RL=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(!0),[a,i]=_.useState(null),s=_.useRef(null),o=_.useRef(null),c=_.useRef(null);return _.useEffect(()=>{let u=!0;return(async()=>{try{const{data:f,error:h}=await de.from("site_settings").select("info_section").single();if(!u)return;if(h)throw h;f!=null&&f.info_section&&e(f.info_section)}catch(f){console.error("Error fetching info section data:",f),u&&i("Не удалось загрузить данные")}finally{u&&n(!1)}})(),()=>{u=!1}},[]),_.useEffect(()=>{if(!(t!=null&&t.image)||!s.current)return;const u=new IntersectionObserver(d=>{d.forEach(f=>{if(f.isIntersecting){const h=f.target;h.src=h.dataset.src||"",u.unobserve(h)}})},{rootMargin:"200px",threshold:.1});return u.observe(s.current),()=>{s.current&&u.unobserve(s.current)}},[t==null?void 0:t.image]),_.useEffect(()=>{if(!o.current||!c.current)return;const u=new ResizeObserver(d=>{for(let f of d)f.target===o.current&&(c.current.style.height=`${f.contentRect.height}px`)});return u.observe(o.current),()=>{u.disconnect()}},[t]),r?l.jsx("div",{className:"section bg-white dark:bg-dark-900 min-h-[400px] flex items-center justify-center",children:"Загрузка..."}):a?l.jsx("div",{className:"section bg-white dark:bg-dark-900 min-h-[400px] flex items-center justify-center text-red-500",children:a}):!t||!t.enabled?null:l.jsx("section",{className:"section bg-white dark:bg-dark-900",children:l.jsxs("div",{className:"container grid-layout items-start",children:[l.jsxs("div",{className:"text-content",ref:o,children:[l.jsx("h3",{className:"mb-6",children:t.title}),l.jsx("div",{className:"text-base space-y-4 mb-8",dangerouslySetInnerHTML:{__html:t.description}}),l.jsxs(Be,{to:"/about",className:"inline-flex items-center text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300 transition-colors font-medium",children:["Подробнее",l.jsx(fa,{className:"ml-2"})]})]}),l.jsx("div",{className:"image-content mt-8 md:mt-0",ref:c,children:l.jsx("div",{className:"w-full h-full rounded-lg overflow-hidden relative",children:l.jsx("img",{ref:s,"data-src":zt(t.image),alt:t.title,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy",width:"600",height:"400"})})})]})})};function Vo(t){"@babel/helpers - typeof";return Vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo(t)}function Fr(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ge(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ht(t){Ge(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Vo(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Yu(t,e){Ge(2,arguments);var r=ht(t),n=Fr(e);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function c1(t,e){Ge(2,arguments);var r=ht(t),n=Fr(e);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),i=new Date(r.getTime());i.setMonth(r.getMonth()+n+1,0);var s=i.getDate();return a>=s?i:(r.setFullYear(i.getFullYear(),i.getMonth(),a),r)}function ML(t,e){Ge(2,arguments);var r=ht(t).getTime(),n=Fr(e);return new Date(r+n)}var LL={};function Lc(){return LL}function Vh(t,e){var r,n,a,i,s,o,c,u;Ge(1,arguments);var d=Lc(),f=Fr((r=(n=(a=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ht(t),p=h.getDay(),m=(p<f?7:0)+p-f;return h.setDate(h.getDate()-m),h.setHours(0,0,0,0),h}function BL(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function $k(t){Ge(1,arguments);var e=ht(t);return e.setHours(0,0,0,0),e}function FL(t,e){Ge(2,arguments);var r=Fr(e),n=r*7;return Yu(t,n)}var h6=6e4,p6=36e5;function Ku(t,e){Ge(2,arguments);var r=$k(t),n=$k(e);return r.getTime()===n.getTime()}function $L(t){return Ge(1,arguments),t instanceof Date||Vo(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function UL(t){if(Ge(1,arguments),!$L(t)&&typeof t!="number")return!1;var e=ht(t);return!isNaN(Number(e))}function xw(t){Ge(1,arguments);var e=ht(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Gh(t,e){var r;Ge(1,arguments);var n=t||{},a=ht(n.start),i=ht(n.end),s=i.getTime();if(!(a.getTime()<=s))throw new RangeError("Invalid interval");var o=[],c=a;c.setHours(0,0,0,0);var u=Number((r=void 0)!==null&&r!==void 0?r:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=s;)o.push(ht(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return o}function Ad(t){Ge(1,arguments);var e=ht(t);return e.setDate(1),e.setHours(0,0,0,0),e}function u1(t,e){var r,n,a,i,s,o,c,u;Ge(1,arguments);var d=Lc(),f=Fr((r=(n=(a=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ht(t),p=h.getDay(),m=(p<f?-7:0)+6-(p-f);return h.setDate(h.getDate()+m),h.setHours(23,59,59,999),h}function zL(t,e){Ge(2,arguments);var r=Fr(e);return ML(t,-r)}var HL=864e5;function WL(t){Ge(1,arguments);var e=ht(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),a=r-n;return Math.floor(a/HL)+1}function D0(t){Ge(1,arguments);var e=1,r=ht(t),n=r.getUTCDay(),a=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function m6(t){Ge(1,arguments);var e=ht(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=D0(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var s=D0(i);return e.getTime()>=a.getTime()?r+1:e.getTime()>=s.getTime()?r:r-1}function VL(t){Ge(1,arguments);var e=m6(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=D0(r);return n}var GL=6048e5;function XL(t){Ge(1,arguments);var e=ht(t),r=D0(e).getTime()-VL(e).getTime();return Math.round(r/GL)+1}function pc(t,e){var r,n,a,i,s,o,c,u;Ge(1,arguments);var d=Lc(),f=Fr((r=(n=(a=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ht(t),p=h.getUTCDay(),m=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-m),h.setUTCHours(0,0,0,0),h}function g6(t,e){var r,n,a,i,s,o,c,u;Ge(1,arguments);var d=ht(t),f=d.getUTCFullYear(),h=Lc(),p=Fr((r=(n=(a=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(f+1,0,p),m.setUTCHours(0,0,0,0);var g=pc(m,e),y=new Date(0);y.setUTCFullYear(f,0,p),y.setUTCHours(0,0,0,0);var x=pc(y,e);return d.getTime()>=g.getTime()?f+1:d.getTime()>=x.getTime()?f:f-1}function qL(t,e){var r,n,a,i,s,o,c,u;Ge(1,arguments);var d=Lc(),f=Fr((r=(n=(a=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=g6(t,e),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var m=pc(p,e);return m}var YL=6048e5;function KL(t,e){Ge(1,arguments);var r=ht(t),n=pc(r,e).getTime()-qL(r,e).getTime();return Math.round(n/YL)+1}function ot(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var Yi={y:function(e,r){var n=e.getUTCFullYear(),a=n>0?n:1-n;return ot(r==="yy"?a%100:a,r.length)},M:function(e,r){var n=e.getUTCMonth();return r==="M"?String(n+1):ot(n+1,2)},d:function(e,r){return ot(e.getUTCDate(),r.length)},a:function(e,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,r){return ot(e.getUTCHours()%12||12,r.length)},H:function(e,r){return ot(e.getUTCHours(),r.length)},m:function(e,r){return ot(e.getUTCMinutes(),r.length)},s:function(e,r){return ot(e.getUTCSeconds(),r.length)},S:function(e,r){var n=r.length,a=e.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return ot(i,r.length)}},ml={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ZL={G:function(e,r,n){var a=e.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){var a=e.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Yi.y(e,r)},Y:function(e,r,n,a){var i=g6(e,a),s=i>0?i:1-i;if(r==="YY"){var o=s%100;return ot(o,2)}return r==="Yo"?n.ordinalNumber(s,{unit:"year"}):ot(s,r.length)},R:function(e,r){var n=m6(e);return ot(n,r.length)},u:function(e,r){var n=e.getUTCFullYear();return ot(n,r.length)},Q:function(e,r,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return ot(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,r,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return ot(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,r,n){var a=e.getUTCMonth();switch(r){case"M":case"MM":return Yi.M(e,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,r,n){var a=e.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return ot(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,r,n,a){var i=KL(e,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):ot(i,r.length)},I:function(e,r,n){var a=XL(e);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):ot(a,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Yi.d(e,r)},D:function(e,r,n){var a=WL(e);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):ot(a,r.length)},E:function(e,r,n){var a=e.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,r,n,a){var i=e.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return ot(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,r,n,a){var i=e.getUTCDay(),s=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return ot(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,r,n){var a=e.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return ot(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,r,n){var a=e.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,r,n){var a=e.getUTCHours(),i;switch(a===12?i=ml.noon:a===0?i=ml.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,r,n){var a=e.getUTCHours(),i;switch(a>=17?i=ml.evening:a>=12?i=ml.afternoon:a>=4?i=ml.morning:i=ml.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){var a=e.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Yi.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Yi.H(e,r)},K:function(e,r,n){var a=e.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):ot(a,r.length)},k:function(e,r,n){var a=e.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):ot(a,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Yi.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Yi.s(e,r)},S:function(e,r){return Yi.S(e,r)},X:function(e,r,n,a){var i=a._originalDate||e,s=i.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return zk(s);case"XXXX":case"XX":return fo(s);case"XXXXX":case"XXX":default:return fo(s,":")}},x:function(e,r,n,a){var i=a._originalDate||e,s=i.getTimezoneOffset();switch(r){case"x":return zk(s);case"xxxx":case"xx":return fo(s);case"xxxxx":case"xxx":default:return fo(s,":")}},O:function(e,r,n,a){var i=a._originalDate||e,s=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Uk(s,":");case"OOOO":default:return"GMT"+fo(s,":")}},z:function(e,r,n,a){var i=a._originalDate||e,s=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Uk(s,":");case"zzzz":default:return"GMT"+fo(s,":")}},t:function(e,r,n,a){var i=a._originalDate||e,s=Math.floor(i.getTime()/1e3);return ot(s,r.length)},T:function(e,r,n,a){var i=a._originalDate||e,s=i.getTime();return ot(s,r.length)}};function Uk(t,e){var r=t>0?"-":"+",n=Math.abs(t),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var s=e;return r+String(a)+s+ot(i,2)}function zk(t,e){if(t%60===0){var r=t>0?"-":"+";return r+ot(Math.abs(t)/60,2)}return fo(t,e)}function fo(t,e){var r=e||"",n=t>0?"-":"+",a=Math.abs(t),i=ot(Math.floor(a/60),2),s=ot(a%60,2);return n+i+r+s}var Hk=function(e,r){switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},v6=function(e,r){switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},QL=function(e,r){var n=e.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return Hk(e,r);var s;switch(a){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",Hk(a,r)).replace("{{time}}",v6(i,r))},JL={p:v6,P:QL},eB=["D","DD"],tB=["YY","YYYY"];function rB(t){return eB.indexOf(t)!==-1}function nB(t){return tB.indexOf(t)!==-1}function Wk(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var aB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iB=function(e,r,n){var a,i=aB[e];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function Kl(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var sB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cB={date:Kl({formats:sB,defaultWidth:"full"}),time:Kl({formats:oB,defaultWidth:"full"}),dateTime:Kl({formats:lB,defaultWidth:"full"})},uB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dB=function(e,r,n,a){return uB[e]};function Va(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,s=r!=null&&r.width?String(r.width):i;a=t.formattingValues[s]||t.formattingValues[i]}else{var o=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[c]||t.values[o]}var u=t.argumentCallback?t.argumentCallback(e):e;return a[u]}}var fB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xB=function(e,r){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},yB={ordinalNumber:xB,era:Va({values:fB,defaultWidth:"wide"}),quarter:Va({values:hB,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Va({values:pB,defaultWidth:"wide"}),day:Va({values:mB,defaultWidth:"wide"}),dayPeriod:Va({values:gB,defaultWidth:"wide",formattingValues:vB,defaultFormattingWidth:"wide"})};function Ga(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;var s=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?wB(o,function(f){return f.test(s)}):bB(o,function(f){return f.test(s)}),u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=e.slice(s.length);return{value:u,rest:d}}}function bB(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function wB(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function x6(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var a=n[0],i=e.match(t.parsePattern);if(!i)return null;var s=t.valueCallback?t.valueCallback(i[0]):i[0];s=r.valueCallback?r.valueCallback(s):s;var o=e.slice(a.length);return{value:s,rest:o}}}var _B=/^(\d+)(th|st|nd|rd)?/i,kB=/\d+/i,NB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},SB={any:[/^b/i,/^(a|c)/i]},EB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},CB={any:[/1/i,/2/i,/3/i,/4/i]},jB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},OB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},PB={ordinalNumber:x6({matchPattern:_B,parsePattern:kB,valueCallback:function(e){return parseInt(e,10)}}),era:Ga({matchPatterns:NB,defaultMatchWidth:"wide",parsePatterns:SB,defaultParseWidth:"any"}),quarter:Ga({matchPatterns:EB,defaultMatchWidth:"wide",parsePatterns:CB,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ga({matchPatterns:jB,defaultMatchWidth:"wide",parsePatterns:AB,defaultParseWidth:"any"}),day:Ga({matchPatterns:TB,defaultMatchWidth:"wide",parsePatterns:IB,defaultParseWidth:"any"}),dayPeriod:Ga({matchPatterns:OB,defaultMatchWidth:"any",parsePatterns:DB,defaultParseWidth:"any"})},RB={code:"en-US",formatDistance:iB,formatLong:cB,formatRelative:dB,localize:yB,match:PB,options:{weekStartsOn:0,firstWeekContainsDate:1}},MB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,BB=/^'([^]*?)'?$/,FB=/''/g,$B=/[a-zA-Z]/;function lt(t,e,r){var n,a,i,s,o,c,u,d,f,h,p,m,g,y,x,v,b,w;Ge(2,arguments);var S=String(e),E=Lc(),j=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:E.locale)!==null&&n!==void 0?n:RB,I=Fr((i=(s=(o=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&o!==void 0?o:E.firstWeekContainsDate)!==null&&s!==void 0?s:(f=E.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Fr((p=(m=(g=(y=r==null?void 0:r.weekStartsOn)!==null&&y!==void 0?y:r==null||(x=r.locale)===null||x===void 0||(v=x.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&g!==void 0?g:E.weekStartsOn)!==null&&m!==void 0?m:(b=E.locale)===null||b===void 0||(w=b.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&p!==void 0?p:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!j.localize)throw new RangeError("locale must contain localize property");if(!j.formatLong)throw new RangeError("locale must contain formatLong property");var T=ht(t);if(!UL(T))throw new RangeError("Invalid time value");var F=BL(T),C=zL(T,F),A={firstWeekContainsDate:I,weekStartsOn:N,locale:j,_originalDate:T},k=S.match(LB).map(function(O){var $=O[0];if($==="p"||$==="P"){var D=JL[$];return D(O,j.formatLong)}return O}).join("").match(MB).map(function(O){if(O==="''")return"'";var $=O[0];if($==="'")return UB(O);var D=ZL[$];if(D)return!(r!=null&&r.useAdditionalWeekYearTokens)&&nB(O)&&Wk(O,e,String(t)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&rB(O)&&Wk(O,e,String(t)),D(C,O,j.localize,A);if($.match($B))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return O}).join("");return k}function UB(t){var e=t.match(BB);return e?e[1].replace(FB,"'"):t}function zB(t){Ge(1,arguments);var e=ht(t),r=e.getDay();return r}function HB(t,e){Ge(2,arguments);var r=ht(t),n=ht(e);return r.getTime()<n.getTime()}function d1(t,e){return d1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},d1(t,e)}function WB(t,e){if(Vo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VB(t){var e=WB(t,"string");return Vo(e)=="symbol"?e:e+""}function GB(t,e,r){return(e=VB(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vk(t){return Ge(1,arguments),ht(t).getTime()<Date.now()}function y6(t,e){Ge(2,arguments);var r=ht(t),n=ht(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function tu(t){return Ge(1,arguments),Ku(t,Date.now())}function Gk(t,e){Ge(2,arguments);var r=Fr(e);return Yu(t,-r)}function ji(t,e){var r;Ge(1,arguments);var n=Fr((r=void 0)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=KB(t),i;if(a.date){var s=ZB(a.date,n);i=QB(s.restDateString,s.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var o=i.getTime(),c=0,u;if(a.time&&(c=JB(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(u=eF(a.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(o+c),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(o+c+u)}var nh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},XB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,qB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,YB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function KB(t){var e={},r=t.split(nh.dateTimeDelimiter),n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],nh.timeZoneDelimiter.test(e.date)&&(e.date=t.split(nh.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){var a=nh.timezone.exec(n);a?(e.time=n.replace(a[1],""),e.timezone=a[1]):e.time=n}return e}function ZB(t,e){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function QB(t,e){if(e===null)return new Date(NaN);var r=t.match(XB);if(!r)return new Date(NaN);var n=!!r[4],a=ru(r[1]),i=ru(r[2])-1,s=ru(r[3]),o=ru(r[4]),c=ru(r[5])-1;if(n)return iF(e,o,c)?tF(e,o,c):new Date(NaN);var u=new Date(0);return!nF(e,i,s)||!aF(e,a)?new Date(NaN):(u.setUTCFullYear(e,i,Math.max(a,s)),u)}function ru(t){return t?parseInt(t):1}function JB(t){var e=t.match(qB);if(!e)return NaN;var r=Og(e[1]),n=Og(e[2]),a=Og(e[3]);return sF(r,n,a)?r*p6+n*h6+a*1e3:NaN}function Og(t){return t&&parseFloat(t.replace(",","."))||0}function eF(t){if(t==="Z")return 0;var e=t.match(YB);if(!e)return 0;var r=e[1]==="+"?-1:1,n=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return oF(n,a)?r*(n*p6+a*h6):NaN}function tF(t,e,r){var n=new Date(0);n.setUTCFullYear(t,0,4);var a=n.getUTCDay()||7,i=(e-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var rF=[31,null,31,30,31,30,31,31,30,31,30,31];function b6(t){return t%400===0||t%4===0&&t%100!==0}function nF(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(rF[e]||(b6(t)?29:28))}function aF(t,e){return e>=1&&e<=(b6(t)?366:365)}function iF(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function sF(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function oF(t,e){return e>=0&&e<=59}function lF(t,e){Ge(2,arguments);var r=ht(t),n=Fr(e);return r.setHours(n),r}function cF(t,e){Ge(2,arguments);var r=ht(t),n=Fr(e);return r.setMinutes(n),r}function Xk(t,e,r){Ge(2,arguments);var n=pc(t,r),a=pc(e,r);return n.getTime()===a.getTime()}function nu(t,e){if(t.one!==void 0&&e===1)return t.one;var r=e%10,n=e%100;return r===1&&n!==11?t.singularNominative.replace("{{count}}",String(e)):r>=2&&r<=4&&(n<10||n>20)?t.singularGenitive.replace("{{count}}",String(e)):t.pluralGenitive.replace("{{count}}",String(e))}function zr(t){return function(e,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?t.future?nu(t.future,e):"через "+nu(t.regular,e):t.past?nu(t.past,e):nu(t.regular,e)+" назад":nu(t.regular,e)}}var uF={lessThanXSeconds:zr({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:zr({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(e,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:zr({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:zr({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:zr({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:zr({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:zr({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:zr({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:zr({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:zr({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:zr({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:zr({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:zr({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:zr({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:zr({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},dF=function(e,r,n){return uF[e](r,n)},fF={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},hF={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},pF={any:"{{date}}, {{time}}"},mF={date:Kl({formats:fF,defaultWidth:"full"}),time:Kl({formats:hF,defaultWidth:"full"}),dateTime:Kl({formats:pF,defaultWidth:"any"})},yw=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function gF(t){var e=yw[t];switch(t){case 0:return"'в прошлое "+e+" в' p";case 1:case 2:case 4:return"'в прошлый "+e+" в' p";case 3:case 5:case 6:return"'в прошлую "+e+" в' p"}}function qk(t){var e=yw[t];return t===2?"'во "+e+" в' p":"'в "+e+" в' p"}function vF(t){var e=yw[t];switch(t){case 0:return"'в следующее "+e+" в' p";case 1:case 2:case 4:return"'в следующий "+e+" в' p";case 3:case 5:case 6:return"'в следующую "+e+" в' p"}}var xF={lastWeek:function(e,r,n){var a=e.getUTCDay();return Xk(e,r,n)?qk(a):gF(a)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:function(e,r,n){var a=e.getUTCDay();return Xk(e,r,n)?qk(a):vF(a)},other:"P"},yF=function(e,r,n,a){var i=xF[e];return typeof i=="function"?i(r,n,a):i},bF={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},wF={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},_F={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},kF={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},NF={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},SF={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},EF={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},CF=function(e,r){var n=Number(e),a=r==null?void 0:r.unit,i;return a==="date"?i="-е":a==="week"||a==="minute"||a==="second"?i="-я":i="-й",n+i},jF={ordinalNumber:CF,era:Va({values:bF,defaultWidth:"wide"}),quarter:Va({values:wF,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Va({values:_F,defaultWidth:"wide",formattingValues:kF,defaultFormattingWidth:"wide"}),day:Va({values:NF,defaultWidth:"wide"}),dayPeriod:Va({values:SF,defaultWidth:"any",formattingValues:EF,defaultFormattingWidth:"wide"})},AF=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,TF=/\d+/i,IF={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},OF={any:[/^д/i,/^н/i]},DF={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},PF={any:[/1/i,/2/i,/3/i,/4/i]},RF={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},MF={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},LF={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},BF={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},FF={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},$F={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},UF={ordinalNumber:x6({matchPattern:AF,parsePattern:TF,valueCallback:function(e){return parseInt(e,10)}}),era:Ga({matchPatterns:IF,defaultMatchWidth:"wide",parsePatterns:OF,defaultParseWidth:"any"}),quarter:Ga({matchPatterns:DF,defaultMatchWidth:"wide",parsePatterns:PF,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ga({matchPatterns:RF,defaultMatchWidth:"wide",parsePatterns:MF,defaultParseWidth:"any"}),day:Ga({matchPatterns:LF,defaultMatchWidth:"wide",parsePatterns:BF,defaultParseWidth:"any"}),dayPeriod:Ga({matchPatterns:FF,defaultMatchWidth:"wide",parsePatterns:$F,defaultParseWidth:"any"})},na={code:"ru",formatDistance:dF,formatLong:mF,formatRelative:yF,localize:jF,match:UF,options:{weekStartsOn:1,firstWeekContainsDate:1}},f1={exports:{}},w6={exports:{}};(function(t){function e(r){return r&&r.__esModule?r:{default:r}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(w6);var $t=w6.exports,h1={exports:{}},p1={exports:{}},_6={exports:{}};(function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(_6);var k6=_6.exports,m1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n,a){if(a.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+a.length+" present")}t.exports=e.default})(m1,m1.exports);var nn=m1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=r(k6),a=r(nn);function i(s){return(0,a.default)(1,arguments),s instanceof Date||(0,n.default)(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}t.exports=e.default})(p1,p1.exports);var zF=p1.exports,g1={exports:{}};(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=r(k6),a=r(nn);function i(s){(0,a.default)(1,arguments);var o=Object.prototype.toString.call(s);return s instanceof Date||(0,n.default)(s)==="object"&&o==="[object Date]"?new Date(s.getTime()):typeof s=="number"||o==="[object Number]"?new Date(s):((typeof s=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}t.exports=e.default})(g1,g1.exports);var di=g1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=r(zF),a=r(di),i=r(nn);function s(o){if((0,i.default)(1,arguments),!(0,n.default)(o)&&typeof o!="number")return!1;var c=(0,a.default)(o);return!isNaN(Number(c))}t.exports=e.default})(h1,h1.exports);var HF=h1.exports,v1={exports:{}},x1={exports:{}},y1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){if(n===null||n===!0||n===!1)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}t.exports=e.default})(y1,y1.exports);var nl=y1.exports;const WF=ci(nl);(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=r(nl),a=r(di),i=r(nn);function s(o,c){(0,i.default)(2,arguments);var u=(0,a.default)(o).getTime(),d=(0,n.default)(c);return new Date(u+d)}t.exports=e.default})(x1,x1.exports);var VF=x1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=r(VF),a=r(nn),i=r(nl);function s(o,c){(0,a.default)(2,arguments);var u=(0,i.default)(c);return(0,n.default)(o,-u)}t.exports=e.default})(v1,v1.exports);var GF=v1.exports,b1={exports:{}},w1={exports:{}};(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=r(di),a=r(nn),i=864e5;function s(o){(0,a.default)(1,arguments);var c=(0,n.default)(o),u=c.getTime();c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0);var d=c.getTime(),f=u-d;return Math.floor(f/i)+1}t.exports=e.default})(w1,w1.exports);var XF=w1.exports,_1={exports:{}},k1={exports:{}};(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=r(di),a=r(nn);function i(s){(0,a.default)(1,arguments);var o=1,c=(0,n.default)(s),u=c.getUTCDay(),d=(u<o?7:0)+u-o;return c.setUTCDate(c.getUTCDate()-d),c.setUTCHours(0,0,0,0),c}t.exports=e.default})(k1,k1.exports);var bw=k1.exports,N1={exports:{}},S1={exports:{}};(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=r(di),a=r(nn),i=r(bw);function s(o){(0,a.default)(1,arguments);var c=(0,n.default)(o),u=c.getUTCFullYear(),d=new Date(0);d.setUTCFullYear(u+1,0,4),d.setUTCHours(0,0,0,0);var f=(0,i.default)(d),h=new Date(0);h.setUTCFullYear(u,0,4),h.setUTCHours(0,0,0,0);var p=(0,i.default)(h);return c.getTime()>=f.getTime()?u+1:c.getTime()>=p.getTime()?u:u-1}t.exports=e.default})(S1,S1.exports);var N6=S1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=r(N6),a=r(bw),i=r(nn);function s(o){(0,i.default)(1,arguments);var c=(0,n.default)(o),u=new Date(0);u.setUTCFullYear(c,0,4),u.setUTCHours(0,0,0,0);var d=(0,a.default)(u);return d}t.exports=e.default})(N1,N1.exports);var qF=N1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=r(di),a=r(bw),i=r(qF),s=r(nn),o=6048e5;function c(u){(0,s.default)(1,arguments);var d=(0,n.default)(u),f=(0,a.default)(d).getTime()-(0,i.default)(d).getTime();return Math.round(f/o)+1}t.exports=e.default})(_1,_1.exports);var YF=_1.exports,E1={exports:{}},C1={exports:{}},al={};Object.defineProperty(al,"__esModule",{value:!0});al.getDefaultOptions=KF;al.setDefaultOptions=ZF;var S6={};function KF(){return S6}function ZF(t){S6=t}(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=r(di),a=r(nn),i=r(nl),s=al;function o(c,u){var d,f,h,p,m,g,y,x;(0,a.default)(1,arguments);var v=(0,s.getDefaultOptions)(),b=(0,i.default)((d=(f=(h=(p=u==null?void 0:u.weekStartsOn)!==null&&p!==void 0?p:u==null||(m=u.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&h!==void 0?h:v.weekStartsOn)!==null&&f!==void 0?f:(y=v.locale)===null||y===void 0||(x=y.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&d!==void 0?d:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=(0,n.default)(c),S=w.getUTCDay(),E=(S<b?7:0)+S-b;return w.setUTCDate(w.getUTCDate()-E),w.setUTCHours(0,0,0,0),w}t.exports=e.default})(C1,C1.exports);var ww=C1.exports,j1={exports:{}},A1={exports:{}};(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=r(di),a=r(nn),i=r(ww),s=r(nl),o=al;function c(u,d){var f,h,p,m,g,y,x,v;(0,a.default)(1,arguments);var b=(0,n.default)(u),w=b.getUTCFullYear(),S=(0,o.getDefaultOptions)(),E=(0,s.default)((f=(h=(p=(m=d==null?void 0:d.firstWeekContainsDate)!==null&&m!==void 0?m:d==null||(g=d.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&p!==void 0?p:S.firstWeekContainsDate)!==null&&h!==void 0?h:(x=S.locale)===null||x===void 0||(v=x.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&f!==void 0?f:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=new Date(0);j.setUTCFullYear(w+1,0,E),j.setUTCHours(0,0,0,0);var I=(0,i.default)(j,d),N=new Date(0);N.setUTCFullYear(w,0,E),N.setUTCHours(0,0,0,0);var T=(0,i.default)(N,d);return b.getTime()>=I.getTime()?w+1:b.getTime()>=T.getTime()?w:w-1}t.exports=e.default})(A1,A1.exports);var E6=A1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=r(E6),a=r(nn),i=r(ww),s=r(nl),o=al;function c(u,d){var f,h,p,m,g,y,x,v;(0,a.default)(1,arguments);var b=(0,o.getDefaultOptions)(),w=(0,s.default)((f=(h=(p=(m=d==null?void 0:d.firstWeekContainsDate)!==null&&m!==void 0?m:d==null||(g=d.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&p!==void 0?p:b.firstWeekContainsDate)!==null&&h!==void 0?h:(x=b.locale)===null||x===void 0||(v=x.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&f!==void 0?f:1),S=(0,n.default)(u,d),E=new Date(0);E.setUTCFullYear(S,0,w),E.setUTCHours(0,0,0,0);var j=(0,i.default)(E,d);return j}t.exports=e.default})(j1,j1.exports);var QF=j1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var n=r(di),a=r(ww),i=r(QF),s=r(nn),o=6048e5;function c(u,d){(0,s.default)(1,arguments);var f=(0,n.default)(u),h=(0,a.default)(f,d).getTime()-(0,i.default)(f,d).getTime();return Math.round(h/o)+1}t.exports=e.default})(E1,E1.exports);var JF=E1.exports,T1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n,a){for(var i=n<0?"-":"",s=Math.abs(n).toString();s.length<a;)s="0"+s;return i+s}t.exports=e.default})(T1,T1.exports);var C6=T1.exports,I1={exports:{}};(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(C6),a={y:function(o,c){var u=o.getUTCFullYear(),d=u>0?u:1-u;return(0,n.default)(c==="yy"?d%100:d,c.length)},M:function(o,c){var u=o.getUTCMonth();return c==="M"?String(u+1):(0,n.default)(u+1,2)},d:function(o,c){return(0,n.default)(o.getUTCDate(),c.length)},a:function(o,c){var u=o.getUTCHours()/12>=1?"pm":"am";switch(c){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(o,c){return(0,n.default)(o.getUTCHours()%12||12,c.length)},H:function(o,c){return(0,n.default)(o.getUTCHours(),c.length)},m:function(o,c){return(0,n.default)(o.getUTCMinutes(),c.length)},s:function(o,c){return(0,n.default)(o.getUTCSeconds(),c.length)},S:function(o,c){var u=c.length,d=o.getUTCMilliseconds(),f=Math.floor(d*Math.pow(10,u-3));return(0,n.default)(f,c.length)}},i=a;e.default=i,t.exports=e.default})(I1,I1.exports);var e$=I1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(XF),a=r(YF),i=r(N6),s=r(JF),o=r(E6),c=r(C6),u=r(e$),d={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},f={G:function(x,v,b){var w=x.getUTCFullYear()>0?1:0;switch(v){case"G":case"GG":case"GGG":return b.era(w,{width:"abbreviated"});case"GGGGG":return b.era(w,{width:"narrow"});case"GGGG":default:return b.era(w,{width:"wide"})}},y:function(x,v,b){if(v==="yo"){var w=x.getUTCFullYear(),S=w>0?w:1-w;return b.ordinalNumber(S,{unit:"year"})}return u.default.y(x,v)},Y:function(x,v,b,w){var S=(0,o.default)(x,w),E=S>0?S:1-S;if(v==="YY"){var j=E%100;return(0,c.default)(j,2)}return v==="Yo"?b.ordinalNumber(E,{unit:"year"}):(0,c.default)(E,v.length)},R:function(x,v){var b=(0,i.default)(x);return(0,c.default)(b,v.length)},u:function(x,v){var b=x.getUTCFullYear();return(0,c.default)(b,v.length)},Q:function(x,v,b){var w=Math.ceil((x.getUTCMonth()+1)/3);switch(v){case"Q":return String(w);case"QQ":return(0,c.default)(w,2);case"Qo":return b.ordinalNumber(w,{unit:"quarter"});case"QQQ":return b.quarter(w,{width:"abbreviated",context:"formatting"});case"QQQQQ":return b.quarter(w,{width:"narrow",context:"formatting"});case"QQQQ":default:return b.quarter(w,{width:"wide",context:"formatting"})}},q:function(x,v,b){var w=Math.ceil((x.getUTCMonth()+1)/3);switch(v){case"q":return String(w);case"qq":return(0,c.default)(w,2);case"qo":return b.ordinalNumber(w,{unit:"quarter"});case"qqq":return b.quarter(w,{width:"abbreviated",context:"standalone"});case"qqqqq":return b.quarter(w,{width:"narrow",context:"standalone"});case"qqqq":default:return b.quarter(w,{width:"wide",context:"standalone"})}},M:function(x,v,b){var w=x.getUTCMonth();switch(v){case"M":case"MM":return u.default.M(x,v);case"Mo":return b.ordinalNumber(w+1,{unit:"month"});case"MMM":return b.month(w,{width:"abbreviated",context:"formatting"});case"MMMMM":return b.month(w,{width:"narrow",context:"formatting"});case"MMMM":default:return b.month(w,{width:"wide",context:"formatting"})}},L:function(x,v,b){var w=x.getUTCMonth();switch(v){case"L":return String(w+1);case"LL":return(0,c.default)(w+1,2);case"Lo":return b.ordinalNumber(w+1,{unit:"month"});case"LLL":return b.month(w,{width:"abbreviated",context:"standalone"});case"LLLLL":return b.month(w,{width:"narrow",context:"standalone"});case"LLLL":default:return b.month(w,{width:"wide",context:"standalone"})}},w:function(x,v,b,w){var S=(0,s.default)(x,w);return v==="wo"?b.ordinalNumber(S,{unit:"week"}):(0,c.default)(S,v.length)},I:function(x,v,b){var w=(0,a.default)(x);return v==="Io"?b.ordinalNumber(w,{unit:"week"}):(0,c.default)(w,v.length)},d:function(x,v,b){return v==="do"?b.ordinalNumber(x.getUTCDate(),{unit:"date"}):u.default.d(x,v)},D:function(x,v,b){var w=(0,n.default)(x);return v==="Do"?b.ordinalNumber(w,{unit:"dayOfYear"}):(0,c.default)(w,v.length)},E:function(x,v,b){var w=x.getUTCDay();switch(v){case"E":case"EE":case"EEE":return b.day(w,{width:"abbreviated",context:"formatting"});case"EEEEE":return b.day(w,{width:"narrow",context:"formatting"});case"EEEEEE":return b.day(w,{width:"short",context:"formatting"});case"EEEE":default:return b.day(w,{width:"wide",context:"formatting"})}},e:function(x,v,b,w){var S=x.getUTCDay(),E=(S-w.weekStartsOn+8)%7||7;switch(v){case"e":return String(E);case"ee":return(0,c.default)(E,2);case"eo":return b.ordinalNumber(E,{unit:"day"});case"eee":return b.day(S,{width:"abbreviated",context:"formatting"});case"eeeee":return b.day(S,{width:"narrow",context:"formatting"});case"eeeeee":return b.day(S,{width:"short",context:"formatting"});case"eeee":default:return b.day(S,{width:"wide",context:"formatting"})}},c:function(x,v,b,w){var S=x.getUTCDay(),E=(S-w.weekStartsOn+8)%7||7;switch(v){case"c":return String(E);case"cc":return(0,c.default)(E,v.length);case"co":return b.ordinalNumber(E,{unit:"day"});case"ccc":return b.day(S,{width:"abbreviated",context:"standalone"});case"ccccc":return b.day(S,{width:"narrow",context:"standalone"});case"cccccc":return b.day(S,{width:"short",context:"standalone"});case"cccc":default:return b.day(S,{width:"wide",context:"standalone"})}},i:function(x,v,b){var w=x.getUTCDay(),S=w===0?7:w;switch(v){case"i":return String(S);case"ii":return(0,c.default)(S,v.length);case"io":return b.ordinalNumber(S,{unit:"day"});case"iii":return b.day(w,{width:"abbreviated",context:"formatting"});case"iiiii":return b.day(w,{width:"narrow",context:"formatting"});case"iiiiii":return b.day(w,{width:"short",context:"formatting"});case"iiii":default:return b.day(w,{width:"wide",context:"formatting"})}},a:function(x,v,b){var w=x.getUTCHours(),S=w/12>=1?"pm":"am";switch(v){case"a":case"aa":return b.dayPeriod(S,{width:"abbreviated",context:"formatting"});case"aaa":return b.dayPeriod(S,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return b.dayPeriod(S,{width:"narrow",context:"formatting"});case"aaaa":default:return b.dayPeriod(S,{width:"wide",context:"formatting"})}},b:function(x,v,b){var w=x.getUTCHours(),S;switch(w===12?S=d.noon:w===0?S=d.midnight:S=w/12>=1?"pm":"am",v){case"b":case"bb":return b.dayPeriod(S,{width:"abbreviated",context:"formatting"});case"bbb":return b.dayPeriod(S,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return b.dayPeriod(S,{width:"narrow",context:"formatting"});case"bbbb":default:return b.dayPeriod(S,{width:"wide",context:"formatting"})}},B:function(x,v,b){var w=x.getUTCHours(),S;switch(w>=17?S=d.evening:w>=12?S=d.afternoon:w>=4?S=d.morning:S=d.night,v){case"B":case"BB":case"BBB":return b.dayPeriod(S,{width:"abbreviated",context:"formatting"});case"BBBBB":return b.dayPeriod(S,{width:"narrow",context:"formatting"});case"BBBB":default:return b.dayPeriod(S,{width:"wide",context:"formatting"})}},h:function(x,v,b){if(v==="ho"){var w=x.getUTCHours()%12;return w===0&&(w=12),b.ordinalNumber(w,{unit:"hour"})}return u.default.h(x,v)},H:function(x,v,b){return v==="Ho"?b.ordinalNumber(x.getUTCHours(),{unit:"hour"}):u.default.H(x,v)},K:function(x,v,b){var w=x.getUTCHours()%12;return v==="Ko"?b.ordinalNumber(w,{unit:"hour"}):(0,c.default)(w,v.length)},k:function(x,v,b){var w=x.getUTCHours();return w===0&&(w=24),v==="ko"?b.ordinalNumber(w,{unit:"hour"}):(0,c.default)(w,v.length)},m:function(x,v,b){return v==="mo"?b.ordinalNumber(x.getUTCMinutes(),{unit:"minute"}):u.default.m(x,v)},s:function(x,v,b){return v==="so"?b.ordinalNumber(x.getUTCSeconds(),{unit:"second"}):u.default.s(x,v)},S:function(x,v){return u.default.S(x,v)},X:function(x,v,b,w){var S=w._originalDate||x,E=S.getTimezoneOffset();if(E===0)return"Z";switch(v){case"X":return p(E);case"XXXX":case"XX":return m(E);case"XXXXX":case"XXX":default:return m(E,":")}},x:function(x,v,b,w){var S=w._originalDate||x,E=S.getTimezoneOffset();switch(v){case"x":return p(E);case"xxxx":case"xx":return m(E);case"xxxxx":case"xxx":default:return m(E,":")}},O:function(x,v,b,w){var S=w._originalDate||x,E=S.getTimezoneOffset();switch(v){case"O":case"OO":case"OOO":return"GMT"+h(E,":");case"OOOO":default:return"GMT"+m(E,":")}},z:function(x,v,b,w){var S=w._originalDate||x,E=S.getTimezoneOffset();switch(v){case"z":case"zz":case"zzz":return"GMT"+h(E,":");case"zzzz":default:return"GMT"+m(E,":")}},t:function(x,v,b,w){var S=w._originalDate||x,E=Math.floor(S.getTime()/1e3);return(0,c.default)(E,v.length)},T:function(x,v,b,w){var S=w._originalDate||x,E=S.getTime();return(0,c.default)(E,v.length)}};function h(y,x){var v=y>0?"-":"+",b=Math.abs(y),w=Math.floor(b/60),S=b%60;if(S===0)return v+String(w);var E=x;return v+String(w)+E+(0,c.default)(S,2)}function p(y,x){if(y%60===0){var v=y>0?"-":"+";return v+(0,c.default)(Math.abs(y)/60,2)}return m(y,x)}function m(y,x){var v=x||"",b=y>0?"-":"+",w=Math.abs(y),S=(0,c.default)(Math.floor(w/60),2),E=(0,c.default)(w%60,2);return b+S+v+E}var g=f;e.default=g,t.exports=e.default})(b1,b1.exports);var t$=b1.exports,O1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(c,u){switch(c){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}},n=function(c,u){switch(c){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}},a=function(c,u){var d=c.match(/(P+)(p+)?/)||[],f=d[1],h=d[2];if(!h)return r(c,u);var p;switch(f){case"P":p=u.dateTime({width:"short"});break;case"PP":p=u.dateTime({width:"medium"});break;case"PPP":p=u.dateTime({width:"long"});break;case"PPPP":default:p=u.dateTime({width:"full"});break}return p.replace("{{date}}",r(f,u)).replace("{{time}}",n(h,u))},i={p:n,P:a},s=i;e.default=s,t.exports=e.default})(O1,O1.exports);var r$=O1.exports,D1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}t.exports=e.default})(D1,D1.exports);var j6=D1.exports;const Yk=ci(j6);var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.isProtectedDayOfYearToken=i$;nf.isProtectedWeekYearToken=s$;nf.throwProtectedError=o$;var n$=["D","DD"],a$=["YY","YYYY"];function i$(t){return n$.indexOf(t)!==-1}function s$(t){return a$.indexOf(t)!==-1}function o$(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var P1={exports:{}},R1={exports:{}},M1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=function(s,o,c){var u,d=r[s];return typeof d=="string"?u=d:o===1?u=d.one:u=d.other.replace("{{count}}",o.toString()),c!=null&&c.addSuffix?c.comparison&&c.comparison>0?"in "+u:u+" ago":u},a=n;e.default=a,t.exports=e.default})(M1,M1.exports);var l$=M1.exports,L1={exports:{}},B1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=a.width?String(a.width):n.defaultWidth,s=n.formats[i]||n.formats[n.defaultWidth];return s}}t.exports=e.default})(B1,B1.exports);var c$=B1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(c$),a={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},i={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},s={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o={date:(0,n.default)({formats:a,defaultWidth:"full"}),time:(0,n.default)({formats:i,defaultWidth:"full"}),dateTime:(0,n.default)({formats:s,defaultWidth:"full"})},c=o;e.default=c,t.exports=e.default})(L1,L1.exports);var u$=L1.exports,F1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=function(s,o,c,u){return r[s]},a=n;e.default=a,t.exports=e.default})(F1,F1.exports);var d$=F1.exports,$1={exports:{}},U1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){return function(a,i){var s=i!=null&&i.context?String(i.context):"standalone",o;if(s==="formatting"&&n.formattingValues){var c=n.defaultFormattingWidth||n.defaultWidth,u=i!=null&&i.width?String(i.width):c;o=n.formattingValues[u]||n.formattingValues[c]}else{var d=n.defaultWidth,f=i!=null&&i.width?String(i.width):n.defaultWidth;o=n.values[f]||n.values[d]}var h=n.argumentCallback?n.argumentCallback(a):a;return o[h]}}t.exports=e.default})(U1,U1.exports);var f$=U1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(f$),a={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},i={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},s={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},d=function(m,g){var y=Number(m),x=y%100;if(x>20||x<10)switch(x%10){case 1:return y+"st";case 2:return y+"nd";case 3:return y+"rd"}return y+"th"},f={ordinalNumber:d,era:(0,n.default)({values:a,defaultWidth:"wide"}),quarter:(0,n.default)({values:i,defaultWidth:"wide",argumentCallback:function(m){return m-1}}),month:(0,n.default)({values:s,defaultWidth:"wide"}),day:(0,n.default)({values:o,defaultWidth:"wide"}),dayPeriod:(0,n.default)({values:c,defaultWidth:"wide",formattingValues:u,defaultFormattingWidth:"wide"})},h=f;e.default=h,t.exports=e.default})($1,$1.exports);var h$=$1.exports,z1={exports:{}},H1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){return function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=o.width,u=c&&i.matchPatterns[c]||i.matchPatterns[i.defaultMatchWidth],d=s.match(u);if(!d)return null;var f=d[0],h=c&&i.parsePatterns[c]||i.parsePatterns[i.defaultParseWidth],p=Array.isArray(h)?a(h,function(y){return y.test(f)}):n(h,function(y){return y.test(f)}),m;m=i.valueCallback?i.valueCallback(p):p,m=o.valueCallback?o.valueCallback(m):m;var g=s.slice(f.length);return{value:m,rest:g}}}function n(i,s){for(var o in i)if(i.hasOwnProperty(o)&&s(i[o]))return o}function a(i,s){for(var o=0;o<i.length;o++)if(s(i[o]))return o}t.exports=e.default})(H1,H1.exports);var p$=H1.exports,W1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n){return function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.match(n.matchPattern);if(!s)return null;var o=s[0],c=a.match(n.parsePattern);if(!c)return null;var u=n.valueCallback?n.valueCallback(c[0]):c[0];u=i.valueCallback?i.valueCallback(u):u;var d=a.slice(o.length);return{value:u,rest:d}}}t.exports=e.default})(W1,W1.exports);var m$=W1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(p$),a=r(m$),i=/^(\d+)(th|st|nd|rd)?/i,s=/\d+/i,o={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c={any:[/^b/i,/^(a|c)/i]},u={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},d={any:[/1/i,/2/i,/3/i,/4/i]},f={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},m={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},g={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},y={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},x={ordinalNumber:(0,a.default)({matchPattern:i,parsePattern:s,valueCallback:function(w){return parseInt(w,10)}}),era:(0,n.default)({matchPatterns:o,defaultMatchWidth:"wide",parsePatterns:c,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:u,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any",valueCallback:function(w){return w+1}}),month:(0,n.default)({matchPatterns:f,defaultMatchWidth:"wide",parsePatterns:h,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:m,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:g,defaultMatchWidth:"any",parsePatterns:y,defaultParseWidth:"any"})},v=x;e.default=v,t.exports=e.default})(z1,z1.exports);var g$=z1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(l$),a=r(u$),i=r(d$),s=r(h$),o=r(g$),c={code:"en-US",formatDistance:n.default,formatLong:a.default,formatRelative:i.default,localize:s.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},u=c;e.default=u,t.exports=e.default})(R1,R1.exports);var v$=R1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(v$),a=n.default;e.default=a,t.exports=e.default})(P1,P1.exports);var x$=P1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var n=r(HF),a=r(GF),i=r(di),s=r(t$),o=r(r$),c=r(j6),u=nf,d=r(nl),f=r(nn),h=al,p=r(x$),m=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,g=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,y=/^'([^]*?)'?$/,x=/''/g,v=/[a-zA-Z]/;function b(S,E,j){var I,N,T,F,C,A,k,O,$,D,R,M,L,B,U,q,te,V;(0,f.default)(2,arguments);var re=String(E),ue=(0,h.getDefaultOptions)(),ie=(I=(N=j==null?void 0:j.locale)!==null&&N!==void 0?N:ue.locale)!==null&&I!==void 0?I:p.default,oe=(0,d.default)((T=(F=(C=(A=j==null?void 0:j.firstWeekContainsDate)!==null&&A!==void 0?A:j==null||(k=j.locale)===null||k===void 0||(O=k.options)===null||O===void 0?void 0:O.firstWeekContainsDate)!==null&&C!==void 0?C:ue.firstWeekContainsDate)!==null&&F!==void 0?F:($=ue.locale)===null||$===void 0||(D=$.options)===null||D===void 0?void 0:D.firstWeekContainsDate)!==null&&T!==void 0?T:1);if(!(oe>=1&&oe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ye=(0,d.default)((R=(M=(L=(B=j==null?void 0:j.weekStartsOn)!==null&&B!==void 0?B:j==null||(U=j.locale)===null||U===void 0||(q=U.options)===null||q===void 0?void 0:q.weekStartsOn)!==null&&L!==void 0?L:ue.weekStartsOn)!==null&&M!==void 0?M:(te=ue.locale)===null||te===void 0||(V=te.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&R!==void 0?R:0);if(!(ye>=0&&ye<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ie.localize)throw new RangeError("locale must contain localize property");if(!ie.formatLong)throw new RangeError("locale must contain formatLong property");var se=(0,i.default)(S);if(!(0,n.default)(se))throw new RangeError("Invalid time value");var Te=(0,c.default)(se),Fe=(0,a.default)(se,Te),P={firstWeekContainsDate:oe,weekStartsOn:ye,locale:ie,_originalDate:se},Q=re.match(g).map(function(X){var W=X[0];if(W==="p"||W==="P"){var H=o.default[W];return H(X,ie.formatLong)}return X}).join("").match(m).map(function(X){if(X==="''")return"'";var W=X[0];if(W==="'")return w(X);var H=s.default[W];if(H)return!(j!=null&&j.useAdditionalWeekYearTokens)&&(0,u.isProtectedWeekYearToken)(X)&&(0,u.throwProtectedError)(X,E,String(S)),!(j!=null&&j.useAdditionalDayOfYearTokens)&&(0,u.isProtectedDayOfYearToken)(X)&&(0,u.throwProtectedError)(X,E,String(S)),H(Fe,X,ie.localize,P);if(W.match(v))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");return X}).join("");return Q}function w(S){var E=S.match(y);return E?E[1].replace(x,"'"):S}t.exports=e.default})(f1,f1.exports);var y$=f1.exports;const b$=ci(y$);function Kk(t,e,r){var n=k$(t,r.timeZone,r.locale);return n.formatToParts?w$(n,e):_$(n,e)}function w$(t,e){for(var r=t.formatToParts(e),n=r.length-1;n>=0;--n)if(r[n].type==="timeZoneName")return r[n].value}function _$(t,e){var r=t.format(e).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(r);return n?n[0].substr(1):""}function k$(t,e,r){if(r&&!r.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(r?[r.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}function N$(t,e){var r=j$(e);return r.formatToParts?E$(r,t):C$(r,t)}var S$={year:0,month:1,day:2,hour:3,minute:4,second:5};function E$(t,e){try{for(var r=t.formatToParts(e),n=[],a=0;a<r.length;a++){var i=S$[r[a].type];i>=0&&(n[i]=parseInt(r[a].value,10))}return n}catch(s){if(s instanceof RangeError)return[NaN];throw s}}function C$(t,e){var r=t.format(e),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var Dg={};function j$(t){if(!Dg[t]){var e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";Dg[t]=r?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Dg[t]}function _w(t,e,r,n,a,i,s){var o=new Date(0);return o.setUTCFullYear(t,e,r),o.setUTCHours(n,a,i,s),o}var Zk=36e5,A$=6e4,Pg={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Zp(t,e,r){var n,a;if(!t||(n=Pg.timezoneZ.exec(t),n))return 0;var i;if(n=Pg.timezoneHH.exec(t),n)return i=parseInt(n[1],10),Qk(i)?-(i*Zk):NaN;if(n=Pg.timezoneHHMM.exec(t),n){i=parseInt(n[2],10);var s=parseInt(n[3],10);return Qk(i,s)?(a=Math.abs(i)*Zk+s*A$,n[1]==="+"?-a:a):NaN}if(O$(t)){e=new Date(e||Date.now());var o=r?e:T$(e),c=V1(o,t),u=r?c:I$(e,c,t);return-u}return NaN}function T$(t){return _w(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function V1(t,e){var r=N$(t,e),n=_w(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),a=t.getTime(),i=a%1e3;return a-=i>=0?i:1e3+i,n-a}function I$(t,e,r){var n=t.getTime(),a=n-e,i=V1(new Date(a),r);if(e===i)return e;a-=i-e;var s=V1(new Date(a),r);return i===s?i:Math.max(i,s)}function Qk(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var Jk={};function O$(t){if(Jk[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),Jk[t]=!0,!0}catch{return!1}}var D$=60*1e3,P$={X:function(t,e,r,n){var a=Rg(n.timeZone,t);if(a===0)return"Z";switch(e){case"X":return e3(a);case"XXXX":case"XX":return wl(a);case"XXXXX":case"XXX":default:return wl(a,":")}},x:function(t,e,r,n){var a=Rg(n.timeZone,t);switch(e){case"x":return e3(a);case"xxxx":case"xx":return wl(a);case"xxxxx":case"xxx":default:return wl(a,":")}},O:function(t,e,r,n){var a=Rg(n.timeZone,t);switch(e){case"O":case"OO":case"OOO":return"GMT"+R$(a,":");case"OOOO":default:return"GMT"+wl(a,":")}},z:function(t,e,r,n){switch(e){case"z":case"zz":case"zzz":return Kk("short",t,n);case"zzzz":default:return Kk("long",t,n)}}};function Rg(t,e){var r=t?Zp(t,e,!0)/D$:e.getTimezoneOffset();if(Number.isNaN(r))throw new RangeError("Invalid time zone specified: "+t);return r}function P0(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}function wl(t,e){var r=e||"",n=t>0?"-":"+",a=Math.abs(t),i=P0(Math.floor(a/60),2),s=P0(Math.floor(a%60),2);return n+i+r+s}function e3(t,e){if(t%60===0){var r=t>0?"-":"+";return r+P0(Math.abs(t)/60,2)}return wl(t,e)}function R$(t,e){var r=t>0?"-":"+",n=Math.abs(t),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var s=e;return r+String(a)+s+P0(i,2)}var A6=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Mg=36e5,t3=6e4,M$=2,Zr={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:A6};function R0(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var r=e||{},n=r.additionalDigits==null?M$:WF(r.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=L$(t),i=B$(a.date,n),s=i.year,o=i.restDateString,c=F$(o,s);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),d=0,f;if(a.time&&(d=$$(a.time),isNaN(d)))return new Date(NaN);if(a.timeZone||r.timeZone){if(f=Zp(a.timeZone||r.timeZone,new Date(u+d)),isNaN(f))return new Date(NaN)}else f=Yk(new Date(u+d)),f=Yk(new Date(u+d+f));return new Date(u+d+f)}else return new Date(NaN)}function L$(t){var e={},r=Zr.dateTimePattern.exec(t),n;if(r?(e.date=r[1],n=r[3]):(r=Zr.datePattern.exec(t),r?(e.date=r[1],n=r[2]):(e.date=null,n=t)),n){var a=Zr.timeZone.exec(n);a?(e.time=n.replace(a[1],""),e.timeZone=a[1].trim()):e.time=n}return e}function B$(t,e){var r=Zr.YYY[e],n=Zr.YYYYY[e],a;if(a=Zr.YYYY.exec(t)||n.exec(t),a){var i=a[1];return{year:parseInt(i,10),restDateString:t.slice(i.length)}}if(a=Zr.YY.exec(t)||r.exec(t),a){var s=a[1];return{year:parseInt(s,10)*100,restDateString:t.slice(s.length)}}return{year:null}}function F$(t,e){if(e===null)return null;var r,n,a,i;if(t.length===0)return n=new Date(0),n.setUTCFullYear(e),n;if(r=Zr.MM.exec(t),r)return n=new Date(0),a=parseInt(r[1],10)-1,n3(e,a)?(n.setUTCFullYear(e,a),n):new Date(NaN);if(r=Zr.DDD.exec(t),r){n=new Date(0);var s=parseInt(r[1],10);return H$(e,s)?(n.setUTCFullYear(e,0,s),n):new Date(NaN)}if(r=Zr.MMDD.exec(t),r){n=new Date(0),a=parseInt(r[1],10)-1;var o=parseInt(r[2],10);return n3(e,a,o)?(n.setUTCFullYear(e,a,o),n):new Date(NaN)}if(r=Zr.Www.exec(t),r)return i=parseInt(r[1],10)-1,a3(e,i)?r3(e,i):new Date(NaN);if(r=Zr.WwwD.exec(t),r){i=parseInt(r[1],10)-1;var c=parseInt(r[2],10)-1;return a3(e,i,c)?r3(e,i,c):new Date(NaN)}return null}function $$(t){var e,r,n;if(e=Zr.HH.exec(t),e)return r=parseFloat(e[1].replace(",",".")),Lg(r)?r%24*Mg:NaN;if(e=Zr.HHMM.exec(t),e)return r=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),Lg(r,n)?r%24*Mg+n*t3:NaN;if(e=Zr.HHMMSS.exec(t),e){r=parseInt(e[1],10),n=parseInt(e[2],10);var a=parseFloat(e[3].replace(",","."));return Lg(r,n,a)?r%24*Mg+n*t3+a*1e3:NaN}return null}function r3(t,e,r){e=e||0,r=r||0;var n=new Date(0);n.setUTCFullYear(t,0,4);var a=n.getUTCDay()||7,i=e*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var U$=[31,28,31,30,31,30,31,31,30,31,30,31],z$=[31,29,31,30,31,30,31,31,30,31,30,31];function T6(t){return t%400===0||t%4===0&&t%100!==0}function n3(t,e,r){if(e<0||e>11)return!1;if(r!=null){if(r<1)return!1;var n=T6(t);if(n&&r>z$[e]||!n&&r>U$[e])return!1}return!0}function H$(t,e){if(e<1)return!1;var r=T6(t);return!(r&&e>366||!r&&e>365)}function a3(t,e,r){return!(e<0||e>52||r!=null&&(r<0||r>6))}function Lg(t,e,r){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||r!=null&&(r<0||r>=60))}var W$=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function V$(t,e,r){var n=String(e),a=r||{},i=n.match(W$);if(i){var s=R0(a.originalDate||t,a);n=i.reduce(function(o,c){if(c[0]==="'")return o;var u=o.indexOf(c),d=o[u-1]==="'",f=o.replace(c,"'"+P$[c[0]](s,c,null,a)+"'");return d?f.substring(0,u-1)+f.substring(u+1):f},n)}return b$(t,n,a)}var G1={exports:{}},X1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(n,a){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i]);return n}t.exports=e.default})(X1,X1.exports);var G$=X1.exports;(function(t,e){var r=$t.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=r(G$);function a(i){return(0,n.default)({},i)}t.exports=e.default})(G1,G1.exports);var X$=G1.exports;const I6=ci(X$);function M0(t,e,r){var n=R0(t,r),a=Zp(e,n,!0),i=new Date(n.getTime()-a),s=new Date(0);return s.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),s.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),s}function q$(t,e,r,n){var a=I6(n);return a.timeZone=e,a.originalDate=t,V$(M0(t,e),r,a)}function Y$(t,e,r){if(typeof t=="string"&&!t.match(A6)){var n=I6(r);return n.timeZone=e,R0(t,n)}var a=R0(t,r),i=_w(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).getTime(),s=Zp(e,new Date(i));return new Date(i+s)}const af="Europe/Belgrade",Li=(t,e=af)=>{if(!t)return"--:--";if(/^\d{2}:\d{2}$/.test(t))return t;if(/^\d{2}:\d{2}:\d{2}$/.test(t))return t.substring(0,5);try{const n=new Date(t);if(!isNaN(n.getTime()))return q$(n,e,"HH:mm")}catch(n){console.error("Error parsing timestamp:",t,n)}const r=t.match(/(\d{1,2}):(\d{2})/);if(r){const n=r[1].padStart(2,"0"),a=r[2];return`${n}:${a}`}return t},ei=(t,e,r=af)=>{const n=Li(t,r),a=Li(e,r);return!n&&!a?"":n&&!a?n:!n&&a?a:`${n} - ${a}`},en=(t,e="d MMMM yyyy",r=af)=>{if(!t)return console.warn("formatRussianDate: dateString is null or undefined"),"Дата не указана";try{const n=String(t).trim();if(!n)return console.warn("formatRussianDate: dateString is empty"),"Дата не указана";const a=new Date(n);if(isNaN(a.getTime()))return console.warn("formatRussianDate: Invalid date string:",t),"Неверная дата";const i=ji(n);if(isNaN(i.getTime()))return console.warn("formatRussianDate: parseISO failed for:",t),"Ошибка парсинга даты";const s=M0(i,r);return lt(s,e,{locale:na})}catch(n){return console.error("formatRussianDate: Error formatting date:",t,n),"Ошибка форматирования"}},fs=(t,e=af)=>{try{if(!t)return!1;const r=ji(t);if(isNaN(r.getTime()))return!1;const n=M0(r,e),i=M0(new Date,e);return n<i}catch(r){return console.error("Error checking event date:",r),!1}},i3=(t,e)=>{try{if(!t||!e)throw new Error("Date and time are required");const r=typeof t=="string"?ji(t):t;if(isNaN(r.getTime()))throw new Error("Invalid date provided");const[n,a]=e.split(":").map(Number);if(isNaN(n)||isNaN(a))throw new Error("Invalid time format");const i=new Date(r);return i.setHours(n,a,0,0),Y$(i,af).toISOString()}catch(r){return console.error("Error formatting date time for database:",r),new Date().toISOString()}},ti=t=>{if(!t)return!1;try{const e=String(t).trim();if(!e)return!1;const r=new Date(e);return!isNaN(r.getTime())}catch{return!1}},K$=()=>{const[t,e]=_.useState([]),[r,n]=_.useState(null),[a,i]=_.useState(!0),[s,o]=_.useState(null);if(_.useEffect(()=>{(async()=>{try{i(!0);const{data:x,error:v}=await de.from("site_settings").select("homepage_settings").single();let b=3;if(v)console.error("Error fetching settings:",v),n({events_count:3,show_title:!0,show_date:!0,show_time:!0,show_language:!0,show_type:!0,show_age:!0,show_image:!0,show_price:!0});else{const j=(x==null?void 0:x.homepage_settings)||{};b=j.events_count||3,n({events_count:b,show_title:j.show_title!==!1,show_date:j.show_date!==!1,show_time:j.show_time!==!1,show_language:j.show_language!==!1,show_type:j.show_type!==!1,show_age:j.show_age!==!1,show_image:j.show_image!==!1,show_price:j.show_price!==!1})}const w=new Date().toISOString(),{data:S,error:E}=await de.from("events").select("*").eq("status","active").gte("end_at",w).order("start_at",{ascending:!0}).limit(b);if(E)throw E;e(S||[])}catch(x){console.error("Error fetching data:",x),o("Failed to load events")}finally{i(!1)}})()},[]),a)return l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Загружаем события..."})]})})});if(s)return l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:l.jsxs("p",{children:["Ошибка загрузки событий: ",s]})})})});const{show_title:c=!0,show_date:u=!0,show_time:d=!0,show_language:f=!0,show_type:h=!0,show_age:p=!0,show_image:m=!0,show_price:g=!0}=r||{};return l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Ближайшие мероприятия"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Присоединяйтесь к нашим увлекательным научным событиям"})]}),t.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:t.map(y=>l.jsxs(Be,{to:`/events/${y.id}`,className:"group bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[m&&l.jsxs("div",{className:"relative h-48",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${zt(y.bg_image)})`},children:l.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/30 transition-colors"})}),c&&l.jsx("div",{className:"absolute inset-0 flex items-end p-4",children:l.jsx("h3",{className:"text-white text-lg font-semibold drop-shadow-md",children:y.title})}),p&&l.jsx("div",{className:"absolute top-3 right-3",children:l.jsx("span",{className:"px-2 py-1 bg-black/70 text-white rounded-full text-xs font-medium",children:y.age_category})})]}),l.jsxs("div",{className:"p-5",children:[u&&y.start_at&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[l.jsx(Oe,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:y.start_at&&new Date(y.start_at).getTime()?en(y.start_at):"Дата не указана"}),d&&y.start_at&&l.jsxs(l.Fragment,{children:[l.jsx(bn,{className:"h-4 w-4 flex-shrink-0 ml-2"}),l.jsx("span",{children:Li(y.start_at)})]})]}),!m&&c&&l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:y.title}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[f&&y.languages&&y.languages.length>0&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(zp,{className:"h-3 w-3 text-gray-500"}),l.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:y.languages.join(", ")})]}),h&&y.event_type&&l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:y.event_type})]}),g&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Vt,{className:"h-4 w-4 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.payment_type==="free"?"Бесплатно":y.price?`${y.price} ${y.currency||"RSD"}`:"Цена не указана"})]}),l.jsx(fa,{className:"h-4 w-4 text-primary-600 group-hover:translate-x-1 transition-transform"})]})]})]},y.id))}),l.jsx("div",{className:"text-center",children:l.jsxs(Be,{to:"/events",className:"inline-flex items-center gap-2 bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[l.jsx("span",{children:"Все мероприятия"}),l.jsx(fa,{className:"h-4 w-4"})]})})]}):l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/20 dark:to-primary-800/20 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Oe,{className:"w-12 h-12 text-primary-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Мероприятий пока нет"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Следите за обновлениями - скоро появятся новые события!"})]})]})})},Z$=()=>{const[t,e]=_.useState([]),[r,n]=_.useState([]),[a,i]=_.useState(!0),[s,o]=_.useState(null);_.useEffect(()=>{(async()=>{try{const{data:d,error:f}=await de.from("speakers").select("*").eq("active",!0);if(f)throw f;if(e(d||[]),d&&d.length>0){const h=[...d].sort(()=>.5-Math.random());n(h.slice(0,4))}}catch(d){console.error("Error fetching speakers:",d),o("Не удалось загрузить спикеров")}finally{i(!1)}})()},[]);const c=()=>{if(t.length>0){const u=[...t].sort(()=>.5-Math.random());n(u.slice(0,4))}};return a?l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h2",{className:"text-3xl font-semibold mb-12 text-center text-gray-900 dark:text-white",children:"Наши спикеры"}),l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]})}):s?l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h2",{className:"text-3xl font-semibold mb-12 text-center text-gray-900 dark:text-white",children:"Наши спикеры"}),l.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:s})]})}):t.length===0?l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h2",{className:"text-3xl font-semibold mb-12 text-center text-gray-900 dark:text-white",children:"Наши спикеры"}),l.jsx("div",{className:"text-center text-gray-600 dark:text-gray-400",children:"В данный момент нет активных спикеров"})]})}):l.jsx("section",{className:"py-16 bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-semibold text-gray-900 dark:text-white mb-4 md:mb-0",children:"Наши спикеры"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:c,className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors",children:"Показать других"}),l.jsx("a",{href:"https://forms.gle/2SvevGTqxBbtCs7x5",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors",children:"+ стать спикером"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.map(u=>{var d,f;return l.jsxs(Be,{to:`/speakers/${u.id}`,className:"group bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[l.jsx("div",{className:"relative aspect-square",children:(f=(d=u.photos)==null?void 0:d[0])!=null&&f.url?l.jsx("img",{src:zt(u.photos[0].url),alt:u.name,className:"w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-90",onError:h=>{const p=h.target;p.onerror=null,p.src="",p.parentElement.className="relative aspect-square bg-gray-100 dark:bg-dark-700 flex items-center justify-center",p.parentElement.innerHTML='<User className="w-12 h-12 text-gray-400 dark:text-dark-500" />'}}):l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-dark-700",children:l.jsx(Cn,{className:"w-12 h-12 text-gray-400 dark:text-dark-500"})})}),l.jsxs("div",{className:"p-5",children:[l.jsx("h3",{className:"text-lg font-semibold mb-1 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:u.name}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:u.field_of_expertise})]})]},u.id)}),l.jsxs(Be,{to:"/speakers",className:"group bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow flex flex-col items-center justify-center p-6 text-center",children:[l.jsx("div",{className:"mb-3 p-3 bg-gray-100 dark:bg-dark-800 rounded-full",children:l.jsx(fa,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:"Все спикеры"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Познакомиться со всеми"})]})]})]})})},Q$=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(!0),[a,i]=_.useState(null),s=_.useRef(null),o=_.useRef(null),c=_.useRef(null);return _.useEffect(()=>{let u=!0;return(async()=>{try{const{data:f,error:h}=await de.from("site_settings").select("rent_selection").single();if(!u)return;if(h)throw h;f!=null&&f.rent_selection&&e(f.rent_selection)}catch(f){console.error("Error fetching Rent section data:",f),u&&i("Не удалось загрузить данные")}finally{u&&n(!1)}})(),()=>{u=!1}},[]),_.useEffect(()=>{if(!(t!=null&&t.image)||!s.current)return;const u=new IntersectionObserver(d=>{d.forEach(f=>{if(f.isIntersecting){const h=f.target;h.src=h.dataset.src||"",u.unobserve(h)}})},{rootMargin:"200px",threshold:.1});return u.observe(s.current),()=>{s.current&&u.unobserve(s.current)}},[t==null?void 0:t.image]),_.useEffect(()=>{if(!o.current||!c.current)return;const u=new ResizeObserver(d=>{for(let f of d)f.target===o.current&&(c.current.style.height=`${f.contentRect.height}px`)});return u.observe(o.current),()=>{u.disconnect()}},[t]),r?l.jsx("div",{className:"section bg-white dark:bg-dark-900 min-h-[400px] flex items-center justify-center",children:"Загрузка..."}):a?l.jsx("div",{className:"section bg-white dark:bg-dark-900 min-h-[400px] flex items-center justify-center text-red-500",children:a}):!t||!t.enabled?null:l.jsx("section",{className:"section bg-white dark:bg-dark-900",children:l.jsxs("div",{className:"container grid-layout items-start",children:[l.jsx("div",{className:"image-content order-1 md:order-none mt-8 md:mt-0",ref:c,children:l.jsx("div",{className:"w-full h-full rounded-lg overflow-hidden relative",children:l.jsx("img",{ref:s,"data-src":zt(t.image),alt:t.title,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy",width:"600",height:"400"})})}),l.jsxs("div",{className:"text-content order-2 md:order-none",ref:o,children:[l.jsx("h3",{className:"mb-6",children:t.title}),l.jsx("div",{className:"text-base space-y-4 mb-8",dangerouslySetInnerHTML:{__html:t.description}}),l.jsxs(Be,{to:"/rent",className:"inline-flex items-center text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300 transition-colors font-medium",children:["Забронировать",l.jsx(fa,{className:"ml-2"})]})]})]})})},J$=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(!0);_.useEffect(()=>{a()},[]);const a=async()=>{try{n(!0);const{data:i,error:s}=await de.from("site_settings").select("coworking_selection").single();if(s)throw s;i!=null&&i.coworking_selection&&e(i.coworking_selection)}catch(i){console.error("Error fetching Coworking section data:",i)}finally{n(!1)}};return r?l.jsx("div",{children:"Loading..."}):!t||!t.enabled?null:l.jsx("section",{className:"section bg-white dark:bg-dark-900",children:l.jsxs("div",{className:"container grid-layout items-center",children:[l.jsxs("div",{className:"text-content",children:[l.jsx("h3",{className:"mb-6",children:t.title}),l.jsx("div",{className:"text-base space-y-4 mb-8",dangerouslySetInnerHTML:{__html:t.description}}),l.jsxs(Be,{to:"/about",className:"inline-flex items-center text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300 transition-colors font-medium",children:["Занять место",l.jsx(fa,{className:"ml-2"})]})]}),l.jsx("div",{className:"image-content mt-8 md:mt-0",children:l.jsx("img",{src:zt(t.image),alt:t.title,className:"w-full h-auto rounded-lg shadow-md"})})]})})},eU=()=>l.jsxs(Ot,{children:[l.jsx(PL,{}),l.jsx(RL,{}),l.jsx(K$,{}),l.jsx(Z$,{}),l.jsx(Q$,{}),l.jsx(J$,{})]}),O6=_.createContext(void 0),tU=({children:t})=>{const[e,r]=_.useState(null),[n,a]=_.useState(!0);_.useEffect(()=>{(async()=>{var f;try{const{data:{session:h}}=await de.auth.getSession();r(h!=null&&h.user?{id:h.user.id,email:h.user.email||"",name:(f=h.user.user_metadata)==null?void 0:f.name}:null)}catch(h){console.error("Error checking auth status:",h),r(null)}finally{a(!1)}})();const{data:d}=de.auth.onAuthStateChange((f,h)=>{var p;h!=null&&h.user?r({id:h.user.id,email:h.user.email||"",name:(p=h.user.user_metadata)==null?void 0:p.name}):r(null),a(!1)});return()=>{d.subscription.unsubscribe()}},[]);const i=async(u,d)=>{const{error:f}=await de.auth.signInWithPassword({email:u,password:d});if(f)throw f},s=async(u,d,f)=>{const{error:h}=await de.auth.signUp({email:u,password:d,options:{data:{name:f},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(h)throw h},o=async()=>{const{error:u}=await de.auth.signOut();if(u)throw u},c=async u=>{const{error:d}=await de.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/reset-password`});if(d)throw d};return l.jsx(O6.Provider,{value:{user:e,loading:n,signIn:i,signUp:s,signOut:o,resetPassword:c},children:t})},il=()=>{const t=_.useContext(O6);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},kw=t=>{const[e,r]=_.useState([]),[n,a]=_.useState(!1),i=async()=>{if(t){a(!0);try{const{data:c,error:u}=await de.from("user_favorite_speakers").select("speaker_id").eq("user_id",t);if(u)throw u;r((c==null?void 0:c.map(d=>d.speaker_id))||[])}catch(c){console.error("Error fetching favorite speakers:",c)}finally{a(!1)}}},s=async c=>{if(!t){K.error("Войдите в систему для добавления в избранное");return}const u=e.includes(c);try{if(u){const{error:d}=await de.from("user_favorite_speakers").delete().eq("user_id",t).eq("speaker_id",c);if(d)throw d;r(f=>f.filter(h=>h!==c)),K.success("Спикер удален из избранного")}else{const{error:d}=await de.from("user_favorite_speakers").insert({user_id:t,speaker_id:c});if(d)throw d;r(f=>[...f,c]),K.success("Спикер добавлен в избранное")}}catch(d){console.error("Error toggling favorite speaker:",d),K.error("Ошибка при изменении избранного")}},o=c=>e.includes(c);return _.useEffect(()=>{i()},[t]),{favoriteSpeakers:e,loading:n,toggleFavoriteSpeaker:s,isFavoriteSpeaker:o,refetch:i}},Nw=t=>{const[e,r]=_.useState([]),[n,a]=_.useState(!1),i=async()=>{if(t){a(!0);try{const{data:c,error:u}=await de.from("user_favorite_events").select("event_id").eq("user_id",t);if(u)throw u;r((c==null?void 0:c.map(d=>d.event_id))||[])}catch(c){console.error("Error fetching favorite events:",c)}finally{a(!1)}}},s=async c=>{if(!t){K.error("Войдите в систему для добавления в избранное");return}const u=e.includes(c);try{if(u){const{error:d}=await de.from("user_favorite_events").delete().eq("user_id",t).eq("event_id",c);if(d)throw d;r(f=>f.filter(h=>h!==c)),K.success("Мероприятие удалено из избранного")}else{const{error:d}=await de.from("user_favorite_events").insert({user_id:t,event_id:c});if(d)throw d;r(f=>[...f,c]),K.success("Мероприятие добавлено в избранное")}}catch(d){console.error("Error toggling favorite event:",d),K.error("Ошибка при изменении избранного")}},o=c=>e.includes(c);return _.useEffect(()=>{i()},[t]),{favoriteEvents:e,loading:n,toggleFavoriteEvent:s,isFavoriteEvent:o,refetch:i}},D6=({isFavorite:t,onClick:e,className:r="",size:n="md",loading:a=!1})=>{const i={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},s={sm:"p-1",md:"p-2",lg:"p-3"};return l.jsx("button",{onClick:e,disabled:a,className:`${s[n]} rounded-full transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:t?"Удалить из избранного":"Добавить в избранное",children:l.jsx(Ia,{className:`${i[n]} transition-colors ${t?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-500"} ${a?"animate-pulse":""}`})})},s3=({eventId:t,className:e="",size:r="md"})=>{const{user:n}=il(),{toggleFavoriteEvent:a,isFavoriteEvent:i,loading:s}=Nw(n==null?void 0:n.id);if(!n)return null;const o=c=>{c.preventDefault(),c.stopPropagation(),a(t)};return l.jsx(D6,{isFavorite:i(t),onClick:o,loading:s,className:e,size:r})},o3={lecture:"Лекция",workshop:"Мастер-класс","movie discussion":"Обсуждение фильма","conversation club":"Разговорный клуб",festival:"Фестиваль","stand-up":"Стендап",concert:"Концерт",excursion:"Экскурсия",discussion:"Дискуссия",swap:"Обмен",quiz:"Викторина",default:"Мероприятие"},l3=t=>{if(ti(t.start_at))try{return en(t.start_at,"d MMMM")}catch(e){console.error("Error formatting start_at:",t.start_at,e)}if(ti(t.start_time))try{return en(t.start_time,"d MMMM")}catch(e){console.error("Error formatting start_time:",t.start_time,e)}if(ti(t.date))try{return en(t.date,"d MMMM")}catch(e){console.error("Error formatting date:",t.date,e)}return"Дата не указана"},c3=(t,e)=>{try{return t.start_at&&t.end_at?e?e(t.start_at,t.end_at):ei(t.start_at,t.end_at):t.start_time&&t.end_time?e?e(t.start_time,t.end_time):ei(t.start_time,t.end_time):""}catch(r){return console.error("Error formatting time range in EventsList:",r),""}},u3=t=>{try{return t.payment_type==="free"?"Бесплатно":t.payment_type==="donation"?"Донейшн":t.price===null||t.price===void 0?"Подробнее":t.price&&t.currency?`${t.price} ${t.currency}`:"Цена не указана"}catch(e){return console.error("Error formatting price:",e),"Цена не указана"}},rU=({events:t,type:e="upcoming",searchQuery:r="",viewMode:n="grid",showPrice:a=!1,className:i="",formatTimeRange:s})=>{const o=t.filter(u=>{const d=r.toLowerCase();return u.title.toLowerCase().includes(d)||u.description&&u.description.toLowerCase().includes(d)});if(o.length===0)return l.jsx("div",{className:`py-12 text-center ${i}`,children:l.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400",children:r?"По вашему запросу ничего не найдено":"Мероприятий пока нет"})});const c=u=>{const d=u.toLowerCase().replace(/-/g,"_");return o3[d]||o3.default};return l.jsx("div",{className:`${i} ${e==="upcoming"?"upcoming-events":"past-events"}`,children:n==="list"?l.jsx("div",{className:"space-y-4",children:o.map(u=>{var d;return l.jsxs("div",{className:"card hover:shadow-md transition-shadow flex flex-col md:flex-row relative",children:[l.jsx("div",{className:"absolute top-3 right-3 z-10",children:l.jsx(s3,{eventId:u.id.toString(),className:"bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm hover:bg-white dark:hover:bg-dark-800 shadow-sm",size:"sm"})}),l.jsx("div",{className:"md:w-1/3 h-48 md:h-auto bg-cover bg-center relative",style:{backgroundImage:`url(${zt(u.bg_image)})`},children:l.jsx("div",{className:"absolute bottom-3 left-3 flex flex-wrap gap-1",children:l.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:[l.jsx(Vt,{className:"h-4 w-4 mr-1.5"}),u.age_category]})})}),l.jsxs("div",{className:"p-5 md:w-2/3 flex flex-col",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[(d=u.languages)==null?void 0:d.map((f,h)=>l.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:[l.jsx(zp,{className:"h-4 w-4 mr-1.5"}),f]},h)),l.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-violet-100 text-violet-800 dark:bg-violet-900/30 dark:text-violet-300",children:[l.jsx(Fj,{className:"h-4 w-4 mr-1.5"}),c(u.event_type)]})]}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:u.title}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Oe,{className:"h-4 w-4 mr-1"}),l.jsx("span",{children:l3(u)})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(bn,{className:"h-4 w-4 mr-1"}),l.jsx("span",{children:c3(u,s)})]}),u.location&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(vr,{className:"h-4 w-4 mr-1"}),l.jsx("span",{children:u.location})]})]}),u.description&&l.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-300 line-clamp-2",children:u.description})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mt-4",children:[a&&u.payment_type&&l.jsx("div",{className:"font-medium text-primary-600 dark:text-primary-400",children:u3(u)}),l.jsx("div",{className:"flex gap-2",children:l.jsx(Be,{to:`/events/${u.id}`,className:"btn btn-primary",children:"Подробнее"})})]})]})]},u.id)})}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:o.map(u=>{var d;return l.jsxs("div",{className:"card group overflow-hidden hover:shadow-md transition-shadow relative",children:[l.jsx("div",{className:"absolute top-3 right-3 z-10",children:l.jsx(s3,{eventId:u.id.toString(),className:"bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm hover:bg-white dark:hover:bg-dark-800 shadow-sm",size:"sm"})}),l.jsxs(Be,{to:`/events/${u.id}`,children:[l.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-300 group-hover:scale-105",style:{backgroundImage:`url(${zt(u.bg_image)})`}}),l.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsxs("span",{className:"text-white font-medium flex items-center",children:["Подробнее ",l.jsx(fa,{className:"ml-2 h-4 w-4"})]})}),l.jsx("div",{className:"absolute bottom-3 left-3 flex gap-1",children:l.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:u.age_category})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[(d=u.languages)==null?void 0:d.slice(0,2).map((f,h)=>l.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:f},h)),l.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-violet-100 text-violet-800 dark:bg-violet-900/30 dark:text-violet-300",children:c(u.event_type)})]}),l.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:u.title}),l.jsxs("div",{className:"flex flex-col gap-1 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Oe,{className:"h-4 w-4 mr-1 flex-shrink-0"}),l.jsx("span",{children:l3(u)})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(bn,{className:"h-4 w-4 mr-1 flex-shrink-0"}),l.jsx("span",{children:c3(u,s)})]})]}),a&&u.payment_type&&l.jsx("div",{className:"mt-3 font-medium text-primary-600 dark:text-primary-400",children:u3(u)})]})]})]},u.id)})})})};var P6={},R6={},Qp={},M6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=e})(M6);var nU="Expected a function",d3=NaN,aU="[object Symbol]",iU=/^\s+|\s+$/g,sU=/^[-+]0x[0-9a-f]+$/i,oU=/^0b[01]+$/i,lU=/^0o[0-7]+$/i,cU=parseInt,uU=typeof kt=="object"&&kt&&kt.Object===Object&&kt,dU=typeof self=="object"&&self&&self.Object===Object&&self,fU=uU||dU||Function("return this")(),hU=Object.prototype,pU=hU.toString,mU=Math.max,gU=Math.min,Bg=function(){return fU.Date.now()};function vU(t,e,r){var n,a,i,s,o,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(nU);e=f3(e)||0,q1(r)&&(d=!!r.leading,f="maxWait"in r,i=f?mU(f3(r.maxWait)||0,e):i,h="trailing"in r?!!r.trailing:h);function p(E){var j=n,I=a;return n=a=void 0,u=E,s=t.apply(I,j),s}function m(E){return u=E,o=setTimeout(x,e),d?p(E):s}function g(E){var j=E-c,I=E-u,N=e-j;return f?gU(N,i-I):N}function y(E){var j=E-c,I=E-u;return c===void 0||j>=e||j<0||f&&I>=i}function x(){var E=Bg();if(y(E))return v(E);o=setTimeout(x,g(E))}function v(E){return o=void 0,h&&n?p(E):(n=a=void 0,s)}function b(){o!==void 0&&clearTimeout(o),u=0,n=c=a=o=void 0}function w(){return o===void 0?s:v(Bg())}function S(){var E=Bg(),j=y(E);if(n=arguments,a=this,c=E,j){if(o===void 0)return m(c);if(f)return o=setTimeout(x,e),p(c)}return o===void 0&&(o=setTimeout(x,e)),s}return S.cancel=b,S.flush=w,S}function q1(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function xU(t){return!!t&&typeof t=="object"}function yU(t){return typeof t=="symbol"||xU(t)&&pU.call(t)==aU}function f3(t){if(typeof t=="number")return t;if(yU(t))return d3;if(q1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=q1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(iU,"");var r=oU.test(t);return r||lU.test(t)?cU(t.slice(2),r?2:8):sU.test(t)?d3:+t}var bU=vU,L6={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var i="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(i=a(i,n(o)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var o in i)e.call(i,o)&&i[o]&&(s=a(s,o));return s}function a(i,s){return s?i?i+" "+s:i+s:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(L6);var sf=L6.exports;const Y1=ci(sf);var ge={},Sw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(_);function r(a){return a&&a.__esModule?a:{default:a}}var n={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(i){return e.default.createElement("ul",{style:{display:"block"}},i)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(i){return e.default.createElement("button",null,i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};t.default=n})(Sw);Object.defineProperty(ge,"__esModule",{value:!0});ge.checkSpecKeys=ge.checkNavigable=ge.changeSlide=ge.canUseDOM=ge.canGoNext=void 0;ge.clamp=F6;ge.extractObject=void 0;ge.filterSettings=RU;ge.validSettings=ge.swipeStart=ge.swipeMove=ge.swipeEnd=ge.slidesOnRight=ge.slidesOnLeft=ge.slideHandler=ge.siblingDirection=ge.safePreventDefault=ge.lazyStartIndex=ge.lazySlidesOnRight=ge.lazySlidesOnLeft=ge.lazyEndIndex=ge.keyHandler=ge.initializedState=ge.getWidth=ge.getTrackLeft=ge.getTrackCSS=ge.getTrackAnimateCSS=ge.getTotalSlides=ge.getSwipeDirection=ge.getSlideCount=ge.getRequiredLazySlides=ge.getPreClones=ge.getPostClones=ge.getOnDemandLazySlides=ge.getNavigableIndexes=ge.getHeight=void 0;var wU=B6(_),_U=B6(Sw);function B6(t){return t&&t.__esModule?t:{default:t}}function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Td(t)}function h3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h3(Object(r),!0).forEach(function(n){kU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kU(t,e,r){return e=NU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NU(t){var e=SU(t,"string");return Td(e)=="symbol"?e:String(e)}function SU(t,e){if(Td(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F6(t,e,r){return Math.max(e,Math.min(t,r))}var Zl=ge.safePreventDefault=function(e){var r=["onTouchStart","onTouchMove","onWheel"];r.includes(e._reactName)||e.preventDefault()},$6=ge.getOnDemandLazySlides=function(e){for(var r=[],n=U6(e),a=z6(e),i=n;i<a;i++)e.lazyLoadedList.indexOf(i)<0&&r.push(i);return r};ge.getRequiredLazySlides=function(e){for(var r=[],n=U6(e),a=z6(e),i=n;i<a;i++)r.push(i);return r};var U6=ge.lazyStartIndex=function(e){return e.currentSlide-EU(e)},z6=ge.lazyEndIndex=function(e){return e.currentSlide+CU(e)},EU=ge.lazySlidesOnLeft=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0},CU=ge.lazySlidesOnRight=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow},K1=ge.getWidth=function(e){return e&&e.offsetWidth||0},H6=ge.getHeight=function(e){return e&&e.offsetHeight||0},W6=ge.getSwipeDirection=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n,a,i,s;return n=e.startX-e.curX,a=e.startY-e.curY,i=Math.atan2(a,n),s=Math.round(i*180/Math.PI),s<0&&(s=360-Math.abs(s)),s<=45&&s>=0||s<=360&&s>=315?"left":s>=135&&s<=225?"right":r===!0?s>=35&&s<=135?"up":"down":"vertical"},V6=ge.canGoNext=function(e){var r=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(r=!1),r};ge.extractObject=function(e,r){var n={};return r.forEach(function(a){return n[a]=e[a]}),n};ge.initializedState=function(e){var r=wU.default.Children.count(e.children),n=e.listRef,a=Math.ceil(K1(n)),i=e.trackRef&&e.trackRef.node,s=Math.ceil(K1(i)),o;if(e.vertical)o=a;else{var c=e.centerMode&&parseInt(e.centerPadding)*2;typeof e.centerPadding=="string"&&e.centerPadding.slice(-1)==="%"&&(c*=a/100),o=Math.ceil((a-c)/e.slidesToShow)}var u=n&&H6(n.querySelector('[data-index="0"]')),d=u*e.slidesToShow,f=e.currentSlide===void 0?e.initialSlide:e.currentSlide;e.rtl&&e.currentSlide===void 0&&(f=r-1-e.initialSlide);var h=e.lazyLoadedList||[],p=$6(jt(jt({},e),{},{currentSlide:f,lazyLoadedList:h}));h=h.concat(p);var m={slideCount:r,slideWidth:o,listWidth:a,trackWidth:s,currentSlide:f,slideHeight:u,listHeight:d,lazyLoadedList:h};return e.autoplaying===null&&e.autoplay&&(m.autoplaying="playing"),m};ge.slideHandler=function(e){var r=e.waitForAnimate,n=e.animating,a=e.fade,i=e.infinite,s=e.index,o=e.slideCount,c=e.lazyLoad,u=e.currentSlide,d=e.centerMode,f=e.slidesToScroll,h=e.slidesToShow,p=e.useCSS,m=e.lazyLoadedList;if(r&&n)return{};var g=s,y,x,v,b={},w={},S=i?s:F6(s,0,o-1);if(a){if(!i&&(s<0||s>=o))return{};s<0?g=s+o:s>=o&&(g=s-o),c&&m.indexOf(g)<0&&(m=m.concat(g)),b={animating:!0,currentSlide:g,lazyLoadedList:m,targetSlide:g},w={animating:!1,targetSlide:g}}else y=g,g<0?(y=g+o,i?o%f!==0&&(y=o-o%f):y=0):!V6(e)&&g>u?g=y=u:d&&g>=o?(g=i?o:o-1,y=i?0:o-1):g>=o&&(y=g-o,i?o%f!==0&&(y=0):y=o-h),!i&&g+h>=o&&(y=o-h),x=B0(jt(jt({},e),{},{slideIndex:g})),v=B0(jt(jt({},e),{},{slideIndex:y})),i||(x===v&&(g=y),x=v),c&&(m=m.concat($6(jt(jt({},e),{},{currentSlide:g})))),p?(b={animating:!0,currentSlide:y,trackStyle:G6(jt(jt({},e),{},{left:x})),lazyLoadedList:m,targetSlide:S},w={animating:!1,currentSlide:y,trackStyle:L0(jt(jt({},e),{},{left:v})),swipeLeft:null,targetSlide:S}):b={currentSlide:y,trackStyle:L0(jt(jt({},e),{},{left:v})),lazyLoadedList:m,targetSlide:S};return{state:b,nextState:w}};ge.changeSlide=function(e,r){var n,a,i,s,o,c=e.slidesToScroll,u=e.slidesToShow,d=e.slideCount,f=e.currentSlide,h=e.targetSlide,p=e.lazyLoad,m=e.infinite;if(s=d%c!==0,n=s?0:(d-f)%c,r.message==="previous")i=n===0?c:u-n,o=f-i,p&&!m&&(a=f-i,o=a===-1?d-1:a),m||(o=h-c);else if(r.message==="next")i=n===0?c:n,o=f+i,p&&!m&&(o=(f+c)%d+n),m||(o=h+c);else if(r.message==="dots")o=r.index*r.slidesToScroll;else if(r.message==="children"){if(o=r.index,m){var g=IU(jt(jt({},e),{},{targetSlide:o}));o>r.currentSlide&&g==="left"?o=o-d:o<r.currentSlide&&g==="right"&&(o=o+d)}}else r.message==="index"&&(o=Number(r.index));return o};ge.keyHandler=function(e,r,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!r?"":e.keyCode===37?n?"next":"previous":e.keyCode===39?n?"previous":"next":""};ge.swipeStart=function(e,r,n){return e.target.tagName==="IMG"&&Zl(e),!r||!n&&e.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};ge.swipeMove=function(e,r){var n=r.scrolling,a=r.animating,i=r.vertical,s=r.swipeToSlide,o=r.verticalSwiping,c=r.rtl,u=r.currentSlide,d=r.edgeFriction,f=r.edgeDragged,h=r.onEdge,p=r.swiped,m=r.swiping,g=r.slideCount,y=r.slidesToScroll,x=r.infinite,v=r.touchObject,b=r.swipeEvent,w=r.listHeight,S=r.listWidth;if(!n){if(a)return Zl(e);i&&s&&o&&Zl(e);var E,j={},I=B0(r);v.curX=e.touches?e.touches[0].pageX:e.clientX,v.curY=e.touches?e.touches[0].pageY:e.clientY,v.swipeLength=Math.round(Math.sqrt(Math.pow(v.curX-v.startX,2)));var N=Math.round(Math.sqrt(Math.pow(v.curY-v.startY,2)));if(!o&&!m&&N>10)return{scrolling:!0};o&&(v.swipeLength=N);var T=(c?-1:1)*(v.curX>v.startX?1:-1);o&&(T=v.curY>v.startY?1:-1);var F=Math.ceil(g/y),C=W6(r.touchObject,o),A=v.swipeLength;return x||(u===0&&(C==="right"||C==="down")||u+1>=F&&(C==="left"||C==="up")||!V6(r)&&(C==="left"||C==="up"))&&(A=v.swipeLength*d,f===!1&&h&&(h(C),j.edgeDragged=!0)),!p&&b&&(b(C),j.swiped=!0),i?E=I+A*(w/S)*T:c?E=I-A*T:E=I+A*T,o&&(E=I+A*T),j=jt(jt({},j),{},{touchObject:v,swipeLeft:E,trackStyle:L0(jt(jt({},r),{},{left:E}))}),Math.abs(v.curX-v.startX)<Math.abs(v.curY-v.startY)*.8||v.swipeLength>10&&(j.swiping=!0,Zl(e)),j}};ge.swipeEnd=function(e,r){var n=r.dragging,a=r.swipe,i=r.touchObject,s=r.listWidth,o=r.touchThreshold,c=r.verticalSwiping,u=r.listHeight,d=r.swipeToSlide,f=r.scrolling,h=r.onSwipe,p=r.targetSlide,m=r.currentSlide,g=r.infinite;if(!n)return a&&Zl(e),{};var y=c?u/o:s/o,x=W6(i,c),v={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(f||!i.swipeLength)return v;if(i.swipeLength>y){Zl(e),h&&h(x);var b,w,S=g?m:p;switch(x){case"left":case"up":w=S+m3(r),b=d?p3(r,w):w,v.currentDirection=0;break;case"right":case"down":w=S-m3(r),b=d?p3(r,w):w,v.currentDirection=1;break;default:b=S}v.triggerSlideHandler=b}else{var E=B0(r);v.trackStyle=G6(jt(jt({},r),{},{left:E}))}return v};var jU=ge.getNavigableIndexes=function(e){for(var r=e.infinite?e.slideCount*2:e.slideCount,n=e.infinite?e.slidesToShow*-1:0,a=e.infinite?e.slidesToShow*-1:0,i=[];n<r;)i.push(n),n=a+e.slidesToScroll,a+=Math.min(e.slidesToScroll,e.slidesToShow);return i},p3=ge.checkNavigable=function(e,r){var n=jU(e),a=0;if(r>n[n.length-1])r=n[n.length-1];else for(var i in n){if(r<n[i]){r=a;break}a=n[i]}return r},m3=ge.getSlideCount=function(e){var r=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n,a=e.listRef,i=a.querySelectorAll&&a.querySelectorAll(".slick-slide")||[];if(Array.from(i).every(function(c){if(e.vertical){if(c.offsetTop+H6(c)/2>e.swipeLeft*-1)return n=c,!1}else if(c.offsetLeft-r+K1(c)/2>e.swipeLeft*-1)return n=c,!1;return!0}),!n)return 0;var s=e.rtl===!0?e.slideCount-e.currentSlide:e.currentSlide,o=Math.abs(n.dataset.index-s)||1;return o}else return e.slidesToScroll},Ew=ge.checkSpecKeys=function(e,r){return r.reduce(function(n,a){return n&&e.hasOwnProperty(a)},!0)?null:console.error("Keys Missing:",e)},L0=ge.getTrackCSS=function(e){Ew(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var r,n,a=e.slideCount+2*e.slidesToShow;e.vertical?n=a*e.slideHeight:r=TU(e)*e.slideWidth;var i={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var s=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",c=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";i=jt(jt({},i),{},{WebkitTransform:s,transform:o,msTransform:c})}else e.vertical?i.top=e.left:i.left=e.left;return e.fade&&(i={opacity:1}),r&&(i.width=r),n&&(i.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?i.marginTop=e.left+"px":i.marginLeft=e.left+"px"),i},G6=ge.getTrackAnimateCSS=function(e){Ew(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var r=L0(e);return e.useTransform?(r.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,r.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?r.transition="top "+e.speed+"ms "+e.cssEase:r.transition="left "+e.speed+"ms "+e.cssEase,r},B0=ge.getTrackLeft=function(e){if(e.unslick)return 0;Ew(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var r=e.slideIndex,n=e.trackRef,a=e.infinite,i=e.centerMode,s=e.slideCount,o=e.slidesToShow,c=e.slidesToScroll,u=e.slideWidth,d=e.listWidth,f=e.variableWidth,h=e.slideHeight,p=e.fade,m=e.vertical,g=0,y,x,v=0;if(p||e.slideCount===1)return 0;var b=0;if(a?(b=-Xh(e),s%c!==0&&r+c>s&&(b=-(r>s?o-(r-s):s%c)),i&&(b+=parseInt(o/2))):(s%c!==0&&r+c>s&&(b=o-s%c),i&&(b=parseInt(o/2))),g=b*u,v=b*h,m?y=r*h*-1+v:y=r*u*-1+g,f===!0){var w,S=n&&n.node;if(w=r+Xh(e),x=S&&S.childNodes[w],y=x?x.offsetLeft*-1:0,i===!0){w=a?r+Xh(e):r,x=S&&S.children[w],y=0;for(var E=0;E<w;E++)y-=S&&S.children[E]&&S.children[E].offsetWidth;y-=parseInt(e.centerPadding),y+=x&&(d-x.offsetWidth)/2}}return y},Xh=ge.getPreClones=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)},AU=ge.getPostClones=function(e){return e.unslick||!e.infinite?0:e.slideCount},TU=ge.getTotalSlides=function(e){return e.slideCount===1?1:Xh(e)+e.slideCount+AU(e)},IU=ge.siblingDirection=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+OU(e)?"left":"right":e.targetSlide<e.currentSlide-DU(e)?"right":"left"},OU=ge.slidesOnRight=function(e){var r=e.slidesToShow,n=e.centerMode,a=e.rtl,i=e.centerPadding;if(n){var s=(r-1)/2+1;return parseInt(i)>0&&(s+=1),a&&r%2===0&&(s+=1),s}return a?0:r-1},DU=ge.slidesOnLeft=function(e){var r=e.slidesToShow,n=e.centerMode,a=e.rtl,i=e.centerPadding;if(n){var s=(r-1)/2+1;return parseInt(i)>0&&(s+=1),!a&&r%2===0&&(s+=1),s}return a?r-1:0};ge.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var PU=ge.validSettings=Object.keys(_U.default);function RU(t){return PU.reduce(function(e,r){return t.hasOwnProperty(r)&&(e[r]=t[r]),e},{})}var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.Track=void 0;var is=X6(_),Fg=X6(sf),$g=ge;function X6(t){return t&&t.__esModule?t:{default:t}}function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function Z1(){return Z1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z1.apply(this,arguments)}function MU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y6(n.key),n)}}function BU(t,e,r){return e&&LU(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FU(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q1(t,e)}function Q1(t,e){return Q1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Q1(t,e)}function $U(t){var e=q6();return function(){var n=F0(t),a;if(e){var i=F0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return UU(this,a)}}function UU(t,e){if(e&&(mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J1(t)}function J1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q6=function(){return!!t})()}function F0(t){return F0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},F0(t)}function g3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ln(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g3(Object(r),!0).forEach(function(n){ey(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ey(t,e,r){return e=Y6(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y6(t){var e=zU(t,"string");return mc(e)=="symbol"?e:String(e)}function zU(t,e){if(mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ug=function(e){var r,n,a,i,s;e.rtl?s=e.slideCount-1-e.index:s=e.index,a=s<0||s>=e.slideCount,e.centerMode?(i=Math.floor(e.slidesToShow/2),n=(s-e.currentSlide)%e.slideCount===0,s>e.currentSlide-i-1&&s<=e.currentSlide+i&&(r=!0)):r=e.currentSlide<=s&&s<e.currentSlide+e.slidesToShow;var o;e.targetSlide<0?o=e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?o=e.targetSlide-e.slideCount:o=e.targetSlide;var c=s===o;return{"slick-slide":!0,"slick-active":r,"slick-center":n,"slick-cloned":a,"slick-current":c}},HU=function(e){var r={};return(e.variableWidth===void 0||e.variableWidth===!1)&&(r.width=e.slideWidth),e.fade&&(r.position="relative",e.vertical?r.top=-e.index*parseInt(e.slideHeight):r.left=-e.index*parseInt(e.slideWidth),r.opacity=e.currentSlide===e.index?1:0,r.zIndex=e.currentSlide===e.index?999:998,e.useCSS&&(r.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),r},zg=function(e,r){return e.key||r},WU=function(e){var r,n=[],a=[],i=[],s=is.default.Children.count(e.children),o=(0,$g.lazyStartIndex)(e),c=(0,$g.lazyEndIndex)(e);return is.default.Children.forEach(e.children,function(u,d){var f,h={message:"children",index:d,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(d)>=0?f=u:f=is.default.createElement("div",null);var p=HU(ln(ln({},e),{},{index:d})),m=f.props.className||"",g=Ug(ln(ln({},e),{},{index:d}));if(n.push(is.default.cloneElement(f,{key:"original"+zg(f,d),"data-index":d,className:(0,Fg.default)(g,m),tabIndex:"-1","aria-hidden":!g["slick-active"],style:ln(ln({outline:"none"},f.props.style||{}),p),onClick:function(v){f.props&&f.props.onClick&&f.props.onClick(v),e.focusOnSelect&&e.focusOnSelect(h)}})),e.infinite&&e.fade===!1){var y=s-d;y<=(0,$g.getPreClones)(e)&&(r=-y,r>=o&&(f=u),g=Ug(ln(ln({},e),{},{index:r})),a.push(is.default.cloneElement(f,{key:"precloned"+zg(f,r),"data-index":r,tabIndex:"-1",className:(0,Fg.default)(g,m),"aria-hidden":!g["slick-active"],style:ln(ln({},f.props.style||{}),p),onClick:function(v){f.props&&f.props.onClick&&f.props.onClick(v),e.focusOnSelect&&e.focusOnSelect(h)}}))),r=s+d,r<c&&(f=u),g=Ug(ln(ln({},e),{},{index:r})),i.push(is.default.cloneElement(f,{key:"postcloned"+zg(f,r),"data-index":r,tabIndex:"-1",className:(0,Fg.default)(g,m),"aria-hidden":!g["slick-active"],style:ln(ln({},f.props.style||{}),p),onClick:function(v){f.props&&f.props.onClick&&f.props.onClick(v),e.focusOnSelect&&e.focusOnSelect(h)}}))}}),e.rtl?a.concat(n,i).reverse():a.concat(n,i)};Jp.Track=function(t){FU(r,t);var e=$U(r);function r(){var n;MU(this,r);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i)),ey(J1(n),"node",null),ey(J1(n),"handleRef",function(o){n.node=o}),n}return BU(r,[{key:"render",value:function(){var a=WU(this.props),i=this.props,s=i.onMouseEnter,o=i.onMouseOver,c=i.onMouseLeave,u={onMouseEnter:s,onMouseOver:o,onMouseLeave:c};return is.default.createElement("div",Z1({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},u),a)}}]),r}(is.default.PureComponent);var em={};function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}Object.defineProperty(em,"__esModule",{value:!0});em.Dots=void 0;var ah=K6(_),VU=K6(sf),v3=ge;function K6(t){return t&&t.__esModule?t:{default:t}}function x3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x3(Object(r),!0).forEach(function(n){XU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XU(t,e,r){return e=Z6(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z6(n.key),n)}}function KU(t,e,r){return e&&YU(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z6(t){var e=ZU(t,"string");return gc(e)=="symbol"?e:String(e)}function ZU(t,e){if(gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function QU(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ty(t,e)}function ty(t,e){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ty(t,e)}function JU(t){var e=Q6();return function(){var n=$0(t),a;if(e){var i=$0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ez(this,a)}}function ez(t,e){if(e&&(gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tz(t)}function tz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q6=function(){return!!t})()}function $0(t){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$0(t)}var rz=function(e){var r;return e.infinite?r=Math.ceil(e.slideCount/e.slidesToScroll):r=Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,r};em.Dots=function(t){QU(r,t);var e=JU(r);function r(){return qU(this,r),e.apply(this,arguments)}return KU(r,[{key:"clickHandler",value:function(a,i){i.preventDefault(),this.props.clickHandler(a)}},{key:"render",value:function(){for(var a=this.props,i=a.onMouseEnter,s=a.onMouseOver,o=a.onMouseLeave,c=a.infinite,u=a.slidesToScroll,d=a.slidesToShow,f=a.slideCount,h=a.currentSlide,p=rz({slideCount:f,slidesToScroll:u,slidesToShow:d,infinite:c}),m={onMouseEnter:i,onMouseOver:s,onMouseLeave:o},g=[],y=0;y<p;y++){var x=(y+1)*u-1,v=c?x:(0,v3.clamp)(x,0,f-1),b=v-(u-1),w=c?b:(0,v3.clamp)(b,0,f-1),S=(0,VU.default)({"slick-active":c?h>=w&&h<=v:h===w}),E={message:"dots",index:y,slidesToScroll:u,currentSlide:h},j=this.clickHandler.bind(this,E);g=g.concat(ah.default.createElement("li",{key:y,className:S},ah.default.cloneElement(this.props.customPaging(y),{onClick:j})))}return ah.default.cloneElement(this.props.appendDots(g),GU({className:this.props.dotsClass},m))}}]),r}(ah.default.PureComponent);var vc={};function xc(t){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(t)}Object.defineProperty(vc,"__esModule",{value:!0});vc.PrevArrow=vc.NextArrow=void 0;var Ql=eA(_),J6=eA(sf),nz=ge;function eA(t){return t&&t.__esModule?t:{default:t}}function U0(){return U0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U0.apply(this,arguments)}function y3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function z0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(r),!0).forEach(function(n){az(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function az(t,e,r){return e=nA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nA(n.key),n)}}function rA(t,e,r){return e&&iz(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nA(t){var e=sz(t,"string");return xc(e)=="symbol"?e:String(e)}function sz(t,e){if(xc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ry(t,e)}function ry(t,e){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ry(t,e)}function iA(t){var e=sA();return function(){var n=H0(t),a;if(e){var i=H0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return oz(this,a)}}function oz(t,e){if(e&&(xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lz(t)}function lz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sA=function(){return!!t})()}function H0(t){return H0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H0(t)}vc.PrevArrow=function(t){aA(r,t);var e=iA(r);function r(){return tA(this,r),e.apply(this,arguments)}return rA(r,[{key:"clickHandler",value:function(a,i){i&&i.preventDefault(),this.props.clickHandler(a,i)}},{key:"render",value:function(){var a={"slick-arrow":!0,"slick-prev":!0},i=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(a["slick-disabled"]=!0,i=null);var s={key:"0","data-role":"none",className:(0,J6.default)(a),style:{display:"block"},onClick:i},o={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},c;return this.props.prevArrow?c=Ql.default.cloneElement(this.props.prevArrow,z0(z0({},s),o)):c=Ql.default.createElement("button",U0({key:"0",type:"button"},s)," ","Previous"),c}}]),r}(Ql.default.PureComponent);vc.NextArrow=function(t){aA(r,t);var e=iA(r);function r(){return tA(this,r),e.apply(this,arguments)}return rA(r,[{key:"clickHandler",value:function(a,i){i&&i.preventDefault(),this.props.clickHandler(a,i)}},{key:"render",value:function(){var a={"slick-arrow":!0,"slick-next":!0},i=this.clickHandler.bind(this,{message:"next"});(0,nz.canGoNext)(this.props)||(a["slick-disabled"]=!0,i=null);var s={key:"1","data-role":"none",className:(0,J6.default)(a),style:{display:"block"},onClick:i},o={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},c;return this.props.nextArrow?c=Ql.default.cloneElement(this.props.nextArrow,z0(z0({},s),o)):c=Ql.default.createElement("button",U0({key:"1",type:"button"},s)," ","Next"),c}}]),r}(Ql.default.PureComponent);var oA=function(){if(typeof Map<"u")return Map;function t(e,r){var n=-1;return e.some(function(a,i){return a[0]===r?(n=i,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var n=t(this.__entries__,r),a=this.__entries__[n];return a&&a[1]},e.prototype.set=function(r,n){var a=t(this.__entries__,r);~a?this.__entries__[a][1]=n:this.__entries__.push([r,n])},e.prototype.delete=function(r){var n=this.__entries__,a=t(n,r);~a&&n.splice(a,1)},e.prototype.has=function(r){return!!~t(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var a=0,i=this.__entries__;a<i.length;a++){var s=i[a];r.call(n,s[1],s[0])}},e}()}(),ny=typeof window<"u"&&typeof document<"u"&&window.document===document,W0=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),cz=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(W0):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),uz=2;function dz(t,e){var r=!1,n=!1,a=0;function i(){r&&(r=!1,t()),n&&o()}function s(){cz(i)}function o(){var c=Date.now();if(r){if(c-a<uz)return;n=!0}else r=!0,n=!1,setTimeout(s,e);a=c}return o}var fz=20,hz=["top","right","bottom","left","width","height","size","weight"],pz=typeof MutationObserver<"u",mz=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=dz(this.refresh.bind(this),fz)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var r=this.observers_,n=r.indexOf(e);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!ny||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),pz?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!ny||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var r=e.propertyName,n=r===void 0?"":r,a=hz.some(function(i){return!!~n.indexOf(i)});a&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),lA=function(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var a=n[r];Object.defineProperty(t,a,{value:e[a],enumerable:!1,writable:!1,configurable:!0})}return t},yc=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||W0},cA=tm(0,0,0,0);function V0(t){return parseFloat(t)||0}function b3(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(n,a){var i=t["border-"+a+"-width"];return n+V0(i)},0)}function gz(t){for(var e=["top","right","bottom","left"],r={},n=0,a=e;n<a.length;n++){var i=a[n],s=t["padding-"+i];r[i]=V0(s)}return r}function vz(t){var e=t.getBBox();return tm(0,0,e.width,e.height)}function xz(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return cA;var n=yc(t).getComputedStyle(t),a=gz(n),i=a.left+a.right,s=a.top+a.bottom,o=V0(n.width),c=V0(n.height);if(n.boxSizing==="border-box"&&(Math.round(o+i)!==e&&(o-=b3(n,"left","right")+i),Math.round(c+s)!==r&&(c-=b3(n,"top","bottom")+s)),!bz(t)){var u=Math.round(o+i)-e,d=Math.round(c+s)-r;Math.abs(u)!==1&&(o-=u),Math.abs(d)!==1&&(c-=d)}return tm(a.left,a.top,o,c)}var yz=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof yc(t).SVGGraphicsElement}:function(t){return t instanceof yc(t).SVGElement&&typeof t.getBBox=="function"}}();function bz(t){return t===yc(t).document.documentElement}function wz(t){return ny?yz(t)?vz(t):xz(t):cA}function _z(t){var e=t.x,r=t.y,n=t.width,a=t.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(i.prototype);return lA(s,{x:e,y:r,width:n,height:a,top:r,right:e+n,bottom:a+r,left:e}),s}function tm(t,e,r,n){return{x:t,y:e,width:r,height:n}}var kz=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=tm(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=wz(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Nz=function(){function t(e,r){var n=_z(r);lA(this,{target:e,contentRect:n})}return t}(),Sz=function(){function t(e,r,n){if(this.activeObservations_=[],this.observations_=new oA,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=n}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof yc(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new kz(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof yc(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Nz(n.target,n.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),uA=typeof WeakMap<"u"?new WeakMap:new oA,dA=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=mz.getInstance(),n=new Sz(e,r,this);uA.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){dA.prototype[t]=function(){var e;return(e=uA.get(this))[t].apply(e,arguments)}});var Ez=function(){return typeof W0.ResizeObserver<"u"?W0.ResizeObserver:dA}();const Cz=Object.freeze(Object.defineProperty({__proto__:null,default:Ez},Symbol.toStringTag,{value:"Module"})),jz=nE(Cz);Object.defineProperty(Qp,"__esModule",{value:!0});Qp.InnerSlider=void 0;var Hr=of(_),Az=of(M6),Tz=of(bU),Iz=of(sf),Dt=ge,Oz=Jp,Dz=em,w3=vc,Pz=of(jz);function of(t){return t&&t.__esModule?t:{default:t}}function Go(t){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(t)}function G0(){return G0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G0.apply(this,arguments)}function Rz(t,e){if(t==null)return{};var r=Mz(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mz(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function _3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(r),!0).forEach(function(n){Ue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hA(n.key),n)}}function Fz(t,e,r){return e&&Bz(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $z(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ay(t,e)}function ay(t,e){return ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ay(t,e)}function Uz(t){var e=fA();return function(){var n=X0(t),a;if(e){var i=X0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return zz(this,a)}}function zz(t,e){if(e&&(Go(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $e(t)}function $e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fA=function(){return!!t})()}function X0(t){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X0(t)}function Ue(t,e,r){return e=hA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hA(t){var e=Hz(t,"string");return Go(e)=="symbol"?e:String(e)}function Hz(t,e){if(Go(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Go(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}Qp.InnerSlider=function(t){$z(r,t);var e=Uz(r);function r(n){var a;Lz(this,r),a=e.call(this,n),Ue($e(a),"listRefHandler",function(s){return a.list=s}),Ue($e(a),"trackRefHandler",function(s){return a.track=s}),Ue($e(a),"adaptHeight",function(){if(a.props.adaptiveHeight&&a.list){var s=a.list.querySelector('[data-index="'.concat(a.state.currentSlide,'"]'));a.list.style.height=(0,Dt.getHeight)(s)+"px"}}),Ue($e(a),"componentDidMount",function(){if(a.props.onInit&&a.props.onInit(),a.props.lazyLoad){var s=(0,Dt.getOnDemandLazySlides)(Ce(Ce({},a.props),a.state));s.length>0&&(a.setState(function(c){return{lazyLoadedList:c.lazyLoadedList.concat(s)}}),a.props.onLazyLoad&&a.props.onLazyLoad(s))}var o=Ce({listRef:a.list,trackRef:a.track},a.props);a.updateState(o,!0,function(){a.adaptHeight(),a.props.autoplay&&a.autoPlay("update")}),a.props.lazyLoad==="progressive"&&(a.lazyLoadTimer=setInterval(a.progressiveLazyLoad,1e3)),a.ro=new Pz.default(function(){a.state.animating?(a.onWindowResized(!1),a.callbackTimers.push(setTimeout(function(){return a.onWindowResized()},a.props.speed))):a.onWindowResized()}),a.ro.observe(a.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(c){c.onfocus=a.props.pauseOnFocus?a.onSlideFocus:null,c.onblur=a.props.pauseOnFocus?a.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",a.onWindowResized):window.attachEvent("onresize",a.onWindowResized)}),Ue($e(a),"componentWillUnmount",function(){a.animationEndCallback&&clearTimeout(a.animationEndCallback),a.lazyLoadTimer&&clearInterval(a.lazyLoadTimer),a.callbackTimers.length&&(a.callbackTimers.forEach(function(s){return clearTimeout(s)}),a.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",a.onWindowResized):window.detachEvent("onresize",a.onWindowResized),a.autoplayTimer&&clearInterval(a.autoplayTimer),a.ro.disconnect()}),Ue($e(a),"componentDidUpdate",function(s){if(a.checkImagesLoad(),a.props.onReInit&&a.props.onReInit(),a.props.lazyLoad){var o=(0,Dt.getOnDemandLazySlides)(Ce(Ce({},a.props),a.state));o.length>0&&(a.setState(function(d){return{lazyLoadedList:d.lazyLoadedList.concat(o)}}),a.props.onLazyLoad&&a.props.onLazyLoad(o))}a.adaptHeight();var c=Ce(Ce({listRef:a.list,trackRef:a.track},a.props),a.state),u=a.didPropsChange(s);u&&a.updateState(c,u,function(){a.state.currentSlide>=Hr.default.Children.count(a.props.children)&&a.changeSlide({message:"index",index:Hr.default.Children.count(a.props.children)-a.props.slidesToShow,currentSlide:a.state.currentSlide}),a.props.autoplay?a.autoPlay("update"):a.pause("paused")})}),Ue($e(a),"onWindowResized",function(s){a.debouncedResize&&a.debouncedResize.cancel(),a.debouncedResize=(0,Tz.default)(function(){return a.resizeWindow(s)},50),a.debouncedResize()}),Ue($e(a),"resizeWindow",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,o=!!(a.track&&a.track.node);if(o){var c=Ce(Ce({listRef:a.list,trackRef:a.track},a.props),a.state);a.updateState(c,s,function(){a.props.autoplay?a.autoPlay("update"):a.pause("paused")}),a.setState({animating:!1}),clearTimeout(a.animationEndCallback),delete a.animationEndCallback}}),Ue($e(a),"updateState",function(s,o,c){var u=(0,Dt.initializedState)(s);s=Ce(Ce(Ce({},s),u),{},{slideIndex:u.currentSlide});var d=(0,Dt.getTrackLeft)(s);s=Ce(Ce({},s),{},{left:d});var f=(0,Dt.getTrackCSS)(s);(o||Hr.default.Children.count(a.props.children)!==Hr.default.Children.count(s.children))&&(u.trackStyle=f),a.setState(u,c)}),Ue($e(a),"ssrInit",function(){if(a.props.variableWidth){var s=0,o=0,c=[],u=(0,Dt.getPreClones)(Ce(Ce(Ce({},a.props),a.state),{},{slideCount:a.props.children.length})),d=(0,Dt.getPostClones)(Ce(Ce(Ce({},a.props),a.state),{},{slideCount:a.props.children.length}));a.props.children.forEach(function(j){c.push(j.props.style.width),s+=j.props.style.width});for(var f=0;f<u;f++)o+=c[c.length-1-f],s+=c[c.length-1-f];for(var h=0;h<d;h++)s+=c[h];for(var p=0;p<a.state.currentSlide;p++)o+=c[p];var m={width:s+"px",left:-o+"px"};if(a.props.centerMode){var g="".concat(c[a.state.currentSlide],"px");m.left="calc(".concat(m.left," + (100% - ").concat(g,") / 2 ) ")}return{trackStyle:m}}var y=Hr.default.Children.count(a.props.children),x=Ce(Ce(Ce({},a.props),a.state),{},{slideCount:y}),v=(0,Dt.getPreClones)(x)+(0,Dt.getPostClones)(x)+y,b=100/a.props.slidesToShow*v,w=100/v,S=-w*((0,Dt.getPreClones)(x)+a.state.currentSlide)*b/100;a.props.centerMode&&(S+=(100-w*b/100)/2);var E={width:b+"%",left:S+"%"};return{slideWidth:w+"%",trackStyle:E}}),Ue($e(a),"checkImagesLoad",function(){var s=a.list&&a.list.querySelectorAll&&a.list.querySelectorAll(".slick-slide img")||[],o=s.length,c=0;Array.prototype.forEach.call(s,function(u){var d=function(){return++c&&c>=o&&a.onWindowResized()};if(!u.onclick)u.onclick=function(){return u.parentNode.focus()};else{var f=u.onclick;u.onclick=function(h){f(h),u.parentNode.focus()}}u.onload||(a.props.lazyLoad?u.onload=function(){a.adaptHeight(),a.callbackTimers.push(setTimeout(a.onWindowResized,a.props.speed))}:(u.onload=d,u.onerror=function(){d(),a.props.onLazyLoadError&&a.props.onLazyLoadError()}))})}),Ue($e(a),"progressiveLazyLoad",function(){for(var s=[],o=Ce(Ce({},a.props),a.state),c=a.state.currentSlide;c<a.state.slideCount+(0,Dt.getPostClones)(o);c++)if(a.state.lazyLoadedList.indexOf(c)<0){s.push(c);break}for(var u=a.state.currentSlide-1;u>=-(0,Dt.getPreClones)(o);u--)if(a.state.lazyLoadedList.indexOf(u)<0){s.push(u);break}s.length>0?(a.setState(function(d){return{lazyLoadedList:d.lazyLoadedList.concat(s)}}),a.props.onLazyLoad&&a.props.onLazyLoad(s)):a.lazyLoadTimer&&(clearInterval(a.lazyLoadTimer),delete a.lazyLoadTimer)}),Ue($e(a),"slideHandler",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=a.props,u=c.asNavFor,d=c.beforeChange,f=c.onLazyLoad,h=c.speed,p=c.afterChange,m=a.state.currentSlide,g=(0,Dt.slideHandler)(Ce(Ce(Ce({index:s},a.props),a.state),{},{trackRef:a.track,useCSS:a.props.useCSS&&!o})),y=g.state,x=g.nextState;if(y){d&&d(m,y.currentSlide);var v=y.lazyLoadedList.filter(function(b){return a.state.lazyLoadedList.indexOf(b)<0});f&&v.length>0&&f(v),!a.props.waitForAnimate&&a.animationEndCallback&&(clearTimeout(a.animationEndCallback),p&&p(m),delete a.animationEndCallback),a.setState(y,function(){u&&a.asNavForIndex!==s&&(a.asNavForIndex=s,u.innerSlider.slideHandler(s)),x&&(a.animationEndCallback=setTimeout(function(){var b=x.animating,w=Rz(x,["animating"]);a.setState(w,function(){a.callbackTimers.push(setTimeout(function(){return a.setState({animating:b})},10)),p&&p(y.currentSlide),delete a.animationEndCallback})},h))})}}),Ue($e(a),"changeSlide",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=Ce(Ce({},a.props),a.state),u=(0,Dt.changeSlide)(c,s);if(!(u!==0&&!u)&&(o===!0?a.slideHandler(u,o):a.slideHandler(u),a.props.autoplay&&a.autoPlay("update"),a.props.focusOnSelect)){var d=a.list.querySelectorAll(".slick-current");d[0]&&d[0].focus()}}),Ue($e(a),"clickHandler",function(s){a.clickable===!1&&(s.stopPropagation(),s.preventDefault()),a.clickable=!0}),Ue($e(a),"keyHandler",function(s){var o=(0,Dt.keyHandler)(s,a.props.accessibility,a.props.rtl);o!==""&&a.changeSlide({message:o})}),Ue($e(a),"selectHandler",function(s){a.changeSlide(s)}),Ue($e(a),"disableBodyScroll",function(){var s=function(c){c=c||window.event,c.preventDefault&&c.preventDefault(),c.returnValue=!1};window.ontouchmove=s}),Ue($e(a),"enableBodyScroll",function(){window.ontouchmove=null}),Ue($e(a),"swipeStart",function(s){a.props.verticalSwiping&&a.disableBodyScroll();var o=(0,Dt.swipeStart)(s,a.props.swipe,a.props.draggable);o!==""&&a.setState(o)}),Ue($e(a),"swipeMove",function(s){var o=(0,Dt.swipeMove)(s,Ce(Ce(Ce({},a.props),a.state),{},{trackRef:a.track,listRef:a.list,slideIndex:a.state.currentSlide}));o&&(o.swiping&&(a.clickable=!1),a.setState(o))}),Ue($e(a),"swipeEnd",function(s){var o=(0,Dt.swipeEnd)(s,Ce(Ce(Ce({},a.props),a.state),{},{trackRef:a.track,listRef:a.list,slideIndex:a.state.currentSlide}));if(o){var c=o.triggerSlideHandler;delete o.triggerSlideHandler,a.setState(o),c!==void 0&&(a.slideHandler(c),a.props.verticalSwiping&&a.enableBodyScroll())}}),Ue($e(a),"touchEnd",function(s){a.swipeEnd(s),a.clickable=!0}),Ue($e(a),"slickPrev",function(){a.callbackTimers.push(setTimeout(function(){return a.changeSlide({message:"previous"})},0))}),Ue($e(a),"slickNext",function(){a.callbackTimers.push(setTimeout(function(){return a.changeSlide({message:"next"})},0))}),Ue($e(a),"slickGoTo",function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s=Number(s),isNaN(s))return"";a.callbackTimers.push(setTimeout(function(){return a.changeSlide({message:"index",index:s,currentSlide:a.state.currentSlide},o)},0))}),Ue($e(a),"play",function(){var s;if(a.props.rtl)s=a.state.currentSlide-a.props.slidesToScroll;else if((0,Dt.canGoNext)(Ce(Ce({},a.props),a.state)))s=a.state.currentSlide+a.props.slidesToScroll;else return!1;a.slideHandler(s)}),Ue($e(a),"autoPlay",function(s){a.autoplayTimer&&clearInterval(a.autoplayTimer);var o=a.state.autoplaying;if(s==="update"){if(o==="hovered"||o==="focused"||o==="paused")return}else if(s==="leave"){if(o==="paused"||o==="focused")return}else if(s==="blur"&&(o==="paused"||o==="hovered"))return;a.autoplayTimer=setInterval(a.play,a.props.autoplaySpeed+50),a.setState({autoplaying:"playing"})}),Ue($e(a),"pause",function(s){a.autoplayTimer&&(clearInterval(a.autoplayTimer),a.autoplayTimer=null);var o=a.state.autoplaying;s==="paused"?a.setState({autoplaying:"paused"}):s==="focused"?(o==="hovered"||o==="playing")&&a.setState({autoplaying:"focused"}):o==="playing"&&a.setState({autoplaying:"hovered"})}),Ue($e(a),"onDotsOver",function(){return a.props.autoplay&&a.pause("hovered")}),Ue($e(a),"onDotsLeave",function(){return a.props.autoplay&&a.state.autoplaying==="hovered"&&a.autoPlay("leave")}),Ue($e(a),"onTrackOver",function(){return a.props.autoplay&&a.pause("hovered")}),Ue($e(a),"onTrackLeave",function(){return a.props.autoplay&&a.state.autoplaying==="hovered"&&a.autoPlay("leave")}),Ue($e(a),"onSlideFocus",function(){return a.props.autoplay&&a.pause("focused")}),Ue($e(a),"onSlideBlur",function(){return a.props.autoplay&&a.state.autoplaying==="focused"&&a.autoPlay("blur")}),Ue($e(a),"render",function(){var s=(0,Iz.default)("slick-slider",a.props.className,{"slick-vertical":a.props.vertical,"slick-initialized":!0}),o=Ce(Ce({},a.props),a.state),c=(0,Dt.extractObject)(o,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),u=a.props.pauseOnHover;c=Ce(Ce({},c),{},{onMouseEnter:u?a.onTrackOver:null,onMouseLeave:u?a.onTrackLeave:null,onMouseOver:u?a.onTrackOver:null,focusOnSelect:a.props.focusOnSelect&&a.clickable?a.selectHandler:null});var d;if(a.props.dots===!0&&a.state.slideCount>=a.props.slidesToShow){var f=(0,Dt.extractObject)(o,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),h=a.props.pauseOnDotsHover;f=Ce(Ce({},f),{},{clickHandler:a.changeSlide,onMouseEnter:h?a.onDotsLeave:null,onMouseOver:h?a.onDotsOver:null,onMouseLeave:h?a.onDotsLeave:null}),d=Hr.default.createElement(Dz.Dots,f)}var p,m,g=(0,Dt.extractObject)(o,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);g.clickHandler=a.changeSlide,a.props.arrows&&(p=Hr.default.createElement(w3.PrevArrow,g),m=Hr.default.createElement(w3.NextArrow,g));var y=null;a.props.vertical&&(y={height:a.state.listHeight});var x=null;a.props.vertical===!1?a.props.centerMode===!0&&(x={padding:"0px "+a.props.centerPadding}):a.props.centerMode===!0&&(x={padding:a.props.centerPadding+" 0px"});var v=Ce(Ce({},y),x),b=a.props.touchMove,w={className:"slick-list",style:v,onClick:a.clickHandler,onMouseDown:b?a.swipeStart:null,onMouseMove:a.state.dragging&&b?a.swipeMove:null,onMouseUp:b?a.swipeEnd:null,onMouseLeave:a.state.dragging&&b?a.swipeEnd:null,onTouchStart:b?a.swipeStart:null,onTouchMove:a.state.dragging&&b?a.swipeMove:null,onTouchEnd:b?a.touchEnd:null,onTouchCancel:a.state.dragging&&b?a.swipeEnd:null,onKeyDown:a.props.accessibility?a.keyHandler:null},S={className:s,dir:"ltr",style:a.props.style};return a.props.unslick&&(w={className:"slick-list"},S={className:s}),Hr.default.createElement("div",S,a.props.unslick?"":p,Hr.default.createElement("div",G0({ref:a.listRefHandler},w),Hr.default.createElement(Oz.Track,G0({ref:a.trackRefHandler},c),a.props.children)),a.props.unslick?"":m,a.props.unslick?"":d)}),a.list=null,a.track=null,a.state=Ce(Ce({},Az.default),{},{currentSlide:a.props.initialSlide,targetSlide:a.props.initialSlide?a.props.initialSlide:0,slideCount:Hr.default.Children.count(a.props.children)}),a.callbackTimers=[],a.clickable=!0,a.debouncedResize=null;var i=a.ssrInit();return a.state=Ce(Ce({},a.state),i),a}return Fz(r,[{key:"didPropsChange",value:function(a){for(var i=!1,s=0,o=Object.keys(this.props);s<o.length;s++){var c=o[s];if(!a.hasOwnProperty(c)){i=!0;break}if(!(Go(a[c])==="object"||typeof a[c]=="function"||isNaN(a[c]))&&a[c]!==this.props[c]){i=!0;break}}return i||Hr.default.Children.count(this.props.children)!==Hr.default.Children.count(a.children)}}]),r}(Hr.default.Component);var Wz=function(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},Vz=Wz,Gz=Vz,Xz=function(t){var e=/[height|width]$/;return e.test(t)},k3=function(t){var e="",r=Object.keys(t);return r.forEach(function(n,a){var i=t[n];n=Gz(n),Xz(n)&&typeof i=="number"&&(i=i+"px"),i===!0?e+=n:i===!1?e+="not "+n:e+="("+n+": "+i+")",a<r.length-1&&(e+=" and ")}),e},qz=function(t){var e="";return typeof t=="string"?t:t instanceof Array?(t.forEach(function(r,n){e+=k3(r),n<t.length-1&&(e+=", ")}),e):k3(t)},Yz=qz,Hg,N3;function Kz(){if(N3)return Hg;N3=1;function t(e){this.options=e,!e.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},Hg=t,Hg}var Wg,S3;function pA(){if(S3)return Wg;S3=1;function t(n,a){var i=0,s=n.length,o;for(i;i<s&&(o=a(n[i],i),o!==!1);i++);}function e(n){return Object.prototype.toString.apply(n)==="[object Array]"}function r(n){return typeof n=="function"}return Wg={isFunction:r,isArray:e,each:t},Wg}var Vg,E3;function Zz(){if(E3)return Vg;E3=1;var t=Kz(),e=pA().each;function r(n,a){this.query=n,this.isUnconditional=a,this.handlers=[],this.mql=window.matchMedia(n);var i=this;this.listener=function(s){i.mql=s.currentTarget||s,i.assess()},this.mql.addListener(this.listener)}return r.prototype={constuctor:r,addHandler:function(n){var a=new t(n);this.handlers.push(a),this.matches()&&a.on()},removeHandler:function(n){var a=this.handlers;e(a,function(i,s){if(i.equals(n))return i.destroy(),!a.splice(s,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(n){n.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var n=this.matches()?"on":"off";e(this.handlers,function(a){a[n]()})}},Vg=r,Vg}var Gg,C3;function Qz(){if(C3)return Gg;C3=1;var t=Zz(),e=pA(),r=e.each,n=e.isFunction,a=e.isArray;function i(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return i.prototype={constructor:i,register:function(s,o,c){var u=this.queries,d=c&&this.browserIsIncapable;return u[s]||(u[s]=new t(s,d)),n(o)&&(o={match:o}),a(o)||(o=[o]),r(o,function(f){n(f)&&(f={match:f}),u[s].addHandler(f)}),this},unregister:function(s,o){var c=this.queries[s];return c&&(o?c.removeHandler(o):(c.clear(),delete this.queries[s])),this}},Gg=i,Gg}var Xg,j3;function Jz(){if(j3)return Xg;j3=1;var t=Qz();return Xg=new t,Xg}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(_),r=Qp,n=s(Yz),a=s(Sw),i=ge;function s(N){return N&&N.__esModule?N:{default:N}}function o(N){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},o(N)}function c(){return c=Object.assign?Object.assign.bind():function(N){for(var T=1;T<arguments.length;T++){var F=arguments[T];for(var C in F)Object.prototype.hasOwnProperty.call(F,C)&&(N[C]=F[C])}return N},c.apply(this,arguments)}function u(N,T){var F=Object.keys(N);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(N);T&&(C=C.filter(function(A){return Object.getOwnPropertyDescriptor(N,A).enumerable})),F.push.apply(F,C)}return F}function d(N){for(var T=1;T<arguments.length;T++){var F=arguments[T]!=null?arguments[T]:{};T%2?u(Object(F),!0).forEach(function(C){S(N,C,F[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(F)):u(Object(F)).forEach(function(C){Object.defineProperty(N,C,Object.getOwnPropertyDescriptor(F,C))})}return N}function f(N,T){if(!(N instanceof T))throw new TypeError("Cannot call a class as a function")}function h(N,T){for(var F=0;F<T.length;F++){var C=T[F];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(N,E(C.key),C)}}function p(N,T,F){return T&&h(N.prototype,T),Object.defineProperty(N,"prototype",{writable:!1}),N}function m(N,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(T&&T.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),T&&g(N,T)}function g(N,T){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},g(N,T)}function y(N){var T=b();return function(){var C=w(N),A;if(T){var k=w(this).constructor;A=Reflect.construct(C,arguments,k)}else A=C.apply(this,arguments);return x(this,A)}}function x(N,T){if(T&&(o(T)==="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(N)}function v(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function b(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b=function(){return!!N})()}function w(N){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},w(N)}function S(N,T,F){return T=E(T),T in N?Object.defineProperty(N,T,{value:F,enumerable:!0,configurable:!0,writable:!0}):N[T]=F,N}function E(N){var T=j(N,"string");return o(T)=="symbol"?T:String(T)}function j(N,T){if(o(N)!="object"||!N)return N;var F=N[Symbol.toPrimitive];if(F!==void 0){var C=F.call(N,T);if(o(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(N)}var I=(0,i.canUseDOM)()&&Jz();t.default=function(N){m(F,N);var T=y(F);function F(C){var A;return f(this,F),A=T.call(this,C),S(v(A),"innerSliderRefHandler",function(k){return A.innerSlider=k}),S(v(A),"slickPrev",function(){return A.innerSlider.slickPrev()}),S(v(A),"slickNext",function(){return A.innerSlider.slickNext()}),S(v(A),"slickGoTo",function(k){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return A.innerSlider.slickGoTo(k,O)}),S(v(A),"slickPause",function(){return A.innerSlider.pause("paused")}),S(v(A),"slickPlay",function(){return A.innerSlider.autoPlay("play")}),A.state={breakpoint:null},A._responsiveMediaHandlers=[],A}return p(F,[{key:"media",value:function(A,k){I.register(A,k),this._responsiveMediaHandlers.push({query:A,handler:k})}},{key:"componentDidMount",value:function(){var A=this;if(this.props.responsive){var k=this.props.responsive.map(function($){return $.breakpoint});k.sort(function($,D){return $-D}),k.forEach(function($,D){var R;D===0?R=(0,n.default)({minWidth:0,maxWidth:$}):R=(0,n.default)({minWidth:k[D-1]+1,maxWidth:$}),(0,i.canUseDOM)()&&A.media(R,function(){A.setState({breakpoint:$})})});var O=(0,n.default)({minWidth:k.slice(-1)[0]});(0,i.canUseDOM)()&&this.media(O,function(){A.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(A){I.unregister(A.query,A.handler)})}},{key:"render",value:function(){var A=this,k,O;this.state.breakpoint?(O=this.props.responsive.filter(function(V){return V.breakpoint===A.state.breakpoint}),k=O[0].settings==="unslick"?"unslick":d(d(d({},a.default),this.props),O[0].settings)):k=d(d({},a.default),this.props),k.centerMode&&(k.slidesToScroll>1,k.slidesToScroll=1),k.fade&&(k.slidesToShow>1,k.slidesToScroll>1,k.slidesToShow=1,k.slidesToScroll=1);var $=e.default.Children.toArray(this.props.children);$=$.filter(function(V){return typeof V=="string"?!!V.trim():!!V}),k.variableWidth&&(k.rows>1||k.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),k.variableWidth=!1);for(var D=[],R=null,M=0;M<$.length;M+=k.rows*k.slidesPerRow){for(var L=[],B=M;B<M+k.rows*k.slidesPerRow;B+=k.slidesPerRow){for(var U=[],q=B;q<B+k.slidesPerRow&&(k.variableWidth&&$[q].props.style&&(R=$[q].props.style.width),!(q>=$.length));q+=1)U.push(e.default.cloneElement($[q],{key:100*M+10*B+q,tabIndex:-1,style:{width:"".concat(100/k.slidesPerRow,"%"),display:"inline-block"}}));L.push(e.default.createElement("div",{key:10*M+B},U))}k.variableWidth?D.push(e.default.createElement("div",{key:M,style:{width:R}},L)):D.push(e.default.createElement("div",{key:M},L))}if(k==="unslick"){var te="regular slider "+(this.props.className||"");return e.default.createElement("div",{className:te},$)}else D.length<=k.slidesToShow&&!k.infinite&&(k.unslick=!0);return e.default.createElement(r.InnerSlider,c({style:this.props.style,ref:this.innerSliderRefHandler},(0,i.filterSettings)(k)),D)}}]),F}(e.default.Component)})(R6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(R6);function r(n){return n&&n.__esModule?n:{default:n}}t.default=e.default})(P6);const eH=ci(P6),tH=({events:t,titleStyle:e={},descriptionStyle:r={},desktopTitleStyle:n={},desktopDescriptionStyle:a={},formatTimeRange:i})=>{const[s,o]=_.useState(0),c=f=>{if(ti(f.start_at))try{return en(f.start_at,"d MMMM")}catch(h){console.error("Error formatting start_at:",f.start_at,h)}if(ti(f.start_time))try{return en(f.start_time,"d MMMM")}catch(h){console.error("Error formatting start_time:",f.start_time,h)}if(ti(f.date))try{return en(f.date,"d MMMM")}catch(h){console.error("Error formatting date:",f.date,h)}return"Дата не указана"},u=f=>{try{return f.start_at&&f.end_at?i?i(f.start_at,f.end_at):ei(f.start_at,f.end_at):f.start_time&&f.end_time?i?i(f.start_time,f.end_time):ei(f.start_time,f.end_time):""}catch(h){return console.error("Error formatting time range:",h),""}},d={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:5e3,beforeChange:(f,h)=>o(h),customPaging:f=>l.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${f===s?"bg-white scale-125":"bg-white/50 hover:bg-white/75"}`}),responsive:[{breakpoint:1024,settings:{arrows:!1}}]};return t.length===0?null:l.jsxs("div",{className:"relative",children:[l.jsx(eH,{...d,className:"events-slideshow",children:t.map((f,h)=>!f||!f.id?(console.warn("Invalid event data at index:",h,f),null):l.jsxs("div",{className:"relative h-[300px] sm:h-[400px] md:h-[500px]",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${zt(f.bg_image)})`,backgroundPosition:"center 30%"},children:l.jsx("div",{className:"absolute inset-0 bg-black/50"})}),l.jsx("div",{className:"relative h-full flex items-center",children:l.jsxs("div",{className:"container px-4 sm:px-6",children:[l.jsxs("div",{className:"hidden md:block max-w-2xl text-white",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",style:n,children:f.title||"Название не указано"}),l.jsx("p",{className:"text-base md:text-lg mb-6 line-clamp-2",style:a,children:f.short_description||"Описание отсутствует"}),l.jsx("div",{className:"flex flex-row flex-wrap gap-6 mb-8 text-white/90",children:l.jsx(Be,{to:`/events/${f.id}`,className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-all duration-300 group","aria-label":"Подробнее о мероприятии",children:l.jsx(fa,{className:"h-6 w-6 text-white group-hover:translate-x-1 transition-transform"})})}),l.jsxs("div",{className:"flex items-center gap-2 text-base",children:[l.jsx(Oe,{className:"h-5 w-5"}),l.jsxs("span",{children:[c(f),u(f)&&l.jsxs(l.Fragment,{children:[" • ",u(f)]})]})]})]}),l.jsx("div",{className:"md:hidden absolute bottom-6 left-0 right-0 px-4 sm:px-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap justify-between items-start sm:items-center gap-3 text-white",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm sm:text-base",children:[l.jsx(Oe,{className:"h-4 w-4 sm:h-5 sm:w-5"}),l.jsxs("span",{children:[c(f),u(f)&&l.jsxs(l.Fragment,{children:[" • ",u(f)]})]})]}),l.jsx(Be,{to:`/events/${f.id}`,className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-all duration-300 group","aria-label":"Подробнее о мероприятии",children:l.jsx(fa,{className:"h-5 w-5 text-white group-hover:translate-x-1 transition-transform"})})]})})]})})]},f.id))}),l.jsx("div",{className:"md:hidden container px-4 sm:px-6 mt-4",children:t.map((f,h)=>!f||!f.id?null:l.jsxs("div",{className:`${h===s?"block":"hidden"}`,children:[l.jsx("h2",{className:"text-xl font-bold mb-2",style:e,children:f.title||"Название не указано"}),l.jsx("p",{className:"text-sm line-clamp-2",style:r,children:f.short_description||"Описание отсутствует"})]},f.id))}),l.jsx("style",{jsx:!0,global:!0,children:`
        .events-slideshow .slick-dots {
          bottom: 20px;
        }
        .events-slideshow .slick-dots li {
          margin: 0 4px;
        }
        @media (max-width: 640px) {
          .events-slideshow .slick-dots {
            bottom: 10px;
          }
        }
      `})]})},qg=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),rH=()=>{var R,M;const{user:t}=il(),[e,r]=_.useState(""),[n,a]=_.useState("start-asc"),[i,s]=_.useState("grid"),[o,c]=_.useState("all"),[u,d]=_.useState({active:[],past:[]}),[f,h]=_.useState(!0),[p,m]=_.useState(null),[g,y]=_.useState(10),[x,v]=_.useState(!1),[b,w]=_.useState(!1),[S,E]=_.useState([]),[j,I]=_.useState([]),{isFavoriteEvent:N}=Nw(t==null?void 0:t.id),T=async()=>{try{const{data:L,error:B}=await qg.from("events").select("event_type").eq("status","active");if(B)throw B;const U=Array.from(new Set(L.map(q=>q.event_type)));E(U)}catch(L){console.error("Error fetching event types:",L),K.error("Не удалось загрузить типы мероприятий")}},F=async()=>{try{h(!0);let L=qg.from("events").select(`
          *,
          time_slot:time_slots_table!fk_time_slots_event(
            id,
            start_at,
            end_at
          )
        `).eq("status","active");j.length>0&&(L=L.in("event_type",j));const{data:B,error:U}=await L;if(U)throw U;const q=(B||[]).map(se=>{var Te,Fe,P,Q;return{...se,start_at:((Fe=(Te=se.time_slot)==null?void 0:Te[0])==null?void 0:Fe.start_at)||se.start_at,end_at:((Q=(P=se.time_slot)==null?void 0:P[0])==null?void 0:Q.end_at)||se.end_at}});let V=[...q.filter(se=>se.end_at?!fs(se.end_at):!0)];switch(n){case"start-asc":V.sort((se,Te)=>new Date(se.start_at||0).getTime()-new Date(Te.start_at||0).getTime());break;case"start-desc":V.sort((se,Te)=>new Date(Te.start_at||0).getTime()-new Date(se.start_at||0).getTime());break;case"title-asc":V.sort((se,Te)=>se.title.localeCompare(Te.title));break;case"title-desc":V.sort((se,Te)=>Te.title.localeCompare(se.title));break}const{data:re,error:ue}=await qg.from("events").select(`
          *,
          time_slot:time_slots_table!fk_time_slots_event(
            id,
            start_at,
            end_at
          )
        `).or("status.eq.past").order("start_at",{ascending:!1,foreignTable:"time_slot"}).limit(6);if(ue)throw ue;const ie=(re||[]).map(se=>{var Te,Fe,P,Q;return{...se,start_at:((Fe=(Te=se.time_slot)==null?void 0:Te[0])==null?void 0:Fe.start_at)||se.start_at,end_at:((Q=(P=se.time_slot)==null?void 0:P[0])==null?void 0:Q.end_at)||se.end_at}}),oe=q.filter(se=>se.end_at&&fs(se.end_at)),ye=[...ie,...oe].sort((se,Te)=>new Date(Te.start_at||0).getTime()-new Date(se.start_at||0).getTime()).slice(0,6);d({active:V,past:ye})}catch(L){console.error("Error fetching events:",L),m("Не удалось загрузить мероприятия"),K.error("Не удалось загрузить мероприятия")}finally{h(!1)}};_.useEffect(()=>{T()},[]),_.useEffect(()=>{window.scrollTo(0,0),F()},[n,j]);const C=L=>{I(B=>B.includes(L)?B.filter(U=>U!==L):[...B,L])},A=()=>{I([]),r(""),c("all")},k=_.useMemo(()=>{let L=u.active||[];if(e){const B=e.toLowerCase();L=L.filter(U=>U.title.toLowerCase().includes(B)||U.description.toLowerCase().includes(B))}return o==="favorites"&&(L=L.filter(B=>N(B.id))),L},[u.active,e,o,N]),O=_.useMemo(()=>{var L;return(L=u.active)==null?void 0:L.slice().sort((B,U)=>new Date(B.start_at||0).getTime()-new Date(U.start_at||0).getTime()).slice(0,5)},[u.active]),$=()=>{y(L=>L+10)},D=[{value:"start-asc",label:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Kx,{className:"h-4 w-4"})," Дата"]})},{value:"start-desc",label:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Yx,{className:"h-4 w-4"})," Дата"]})},{value:"title-asc",label:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Kx,{className:"h-4 w-4"})," Название"]})},{value:"title-desc",label:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Yx,{className:"h-4 w-4"})," Название"]})}];return f?l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):p?l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600",children:p})}):l.jsxs(Ot,{children:[l.jsx("div",{className:"relative",children:l.jsx(tH,{events:O,titleStyle:{fontSize:"1.25rem"},descriptionStyle:{fontSize:"0.875rem"},desktopTitleStyle:{fontSize:"1.75rem"},desktopDescriptionStyle:{fontSize:"1.125rem"},formatTimeRange:ei})}),l.jsx("main",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container px-4",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsxs("div",{className:"lg:flex-1",children:[l.jsxs("div",{className:"mb-6 space-y-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-between",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",placeholder:"Поиск мероприятий...",value:e,onChange:L=>r(L.target.value),className:"w-full px-4 py-2 pl-10 border border-dark-300 dark:border-dark-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-dark-800"}),l.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-dark-400"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>w(!b),className:`flex items-center gap-2 px-4 py-2 border rounded-md ${j.length>0?"bg-primary-100 dark:bg-primary-900/20 border-primary-500 text-primary-800 dark:text-primary-200":"border-dark-300 dark:border-dark-700 bg-white dark:bg-dark-800"}`,children:[l.jsx(A0,{className:"h-5 w-5"}),l.jsx("span",{children:"Фильтры"}),j.length>0&&l.jsx("span",{className:"bg-primary-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:j.length})]}),b&&l.jsxs("div",{className:"absolute right-0 mt-1 w-64 bg-white dark:bg-dark-800 border border-dark-300 dark:border-dark-700 rounded-md shadow-lg py-2 z-50",children:[l.jsxs("div",{className:"px-4 py-2 border-b border-dark-200 dark:border-dark-700 flex justify-between items-center",children:[l.jsx("p",{className:"font-medium",children:"Типы мероприятий"}),l.jsx("button",{onClick:A,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Сбросить"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto",children:S.map(L=>l.jsxs("label",{className:"flex items-center px-4 py-2 hover:bg-gray-100 dark:hover:bg-dark-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:j.includes(L),onChange:()=>C(L),className:"rounded text-primary-600 dark:text-primary-400 focus:ring-primary-500 dark:focus:ring-primary-400"}),l.jsx("span",{className:"ml-2",children:L})]},L))})]})]})]}),l.jsxs("div",{className:"flex gap-3 items-center",children:[l.jsxs("div",{className:"flex rounded-md shadow-sm",children:[l.jsx("button",{className:`p-2 border border-dark-300 dark:border-dark-700 rounded-l-md ${i==="grid"?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-dark-800"}`,onClick:()=>s("grid"),title:"Сетка",children:l.jsx(VM,{className:"h-5 w-5"})}),l.jsx("button",{className:`p-2 border border-dark-300 dark:border-dark-700 rounded-r-md ${i==="list"?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-dark-800"}`,onClick:()=>s("list"),title:"Список",children:l.jsx(cw,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"relative",style:{zIndex:999},children:[l.jsxs("button",{onClick:()=>v(!x),className:"flex items-center gap-2 px-3 py-2 border border-dark-300 dark:border-dark-700 rounded-md bg-white dark:bg-dark-800",children:[(R=D.find(L=>L.value===n))==null?void 0:R.label,l.jsx(Cd,{className:`h-4 w-4 transition-transform ${x?"rotate-180":""}`})]}),x&&l.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-dark-800 border border-dark-300 dark:border-dark-700 rounded-md shadow-lg py-1 z-50",children:D.map(L=>l.jsx("button",{onClick:()=>{a(L.value),v(!1)},className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${n===L.value?"bg-primary-100 dark:bg-primary-900/20 text-primary-800 dark:text-primary-200":"hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:L.label},L.value))})]})]})]}),l.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(A0,{className:"h-4 w-4 text-gray-500"}),l.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Показать:"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${o==="all"?"bg-primary-500 text-white":"bg-gray-200 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-600"}`,children:"Все мероприятия"}),t&&l.jsxs("button",{onClick:()=>c("favorites"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors flex items-center gap-1 ${o==="favorites"?"bg-red-500 text-white":"bg-gray-200 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-600"}`,children:[l.jsx(Ia,{className:`h-4 w-4 ${o==="favorites"?"fill-current":""}`}),"Избранные"]})]})]})})]}),!t&&l.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["💡 ",l.jsx("strong",{children:"Совет:"})," Войдите в систему, чтобы добавлять мероприятия в избранное и создавать персональные списки."]})}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Предстоящие мероприятия"}),(j.length>0||o==="favorites")&&l.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[o==="favorites"&&l.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200",children:[l.jsx(Ia,{className:"h-3 w-3 mr-1 fill-current"}),"Избранные",l.jsx("button",{onClick:()=>c("all"),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:"×"})]}),j.map(L=>l.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/20 text-primary-800 dark:text-primary-200",children:[L,l.jsx("button",{onClick:()=>C(L),className:"ml-2 text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-200",children:"×"})]},L)),l.jsx("button",{onClick:A,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline ml-2",children:"Очистить все"})]}),k.length===0&&!f&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"mb-4",children:o==="favorites"?l.jsx(Ia,{className:"h-16 w-16 mx-auto text-gray-300 dark:text-gray-600"}):l.jsx(ii,{className:"h-16 w-16 mx-auto text-gray-300 dark:text-gray-600"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:o==="favorites"?"Нет избранных мероприятий":"Мероприятия не найдены"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:o==="favorites"?"Добавьте мероприятия в избранное, нажав на ❤️ в их карточках":e?`По запросу "${e}" ничего не найдено. Попробуйте изменить поисковый запрос.`:"Попробуйте изменить фильтры или поисковый запрос."}),o==="favorites"&&l.jsx("button",{onClick:()=>c("all"),className:"btn-primary",children:"Посмотреть все мероприятия"})]}),k.length>0&&l.jsx(rU,{events:k.slice(0,g),type:"upcoming",searchQuery:"",viewMode:i,showPrice:!0,formatTimeRange:ei}),k.length>g&&l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:$,className:"px-6 py-2 bg-primary-50 text-primary-600 rounded-lg hover:bg-primary-100 transition-colors dark:bg-primary-900/20 dark:text-primary-400 dark:hover:bg-primary-900/30",children:"Показать еще"})})]})]}),((M=u.past)==null?void 0:M.length)>0&&l.jsxs("div",{className:"lg:w-72 xl:w-80",children:[l.jsx("h2",{className:"text-xl font-semibold mb-3 pb-2 border-b border-dark-200 dark:border-dark-700",children:"Прошедшие мероприятия"}),l.jsx("div",{className:"space-y-3",children:u.past.map(L=>l.jsxs(Be,{to:`/events/${L.id}`,className:"flex gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-14 h-14 bg-cover bg-center rounded",style:{backgroundImage:L.bg_image?`url(https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${L.bg_image})`:"url(https://via.placeholder.com/100?text=No+image)"}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-2",children:L.title}),l.jsxs("div",{className:"flex items-center text-xs text-dark-500 dark:text-dark-400 mt-1",children:[l.jsx(Oe,{className:"h-3 w-3 mr-1"}),l.jsx("span",{children:L.start_at?en(L.start_at):"Дата не указана"})]}),L.start_at&&L.end_at&&l.jsxs("div",{className:"flex items-center text-xs text-dark-500 dark:text-dark-400 mt-1",children:[l.jsx(bn,{className:"h-3 w-3 mr-1"}),l.jsx("span",{children:ei(L.start_at,L.end_at)})]})]})]},L.id))})]})]})})})]})},nH=async(t,e,r,n="pending")=>{try{const{error:a}=await de.rpc("sync_user_registration",{p_user_id:t,p_event_id:e,p_registration_id:r.id,p_full_name:r.full_name,p_email:r.email,p_adult_tickets:r.adult_tickets,p_child_tickets:r.child_tickets,p_total_amount:r.total_amount,p_status:r.status?"active":"cancelled",p_qr_code:r.qr_code,p_payment_status:n,p_registration_date:r.created_at});if(a)throw console.error("Error syncing user registration:",a),a}catch(a){throw console.error("Failed to sync user registration:",a),a}},aH=({isOpen:t,onClose:e,event:r})=>{const{user:n}=il(),[a,i]=_.useState({name:"",contact:"",phone:"",comment:"",adultTickets:1,childTickets:0}),[s,o]=_.useState(!1),[c,u]=_.useState(!1),[d,f]=_.useState(null);_.useEffect(()=>{t&&n&&i(b=>({...b,name:b.name||n.name||"",contact:b.contact||n.email||""}))},[t,n]);const h=r.payment_type==="free"||r.payment_type==="donation",p=b=>Math.ceil(b/100)*100,m=()=>{if(h)return 0;let b=0,w=0;if(r.couple_discount&&a.adultTickets>=2){const S=Math.floor(a.adultTickets/2),E=a.adultTickets%2,j=r.price*2*(1-r.couple_discount/100);b=S*p(j)+E*r.price}else b=a.adultTickets*r.price;if(!r.adults_only){const S=r.child_half_price?r.price/2:r.price;w=a.childTickets*S}return b+w},g=()=>{if(h)return null;const b=[],w=a.adultTickets,S=r.adults_only?0:a.childTickets;if(r.couple_discount&&w>=2){const E=Math.floor(w/2),I=w%2*r.price,N=r.price*2*(1-r.couple_discount/100),T=p(N);b.push(l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Взрослые (",w,"×)",E>0&&l.jsxs("span",{className:"text-xs text-green-500 dark:text-green-400 ml-1",children:["(",E,"×2 со скидкой ",r.couple_discount,"%)"]})]}),l.jsxs("span",{children:[E>0&&l.jsx("span",{className:"text-xs line-through text-gray-500 dark:text-gray-400 mr-1",children:r.price*2*E}),E*T+I," ",r.currency]})]},"adult"))}else b.push(l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Взрослые (",w,"×)"]}),l.jsxs("span",{children:[w*r.price," ",r.currency]})]},"adult"));if(!r.adults_only&&S>0){const E=r.child_half_price?r.price/2:r.price;b.push(l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Дети (",S,"×)",r.child_half_price&&l.jsx("span",{className:"text-xs text-green-500 dark:text-green-400 ml-1",children:"(50% скидка)"})]}),l.jsxs("span",{children:[E*S," ",r.currency]})]},"child"))}return b},y=async b=>{b.preventDefault(),o(!0);try{const w=m(),S=crypto.randomUUID(),E={id:S,full_name:a.name,email:a.contact,phone:a.phone,comment:a.comment,adult_tickets:Number(a.adultTickets),child_tickets:Number(r.adults_only?0:a.childTickets),total_amount:Number(w),status:!0,qr_code:S,created_at:new Date().toISOString(),payment_link_clicked:!1},j=await fetch("https://jfvinriqydjtwsmayxix.supabase.co/functions/v1/register-event",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"},body:JSON.stringify({eventId:r.id,registrationData:E})});if(!j.ok){const N=await j.json();throw new Error(N.error||"Failed to register for event")}const I=await j.json();if(n)try{await nH(n.id,r.id,E,h?"free":"pending"),console.log("User registration synced successfully")}catch(N){console.error("Failed to sync user registration:",N)}f({id:S,fullName:a.name,email:a.contact,adultTickets:a.adultTickets,childTickets:r.adults_only?0:a.childTickets,total:w}),u(!0),K.success("Регистрация успешна!")}catch(w){console.error("Registration error:",w),K.error("Ошибка при регистрации: "+(w instanceof Error?w.message:"Неизвестная ошибка"))}finally{o(!1)}},x=(b,w=0)=>Array.from({length:b-w+1},(S,E)=>w+E),v=()=>{i({name:"",contact:"",phone:"",comment:"",adultTickets:1,childTickets:0}),u(!1),f(null),e()};return l.jsx(Mc,{isOpen:t,onClose:v,title:r.title,size:"md",children:l.jsx("div",{className:"p-3 space-y-3",children:c&&d?l.jsxs("div",{className:"text-center py-6 space-y-4",children:[l.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:l.jsx(fc,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Регистрация успешна!"}),l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Имя:"})," ",d.fullName]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",d.email]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Билеты:"})," ",d.adultTickets," взрослых, ",d.childTickets," детей"]}),d.total>0&&l.jsxs("p",{children:[l.jsx("strong",{children:"Сумма:"})," ",d.total," ",r.currency]}),l.jsxs("p",{children:[l.jsx("strong",{children:"ID регистрации:"})," ",d.id]})]})]}),l.jsx("button",{onClick:v,className:"w-full border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 py-2 px-4 rounded text-sm text-gray-700 dark:text-gray-200",children:"Закрыть"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Oe,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),l.jsx("span",{children:en(r.start_at,"dd.MM.yyyy")})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(bn,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),l.jsx("span",{children:Li(r.start_at)})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(vr,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),l.jsx("span",{className:"line-clamp-1 max-w-[100px]",children:r.location})]}),!h&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Zd,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),l.jsxs("span",{children:[r.price," ",r.currency]})]})]}),l.jsxs("form",{onSubmit:y,className:"space-y-3",children:[l.jsx("input",{type:"text",placeholder:"Ваше имя",value:a.name,onChange:b=>i({...a,name:b.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",required:!0}),l.jsx("input",{type:"email",placeholder:"Email",value:a.contact,onChange:b=>i({...a,contact:b.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",required:!0}),l.jsx("input",{type:"tel",placeholder:"Телефон",value:a.phone,onChange:b=>i({...a,phone:b.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),l.jsx("textarea",{placeholder:"Комментарий",value:a.comment,onChange:b=>i({...a,comment:b.target.value}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",rows:3}),!h&&l.jsxs("div",{className:`flex gap-2 ${r.adults_only?"justify-center":""}`,children:[l.jsxs("div",{className:r.adults_only?"w-full":"flex-1",children:[l.jsx("label",{className:"block text-xs font-medium mb-1",children:"Взрослых билетов"}),l.jsx("select",{value:a.adultTickets,onChange:b=>i({...a,adultTickets:Number(b.target.value)}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2 text-sm bg-white dark:bg-gray-700",children:x(10,1).map(b=>l.jsx("option",{value:b,children:b},b))})]}),!r.adults_only&&l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-medium mb-1",children:"Детских билетов"}),l.jsx("select",{value:a.childTickets,onChange:b=>i({...a,childTickets:Number(b.target.value)}),className:"w-full border border-gray-300 dark:border-gray-600 rounded p-2 text-sm bg-white dark:bg-gray-700",children:x(10,0).map(b=>l.jsx("option",{value:b,children:b},b))})]})]}),!h&&l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded text-sm",children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Детализация стоимости:"}),l.jsxs("div",{className:"space-y-1",children:[g(),l.jsxs("div",{className:"border-t pt-1 mt-2 font-semibold flex justify-between",children:[l.jsx("span",{children:"Итого:"}),l.jsxs("span",{children:[m()," ",r.currency]})]})]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{type:"button",onClick:v,className:"flex-1 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 py-2 px-4 rounded text-sm text-gray-700 dark:text-gray-200",children:"Отмена"}),l.jsx("button",{type:"submit",disabled:s,className:"flex-1 bg-primary-600 hover:bg-primary-700 disabled:opacity-50 text-white py-2 px-4 rounded text-sm transition-colors",children:s?"...":"Подтвердить"})]})]})]})})})},iH=({isOpen:t,onClose:e,onSelectOption:r,hasOnlinePayment:n,paymentType:a,paymentLink:i})=>{const s=_.useRef(null);return _.useEffect(()=>{if(t&&a==="widget"&&s.current){s.current.innerHTML="";const o=document.createElement("div");o.className="oblakkarte-widget",o.setAttribute("data-organizer-public-token","Yi0idjZg"),o.setAttribute("data-event-id","YOUR_EVENT_ID"),s.current.appendChild(o),window.OblakkarteWidget&&window.OblakkarteWidget.init()}},[t,a]),l.jsxs(Mc,{isOpen:t,onClose:e,title:"Выберите способ оплаты",size:"md",children:[l.jsxs("div",{className:"space-y-4",children:[n&&a==="widget"?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{ref:s,className:"w-full"}),l.jsxs("button",{onClick:()=>r("venue"),className:"w-full p-4 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full",children:l.jsx(vr,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"font-medium",children:"Оплата на месте"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Оплатите при посещении мероприятия"})]})]})]}):n&&l.jsxs("button",{onClick:()=>r("online"),className:"w-full p-4 border-2 border-primary-500 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-full",children:l.jsx(Zd,{className:"h-6 w-6 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"font-medium",children:"Онлайн оплата"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Оплатите сейчас картой или электронным кошельком"})]})]}),a!=="widget"&&l.jsxs("button",{onClick:()=>r("venue"),className:"w-full p-4 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full",children:l.jsx(vr,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"font-medium",children:"Оплата на месте"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Оплатите при посещении мероприятия"})]})]})]}),l.jsx("button",{onClick:e,className:"mt-6 w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"Отмена"})]})},A3=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),sH=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(e){return console.error("Error parsing photo_gallery JSON:",e),[]}return[]},iy=t=>{if(!t)return l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Описание отсутствует"});const e=[];let r=0,n;const a=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1(?:[^>]*?)>(.*?)<\/a>/g;for(;(n=a.exec(t))!==null;)n.index>r&&e.push({type:"text",content:t.substring(r,n.index)}),e.push({type:"link",url:n[2],text:n[3]}),r=a.lastIndex;return r<t.length&&e.push({type:"text",content:t.substring(r)}),e.length===0?l.jsx("span",{children:t}):l.jsx(l.Fragment,{children:e.map((i,s)=>i.type==="text"?l.jsx("span",{children:i.content},s):i.type==="link"?l.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-400 hover:opacity-80 underline",children:i.text},s):null)})},oH=t=>{if(!t)return null;const e=t.split(/\n\s*\n/);return l.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.map((r,n)=>l.jsx("p",{className:"mb-4",children:iy(r)},n))})},lH=()=>{var j;const{id:t}=lw(),[e,r]=_.useState(null),[n,a]=_.useState([]),[i,s]=_.useState(!0),[o,c]=_.useState(null),[u,d]=_.useState(!1),[f,h]=_.useState(!1),[p,m]=_.useState(!1);_.useEffect(()=>{window.scrollTo(0,0),g()},[t]);const g=async()=>{var I,N,T,F,C;try{s(!0);const{data:A,error:k}=await A3.from("events").select(`
          *,
          time_slot:time_slots_table!fk_time_slots_event(
            id,
            start_at,
            end_at
          )
        `).eq("id",t).single();if(k)throw k;const O={...A,start_at:((N=(I=A.time_slot)==null?void 0:I[0])==null?void 0:N.start_at)||A.start_at,end_at:((F=(T=A.time_slot)==null?void 0:T[0])==null?void 0:F.end_at)||A.end_at};if(r(O),(C=A.speakers)!=null&&C.length){const{data:$,error:D}=await A3.from("speakers").select("*").in("id",A.speakers);if(D)throw D;a($||[])}}catch(A){console.error("Error fetching event data:",A),c("Не удалось загрузить мероприятие")}finally{s(!1)}},y=async I=>{const N=window.location.href,T=e!=null&&e.start_at?en(e.start_at):"",F=`${e==null?void 0:e.title} - ${T}`;switch(I){case"telegram":window.open(`https://t.me/share/url?url=${encodeURIComponent(N)}&text=${encodeURIComponent(F)}`);break;case"vk":window.open(`https://vk.com/share.php?url=${encodeURIComponent(N)}&title=${encodeURIComponent(F)}`);break;case"copy":try{await navigator.clipboard.writeText(N),K.success("Ссылка скопирована")}catch{K.error("Не удалось скопировать ссылку")}break}d(!1)},x=I=>{m(!1),I==="online"&&(e!=null&&e.payment_link)?window.open(e.payment_link,"_blank"):I==="venue"&&h(!0)},v=()=>{(e==null?void 0:e.payment_type)==="free"||(e==null?void 0:e.payment_type)==="donation"?h(!0):(e==null?void 0:e.price)===null&&(e!=null&&e.payment_link)?window.open(e.payment_link,"_blank"):m(!0)},b=()=>{var I;return((I=e==null?void 0:e.registrations)==null?void 0:I.max_regs)!==void 0?e.registrations.max_regs:(e==null?void 0:e.max_registrations)||null},w=()=>{var I;return((I=e==null?void 0:e.registrations)==null?void 0:I.current)!==void 0?e.registrations.current:(e==null?void 0:e.current_registration_count)||0},S=e!=null&&e.end_at?fs(e.end_at):!1;if(i)return l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})});if(o||!e)return l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600 dark:text-red-400",children:o||"Мероприятие не найдено"})});b(),w();const E=sH(e.photo_gallery);return l.jsxs(Ot,{children:[l.jsxs("div",{className:"h-[400px] bg-cover bg-center relative",style:{backgroundImage:e.bg_image?`url(https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${e.bg_image})`:"url(https://via.placeholder.com/1920x400?text=No+image)"},children:[l.jsx("div",{className:"absolute inset-0 bg-black/50"}),l.jsx("div",{className:"container relative h-full flex items-end pb-12",children:l.jsxs("div",{className:"text-white",children:[l.jsxs(Be,{to:"/events",className:"inline-flex items-center text-white/80 hover:text-white mb-4",children:[l.jsx(Oj,{className:"h-5 w-5 mr-2"}),"Назад к мероприятиям"]}),l.jsxs("div",{className:"hidden md:block",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.title}),l.jsxs("div",{className:"flex flex-wrap gap-6 text-white/90",children:[e.start_at&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{className:"h-5 w-5"}),l.jsx("span",{children:en(e.start_at)})]}),e.start_at&&e.end_at&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(bn,{className:"h-5 w-5"}),l.jsx("span",{children:ei(e.start_at,e.end_at)})]}),e.location&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vr,{className:"h-5 w-5"}),l.jsx("span",{children:e.location})]})]})]})]})})]}),l.jsxs("div",{className:"md:hidden bg-white dark:bg-dark-800 py-6 px-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-dark-900 dark:text-white mb-4",children:e.title}),l.jsxs("div",{className:"flex flex-col gap-3 text-dark-600 dark:text-dark-300",children:[e.start_at&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{className:"h-5 w-5"}),l.jsx("span",{children:en(e.start_at)})]}),e.start_at&&e.end_at&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(bn,{className:"h-5 w-5"}),l.jsx("span",{children:ei(e.start_at,e.end_at)})]}),e.location&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vr,{className:"h-5 w-5"}),l.jsx("span",{children:e.location})]})]})]}),l.jsx("main",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"О мероприятии"}),oH(e.description)]}),e.video_url&&l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Видео"}),l.jsx("div",{className:"aspect-video",children:l.jsx("iframe",{src:e.video_url,className:"w-full h-full rounded-lg",allowFullScreen:!0,title:"Event video"})})]}),E.length>0&&l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Фотогалерея"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:E.map((I,N)=>l.jsx("img",{src:I,alt:`Фото ${N+1}`,className:"w-full h-32 object-cover rounded-lg"},N))})]}),e.event_type==="Festival"&&e.festival_program&&e.festival_program.length>0&&l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Программа фестиваля"}),l.jsx("div",{className:"space-y-6",children:e.festival_program.sort((I,N)=>{try{return new Date(I.start_time).getTime()-new Date(N.start_time).getTime()}catch(T){return console.error("Error sorting program items:",T),0}}).map((I,N)=>{var F,C,A;const T=I.lecturer_id?n.find(k=>k.id===I.lecturer_id):null;return l.jsx("div",{className:"border-b border-gray-200 dark:border-dark-700 pb-6 last:border-0 last:pb-0",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[I.image_url&&l.jsx("div",{className:"md:w-1/3",children:l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${I.image_url}`,alt:I.title,className:"w-full h-auto rounded-lg object-cover"})}),l.jsxs("div",{className:`${I.image_url?"md:w-2/3":"w-full"}`,children:[l.jsx("div",{className:"flex flex-wrap items-center gap-4 mb-3",children:l.jsxs("span",{className:"text-sm font-medium px-3 py-1 bg-primary-100 dark:bg-primary-900/50 text-primary-800 dark:text-primary-200 rounded-full",children:[Li(I.start_time)," - ",Li(I.end_time)]})}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:I.title}),l.jsx("div",{className:"prose dark:prose-invert max-w-none mb-4",children:iy(I.description)}),T&&l.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[l.jsx(Be,{to:`/speakers/${T.id}`,className:"shrink-0",children:((C=(F=T.photos)==null?void 0:F.find(k=>k.isMain))==null?void 0:C.url)&&l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${(A=T.photos.find(k=>k.isMain))==null?void 0:A.url}`,alt:T.name,className:"w-12 h-12 rounded-full object-cover"})}),l.jsxs("div",{children:[l.jsx(Be,{to:`/speakers/${T.id}`,className:"font-medium hover:text-primary-600 dark:hover:text-primary-400",children:T.name}),l.jsx("p",{className:"text-sm text-dark-500 dark:text-dark-400",children:T.field_of_expertise})]})]})]})]})},N)})})]}),n.length>0&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Спикеры"}),n.map(I=>{var N;return l.jsx("div",{className:"card p-6",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx(Be,{to:`/speakers/${I.id}`,className:"shrink-0",children:l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${(N=I.photos.find(T=>T.isMain))==null?void 0:N.url}`,alt:I.name,className:"w-16 h-16 rounded-full object-cover"})}),l.jsxs("div",{children:[l.jsx(Be,{to:`/speakers/${I.id}`,className:"text-lg font-semibold hover:text-primary-600 dark:hover:text-primary-400",children:I.name}),l.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 mb-2",children:I.field_of_expertise}),iy(I.description)]})]})},I.id)})]})]}),!S&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"block text-sm text-dark-500 dark:text-dark-400",children:"Стоимость"}),l.jsx("span",{className:"text-2xl font-bold",children:e.payment_type==="free"?"Бесплатно":e.payment_type==="donation"?"Донейшн":e.price===null?"Онлайн оплата":`${e.price} ${e.currency}`})]}),l.jsxs("button",{onClick:()=>d(!u),className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full relative",children:[l.jsx(uw,{className:"h-5 w-5"}),u&&l.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-dark-800 rounded-lg shadow-lg py-2 z-50",children:[l.jsx("button",{onClick:()=>y("telegram"),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-dark-700",children:"Telegram"}),l.jsx("button",{onClick:()=>y("vk"),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-dark-700",children:"VKontakte"}),l.jsx("button",{onClick:()=>y("copy"),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-dark-700",children:"Копировать ссылку"})]})]})]}),e.payment_widget_id&&l.jsx("div",{className:"mb-4",dangerouslySetInnerHTML:{__html:e.payment_widget_id}}),l.jsx("button",{onClick:v,className:"w-full btn-primary mb-4",children:e.price===null&&e.payment_link?"Купить онлайн":"Зарегистрироваться"}),l.jsx("div",{className:"space-y-4 text-sm",children:((j=e.languages)==null?void 0:j.length)>0&&l.jsxs("div",{className:"flex items-center gap-2 text-dark-500 dark:text-dark-400",children:[l.jsx(zp,{className:"h-5 w-5"}),l.jsx("span",{children:e.languages.join(", ")})]})})]}),e.location&&l.jsxs("div",{className:"card p-6",children:[l.jsx("p",{className:"font-semibold mb-4",children:"Место проведения"}),l.jsx("div",{className:"space-y-2",children:l.jsx("p",{className:"text-dark-600 dark:text-dark-300",children:e.location})})]})]})]})})}),l.jsx(aH,{isOpen:f,onClose:()=>h(!1),event:e}),l.jsx(iH,{isOpen:p,onClose:()=>m(!1),onSelectOption:x,hasOnlinePayment:e.payment_type!=="free"&&e.payment_type!=="donation",paymentType:e.payment_type==="widget"?"widget":"link",paymentLink:e.payment_link})]})},Jl=({title:t,subtitle:e,children:r,className:n=""})=>l.jsx("section",{className:`page-header ${n}`,children:l.jsxs("div",{className:"container flex flex-col justify-center h-full",children:[l.jsx("h1",{className:"mb-4 animate-slide-up",children:t}),e&&l.jsx("p",{className:"text-xl md:text-2xl mb-6 max-w-2xl animate-slide-up animation-delay-100",children:e}),r]})}),cH=({speakerId:t,className:e="",size:r="md"})=>{const{user:n}=il(),{toggleFavoriteSpeaker:a,isFavoriteSpeaker:i,loading:s}=kw(n==null?void 0:n.id);if(!n)return null;const o=c=>{c.preventDefault(),c.stopPropagation(),a(t)};return l.jsx(D6,{isFavorite:i(t),onClick:o,loading:s,className:e,size:r})},uH=({speakers:t,searchQuery:e=""})=>{const r=t.filter(n=>n.name.toLowerCase().includes(e.toLowerCase())||n.field_of_expertise.toLowerCase().includes(e.toLowerCase())||n.description&&n.description.toLowerCase().includes(e.toLowerCase()));return r.length===0?l.jsx("div",{className:"py-12 text-center",children:l.jsx("p",{className:"text-lg text-dark-500 dark:text-dark-400",children:"Спикеры не найдены. Попробуйте изменить параметры поиска."})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(n=>{var i,s;const a=n.blog_visibility&&n.blogs?JSON.parse(n.blogs):null;return l.jsxs("div",{className:"card hover:shadow-lg flex flex-col md:flex-row lg:flex-col transition-shadow duration-200 relative",children:[l.jsx("div",{className:"absolute top-4 right-4 z-10",children:l.jsx(cH,{speakerId:n.id,className:"bg-white/90 dark:bg-dark-800/90 backdrop-blur-sm hover:bg-white dark:hover:bg-dark-800 shadow-md",size:"sm"})}),l.jsx("div",{className:"md:w-1/3 lg:w-full h-60 md:h-auto lg:h-60 bg-cover bg-center relative",children:(s=(i=n.photos)==null?void 0:i[0])!=null&&s.url?l.jsx("img",{src:zt(n.photos[0].url),alt:n.name,className:"w-full h-full object-cover",onError:o=>{const c=o.target;c.onerror=null,c.parentElement.innerHTML=`
                      <div class="w-full h-full flex items-center justify-center bg-gray-100 dark:bg-dark-700">
                        <svg class="w-16 h-16 text-gray-400 dark:text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                          <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                      </div>
                    `}}):l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-dark-700",children:l.jsx(Cn,{className:"w-16 h-16 text-gray-400 dark:text-gray-600"})})}),l.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"flex items-center justify-between mb-1",children:l.jsx("h3",{className:"text-xl font-semibold",children:n.name})}),l.jsx("p",{className:"text-primary-600 dark:text-primary-400 font-medium mb-3",children:n.field_of_expertise}),n.description&&l.jsx("p",{className:"text-dark-600 dark:text-dark-300 mb-4 line-clamp-3",children:n.description})]}),a&&a.length>0&&l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.slice(0,3).map((o,c)=>l.jsxs("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-primary-100 dark:bg-dark-700 text-primary-800 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-dark-600 transition-colors",title:o.platform,children:[l.jsx(Rj,{className:"w-3 h-3 mr-1.5"}),o.platform.length>12?`${o.platform.substring(0,10)}...`:o.platform]},c)),a.length>3&&l.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 self-center",children:["+",a.length-3," more"]})]})}),l.jsxs(Be,{to:`/speakers/${n.id}`,className:"text-primary-600 dark:text-primary-400 font-medium hover:text-primary-700 dark:hover:text-primary-300 inline-flex items-center mt-auto",children:["Подробнее",l.jsx(fa,{className:"ml-2 h-5 w-5"})]})]})]},n.id)})})},dH=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),fH=()=>{const{user:t}=il(),[e,r]=_.useState(""),[n,a]=_.useState("name-asc"),[i,s]=_.useState("all"),[o,c]=_.useState([]),[u,d]=_.useState(!0),[f,h]=_.useState(null),{favoriteSpeakers:p,isFavoriteSpeaker:m}=kw(t==null?void 0:t.id);_.useEffect(()=>{(async()=>{try{let x=dH.from("speakers").select("*").eq("active",!0);switch(n){case"name-asc":x=x.order("name",{ascending:!0});break;case"name-desc":x=x.order("name",{ascending:!1});break;case"field-asc":x=x.order("field_of_expertise",{ascending:!0});break;case"field-desc":x=x.order("field_of_expertise",{ascending:!1});break}const{data:v,error:b}=await x;if(b)throw b;c(v||[])}catch(x){console.error("Error fetching speakers:",x),h("Failed to load speakers")}finally{d(!1)}})()},[n]);const g=o.filter(y=>i==="all"||i==="favorites"&&m(y.id));return l.jsxs(Ot,{children:[l.jsx(Jl,{title:"Наши спикеры",subtitle:"Учёные и эксперты в своих областях"}),l.jsx("main",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"mb-8 space-y-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 justify-between",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Поиск по имени или специализации...",value:e,onChange:y=>r(y.target.value),className:"w-full md:w-80 px-4 py-2 pl-10 border border-dark-300 dark:border-dark-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-dark-800"}),l.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-dark-400"})]}),l.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"px-4 py-2 border border-dark-300 dark:border-dark-700 rounded-md bg-white dark:bg-dark-800",children:[l.jsx("option",{value:"name-asc",children:"По имени (А-Я)"}),l.jsx("option",{value:"name-desc",children:"По имени (Я-А)"}),l.jsx("option",{value:"field-asc",children:"По специализации (А-Я)"}),l.jsx("option",{value:"field-desc",children:"По специализации (Я-А)"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(A0,{className:"h-4 w-4 text-gray-500"}),l.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Показать:"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>s("all"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${i==="all"?"bg-primary-500 text-white":"bg-gray-200 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-600"}`,children:"Все спикеры"}),t&&l.jsxs("button",{onClick:()=>s("favorites"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors flex items-center gap-1 ${i==="favorites"?"bg-red-500 text-white":"bg-gray-200 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-600"}`,children:[l.jsx(Ia,{className:`h-4 w-4 ${i==="favorites"?"fill-current":""}`}),"Избранные (",p.length,")"]})]})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("span",{children:["Показано: ",g.length," из ",o.length]}),t&&p.length>0&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Ia,{className:"h-4 w-4 text-red-500 fill-current"}),p.length," в избранном"]})]})]})]}),!t&&l.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["💡 ",l.jsx("strong",{children:"Совет:"})," Войдите в систему, чтобы добавлять спикеров в избранное и создавать персональные списки."]})}),g.length===0&&!u&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"mb-4",children:i==="favorites"?l.jsx(Ia,{className:"h-16 w-16 mx-auto text-gray-300 dark:text-gray-600"}):l.jsx(ii,{className:"h-16 w-16 mx-auto text-gray-300 dark:text-gray-600"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:i==="favorites"?"Нет избранных спикеров":"Спикеры не найдены"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:i==="favorites"?"Добавьте спикеров в избранное, нажав на ❤️ в их карточках":e?`По запросу "${e}" ничего не найдено. Попробуйте изменить поисковый запрос.`:"Попробуйте изменить фильтры или поисковый запрос."}),i==="favorites"&&l.jsx("button",{onClick:()=>s("all"),className:"btn-primary",children:"Посмотреть всех спикеров"})]}),g.length>0&&l.jsx(uH,{speakers:g,searchQuery:e}),u&&l.jsx("div",{className:"flex justify-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}),f&&l.jsxs("div",{className:"text-center py-12",children:[l.jsxs("div",{className:"text-red-500 dark:text-red-400 mb-4",children:[l.jsx("p",{className:"text-lg font-medium",children:"Ошибка загрузки"}),l.jsx("p",{className:"text-sm",children:f})]}),l.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Попробовать снова"})]})]})})]})},mA=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),rm=_.createContext({}),nm=_.createContext(null),am=typeof document<"u",Cw=am?_.useLayoutEffect:_.useEffect,gA=_.createContext({strict:!1}),jw=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hH="framerAppearId",vA="data-"+jw(hH);function pH(t,e,r,n){const{visualElement:a}=_.useContext(rm),i=_.useContext(gA),s=_.useContext(nm),o=_.useContext(mA).reducedMotion,c=_.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(t,{visualState:e,parent:a,props:r,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:o}));const u=c.current;_.useInsertionEffect(()=>{u&&u.update(r,s)});const d=_.useRef(!!(r[vA]&&!window.HandoffComplete));return Cw(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),_.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Pl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mH(t,e,r){return _.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Pl(r)&&(r.current=n))},[e])}function Id(t){return typeof t=="string"||Array.isArray(t)}function im(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Aw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Tw=["initial",...Aw];function sm(t){return im(t.animate)||Tw.some(e=>Id(t[e]))}function xA(t){return!!(sm(t)||t.variants)}function gH(t,e){if(sm(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Id(r)?r:void 0,animate:Id(n)?n:void 0}}return t.inherit!==!1?e:{}}function vH(t){const{initial:e,animate:r}=gH(t,_.useContext(rm));return _.useMemo(()=>({initial:e,animate:r}),[T3(e),T3(r)])}function T3(t){return Array.isArray(t)?t.join(" "):t}const I3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Od={};for(const t in I3)Od[t]={isEnabled:e=>I3[t].some(r=>!!e[r])};function xH(t){for(const e in t)Od[e]={...Od[e],...t[e]}}const Iw=_.createContext({}),yA=_.createContext({}),yH=Symbol.for("motionComponentSymbol");function bH({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:a}){t&&xH(t);function i(o,c){let u;const d={..._.useContext(mA),...o,layoutId:wH(o)},{isStatic:f}=d,h=vH(o),p=n(o,f);if(!f&&am){h.visualElement=pH(a,p,d,e);const m=_.useContext(yA),g=_.useContext(gA).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,g,t,m))}return _.createElement(rm.Provider,{value:h},u&&h.visualElement?_.createElement(u,{visualElement:h.visualElement,...d}):null,r(a,o,mH(p,h.visualElement,c),p,f,h.visualElement))}const s=_.forwardRef(i);return s[yH]=a,s}function wH({layoutId:t}){const e=_.useContext(Iw).id;return e&&t!==void 0?e+"-"+t:t}function _H(t){function e(n,a={}){return bH(t(n,a))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,a)=>(r.has(a)||r.set(a,e(a)),r.get(a))})}const kH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ow(t){return typeof t!="string"||t.includes("-")?!1:!!(kH.indexOf(t)>-1||/[A-Z]/.test(t))}const q0={};function NH(t){Object.assign(q0,t)}const lf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sl=new Set(lf);function bA(t,{layout:e,layoutId:r}){return sl.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!q0[t]||t==="opacity")}const wn=t=>!!(t&&t.getVelocity),SH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EH=lf.length;function CH(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,a){let i="";for(let s=0;s<EH;s++){const o=lf[s];if(t[o]!==void 0){const c=SH[o]||o;i+=`${c}(${t[o]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(t,n?"":i):r&&n&&(i="none"),i}const wA=t=>e=>typeof e=="string"&&e.startsWith(t),_A=wA("--"),sy=wA("var(--"),jH=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,AH=(t,e)=>e&&typeof t=="number"?e.transform(t):t,$s=(t,e,r)=>Math.min(Math.max(r,t),e),ol={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Zu={...ol,transform:t=>$s(0,1,t)},ih={...ol,default:1},Qu=t=>Math.round(t*1e5)/1e5,om=/(-)?([\d]*\.?[\d])+/g,kA=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,TH=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function cf(t){return typeof t=="string"}const uf=t=>({test:e=>cf(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ts=uf("deg"),ri=uf("%"),Ae=uf("px"),IH=uf("vh"),OH=uf("vw"),O3={...ri,parse:t=>ri.parse(t)/100,transform:t=>ri.transform(t*100)},D3={...ol,transform:Math.round},NA={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,size:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:ih,scaleX:ih,scaleY:ih,scaleZ:ih,skew:ts,skewX:ts,skewY:ts,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Zu,originX:O3,originY:O3,originZ:Ae,zIndex:D3,fillOpacity:Zu,strokeOpacity:Zu,numOctaves:D3};function Dw(t,e,r,n){const{style:a,vars:i,transform:s,transformOrigin:o}=t;let c=!1,u=!1,d=!0;for(const f in e){const h=e[f];if(_A(f)){i[f]=h;continue}const p=NA[f],m=AH(h,p);if(sl.has(f)){if(c=!0,s[f]=m,!d)continue;h!==(p.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,o[f]=m):a[f]=m}if(e.transform||(c||n?a.transform=CH(t.transform,r,d,n):a.transform&&(a.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=o;a.transformOrigin=`${f} ${h} ${p}`}}const Pw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SA(t,e,r){for(const n in e)!wn(e[n])&&!bA(n,r)&&(t[n]=e[n])}function DH({transformTemplate:t},e,r){return _.useMemo(()=>{const n=Pw();return Dw(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function PH(t,e,r){const n=t.style||{},a={};return SA(a,n,t),Object.assign(a,DH(t,e,r)),t.transformValues?t.transformValues(a):a}function RH(t,e,r){const n={},a=PH(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=a,n}const MH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Y0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||MH.has(t)}let EA=t=>!Y0(t);function LH(t){t&&(EA=e=>e.startsWith("on")?!Y0(e):t(e))}try{LH(require("@emotion/is-prop-valid").default)}catch{}function BH(t,e,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(EA(a)||r===!0&&Y0(a)||!e&&!Y0(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}function P3(t,e,r){return typeof t=="string"?t:Ae.transform(e+r*t)}function FH(t,e,r){const n=P3(e,t.x,t.width),a=P3(r,t.y,t.height);return`${n} ${a}`}const $H={offset:"stroke-dashoffset",array:"stroke-dasharray"},UH={offset:"strokeDashoffset",array:"strokeDasharray"};function zH(t,e,r=1,n=0,a=!0){t.pathLength=1;const i=a?$H:UH;t[i.offset]=Ae.transform(-n);const s=Ae.transform(e),o=Ae.transform(r);t[i.array]=`${s} ${o}`}function Rw(t,{attrX:e,attrY:r,attrScale:n,originX:a,originY:i,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...u},d,f,h){if(Dw(t,u,d,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:g}=t;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(a!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=FH(g,a!==void 0?a:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),s!==void 0&&zH(p,s,o,c,!1)}const CA=()=>({...Pw(),attrs:{}}),Mw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function HH(t,e,r,n){const a=_.useMemo(()=>{const i=CA();return Rw(i,e,{enableHardwareAcceleration:!1},Mw(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};SA(i,t.style,t),a.style={...i,...a.style}}return a}function WH(t=!1){return(r,n,a,{latestValues:i},s)=>{const c=(Ow(r)?HH:RH)(n,i,s,r),d={...BH(n,typeof r=="string",t),...c,ref:a},{children:f}=n,h=_.useMemo(()=>wn(f)?f.get():f,[f]);return _.createElement(r,{...d,children:h})}}function jA(t,{style:e,vars:r},n,a){Object.assign(t.style,e,a&&a.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const AA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TA(t,e,r,n){jA(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(AA.has(a)?a:jw(a),e.attrs[a])}function Lw(t,e){const{style:r}=t,n={};for(const a in r)(wn(r[a])||e.style&&wn(e.style[a])||bA(a,t))&&(n[a]=r[a]);return n}function IA(t,e){const r=Lw(t,e);for(const n in t)if(wn(t[n])||wn(e[n])){const a=lf.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=t[n]}return r}function Bw(t,e,r,n={},a={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,a)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,a)),e}function OA(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const K0=t=>Array.isArray(t),VH=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),GH=t=>K0(t)?t[t.length-1]||0:t;function qh(t){const e=wn(t)?t.get():t;return VH(e)?e.toValue():e}function XH({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,a,i){const s={latestValues:qH(n,a,i,t),renderState:e()};return r&&(s.mount=o=>r(n,o,s)),s}const DA=t=>(e,r)=>{const n=_.useContext(rm),a=_.useContext(nm),i=()=>XH(t,e,n,a);return r?i():OA(i)};function qH(t,e,r,n){const a={},i=n(t,{});for(const h in i)a[h]=qh(i[h]);let{initial:s,animate:o}=t;const c=sm(t),u=xA(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=r?r.initial===!1:!1;d=d||s===!1;const f=d?o:s;return f&&typeof f!="boolean"&&!im(f)&&(Array.isArray(f)?f:[f]).forEach(p=>{const m=Bw(t,p);if(!m)return;const{transitionEnd:g,transition:y,...x}=m;for(const v in x){let b=x[v];if(Array.isArray(b)){const w=d?b.length-1:0;b=b[w]}b!==null&&(a[v]=b)}for(const v in g)a[v]=g[v]}),a}const Wt=t=>t;class R3{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function YH(t){let e=new R3,r=new R3,n=0,a=!1,i=!1;const s=new WeakSet,o={schedule:(c,u=!1,d=!1)=>{const f=d&&a,h=f?e:r;return u&&s.add(c),h.add(c)&&f&&a&&(n=e.order.length),c},cancel:c=>{r.remove(c),s.delete(c)},process:c=>{if(a){i=!0;return}if(a=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let u=0;u<n;u++){const d=e.order[u];d(c),s.has(d)&&(o.schedule(d),t())}a=!1,i&&(i=!1,o.process(c))}};return o}const sh=["prepare","read","update","preRender","render","postRender"],KH=40;function ZH(t,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=sh.reduce((f,h)=>(f[h]=YH(()=>r=!0),f),{}),s=f=>i[f].process(a),o=()=>{const f=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(f-a.timestamp,KH),1),a.timestamp=f,a.isProcessing=!0,sh.forEach(s),a.isProcessing=!1,r&&e&&(n=!1,t(o))},c=()=>{r=!0,n=!0,a.isProcessing||t(o)};return{schedule:sh.reduce((f,h)=>{const p=i[h];return f[h]=(m,g=!1,y=!1)=>(r||c(),p.schedule(m,g,y)),f},{}),cancel:f=>sh.forEach(h=>i[h].cancel(f)),state:a,steps:i}}const{schedule:xt,cancel:Bi,state:Rr,steps:Yg}=ZH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wt,!0),QH={useVisualState:DA({scrapeMotionValuesFromProps:IA,createRenderState:CA,onMount:(t,e,{renderState:r,latestValues:n})=>{xt.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),xt.render(()=>{Rw(r,n,{enableHardwareAcceleration:!1},Mw(e.tagName),t.transformTemplate),TA(e,r)})}})},JH={useVisualState:DA({scrapeMotionValuesFromProps:Lw,createRenderState:Pw})};function eW(t,{forwardMotionProps:e=!1},r,n){return{...Ow(t)?QH:JH,preloadedFeatures:r,useRender:WH(e),createVisualElement:n,Component:t}}function Ei(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const PA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function lm(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const tW=t=>e=>PA(e)&&t(e,lm(e));function Ai(t,e,r,n){return Ei(t,e,tW(r),n)}const rW=(t,e)=>r=>e(t(r)),Is=(...t)=>t.reduce(rW);function RA(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const M3=RA("dragHorizontal"),L3=RA("dragVertical");function MA(t){let e=!1;if(t==="y")e=L3();else if(t==="x")e=M3();else{const r=M3(),n=L3();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function LA(){const t=MA(!0);return t?(t(),!1):!0}class Ys{constructor(e){this.isMounted=!1,this.node=e}update(){}}function B3(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),a=(i,s)=>{if(i.pointerType==="touch"||LA())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e),o[n]&&xt.update(()=>o[n](i,s))};return Ai(t.current,r,a,{passive:!t.getProps()[n]})}class nW extends Ys{mount(){this.unmount=Is(B3(this.node,!0),B3(this.node,!1))}unmount(){}}class aW extends Ys{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Is(Ei(this.node.current,"focus",()=>this.onFocus()),Ei(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const BA=(t,e)=>e?t===e?!0:BA(t,e.parentElement):!1;function Kg(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,lm(r))}class iW extends Ys{constructor(){super(...arguments),this.removeStartListeners=Wt,this.removeEndListeners=Wt,this.removeAccessibleListeners=Wt,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Ai(window,"pointerup",(o,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();xt.update(()=>{!f&&!BA(this.node.current,o.target)?d&&d(o,c):u&&u(o,c)})},{passive:!(n.onTap||n.onPointerUp)}),s=Ai(window,"pointercancel",(o,c)=>this.cancelPress(o,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Is(i,s),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const s=o=>{o.key!=="Enter"||!this.checkPressEnd()||Kg("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&xt.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Ei(this.node.current,"keyup",s),Kg("down",(o,c)=>{this.startPress(o,c)})},r=Ei(this.node.current,"keydown",e),n=()=>{this.isPressing&&Kg("cancel",(i,s)=>this.cancelPress(i,s))},a=Ei(this.node.current,"blur",n);this.removeAccessibleListeners=Is(r,a)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&xt.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!LA()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&xt.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=Ai(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Ei(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Is(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const oy=new WeakMap,Zg=new WeakMap,sW=t=>{const e=oy.get(t.target);e&&e(t)},oW=t=>{t.forEach(sW)};function lW({root:t,...e}){const r=t||document;Zg.has(r)||Zg.set(r,{});const n=Zg.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(oW,{root:t,...e})),n[a]}function cW(t,e,r){const n=lW(e);return oy.set(t,r),n.observe(t),()=>{oy.delete(t),n.unobserve(t)}}const uW={some:0,all:1};class dW extends Ys{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=e,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:uW[a]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return cW(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(fW(e,r))&&this.startObserver()}unmount(){}}function fW({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const hW={inView:{Feature:dW},tap:{Feature:iW},focus:{Feature:aW},hover:{Feature:nW}};function FA(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function pW(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function mW(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function cm(t,e,r){const n=t.getProps();return Bw(n,e,r!==void 0?r:n.custom,pW(t),mW(t))}let Fw=Wt;const Ro=t=>t*1e3,Ti=t=>t/1e3,gW={current:!1},$A=t=>Array.isArray(t)&&typeof t[0]=="number";function UA(t){return!!(!t||typeof t=="string"&&zA[t]||$A(t)||Array.isArray(t)&&t.every(UA))}const Su=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,zA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Su([0,.65,.55,1]),circOut:Su([.55,0,1,.45]),backIn:Su([.31,.01,.66,-.59]),backOut:Su([.33,1.53,.69,.99])};function HA(t){if(t)return $A(t)?Su(t):Array.isArray(t)?t.map(HA):zA[t]}function vW(t,e,r,{delay:n=0,duration:a,repeat:i=0,repeatType:s="loop",ease:o,times:c}={}){const u={[e]:r};c&&(u.offset=c);const d=HA(o);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"})}function xW(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const WA=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,yW=1e-7,bW=12;function wW(t,e,r,n,a){let i,s,o=0;do s=e+(r-e)/2,i=WA(s,n,a)-t,i>0?r=s:e=s;while(Math.abs(i)>yW&&++o<bW);return s}function df(t,e,r,n){if(t===e&&r===n)return Wt;const a=i=>wW(i,0,1,t,r);return i=>i===0||i===1?i:WA(a(i),e,n)}const _W=df(.42,0,1,1),kW=df(0,0,.58,1),VA=df(.42,0,.58,1),NW=t=>Array.isArray(t)&&typeof t[0]!="number",GA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XA=t=>e=>1-t(1-e),$w=t=>1-Math.sin(Math.acos(t)),qA=XA($w),SW=GA($w),YA=df(.33,1.53,.69,.99),Uw=XA(YA),EW=GA(Uw),CW=t=>(t*=2)<1?.5*Uw(t):.5*(2-Math.pow(2,-10*(t-1))),jW={linear:Wt,easeIn:_W,easeInOut:VA,easeOut:kW,circIn:$w,circInOut:SW,circOut:qA,backIn:Uw,backInOut:EW,backOut:YA,anticipate:CW},F3=t=>{if(Array.isArray(t)){Fw(t.length===4);const[e,r,n,a]=t;return df(e,r,n,a)}else if(typeof t=="string")return jW[t];return t},zw=(t,e)=>r=>!!(cf(r)&&TH.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),KA=(t,e,r)=>n=>{if(!cf(n))return n;const[a,i,s,o]=n.match(om);return{[t]:parseFloat(a),[e]:parseFloat(i),[r]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},AW=t=>$s(0,255,t),Qg={...ol,transform:t=>Math.round(AW(t))},To={test:zw("rgb","red"),parse:KA("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Qg.transform(t)+", "+Qg.transform(e)+", "+Qg.transform(r)+", "+Qu(Zu.transform(n))+")"};function TW(t){let e="",r="",n="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const ly={test:zw("#"),parse:TW,transform:To.transform},Rl={test:zw("hsl","hue"),parse:KA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ri.transform(Qu(e))+", "+ri.transform(Qu(r))+", "+Qu(Zu.transform(n))+")"},Yr={test:t=>To.test(t)||ly.test(t)||Rl.test(t),parse:t=>To.test(t)?To.parse(t):Rl.test(t)?Rl.parse(t):ly.parse(t),transform:t=>cf(t)?t:t.hasOwnProperty("red")?To.transform(t):Rl.transform(t)},Rt=(t,e,r)=>-r*t+r*e+t;function Jg(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function IW({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let a=0,i=0,s=0;if(!e)a=i=s=r;else{const o=r<.5?r*(1+e):r+e-r*e,c=2*r-o;a=Jg(c,o,t+1/3),i=Jg(c,o,t),s=Jg(c,o,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:n}}const ev=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},OW=[ly,To,Rl],DW=t=>OW.find(e=>e.test(t));function $3(t){const e=DW(t);let r=e.parse(t);return e===Rl&&(r=IW(r)),r}const ZA=(t,e)=>{const r=$3(t),n=$3(e),a={...r};return i=>(a.red=ev(r.red,n.red,i),a.green=ev(r.green,n.green,i),a.blue=ev(r.blue,n.blue,i),a.alpha=Rt(r.alpha,n.alpha,i),To.transform(a))};function PW(t){var e,r;return isNaN(t)&&cf(t)&&(((e=t.match(om))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(kA))===null||r===void 0?void 0:r.length)||0)>0}const QA={regex:jH,countKey:"Vars",token:"${v}",parse:Wt},JA={regex:kA,countKey:"Colors",token:"${c}",parse:Yr.parse},e5={regex:om,countKey:"Numbers",token:"${n}",parse:ol.parse};function tv(t,{regex:e,countKey:r,token:n,parse:a}){const i=t.tokenised.match(e);i&&(t["num"+r]=i.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...i.map(a)))}function Z0(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&tv(r,QA),tv(r,JA),tv(r,e5),r}function t5(t){return Z0(t).values}function r5(t){const{values:e,numColors:r,numVars:n,tokenised:a}=Z0(t),i=e.length;return s=>{let o=a;for(let c=0;c<i;c++)c<n?o=o.replace(QA.token,s[c]):c<n+r?o=o.replace(JA.token,Yr.transform(s[c])):o=o.replace(e5.token,Qu(s[c]));return o}}const RW=t=>typeof t=="number"?0:t;function MW(t){const e=t5(t);return r5(t)(e.map(RW))}const Us={test:PW,parse:t5,createTransformer:r5,getAnimatableNone:MW},n5=(t,e)=>r=>`${r>0?e:t}`;function a5(t,e){return typeof t=="number"?r=>Rt(t,e,r):Yr.test(t)?ZA(t,e):t.startsWith("var(")?n5(t,e):s5(t,e)}const i5=(t,e)=>{const r=[...t],n=r.length,a=t.map((i,s)=>a5(i,e[s]));return i=>{for(let s=0;s<n;s++)r[s]=a[s](i);return r}},LW=(t,e)=>{const r={...t,...e},n={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(n[a]=a5(t[a],e[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},s5=(t,e)=>{const r=Us.createTransformer(e),n=Z0(t),a=Z0(e);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?Is(i5(n.values,a.values),r):n5(t,e)},Dd=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},U3=(t,e)=>r=>Rt(t,e,r);function BW(t){return typeof t=="number"?U3:typeof t=="string"?Yr.test(t)?ZA:s5:Array.isArray(t)?i5:typeof t=="object"?LW:U3}function FW(t,e,r){const n=[],a=r||BW(t[0]),i=t.length-1;for(let s=0;s<i;s++){let o=a(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Wt:e;o=Is(c,o)}n.push(o)}return n}function o5(t,e,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(Fw(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=FW(e,n,a),o=s.length,c=u=>{let d=0;if(o>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=Dd(t[d],t[d+1],u);return s[d](f)};return r?u=>c($s(t[0],t[i-1],u)):c}function $W(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const a=Dd(0,e,n);t.push(Rt(r,1,a))}}function UW(t){const e=[0];return $W(e,t.length-1),e}function zW(t,e){return t.map(r=>r*e)}function HW(t,e){return t.map(()=>e||VA).splice(0,t.length-1)}function Q0({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=NW(n)?n.map(F3):F3(n),i={done:!1,value:e[0]},s=zW(r&&r.length===e.length?r:UW(e),t),o=o5(s,e,{ease:Array.isArray(a)?a:HW(e,a)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}function l5(t,e){return e?t*(1e3/e):0}const WW=5;function c5(t,e,r){const n=Math.max(e-WW,0);return l5(r-t(n),e-n)}const rv=.001,VW=.01,GW=10,XW=.05,qW=1;function YW({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let a,i,s=1-e;s=$s(XW,qW,s),t=$s(VW,GW,Ti(t)),s<1?(a=u=>{const d=u*s,f=d*t,h=d-r,p=cy(u,s),m=Math.exp(-f);return rv-h/p*m},i=u=>{const f=u*s*t,h=f*r+r,p=Math.pow(s,2)*Math.pow(u,2)*t,m=Math.exp(-f),g=cy(Math.pow(u,2),s);return(-a(u)+rv>0?-1:1)*((h-p)*m)/g}):(a=u=>{const d=Math.exp(-u*t),f=(u-r)*t+1;return-rv+d*f},i=u=>{const d=Math.exp(-u*t),f=(r-u)*(t*t);return d*f});const o=5/t,c=ZW(a,i,o);if(t=Ro(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:s*2*Math.sqrt(n*u),duration:t}}}const KW=12;function ZW(t,e,r){let n=r;for(let a=1;a<KW;a++)n=n-t(n)/e(n);return n}function cy(t,e){return t*Math.sqrt(1-e*e)}const QW=["duration","bounce"],JW=["stiffness","damping","mass"];function z3(t,e){return e.some(r=>t[r]!==void 0)}function eV(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!z3(t,JW)&&z3(t,QW)){const r=YW(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function u5({keyframes:t,restDelta:e,restSpeed:r,...n}){const a=t[0],i=t[t.length-1],s={done:!1,value:a},{stiffness:o,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=eV({...n,velocity:-Ti(n.velocity||0)}),p=f||0,m=c/(2*Math.sqrt(o*u)),g=i-a,y=Ti(Math.sqrt(o/u)),x=Math.abs(g)<5;r||(r=x?.01:2),e||(e=x?.005:.5);let v;if(m<1){const b=cy(y,m);v=w=>{const S=Math.exp(-m*y*w);return i-S*((p+m*y*g)/b*Math.sin(b*w)+g*Math.cos(b*w))}}else if(m===1)v=b=>i-Math.exp(-y*b)*(g+(p+y*g)*b);else{const b=y*Math.sqrt(m*m-1);v=w=>{const S=Math.exp(-m*y*w),E=Math.min(b*w,300);return i-S*((p+m*y*g)*Math.sinh(E)+b*g*Math.cosh(E))/b}}return{calculatedDuration:h&&d||null,next:b=>{const w=v(b);if(h)s.done=b>=d;else{let S=p;b!==0&&(m<1?S=c5(v,b,w):S=0);const E=Math.abs(S)<=r,j=Math.abs(i-w)<=e;s.done=E&&j}return s.value=s.done?i:w,s}}}function H3({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=I=>o!==void 0&&I<o||c!==void 0&&I>c,m=I=>o===void 0?c:c===void 0||Math.abs(o-I)<Math.abs(c-I)?o:c;let g=r*e;const y=f+g,x=s===void 0?y:s(y);x!==y&&(g=x-f);const v=I=>-g*Math.exp(-I/n),b=I=>x+v(I),w=I=>{const N=v(I),T=b(I);h.done=Math.abs(N)<=u,h.value=h.done?x:T};let S,E;const j=I=>{p(h.value)&&(S=I,E=u5({keyframes:[h.value,m(h.value)],velocity:c5(b,I,h.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:I=>{let N=!1;return!E&&S===void 0&&(N=!0,w(I),j(I)),S!==void 0&&I>S?E.next(I-S):(!N&&w(I),h)}}}const tV=t=>{const e=({timestamp:r})=>t(r);return{start:()=>xt.update(e,!0),stop:()=>Bi(e),now:()=>Rr.isProcessing?Rr.timestamp:performance.now()}},W3=2e4;function V3(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<W3;)e+=r,n=t.next(e);return e>=W3?1/0:e}const rV={decay:H3,inertia:H3,tween:Q0,keyframes:Q0,spring:u5};function J0({autoplay:t=!0,delay:e=0,driver:r=tV,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...h}){let p=1,m=!1,g,y;const x=()=>{y=new Promise(B=>{g=B})};x();let v;const b=rV[a]||Q0;let w;b!==Q0&&typeof n[0]!="number"&&(w=o5([0,100],n,{clamp:!1}),n=[0,100]);const S=b({...h,keyframes:n});let E;o==="mirror"&&(E=b({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let j="idle",I=null,N=null,T=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=V3(S));const{calculatedDuration:F}=S;let C=1/0,A=1/0;F!==null&&(C=F+s,A=C*(i+1)-s);let k=0;const O=B=>{if(N===null)return;p>0&&(N=Math.min(N,B)),p<0&&(N=Math.min(B-A/p,N)),I!==null?k=I:k=Math.round(B-N)*p;const U=k-e*(p>=0?1:-1),q=p>=0?U<0:U>A;k=Math.max(U,0),j==="finished"&&I===null&&(k=A);let te=k,V=S;if(i){const oe=Math.min(k,A)/C;let ye=Math.floor(oe),se=oe%1;!se&&oe>=1&&(se=1),se===1&&ye--,ye=Math.min(ye,i+1),!!(ye%2)&&(o==="reverse"?(se=1-se,s&&(se-=s/C)):o==="mirror"&&(V=E)),te=$s(0,1,se)*C}const re=q?{done:!1,value:n[0]}:V.next(te);w&&(re.value=w(re.value));let{done:ue}=re;!q&&F!==null&&(ue=p>=0?k>=A:k<=0);const ie=I===null&&(j==="finished"||j==="running"&&ue);return f&&f(re.value),ie&&R(),re},$=()=>{v&&v.stop(),v=void 0},D=()=>{j="idle",$(),g(),x(),N=T=null},R=()=>{j="finished",d&&d(),$(),g()},M=()=>{if(m)return;v||(v=r(O));const B=v.now();c&&c(),I!==null?N=B-I:(!N||j==="finished")&&(N=B),j==="finished"&&x(),T=N,I=null,j="running",v.start()};t&&M();const L={then(B,U){return y.then(B,U)},get time(){return Ti(k)},set time(B){B=Ro(B),k=B,I!==null||!v||p===0?I=B:N=v.now()-B/p},get duration(){const B=S.calculatedDuration===null?V3(S):S.calculatedDuration;return Ti(B)},get speed(){return p},set speed(B){B===p||!v||(p=B,L.time=Ti(k))},get state(){return j},play:M,pause:()=>{j="paused",I=k},stop:()=>{m=!0,j!=="idle"&&(j="idle",u&&u(),D())},cancel:()=>{T!==null&&O(T),D()},complete:()=>{j="finished"},sample:B=>(N=0,O(B))};return L}function nV(t){let e;return()=>(e===void 0&&(e=t()),e)}const aV=nV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),iV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),oh=10,sV=2e4,oV=(t,e)=>e.type==="spring"||t==="backgroundColor"||!UA(e.ease);function lV(t,e,{onUpdate:r,onComplete:n,...a}){if(!(aV()&&iV.has(e)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let s=!1,o,c,u=!1;const d=()=>{c=new Promise(b=>{o=b})};d();let{keyframes:f,duration:h=300,ease:p,times:m}=a;if(oV(e,a)){const b=J0({...a,repeat:0,delay:0});let w={done:!1,value:f[0]};const S=[];let E=0;for(;!w.done&&E<sV;)w=b.sample(E),S.push(w.value),E+=oh;m=void 0,f=S,h=E-oh,p="linear"}const g=vW(t.owner.current,e,f,{...a,duration:h,ease:p,times:m}),y=()=>{u=!1,g.cancel()},x=()=>{u=!0,xt.update(y),o(),d()};return g.onfinish=()=>{u||(t.set(xW(f,a)),n&&n(),x())},{then(b,w){return c.then(b,w)},attachTimeline(b){return g.timeline=b,g.onfinish=null,Wt},get time(){return Ti(g.currentTime||0)},set time(b){g.currentTime=Ro(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return Ti(h)},play:()=>{s||(g.play(),Bi(y))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const w=J0({...a,autoplay:!1});t.setWithVelocity(w.sample(b-oh).value,w.sample(b).value,oh)}x()},complete:()=>{u||g.finish()},cancel:x}}function cV({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const a=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Wt,pause:Wt,stop:Wt,then:i=>(i(),Promise.resolve()),cancel:Wt,complete:Wt});return e?J0({keyframes:[0,1],duration:0,delay:e,onComplete:a}):a()}const uV={type:"spring",stiffness:500,damping:25,restSpeed:10},dV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fV={type:"keyframes",duration:.8},hV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pV=(t,{keyframes:e})=>e.length>2?fV:sl.has(t)?t.startsWith("scale")?dV(e[1]):uV:hV,uy=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Us.test(e)||e==="0")&&!e.startsWith("url(")),mV=new Set(["brightness","contrast","saturate","opacity"]);function gV(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(om)||[];if(!n)return t;const a=r.replace(n,"");let i=mV.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+a+")"}const vV=/([a-z-]*)\(.*?\)/g,dy={...Us,getAnimatableNone:t=>{const e=t.match(vV);return e?e.map(gV).join(" "):t}},xV={...NA,color:Yr,backgroundColor:Yr,outlineColor:Yr,fill:Yr,stroke:Yr,borderColor:Yr,borderTopColor:Yr,borderRightColor:Yr,borderBottomColor:Yr,borderLeftColor:Yr,filter:dy,WebkitFilter:dy},Hw=t=>xV[t];function d5(t,e){let r=Hw(t);return r!==dy&&(r=Us),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const f5=t=>/^0[^.\s]+$/.test(t);function yV(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||f5(t)}function bV(t,e,r,n){const a=uy(e,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const s=n.from!==void 0?n.from:t.get();let o;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?s:i[u-1]),yV(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(o=i[u]);if(a&&c.length&&o)for(let u=0;u<c.length;u++){const d=c[u];i[d]=d5(e,o)}return i}function wV({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Ww(t,e){return t[e]||t.default||t}const _V={skipAnimations:!1},Vw=(t,e,r,n={})=>a=>{const i=Ww(n,t)||{},s=i.delay||n.delay||0;let{elapsed:o=0}=n;o=o-Ro(s);const c=bV(e,t,r,i),u=c[0],d=c[c.length-1],f=uy(t,u),h=uy(t,d);let p={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-o,onUpdate:m=>{e.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(wV(i)||(p={...p,...pV(t,p)}),p.duration&&(p.duration=Ro(p.duration)),p.repeatDelay&&(p.repeatDelay=Ro(p.repeatDelay)),!f||!h||gW.current||i.type===!1||_V.skipAnimations)return cV(p);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const m=lV(e,t,p);if(m)return m}return J0(p)};function ep(t){return!!(wn(t)&&t.add)}const h5=t=>/^\-?\d*\.?\d+$/.test(t);function Gw(t,e){t.indexOf(e)===-1&&t.push(e)}function Xw(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class qw{constructor(){this.subscriptions=[]}add(e){return Gw(this.subscriptions,e),()=>Xw(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const kV=t=>!isNaN(parseFloat(t));class NV{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:s}=Rr;this.lastUpdated!==s&&(this.timeDelta=i,this.lastUpdated=s,xt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>xt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=kV(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new qw);const n=this.events[e].add(r);return e==="change"?()=>{n(),xt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?l5(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bc(t,e){return new NV(t,e)}const p5=t=>e=>e.test(t),SV={test:t=>t==="auto",parse:t=>t},m5=[ol,Ae,ri,ts,OH,IH,SV],au=t=>m5.find(p5(t)),EV=[...m5,Yr,Us],CV=t=>EV.find(p5(t));function jV(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,bc(r))}function AV(t,e){const r=cm(t,e);let{transitionEnd:n={},transition:a={},...i}=r?t.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const s in i){const o=GH(i[s]);jV(t,s,o)}}function TV(t,e,r){var n,a;const i=Object.keys(e).filter(o=>!t.hasValue(o)),s=i.length;if(s)for(let o=0;o<s;o++){const c=i[o],u=e[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(a=(n=r[c])!==null&&n!==void 0?n:t.readValue(c))!==null&&a!==void 0?a:e[c]),d!=null&&(typeof d=="string"&&(h5(d)||f5(d))?d=parseFloat(d):!CV(d)&&Us.test(u)&&(d=d5(c,u)),t.addValue(c,bc(d,{owner:t})),r[c]===void 0&&(r[c]=d),d!==null&&t.setBaseTarget(c,d))}}function IV(t,e){return e?(e[t]||e.default||e).from:void 0}function OV(t,e,r){const n={};for(const a in t){const i=IV(a,e);if(i!==void 0)n[a]=i;else{const s=r.getValue(a);s&&(n[a]=s.get())}}return n}function DV({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function PV(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function g5(t,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:s,...o}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");n&&(i=n);const u=[],d=a&&t.animationState&&t.animationState.getState()[a];for(const f in o){const h=t.getValue(f),p=o[f];if(!h||p===void 0||d&&DV(d,f))continue;const m={delay:r,elapsed:0,...Ww(i||{},f)};if(window.HandoffAppearAnimations){const x=t.getProps()[vA];if(x){const v=window.HandoffAppearAnimations(x,f,h,xt);v!==null&&(m.elapsed=v,m.isHandoff=!0)}}let g=!m.isHandoff&&!PV(h,p);if(m.type==="spring"&&(h.getVelocity()||m.velocity)&&(g=!1),h.animation&&(g=!1),g)continue;h.start(Vw(f,h,p,t.shouldReduceMotion&&sl.has(f)?{type:!1}:m));const y=h.animation;ep(c)&&(c.add(f),y.then(()=>c.remove(f))),u.push(y)}return s&&Promise.all(u).then(()=>{s&&AV(t,s)}),u}function fy(t,e,r={}){const n=cm(t,e,r.custom);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(g5(t,n,r)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=a;return RV(t,e,u+c,d,f,r)}:()=>Promise.resolve(),{when:o}=a;if(o){const[c,u]=o==="beforeChildren"?[i,s]:[s,i];return c().then(()=>u())}else return Promise.all([i(),s(r.delay)])}function RV(t,e,r=0,n=0,a=1,i){const s=[],o=(t.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>o-u*n;return Array.from(t.variantChildren).sort(MV).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(fy(u,e,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function MV(t,e){return t.sortNodePosition(e)}function LV(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>fy(t,i,r));n=Promise.all(a)}else if(typeof e=="string")n=fy(t,e,r);else{const a=typeof e=="function"?cm(t,e,r.custom):e;n=Promise.all(g5(t,a,r))}return n.then(()=>t.notify("AnimationComplete",e))}const BV=[...Aw].reverse(),FV=Aw.length;function $V(t){return e=>Promise.all(e.map(({animation:r,options:n})=>LV(t,r,n)))}function UV(t){let e=$V(t);const r=HV();let n=!0;const a=(c,u)=>{const d=cm(t,u);if(d){const{transition:f,transitionEnd:h,...p}=d;c={...c,...p,...h}}return c};function i(c){e=c(t)}function s(c,u){const d=t.getProps(),f=t.getVariantContext(!0)||{},h=[],p=new Set;let m={},g=1/0;for(let x=0;x<FV;x++){const v=BV[x],b=r[v],w=d[v]!==void 0?d[v]:f[v],S=Id(w),E=v===u?b.isActive:null;E===!1&&(g=x);let j=w===f[v]&&w!==d[v]&&S;if(j&&n&&t.manuallyAnimateOnMount&&(j=!1),b.protectedKeys={...m},!b.isActive&&E===null||!w&&!b.prevProp||im(w)||typeof w=="boolean")continue;let N=zV(b.prevProp,w)||v===u&&b.isActive&&!j&&S||x>g&&S,T=!1;const F=Array.isArray(w)?w:[w];let C=F.reduce(a,{});E===!1&&(C={});const{prevResolvedValues:A={}}=b,k={...A,...C},O=$=>{N=!0,p.has($)&&(T=!0,p.delete($)),b.needsAnimating[$]=!0};for(const $ in k){const D=C[$],R=A[$];if(m.hasOwnProperty($))continue;let M=!1;K0(D)&&K0(R)?M=!FA(D,R):M=D!==R,M?D!==void 0?O($):p.add($):D!==void 0&&p.has($)?O($):b.protectedKeys[$]=!0}b.prevProp=w,b.prevResolvedValues=C,b.isActive&&(m={...m,...C}),n&&t.blockInitialAnimation&&(N=!1),N&&(!j||T)&&h.push(...F.map($=>({animation:$,options:{type:v,...c}})))}if(p.size){const x={};p.forEach(v=>{const b=t.getBaseTarget(v);b!==void 0&&(x[v]=b)}),h.push({animation:x})}let y=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function o(c,u,d){var f;if(r[c].isActive===u)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),r[c].isActive=u;const h=s(d,c);for(const p in r)r[p].protectedKeys={};return h}return{animateChanges:s,setActive:o,setAnimateFunction:i,getState:()=>r}}function zV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FA(e,t):!1}function to(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HV(){return{animate:to(!0),whileInView:to(),whileHover:to(),whileTap:to(),whileDrag:to(),whileFocus:to(),exit:to()}}class WV extends Ys{constructor(e){super(e),e.animationState||(e.animationState=UV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),im(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let VV=0;class GV extends Ys{constructor(){super(...arguments),this.id=VV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const i=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const XV={animation:{Feature:WV},exit:{Feature:GV}},G3=(t,e)=>Math.abs(t-e);function qV(t,e){const r=G3(t.x,e.x),n=G3(t.y,e.y);return Math.sqrt(r**2+n**2)}class v5{constructor(e,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=av(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=qV(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=f,{timestamp:g}=Rr;this.history.push({...m,timestamp:g});const{onStart:y,onMove:x}=this.handlers;h||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=nv(h,this.transformPagePoint),xt.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=av(f.type==="pointercancel"?this.lastMoveEventInfo:nv(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,y),m&&m(f,y)},!PA(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const s=lm(e),o=nv(s,this.transformPagePoint),{point:c}=o,{timestamp:u}=Rr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(e,av(o,this.history)),this.removeListeners=Is(Ai(this.contextWindow,"pointermove",this.handlePointerMove),Ai(this.contextWindow,"pointerup",this.handlePointerUp),Ai(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bi(this.updatePoint)}}function nv(t,e){return e?{point:e(t.point)}:t}function X3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function av({point:t},e){return{point:t,delta:X3(t,x5(e)),offset:X3(t,YV(e)),velocity:KV(e,.1)}}function YV(t){return t[0]}function x5(t){return t[t.length-1]}function KV(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=x5(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>Ro(e)));)r--;if(!n)return{x:0,y:0};const i=Ti(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Mn(t){return t.max-t.min}function hy(t,e=0,r=.01){return Math.abs(t-e)<=r}function q3(t,e,r,n=.5){t.origin=n,t.originPoint=Rt(e.min,e.max,t.origin),t.scale=Mn(r)/Mn(e),(hy(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Rt(r.min,r.max,t.origin)-t.originPoint,(hy(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ju(t,e,r,n){q3(t.x,e.x,r.x,n?n.originX:void 0),q3(t.y,e.y,r.y,n?n.originY:void 0)}function Y3(t,e,r){t.min=r.min+e.min,t.max=t.min+Mn(e)}function ZV(t,e,r){Y3(t.x,e.x,r.x),Y3(t.y,e.y,r.y)}function K3(t,e,r){t.min=e.min-r.min,t.max=t.min+Mn(e)}function ed(t,e,r){K3(t.x,e.x,r.x),K3(t.y,e.y,r.y)}function QV(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Rt(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Rt(r,t,n.max):Math.min(t,r)),t}function Z3(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function JV(t,{top:e,left:r,bottom:n,right:a}){return{x:Z3(t.x,r,a),y:Z3(t.y,e,n)}}function Q3(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function eG(t,e){return{x:Q3(t.x,e.x),y:Q3(t.y,e.y)}}function tG(t,e){let r=.5;const n=Mn(t),a=Mn(e);return a>n?r=Dd(e.min,e.max-n,t.min):n>a&&(r=Dd(t.min,t.max-a,e.min)),$s(0,1,r)}function rG(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const py=.35;function nG(t=py){return t===!1?t=0:t===!0&&(t=py),{x:J3(t,"left","right"),y:J3(t,"top","bottom")}}function J3(t,e,r){return{min:eN(t,e),max:eN(t,r)}}function eN(t,e){return typeof t=="number"?t:t[e]||0}const tN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ml=()=>({x:tN(),y:tN()}),rN=()=>({min:0,max:0}),Xt=()=>({x:rN(),y:rN()});function Jn(t){return[t("x"),t("y")]}function y5({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function aG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iG(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function iv(t){return t===void 0||t===1}function my({scale:t,scaleX:e,scaleY:r}){return!iv(t)||!iv(e)||!iv(r)}function ho(t){return my(t)||b5(t)||t.z||t.rotate||t.rotateX||t.rotateY}function b5(t){return nN(t.x)||nN(t.y)}function nN(t){return t&&t!=="0%"}function tp(t,e,r){const n=t-r,a=e*n;return r+a}function aN(t,e,r,n,a){return a!==void 0&&(t=tp(t,a,n)),tp(t,r,n)+e}function gy(t,e=0,r=1,n,a){t.min=aN(t.min,e,r,n,a),t.max=aN(t.max,e,r,n,a)}function w5(t,{x:e,y:r}){gy(t.x,e.translate,e.scale,e.originPoint),gy(t.y,r.translate,r.scale,r.originPoint)}function sG(t,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let i,s;for(let o=0;o<a;o++){i=r[o],s=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ll(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,w5(t,s)),n&&ho(i.latestValues)&&Ll(t,i.latestValues))}e.x=iN(e.x),e.y=iN(e.y)}function iN(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ss(t,e){t.min=t.min+e,t.max=t.max+e}function sN(t,e,[r,n,a]){const i=e[a]!==void 0?e[a]:.5,s=Rt(t.min,t.max,i);gy(t,e[r],e[n],s,e.scale)}const oG=["x","scaleX","originX"],lG=["y","scaleY","originY"];function Ll(t,e){sN(t.x,e,oG),sN(t.y,e,lG)}function _5(t,e){return y5(iG(t.getBoundingClientRect(),e))}function cG(t,e,r){const n=_5(t,r),{scroll:a}=e;return a&&(ss(n.x,a.offset.x),ss(n.y,a.offset.y)),n}const k5=({current:t})=>t?t.ownerDocument.defaultView:null,uG=new WeakMap;class dG{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xt(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(lm(d,"page").point)},i=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=MA(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jn(y=>{let x=this.getAxisMotionValue(y).get()||0;if(ri.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[y];b&&(x=Mn(b)*(parseFloat(x)/100))}}this.originPoint[y]=x}),m&&xt.update(()=>m(d,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=f;if(p&&this.currentDirection===null){this.currentDirection=fG(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),g&&g(d,f)},o=(d,f)=>this.stop(d,f),c=()=>Jn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new v5(e,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:k5(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&xt.update(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!lh(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=QV(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&Pl(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=JV(a.layoutBox,r):this.constraints=!1,this.elastic=nG(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Jn(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=rG(a.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Pl(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=cG(n,a.root,this.visualElement.getTransformPagePoint());let s=eG(a.layout.layoutBox,i);if(r){const o=r(aG(s));this.hasMutatedConstraints=!!o,o&&(s=y5(o))}return s}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Jn(d=>{if(!lh(d,r,this.currentDirection))return;let f=c&&c[d]||{};s&&(f={min:0,max:0});const h=a?200:1e6,p=a?40:1e7,m={type:"inertia",velocity:n?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(Vw(e,n,0,r))}stopAnimation(){Jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Jn(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Jn(r=>{const{drag:n}=this.getProps();if(!lh(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:s,max:o}=a.layout.layoutBox[r];i.set(e[r]-Rt(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Pl(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Jn(s=>{const o=this.getAxisMotionValue(s);if(o){const c=o.get();a[s]=tG({min:c,max:c},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Jn(s=>{if(!lh(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Rt(c,u,a[s]))})}addListeners(){if(!this.visualElement.current)return;uG.set(this.visualElement,this);const e=this.visualElement.current,r=Ai(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Pl(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const s=Ei(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Jn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),r(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=py,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function lh(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function fG(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class hG extends Ys{constructor(e){super(e),this.removeGroupControls=Wt,this.removeListeners=Wt,this.controls=new dG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wt}unmount(){this.removeGroupControls(),this.removeListeners()}}const oN=t=>(e,r)=>{t&&xt.update(()=>t(e,r))};class pG extends Ys{constructor(){super(...arguments),this.removePointerDownListener=Wt}onPointerDown(e){this.session=new v5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:oN(e),onStart:oN(r),onMove:n,onEnd:(i,s)=>{delete this.session,a&&xt.update(()=>a(i,s))}}}mount(){this.removePointerDownListener=Ai(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function mG(){const t=_.useContext(nm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,a=_.useId();return _.useEffect(()=>n(a),[]),!e&&r?[!1,()=>r&&r(a)]:[!0]}const Yh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const iu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ae.test(t))t=parseFloat(t);else return t;const r=lN(t,e.target.x),n=lN(t,e.target.y);return`${r}% ${n}%`}},gG={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,a=Us.parse(t);if(a.length>5)return n;const i=Us.createTransformer(t),s=typeof a[0]!="number"?1:0,o=r.x.scale*e.x,c=r.y.scale*e.y;a[0+s]/=o,a[1+s]/=c;const u=Rt(o,c,.5);return typeof a[2+s]=="number"&&(a[2+s]/=u),typeof a[3+s]=="number"&&(a[3+s]/=u),i(a)}};class vG extends ne.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;NH(xG),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Yh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,s=n.projection;return s&&(s.isPresent=i,a||e.layoutDependency!==r||r===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||xt.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function N5(t){const[e,r]=mG(),n=_.useContext(Iw);return ne.createElement(vG,{...t,layoutGroup:n,switchLayoutGroup:_.useContext(yA),isPresent:e,safeToRemove:r})}const xG={borderRadius:{...iu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:iu,borderTopRightRadius:iu,borderBottomLeftRadius:iu,borderBottomRightRadius:iu,boxShadow:gG},S5=["TopLeft","TopRight","BottomLeft","BottomRight"],yG=S5.length,cN=t=>typeof t=="string"?parseFloat(t):t,uN=t=>typeof t=="number"||Ae.test(t);function bG(t,e,r,n,a,i){a?(t.opacity=Rt(0,r.opacity!==void 0?r.opacity:1,wG(n)),t.opacityExit=Rt(e.opacity!==void 0?e.opacity:1,0,_G(n))):i&&(t.opacity=Rt(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let s=0;s<yG;s++){const o=`border${S5[s]}Radius`;let c=dN(e,o),u=dN(r,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||uN(c)===uN(u)?(t[o]=Math.max(Rt(cN(c),cN(u),n),0),(ri.test(u)||ri.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||r.rotate)&&(t.rotate=Rt(e.rotate||0,r.rotate||0,n))}function dN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wG=E5(0,.5,qA),_G=E5(.5,.95,Wt);function E5(t,e,r){return n=>n<t?0:n>e?1:r(Dd(t,e,n))}function fN(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){fN(t.x,e.x),fN(t.y,e.y)}function hN(t,e,r,n,a){return t-=e,t=tp(t,1/r,n),a!==void 0&&(t=tp(t,1/a,n)),t}function kG(t,e=0,r=1,n=.5,a,i=t,s=t){if(ri.test(e)&&(e=parseFloat(e),e=Rt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Rt(i.min,i.max,n);t===i&&(o-=e),t.min=hN(t.min,e,r,o,a),t.max=hN(t.max,e,r,o,a)}function pN(t,e,[r,n,a],i,s){kG(t,e[r],e[n],e[a],e.scale,i,s)}const NG=["x","scaleX","originX"],SG=["y","scaleY","originY"];function mN(t,e,r,n){pN(t.x,e,NG,r?r.x:void 0,n?n.x:void 0),pN(t.y,e,SG,r?r.y:void 0,n?n.y:void 0)}function gN(t){return t.translate===0&&t.scale===1}function C5(t){return gN(t.x)&&gN(t.y)}function EG(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function j5(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function vN(t){return Mn(t.x)/Mn(t.y)}class CG{constructor(){this.members=[]}add(e){Gw(this.members,e),e.scheduleRender()}remove(e){if(Xw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xN(t,e,r){let n="";const a=t.x.translate/e.x,i=t.y.translate/e.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const s=t.x.scale*e.x,o=t.y.scale*e.y;return(s!==1||o!==1)&&(n+=`scale(${s}, ${o})`),n||"none"}const jG=(t,e)=>t.depth-e.depth;class AG{constructor(){this.children=[],this.isDirty=!1}add(e){Gw(this.children,e),this.isDirty=!0}remove(e){Xw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jG),this.isDirty=!1,this.children.forEach(e)}}function TG(t,e){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=e&&(Bi(n),t(i-e))};return xt.read(n,!0),()=>Bi(n)}function IG(t){window.MotionDebug&&window.MotionDebug.record(t)}function OG(t){return t instanceof SVGElement&&t.tagName!=="svg"}function DG(t,e,r){const n=wn(t)?t:bc(t);return n.start(Vw("",n,e,r)),n.animation}const yN=["","X","Y","Z"],PG={visibility:"hidden"},bN=1e3;let RG=0;const po={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function A5({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(s={},o=e==null?void 0:e()){this.id=RG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,po.totalNodes=po.resolvedTargetDeltas=po.recalculatedProjection=0,this.nodes.forEach(BG),this.nodes.forEach(HG),this.nodes.forEach(WG),this.nodes.forEach(FG),IG(po)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new AG)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new qw),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=OG(s),this.instance=s;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=TG(h,250),Yh.hasAnimatedSinceResize&&(Yh.hasAnimatedSinceResize=!1,this.nodes.forEach(_N))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||YG,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=d.getProps(),v=!this.targetLayout||!j5(this.targetLayout,m)||p,b=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const w={...Ww(g,"layout"),onPlay:y,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else h||_N(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VG),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wN);return}this.isUpdating||this.nodes.forEach(UG),this.isUpdating=!1,this.nodes.forEach(zG),this.nodes.forEach(MG),this.nodes.forEach(LG),this.clearAllSnapshots();const o=performance.now();Rr.delta=$s(0,1e3/60,o-Rr.timestamp),Rr.timestamp=o,Rr.isProcessing=!0,Yg.update.process(Rr),Yg.preRender.process(Rr),Yg.render.process(Rr),Rr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach($G),this.sharedNodes.forEach(GG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!C5(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&(o||ho(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),KG(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Xt();const o=s.measureViewportBox(),{scroll:c}=this.root;return c&&(ss(o.x,c.offset.x),ss(o.y,c.offset.y)),o}removeElementScroll(s){const o=Xt();Gn(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){Gn(o,s);const{scroll:h}=this.root;h&&(ss(o.x,-h.offset.x),ss(o.y,-h.offset.y))}ss(o.x,d.offset.x),ss(o.y,d.offset.y)}}return o}applyTransform(s,o=!1){const c=Xt();Gn(c,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ll(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ho(d.latestValues)&&Ll(c,d.latestValues)}return ho(this.latestValues)&&Ll(c,this.latestValues),c}removeTransform(s){const o=Xt();Gn(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ho(u.latestValues))continue;my(u.latestValues)&&u.updateSnapshot();const d=Xt(),f=u.measurePageBox();Gn(d,f),mN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ho(this.latestValues)&&mN(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Rr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),ed(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xt(),this.targetWithTransforms=Xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),w5(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),ed(this.relativeTargetOrigin,this.target,p.target),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}po.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||my(this.parent.latestValues)||b5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Rr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Gn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;sG(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:m}=o;if(!m){this.projectionTransform&&(this.projectionDelta=Ml(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ml(),this.projectionDeltaWithTransform=Ml());const g=this.projectionTransform;Ju(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=xN(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==h||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),po.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Ml();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Xt(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,y=this.getStack(),x=!y||y.members.length<=1,v=!!(g&&!x&&this.options.crossfade===!0&&!this.path.some(qG));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const S=w/1e3;kN(f.x,s.x,S),kN(f.y,s.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ed(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XG(this.relativeTarget,this.relativeTargetOrigin,h,S),b&&EG(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Xt()),Gn(b,this.relativeTarget)),g&&(this.animationValues=d,bG(d,u,this.latestValues,S,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xt.update(()=>{Yh.hasAnimatedSinceResize=!0,this.currentAnimation=DG(0,bN,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&T5(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Xt();const f=Mn(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+f;const h=Mn(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+h}Gn(o,c),Ll(o,d),Ju(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new CG),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(o=!0),!o)return;const u={};for(let d=0;d<yN.length;d++){const f="rotate"+yN[d];c[f]&&(u[f]=c[f],s.setStaticValue(f,0))}s.render();for(const d in u)s.setStaticValue(d,u[d]);s.scheduleRender()}getProjectionStyles(s){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PG;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=qh(s==null?void 0:s.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=qh(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!ho(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=xN(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in q0){if(h[g]===void 0)continue;const{correct:y,applyTo:x}=q0[g],v=u.transform==="none"?h[g]:y(h[g],f);if(x){const b=x.length;for(let w=0;w<b;w++)u[x[w]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?qh(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(wN),this.root.sharedNodes.clear()}}}function MG(t){t.updateLayout()}function LG(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:i}=t.options,s=r.source!==t.layout.source;i==="size"?Jn(f=>{const h=s?r.measuredBox[f]:r.layoutBox[f],p=Mn(h);h.min=n[f].min,h.max=h.min+p}):T5(i,r.layoutBox,n)&&Jn(f=>{const h=s?r.measuredBox[f]:r.layoutBox[f],p=Mn(n[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=Ml();Ju(o,n,r.layoutBox);const c=Ml();s?Ju(c,t.applyTransform(a,!0),r.measuredBox):Ju(c,n,r.layoutBox);const u=!C5(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=Xt();ed(m,r.layoutBox,h.layoutBox);const g=Xt();ed(g,n,p.layoutBox),j5(m,g)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function BG(t){po.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function FG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $G(t){t.clearSnapshot()}function wN(t){t.clearMeasurements()}function UG(t){t.isLayoutDirty=!1}function zG(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _N(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function HG(t){t.resolveTargetDelta()}function WG(t){t.calcProjection()}function VG(t){t.resetRotation()}function GG(t){t.removeLeadSnapshot()}function kN(t,e,r){t.translate=Rt(e.translate,0,r),t.scale=Rt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function NN(t,e,r,n){t.min=Rt(e.min,r.min,n),t.max=Rt(e.max,r.max,n)}function XG(t,e,r,n){NN(t.x,e.x,r.x,n),NN(t.y,e.y,r.y,n)}function qG(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YG={duration:.45,ease:[.4,0,.1,1]},SN=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),EN=SN("applewebkit/")&&!SN("chrome/")?Math.round:Wt;function CN(t){t.min=EN(t.min),t.max=EN(t.max)}function KG(t){CN(t.x),CN(t.y)}function T5(t,e,r){return t==="position"||t==="preserve-aspect"&&!hy(vN(e),vN(r),.2)}const ZG=A5({attachResizeListener:(t,e)=>Ei(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sv={current:void 0},I5=A5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sv.current){const t=new ZG({});t.mount(window),t.setOptions({layoutScroll:!0}),sv.current=t}return sv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),QG={pan:{Feature:pG},drag:{Feature:hG,ProjectionNode:I5,MeasureLayout:N5}},JG=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eX(t){const e=JG.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}function vy(t,e,r=1){const[n,a]=eX(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const s=i.trim();return h5(s)?parseFloat(s):s}else return sy(a)?vy(a,e,r+1):a}function tX(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(a=>{const i=a.get();if(!sy(i))return;const s=vy(i,n);s&&a.set(s)});for(const a in e){const i=e[a];if(!sy(i))continue;const s=vy(i,n);s&&(e[a]=s,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:e,transitionEnd:r}}const rX=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),O5=t=>rX.has(t),nX=t=>Object.keys(t).some(O5),jN=t=>t===ol||t===Ae,AN=(t,e)=>parseFloat(t.split(", ")[e]),TN=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return AN(a[1],e);{const i=n.match(/^matrix\((.+)\)$/);return i?AN(i[1],t):0}},aX=new Set(["x","y","z"]),iX=lf.filter(t=>!aX.has(t));function sX(t){const e=[];return iX.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const wc={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:TN(4,13),y:TN(5,14)};wc.translateX=wc.x;wc.translateY=wc.y;const oX=(t,e,r)=>{const n=e.measureViewportBox(),a=e.current,i=getComputedStyle(a),{display:s}=i,o={};s==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(u=>{o[u]=wc[u](n,i)}),e.render();const c=e.measureViewportBox();return r.forEach(u=>{const d=e.getValue(u);d&&d.jump(o[u]),t[u]=wc[u](c,i)}),t},lX=(t,e,r={},n={})=>{e={...e},n={...n};const a=Object.keys(e).filter(O5);let i=[],s=!1;const o=[];if(a.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let d=r[c],f=au(d);const h=e[c];let p;if(K0(h)){const m=h.length,g=h[0]===null?1:0;d=h[g],f=au(d);for(let y=g;y<m&&h[y]!==null;y++)p?Fw(au(h[y])===p):p=au(h[y])}else p=au(h);if(f!==p)if(jN(f)&&jN(p)){const m=u.get();typeof m=="string"&&u.set(parseFloat(m)),typeof h=="string"?e[c]=parseFloat(h):Array.isArray(h)&&p===Ae&&(e[c]=h.map(parseFloat))}else f!=null&&f.transform&&(p!=null&&p.transform)&&(d===0||h===0)?d===0?u.set(p.transform(d)):e[c]=f.transform(h):(s||(i=sX(t),s=!0),o.push(c),n[c]=n[c]!==void 0?n[c]:e[c],u.jump(h))}),o.length){const c=o.indexOf("height")>=0?window.pageYOffset:null,u=oX(e,t,o);return i.length&&i.forEach(([d,f])=>{t.getValue(d).set(f)}),t.render(),am&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:e,transitionEnd:n}};function cX(t,e,r,n){return nX(e)?lX(t,e,r,n):{target:e,transitionEnd:n}}const uX=(t,e,r,n)=>{const a=tX(t,e,n);return e=a.target,n=a.transitionEnd,cX(t,e,r,n)},xy={current:null},D5={current:!1};function dX(){if(D5.current=!0,!!am)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xy.current=t.matches;t.addListener(e),e()}else xy.current=!1}function fX(t,e,r){const{willChange:n}=e;for(const a in e){const i=e[a],s=r[a];if(wn(i))t.addValue(a,i),ep(n)&&n.add(a);else if(wn(s))t.addValue(a,bc(i,{owner:t})),ep(n)&&n.remove(a);else if(s!==i)if(t.hasValue(a)){const o=t.getValue(a);!o.hasAnimated&&o.set(i)}else{const o=t.getStaticValue(a);t.addValue(a,bc(o!==void 0?o:i,{owner:t}))}}for(const a in r)e[a]===void 0&&t.removeValue(a);return e}const IN=new WeakMap,P5=Object.keys(Od),hX=P5.length,ON=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pX=Tw.length;class mX{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>xt.render(this.render,!1,!0);const{latestValues:o,renderState:c}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=s,this.isControllingVariants=sm(r),this.isVariantNode=xA(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const f in d){const h=d[f];o[f]!==void 0&&wn(h)&&(h.set(o[f],!1),ep(u)&&u.add(f))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,IN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),D5.current||dX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){IN.delete(this.current),this.projection&&this.projection.unmount(),Bi(this.notifyUpdate),Bi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=sl.has(e),a=r.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&xt.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,a,i){let s,o;for(let c=0;c<hX;c++){const u=P5[c],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:p}=Od[u];h&&(s=h),d(r)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),p&&(o=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:p}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&Pl(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:p})}return o}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<ON.length;n++){const a=ON[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=e["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=fX(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<pX;n++){const a=Tw[n],i=this.props[a];(Id(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=bc(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=Bw(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!wn(i)?i:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new qw),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class R5 extends mX{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:a},i){let s=OV(n,e||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),s&&(s=a(s))),i){TV(this,n,s);const o=uX(this,n,s,r);r=o.transitionEnd,n=o.target}return{transition:e,transitionEnd:r,...n}}}function gX(t){return window.getComputedStyle(t)}class vX extends R5{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(sl.has(r)){const n=Hw(r);return n&&n.default||0}else{const n=gX(e),a=(_A(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return _5(e,r)}build(e,r,n,a){Dw(e,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,r){return Lw(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,a){jA(e,r,n,a)}}class xX extends R5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(sl.has(r)){const n=Hw(r);return n&&n.default||0}return r=AA.has(r)?r:jw(r),e.getAttribute(r)}measureInstanceViewportBox(){return Xt()}scrapeMotionValuesFromProps(e,r){return IA(e,r)}build(e,r,n,a){Rw(e,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(e,r,n,a){TA(e,r,n,a)}mount(e){this.isSVGTag=Mw(e.tagName),super.mount(e)}}const yX=(t,e)=>Ow(t)?new xX(e,{enableHardwareAcceleration:!1}):new vX(e,{enableHardwareAcceleration:!0}),bX={layout:{ProjectionNode:I5,MeasureLayout:N5}},wX={...XV,...hW,...QG,...bX},ov=_H((t,e)=>eW(t,e,wX,yX));function M5(){const t=_.useRef(!1);return Cw(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function _X(){const t=M5(),[e,r]=_.useState(0),n=_.useCallback(()=>{t.current&&r(e+1)},[e]);return[_.useCallback(()=>xt.postRender(n),[n]),e]}class kX extends _.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function NX({children:t,isPresent:e}){const r=_.useId(),n=_.useRef(null),a=_.useRef({width:0,height:0,top:0,left:0});return _.useInsertionEffect(()=>{const{width:i,height:s,top:o,left:c}=a.current;if(e||!n.current||!i||!s)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${o}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),_.createElement(kX,{isPresent:e,childRef:n,sizeRef:a},_.cloneElement(t,{ref:n}))}const lv=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:s})=>{const o=OA(SX),c=_.useId(),u=_.useMemo(()=>({id:c,initial:e,isPresent:r,custom:a,onExitComplete:d=>{o.set(d,!0);for(const f of o.values())if(!f)return;n&&n()},register:d=>(o.set(d,!1),()=>o.delete(d))}),i?void 0:[r]);return _.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[r]),_.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),s==="popLayout"&&(t=_.createElement(NX,{isPresent:r},t)),_.createElement(nm.Provider,{value:u},t)};function SX(){return new Map}function EX(t){return _.useEffect(()=>()=>t(),[])}const mo=t=>t.key||"";function CX(t,e){t.forEach(r=>{const n=mo(r);e.set(n,r)})}function jX(t){const e=[];return _.Children.forEach(t,r=>{_.isValidElement(r)&&e.push(r)}),e}const cv=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:s="sync"})=>{const o=_.useContext(Iw).forceRender||_X()[0],c=M5(),u=jX(t);let d=u;const f=_.useRef(new Map).current,h=_.useRef(d),p=_.useRef(new Map).current,m=_.useRef(!0);if(Cw(()=>{m.current=!1,CX(u,p),h.current=d}),EX(()=>{m.current=!0,p.clear(),f.clear()}),m.current)return _.createElement(_.Fragment,null,d.map(v=>_.createElement(lv,{key:mo(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:s},v)));d=[...d];const g=h.current.map(mo),y=u.map(mo),x=g.length;for(let v=0;v<x;v++){const b=g[v];y.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(d=[]),f.forEach((v,b)=>{if(y.indexOf(b)!==-1)return;const w=p.get(b);if(!w)return;const S=g.indexOf(b);let E=v;if(!E){const j=()=>{f.delete(b);const I=Array.from(p.keys()).filter(N=>!y.includes(N));if(I.forEach(N=>p.delete(N)),h.current=u.filter(N=>{const T=mo(N);return T===b||I.includes(T)}),!f.size){if(c.current===!1)return;o(),n&&n()}};E=_.createElement(lv,{key:mo(w),isPresent:!1,onExitComplete:j,custom:e,presenceAffectsLayout:i,mode:s},w),f.set(b,E)}d.splice(S,0,E)}),d=d.map(v=>{const b=v.key;return f.has(b)?v:_.createElement(lv,{key:mo(v),isPresent:!0,presenceAffectsLayout:i,mode:s},v)}),_.createElement(_.Fragment,null,f.size?d:d.map(v=>_.cloneElement(v)))},DN=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),AX=()=>{var k,O,$;const{id:t}=lw(),e=Ma(),[r,n]=_.useState(null),[a,i]=_.useState(!0),[s,o]=_.useState([]),[c,u]=_.useState([]),[d,f]=_.useState(!0),[h,p]=_.useState(0),[m,g]=_.useState(!1),y=_.useRef(null),x=D=>{if(!ti(D))return"Дата не указана";try{return en(D,"d MMMM yyyy")}catch(R){return console.error("Error formatting date in SpeakerProfile:",D,R),"Ошибка даты"}},v=D=>{if(!D)return"--:--";try{return Li(D)}catch(R){return console.error("Error formatting time in SpeakerProfile:",D,R),"--:--"}},b=D=>{try{if(D.status==="past")return!0;if(!D.end_at)return!1;const R=new Date(D.end_at);return isNaN(R.getTime())?!1:R<new Date}catch(R){return console.error("Error checking if event is past:",R),!1}};_.useEffect(()=>{(async()=>{try{const{data:R,error:M}=await DN.from("speakers").select("*").eq("id",t).single();if(M)throw M;const L=R.photos?R.photos.filter((B,U,q)=>U===q.findIndex(te=>te.url===B.url)):[];n({...R,photos:L})}catch(R){console.error("Error fetching speaker:",R),K.error("Не удалось загрузить информацию о спикере")}finally{i(!1)}})()},[t]),_.useEffect(()=>{r&&(async()=>{if(r)try{const{data:R,error:M}=await DN.from("events").select(`
            id,
            title,
            description,
            short_description,
            start_at,
            end_at,
            location,
            event_type,
            languages,
            speakers,
            bg_image,
            original_bg_image,
            status
          `).or(`speakers.cs.["${r.id}"],speakers.cs.{"id":"${r.id}"}`);if(M)throw M;const L=[],B=[];R==null||R.forEach(U=>{b(U)?B.push(U):L.push(U)}),o(L),u(B)}catch(R){console.error("Error fetching events:",R),K.error("Не удалось загрузить мероприятия спикера")}finally{f(!1)}})()},[r]),_.useEffect(()=>{!a&&y.current&&y.current.focus()},[a]);const w=()=>{r&&p(D=>D===r.photos.length-1?0:D+1)},S=()=>{r&&p(D=>D===0?r.photos.length-1:D-1)},E=D=>{m&&(D.key==="Escape"?g(!1):D.key==="ArrowRight"?w():D.key==="ArrowLeft"&&S())};_.useEffect(()=>(window.addEventListener("keydown",E),()=>{window.removeEventListener("keydown",E)}),[m,h]);const j=D=>{try{return typeof D=="string"?JSON.parse(D):D}catch(R){return console.error("Error parsing blogs:",R),null}},I=D=>{if(!D)return l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Описание спикера отсутствует"});const R=[];let M=0,L;const B=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1(?:[^>]*?)>(.*?)<\/a>/g;for(;(L=B.exec(D))!==null;)L.index>M&&R.push({type:"text",content:D.substring(M,L.index)}),R.push({type:"link",url:L[2],text:L[3]}),M=L.index+L[0].length;return M<D.length&&R.push({type:"text",content:D.substring(M)}),l.jsx("div",{className:"text-dark-600 dark:text-dark-300",children:R.map((U,q)=>U.type==="text"?l.jsx("span",{children:U.content},q):U.type==="link"?l.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-400 hover:opacity-80 underline",children:U.text},q):null)})},N=D=>D.short_description?D.short_description:D.description?D.description.length>200?`${D.description.substring(0,200)}...`:D.description:"Описание мероприятия отсутствует",T=D=>{const R=b(D);return l.jsxs("div",{className:"relative border border-gray-200 dark:border-dark-700 rounded-lg overflow-hidden hover:shadow-lg transition-all duration-300 min-h-[250px] group",children:[l.jsx("div",{className:"absolute inset-0 z-0",children:D.bg_image?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${D.bg_image}`,alt:D.title,className:"w-full h-full object-cover opacity-60 dark:opacity-50 group-hover:opacity-70 dark:group-hover:opacity-60 transition-opacity duration-300",onError:M=>{const L=M.target;D.original_bg_image&&!L.dataset.triedOriginal?(L.dataset.triedOriginal="true",L.src=`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${D.original_bg_image}`):L.style.display="none"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/90 via-white/70 to-white/50 dark:from-dark-900/90 dark:via-dark-900/70 dark:to-dark-900/50"})]}):l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-50 to-primary-100 dark:from-dark-800 dark:to-dark-700 opacity-50"})}),l.jsxs("div",{className:"relative z-10 p-5 h-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("h3",{className:"text-xl font-bold text-dark-800 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:D.title}),R&&l.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100/90 dark:bg-dark-700/90 text-gray-700 dark:text-gray-300 backdrop-blur-sm",children:"Прошедшее"})]}),l.jsx("p",{className:"text-dark-600 dark:text-dark-300 mb-4 flex-grow line-clamp-3",children:N(D)}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{className:"flex items-center text-dark-600 dark:text-dark-400",children:[l.jsx(Oe,{className:"h-4 w-4 mr-2 flex-shrink-0 text-primary-500"}),l.jsx("span",{className:"font-medium",children:x(D.start_at)})]}),l.jsxs("div",{className:"flex items-center text-dark-600 dark:text-dark-400",children:[l.jsx(bn,{className:"h-4 w-4 mr-2 flex-shrink-0 text-primary-500"}),l.jsxs("span",{children:[v(D.start_at)," - ",v(D.end_at)]})]}),D.location&&l.jsxs("div",{className:"flex items-center text-dark-600 dark:text-dark-400",children:[l.jsx(vr,{className:"h-4 w-4 mr-2 flex-shrink-0 text-primary-500"}),l.jsx("span",{className:"truncate",children:D.location})]}),D.languages&&D.languages.length>0&&l.jsxs("div",{className:"flex items-center text-dark-600 dark:text-dark-400",children:[l.jsx(FM,{className:"h-4 w-4 mr-2 flex-shrink-0 text-primary-500"}),l.jsx("span",{children:D.languages.join(", ")})]})]}),l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/80 dark:border-dark-700/80",children:l.jsxs("a",{href:`/events/${D.id}`,className:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-semibold group/link",children:[l.jsx("span",{children:"Подробнее"}),l.jsx("svg",{className:"w-4 h-4 ml-1 group-hover/link:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]},D.id)},F=()=>!r||r.photos.length===0?l.jsx("div",{className:"w-full h-64 bg-gray-100 dark:bg-dark-700 rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-gray-400",children:"Нет фото"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative w-full h-64 md:h-80 lg:h-96 rounded-lg overflow-hidden bg-gray-100 dark:bg-dark-700 cursor-pointer",onClick:()=>g(!0),children:[l.jsx(cv,{mode:"wait",children:l.jsx(ov.img,{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${r.photos[h].url}`,alt:r.name,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},h)}),r.photos.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:D=>{D.stopPropagation(),S()},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full z-10 transition-all",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),l.jsx("button",{onClick:D=>{D.stopPropagation(),w()},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full z-10 transition-all",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),r.photos.length>1&&l.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:r.photos.map((D,R)=>l.jsx("button",{onClick:()=>p(R),className:`aspect-square overflow-hidden rounded-md transition-all ${R===h?"ring-2 ring-primary-500":"opacity-80 hover:opacity-100 hover:ring-1 hover:ring-gray-300"}`,children:l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${D.url}`,alt:`Фото ${R+1}`,className:"w-full h-full object-cover"})},R))}),l.jsx(cv,{children:m&&l.jsxs(ov.div,{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>g(!1),children:[l.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",onClick:D=>{D.stopPropagation(),g(!1)},children:l.jsx(Bt,{className:"h-8 w-8"})}),l.jsxs("div",{className:"relative w-full max-w-6xl h-full max-h-screen",children:[l.jsx(cv,{mode:"wait",children:l.jsx(ov.img,{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${r.photos[h].url}`,alt:r.name,className:"w-full h-full object-contain",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},onClick:D=>D.stopPropagation()},h)}),r.photos.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:D=>{D.stopPropagation(),S()},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full z-10 transition-all",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),l.jsx("button",{onClick:D=>{D.stopPropagation(),w()},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full z-10 transition-all",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),l.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2",children:r.photos.map((D,R)=>l.jsx("button",{onClick:M=>{M.stopPropagation(),p(R)},className:`h-2 rounded-full transition-all ${R===h?"w-6 bg-primary-500":"w-2 bg-white/50 hover:bg-white/80"}`},R))})]})]})})]});if(a)return l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})});if(!r)return l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600",children:"Спикер не найден"})});const C=r.blog_visibility?j(r.blogs||"[]"):null,A=C&&C.length>0;return l.jsx(Ot,{children:l.jsx("div",{className:"bg-gray-50 dark:bg-dark-800 min-h-screen",children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-dark-500 hover:text-dark-700 dark:text-dark-400 dark:hover:text-dark-200 transition-colors mb-8",children:[l.jsx(Oj,{className:"h-5 w-5"}),"Назад к списку спикеров"]}),l.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-lg overflow-hidden mb-8",children:l.jsxs("div",{className:"flex flex-col md:flex-row",children:[l.jsx("div",{ref:y,tabIndex:-1,className:"w-full md:w-1/3 lg:w-1/4 p-6 outline-none",children:F()}),l.jsxs("div",{className:"w-full md:w-2/3 lg:w-3/4 p-6 md:p-8 flex flex-col justify-center",children:[l.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-dark-800 dark:text-white mb-2",children:r.name}),l.jsx("p",{className:"text-xl text-primary-600 dark:text-primary-400 mb-6",children:r.field_of_expertise}),l.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[((k=r.contact_info)==null?void 0:k.email)&&l.jsxs("a",{href:`mailto:${r.contact_info.email}`,className:"flex items-center gap-2 text-dark-600 dark:text-dark-300 hover:text-primary-500 transition-colors",children:[l.jsx(ef,{className:"h-5 w-5"}),l.jsx("span",{children:r.contact_info.email})]}),((O=r.contact_info)==null?void 0:O.website)&&l.jsxs("a",{href:r.contact_info.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-dark-600 dark:text-dark-300 hover:text-primary-500 transition-colors",children:[l.jsx(zp,{className:"h-5 w-5"}),l.jsx("span",{children:r.contact_info.website})]}),(($=r.contact_info)==null?void 0:$.location)&&l.jsxs("div",{className:"flex items-center gap-2 text-dark-600 dark:text-dark-300",children:[l.jsx(vr,{className:"h-5 w-5"}),l.jsx("span",{children:r.contact_info.location})]})]}),l.jsx("div",{className:"mb-6",children:I(r.description)}),A&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3 text-dark-800 dark:text-white",children:"Блоги и социальные сети"}),l.jsx("div",{className:"flex flex-wrap gap-3",children:C.map((D,R)=>l.jsxs("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 rounded-lg bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors text-dark-700 dark:text-dark-200",children:[l.jsx(Rj,{className:"w-4 h-4 mr-2 flex-shrink-0"}),l.jsx("span",{children:D.platform})]},R))})]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[Array.isArray(r.achievements)&&r.achievements.length>0&&l.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Достижения"}),l.jsx("ul",{className:"space-y-3",children:r.achievements.map((D,R)=>l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-primary-500 mr-2 mt-1",children:"•"}),l.jsx("span",{className:"text-dark-600 dark:text-dark-300",children:D})]},R))})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ближайшие мероприятия"}),d?l.jsx("div",{className:"flex justify-center py-4",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s.length>0?l.jsx("div",{className:"space-y-4",children:s.map(T)}):l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Нет запланированных мероприятий"})]}),c.length>0&&l.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Прошедшие мероприятия"}),l.jsx("div",{className:"space-y-4",children:c.map(T)})]}),Array.isArray(r.past_events)&&r.past_events.length>0&&l.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"История выступлений"}),l.jsx("div",{className:"space-y-4",children:r.past_events.map((D,R)=>l.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-200 dark:border-dark-700 last:border-0",children:[l.jsx("span",{className:"font-medium text-dark-800 dark:text-white",children:D.title}),l.jsx("span",{className:"text-dark-500 dark:text-dark-400",children:x(D.date)})]},R))})]})]})]})})})};function L5(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=L5(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Mo(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=L5(t))&&(n&&(n+=" "),n+=e);return n}function TX(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}TX(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ff=t=>typeof t=="number"&&!isNaN(t),Xo=t=>typeof t=="string",Fi=t=>typeof t=="function",IX=t=>Xo(t)||ff(t),yy=t=>Xo(t)||Fi(t)?t:null,OX=(t,e)=>t===!1||ff(t)&&t>0?t:e,by=t=>_.isValidElement(t)||Xo(t)||Fi(t)||ff(t);function DX(t,e,r=300){let{scrollHeight:n,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,r)})})}function PX({enter:t,exit:e,appendPosition:r=!1,collapse:n=!0,collapseDuration:a=300}){return function({children:i,position:s,preventExitTransition:o,done:c,nodeRef:u,isIn:d,playToast:f}){let h=r?`${t}--${s}`:t,p=r?`${e}--${s}`:e,m=_.useRef(0);return _.useLayoutEffect(()=>{let g=u.current,y=h.split(" "),x=v=>{v.target===u.current&&(f(),g.removeEventListener("animationend",x),g.removeEventListener("animationcancel",x),m.current===0&&v.type!=="animationcancel"&&g.classList.remove(...y))};g.classList.add(...y),g.addEventListener("animationend",x),g.addEventListener("animationcancel",x)},[]),_.useEffect(()=>{let g=u.current,y=()=>{g.removeEventListener("animationend",y),n?DX(g,c,a):c()};d||(o?y():(m.current=1,g.className+=` ${p}`,g.addEventListener("animationend",y)))},[d]),ne.createElement(ne.Fragment,null,i)}}function PN(t,e){return{content:B5(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function B5(t,e,r=!1){return _.isValidElement(t)&&!Xo(t.type)?_.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:r}):Fi(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:r}):t}function RX({closeToast:t,theme:e,ariaLabel:r="close"}){return ne.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),t(!0)},"aria-label":r},ne.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ne.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function MX({delay:t,isRunning:e,closeToast:r,type:n="default",hide:a,className:i,controlledProgress:s,progress:o,rtl:c,isIn:u,theme:d}){let f=a||s&&o===0,h={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};s&&(h.transform=`scaleX(${o})`);let p=Mo("Toastify__progress-bar",s?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),m=Fi(i)?i({rtl:c,type:n,defaultClassName:p}):Mo(p,i),g={[s&&o>=1?"onTransitionEnd":"onAnimationEnd"]:s&&o<1?null:()=>{u&&r()}};return ne.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},ne.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${n}`}),ne.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:m,style:h,...g}))}var LX=1,F5=()=>`${LX++}`;function BX(t,e,r){let n=1,a=0,i=[],s=[],o=e,c=new Map,u=new Set,d=v=>(u.add(v),()=>u.delete(v)),f=()=>{s=Array.from(c.values()),u.forEach(v=>v())},h=({containerId:v,toastId:b,updateId:w})=>{let S=v?v!==t:t!==1,E=c.has(b)&&w==null;return S||E},p=(v,b)=>{c.forEach(w=>{var S;(b==null||b===w.props.toastId)&&((S=w.toggle)==null||S.call(w,v))})},m=v=>{var b,w;(w=(b=v.props)==null?void 0:b.onClose)==null||w.call(b,v.removalReason),v.isActive=!1},g=v=>{if(v==null)c.forEach(m);else{let b=c.get(v);b&&m(b)}f()},y=()=>{a-=i.length,i=[]},x=v=>{var b,w;let{toastId:S,updateId:E}=v.props,j=E==null;v.staleId&&c.delete(v.staleId),v.isActive=!0,c.set(S,v),f(),r(PN(v,j?"added":"updated")),j&&((w=(b=v.props).onOpen)==null||w.call(b))};return{id:t,props:o,observe:d,toggle:p,removeToast:g,toasts:c,clearQueue:y,buildToast:(v,b)=>{if(h(b))return;let{toastId:w,updateId:S,data:E,staleId:j,delay:I}=b,N=S==null;N&&a++;let T={...o,style:o.toastStyle,key:n++,...Object.fromEntries(Object.entries(b).filter(([C,A])=>A!=null)),toastId:w,updateId:S,data:E,isIn:!1,className:yy(b.className||o.toastClassName),progressClassName:yy(b.progressClassName||o.progressClassName),autoClose:b.isLoading?!1:OX(b.autoClose,o.autoClose),closeToast(C){c.get(w).removalReason=C,g(w)},deleteToast(){let C=c.get(w);if(C!=null){if(r(PN(C,"removed")),c.delete(w),a--,a<0&&(a=0),i.length>0){x(i.shift());return}f()}}};T.closeButton=o.closeButton,b.closeButton===!1||by(b.closeButton)?T.closeButton=b.closeButton:b.closeButton===!0&&(T.closeButton=by(o.closeButton)?o.closeButton:!0);let F={content:v,props:T,staleId:j};o.limit&&o.limit>0&&a>o.limit&&N?i.push(F):ff(I)?setTimeout(()=>{x(F)},I):x(F)},setProps(v){o=v},setToggle:(v,b)=>{let w=c.get(v);w&&(w.toggle=b)},isToastActive:v=>{var b;return(b=c.get(v))==null?void 0:b.isActive},getSnapshot:()=>s}}var Qr=new Map,Pd=[],wy=new Set,FX=t=>wy.forEach(e=>e(t)),$5=()=>Qr.size>0;function $X(){Pd.forEach(t=>z5(t.content,t.options)),Pd=[]}var UX=(t,{containerId:e})=>{var r;return(r=Qr.get(e||1))==null?void 0:r.toasts.get(t)};function U5(t,e){var r;if(e)return!!((r=Qr.get(e))!=null&&r.isToastActive(t));let n=!1;return Qr.forEach(a=>{a.isToastActive(t)&&(n=!0)}),n}function zX(t){if(!$5()){Pd=Pd.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||IX(t))Qr.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Qr.get(t.containerId);e?e.removeToast(t.id):Qr.forEach(r=>{r.removeToast(t.id)})}}var HX=(t={})=>{Qr.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function z5(t,e){by(t)&&($5()||Pd.push({content:t,options:e}),Qr.forEach(r=>{r.buildToast(t,e)}))}function WX(t){var e;(e=Qr.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function H5(t,e){Qr.forEach(r=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===r.id)&&r.toggle(t,e==null?void 0:e.id)})}function VX(t){let e=t.containerId||1;return{subscribe(r){let n=BX(e,t,FX);Qr.set(e,n);let a=n.observe(r);return $X(),()=>{a(),Qr.delete(e)}},setProps(r){var n;(n=Qr.get(e))==null||n.setProps(r)},getSnapshot(){var r;return(r=Qr.get(e))==null?void 0:r.getSnapshot()}}}function GX(t){return wy.add(t),()=>{wy.delete(t)}}function XX(t){return t&&(Xo(t.toastId)||ff(t.toastId))?t.toastId:F5()}function hf(t,e){return z5(t,e),e.toastId}function um(t,e){return{...e,type:e&&e.type||t,toastId:XX(e)}}function dm(t){return(e,r)=>hf(e,um(t,r))}function tt(t,e){return hf(t,um("default",e))}tt.loading=(t,e)=>hf(t,um("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function qX(t,{pending:e,error:r,success:n},a){let i;e&&(i=Xo(e)?tt.loading(e,a):tt.loading(e.render,{...a,...e}));let s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(u,d,f)=>{if(d==null){tt.dismiss(i);return}let h={type:u,...s,...a,data:f},p=Xo(d)?{render:d}:d;return i?tt.update(i,{...h,...p}):tt(p.render,{...h,...p}),f},c=Fi(t)?t():t;return c.then(u=>o("success",n,u)).catch(u=>o("error",r,u)),c}tt.promise=qX;tt.success=dm("success");tt.info=dm("info");tt.error=dm("error");tt.warning=dm("warning");tt.warn=tt.warning;tt.dark=(t,e)=>hf(t,um("default",{theme:"dark",...e}));function YX(t){zX(t)}tt.dismiss=YX;tt.clearWaitingQueue=HX;tt.isActive=U5;tt.update=(t,e={})=>{let r=UX(t,e);if(r){let{props:n,content:a}=r,i={delay:100,...n,...e,toastId:e.toastId||t,updateId:F5()};i.toastId!==t&&(i.staleId=t);let s=i.render||a;delete i.render,hf(s,i)}};tt.done=t=>{tt.update(t,{progress:1})};tt.onChange=GX;tt.play=t=>H5(!0,t);tt.pause=t=>H5(!1,t);function KX(t){var e;let{subscribe:r,getSnapshot:n,setProps:a}=_.useRef(VX(t)).current;a(t);let i=(e=_.useSyncExternalStore(r,n,n))==null?void 0:e.slice();function s(o){if(!i)return[];let c=new Map;return t.newestOnTop&&i.reverse(),i.forEach(u=>{let{position:d}=u.props;c.has(d)||c.set(d,[]),c.get(d).push(u)}),Array.from(c,u=>o(u[0],u[1]))}return{getToastToRender:s,isToastActive:U5,count:i==null?void 0:i.length}}function ZX(t){let[e,r]=_.useState(!1),[n,a]=_.useState(!1),i=_.useRef(null),s=_.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:f}=t;WX({id:t.toastId,containerId:t.containerId,fn:r}),_.useEffect(()=>{if(t.pauseOnFocusLoss)return h(),()=>{p()}},[t.pauseOnFocusLoss]);function h(){document.hasFocus()||x(),window.addEventListener("focus",y),window.addEventListener("blur",x)}function p(){window.removeEventListener("focus",y),window.removeEventListener("blur",x)}function m(j){if(t.draggable===!0||t.draggable===j.pointerType){v();let I=i.current;s.canCloseOnClick=!0,s.canDrag=!0,I.style.transition="none",t.draggableDirection==="x"?(s.start=j.clientX,s.removalDistance=I.offsetWidth*(t.draggablePercent/100)):(s.start=j.clientY,s.removalDistance=I.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function g(j){let{top:I,bottom:N,left:T,right:F}=i.current.getBoundingClientRect();j.nativeEvent.type!=="touchend"&&t.pauseOnHover&&j.clientX>=T&&j.clientX<=F&&j.clientY>=I&&j.clientY<=N?x():y()}function y(){r(!0)}function x(){r(!1)}function v(){s.didMove=!1,document.addEventListener("pointermove",w),document.addEventListener("pointerup",S)}function b(){document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",S)}function w(j){let I=i.current;if(s.canDrag&&I){s.didMove=!0,e&&x(),t.draggableDirection==="x"?s.delta=j.clientX-s.start:s.delta=j.clientY-s.start,s.start!==j.clientX&&(s.canCloseOnClick=!1);let N=t.draggableDirection==="x"?`${s.delta}px, var(--y)`:`0, calc(${s.delta}px + var(--y))`;I.style.transform=`translate3d(${N},0)`,I.style.opacity=`${1-Math.abs(s.delta/s.removalDistance)}`}}function S(){b();let j=i.current;if(s.canDrag&&s.didMove&&j){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance){a(!0),t.closeToast(!0),t.collapseAll();return}j.style.transition="transform 0.2s, opacity 0.2s",j.style.removeProperty("transform"),j.style.removeProperty("opacity")}}let E={onPointerDown:m,onPointerUp:g};return o&&c&&(E.onMouseEnter=x,t.stacked||(E.onMouseLeave=y)),f&&(E.onClick=j=>{d&&d(j),s.canCloseOnClick&&u(!0)}),{playToast:y,pauseToast:x,isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:E}}var QX=typeof window<"u"?_.useLayoutEffect:_.useEffect,fm=({theme:t,type:e,isLoading:r,...n})=>ne.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function JX(t){return ne.createElement(fm,{...t},ne.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function eq(t){return ne.createElement(fm,{...t},ne.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function tq(t){return ne.createElement(fm,{...t},ne.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function rq(t){return ne.createElement(fm,{...t},ne.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function nq(){return ne.createElement("div",{className:"Toastify__spinner"})}var _y={info:eq,warning:JX,success:tq,error:rq,spinner:nq},aq=t=>t in _y;function iq({theme:t,type:e,isLoading:r,icon:n}){let a=null,i={theme:t,type:e};return n===!1||(Fi(n)?a=n({...i,isLoading:r}):_.isValidElement(n)?a=_.cloneElement(n,i):r?a=_y.spinner():aq(e)&&(a=_y[e](i))),a}var sq=t=>{let{isRunning:e,preventExitTransition:r,toastRef:n,eventHandlers:a,playToast:i}=ZX(t),{closeButton:s,children:o,autoClose:c,onClick:u,type:d,hideProgressBar:f,closeToast:h,transition:p,position:m,className:g,style:y,progressClassName:x,updateId:v,role:b,progress:w,rtl:S,toastId:E,deleteToast:j,isIn:I,isLoading:N,closeOnClick:T,theme:F,ariaLabel:C}=t,A=Mo("Toastify__toast",`Toastify__toast-theme--${F}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":T}),k=Fi(g)?g({rtl:S,position:m,type:d,defaultClassName:A}):Mo(A,g),O=iq(t),$=!!w||!c,D={closeToast:h,type:d,theme:F},R=null;return s===!1||(Fi(s)?R=s(D):_.isValidElement(s)?R=_.cloneElement(s,D):R=RX(D)),ne.createElement(p,{isIn:I,done:j,position:m,preventExitTransition:r,nodeRef:n,playToast:i},ne.createElement("div",{id:E,tabIndex:0,onClick:u,"data-in":I,className:k,...a,style:y,ref:n,...I&&{role:b,"aria-label":C}},O!=null&&ne.createElement("div",{className:Mo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},O),B5(o,t,!e),R,!t.customProgressBar&&ne.createElement(MX,{...v&&!$?{key:`p-${v}`}:{},rtl:S,theme:F,delay:c,isRunning:e,isIn:I,closeToast:h,hide:f,type:d,className:x,controlledProgress:$,progress:w||0})))},oq=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),lq=PX(oq("bounce",!0)),cq={position:"top-right",transition:lq,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function uq(t){let e={...cq,...t},r=t.stacked,[n,a]=_.useState(!0),i=_.useRef(null),{getToastToRender:s,isToastActive:o,count:c}=KX(e),{className:u,style:d,rtl:f,containerId:h,hotKeys:p}=e;function m(y){let x=Mo("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":f});return Fi(u)?u({position:y,rtl:f,defaultClassName:x}):Mo(x,yy(u))}function g(){r&&(a(!0),tt.play())}return QX(()=>{var y;if(r){let x=i.current.querySelectorAll('[data-in="true"]'),v=12,b=(y=e.position)==null?void 0:y.includes("top"),w=0,S=0;Array.from(x).reverse().forEach((E,j)=>{let I=E;I.classList.add("Toastify__toast--stacked"),j>0&&(I.dataset.collapsed=`${n}`),I.dataset.pos||(I.dataset.pos=b?"top":"bot");let N=w*(n?.2:1)+(n?0:v*j);I.style.setProperty("--y",`${b?N:N*-1}px`),I.style.setProperty("--g",`${v}`),I.style.setProperty("--s",`${1-(n?S:0)}`),w+=I.offsetHeight,S+=.025})}},[n,c,r]),_.useEffect(()=>{function y(x){var v;let b=i.current;p(x)&&((v=b.querySelector('[tabIndex="0"]'))==null||v.focus(),a(!1),tt.pause()),x.key==="Escape"&&(document.activeElement===b||b!=null&&b.contains(document.activeElement))&&(a(!0),tt.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[p]),ne.createElement("section",{ref:i,className:"Toastify",id:h,onMouseEnter:()=>{r&&(a(!1),tt.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},s((y,x)=>{let v=x.length?{...d}:{...d,pointerEvents:"none"};return ne.createElement("div",{tabIndex:-1,className:m(y),"data-stacked":r,style:v,key:`c-${y}`},x.map(({content:b,props:w})=>ne.createElement(sq,{...w,stacked:r,collapseAll:g,isIn:o(w.toastId,w.containerId),key:`t-${w.key}`},b)))}))}const dq=async(t,e)=>{try{return console.error("Telegram configuration missing: Bot token or Chat ID not set"),!1}catch(r){return console.error("Error sending Telegram notification:",r),!1}},fq=()=>{const t=new Date,[e,r]=_.useState(t),[n,a]=_.useState(t),[i,s]=_.useState({name:"",email:"",phone:"",social_contact:"",selectedSlots:[],selectionState:"initial"}),[o,c]=_.useState([]),[u,d]=_.useState(!1),[f,h]=_.useState(null),[p,m]=_.useState(!1),[g,y]=_.useState(null),x=_.useRef(null),v=async()=>{d(!0),h(null);try{const{data:V,error:re}=await de.from("time_slots_table").select("*").order("date",{ascending:!0}).order("start_time",{ascending:!0});if(re)throw re;c(V||[])}catch(V){console.error("Error fetching time slots:",V),h("Не удалось загрузить занятые слоты")}finally{d(!1)}};_.useEffect(()=>{v()},[]);const b=V=>{if(!tt.isActive(g)){const re=tt.error(V,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"});y(re)}},w=V=>{if(!tt.isActive(g)){const re=tt.success(V,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"});y(re)}},S=()=>{r(c1(e,1))},E=()=>{r(c1(e,-1))},j=Ad(e),I=xw(e),N=Gh({start:j,end:I}),T=V=>{const re=lt(V,"yyyy-MM-dd"),ue=o.filter(ye=>ye.date===re).sort((ye,se)=>ye.start_time.localeCompare(se.start_time));if(ue.length===0)return[];const ie=[];let oe={...ue[0]};for(let ye=1;ye<ue.length;ye++)ue[ye].start_time===oe.end_time?oe.end_time=ue[ye].end_time:(ie.push(oe),oe={...ue[ye]});return ie.push(oe),ie},F=V=>{Vk(V)||(a(V),s(re=>({...re,selectedSlots:[],selectionState:"initial"})))},C=V=>{if(!V)return[];lt(V,"yyyy-MM-dd");const re=T(V),ue=[];for(let ie=9;ie<23;ie++)for(let oe=0;oe<60;oe+=30){const ye=`${ie.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`,se=oe===30?`${(ie+1).toString().padStart(2,"0")}:00`:`${ie.toString().padStart(2,"0")}:30`;!re.some(Fe=>{const P=Fe.start_time,Q=Fe.end_time;return ye>=P&&ye<Q||se>P&&se<=Q||ye<=P&&se>=Q})&&ue.push({start_time:ye,end_time:se})}return ue},A=V=>{const re=C(V),ue=T(V);return re.length===0&&ue.length>0?"busy":re.length>0&&ue.length>0?"partial":re.length>0&&ue.length===0?"free":"unknown"},k=V=>{const{name:re,value:ue}=V.target;s(ie=>({...ie,[re]:ue}))},O=V=>{const re=C(n),ue=T(n);s(ie=>{var oe;if(ie.selectionState==="range-selected")return{...ie,selectedSlots:[V],selectionState:"first-selected"};if(ie.selectionState==="initial")return{...ie,selectedSlots:[V],selectionState:"first-selected"};if(ie.selectionState==="first-selected"&&ie.selectedSlots.length===1){const ye=ie.selectedSlots[0],se=re.findIndex(G=>G.start_time===ye.start_time&&G.end_time===ye.end_time),Te=re.findIndex(G=>G.start_time===V.start_time&&G.end_time===V.end_time);if(se===-1||Te===-1)return ie;const Fe=Math.min(se,Te),P=Math.max(se,Te),Q=re[Fe].start_time,X=re[P].end_time;if(ue.some(G=>G.start_time>=Q&&G.start_time<X||G.end_time>Q&&G.end_time<=X||G.start_time<=Q&&G.end_time>=X)){const G=ue.find(J=>J.start_time>=Q&&J.start_time<X||J.end_time>Q&&J.end_time<=X||J.start_time<=Q&&J.end_time>=X);return b(l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"🚨 Ошибка бронирования"}),l.jsxs("p",{children:["В выбранном промежутке ",Q,"-",X," есть занятое время:"]}),l.jsxs("p",{className:"mt-1 font-medium",children:[G==null?void 0:G.start_time,"-",G==null?void 0:G.end_time," -"," ",((oe=G==null?void 0:G.slot_details)==null?void 0:oe.type)==="event"?G.slot_details.title:"Занято"]})]})),ie}const H=re.slice(Fe,P+1);return{...ie,selectedSlots:H,selectionState:"range-selected"}}return ie})},$=async V=>{try{const re=`📅 Новая бронь пространства:

📌 Дата: ${V.date}
⏰ Время: ${V.startTime}-${V.endTime}
👤 Имя: ${V.name}
📧 Email: ${V.email}
${V.phone?`📞 Телефон: ${V.phone}
`:""}${V.social_contact?`💬 Соцсети: ${V.social_contact}
`:""}`;await dq(void 0,re)}catch(re){console.error("Ошибка отправки в Telegram:",re)}},D=async V=>{if(V.preventDefault(),!i.name||!i.email){b(l.jsx("div",{children:l.jsx("span",{className:"font-medium",children:"Пожалуйста, заполните имя и email"})}));return}try{d(!0);const re=i.selectedSlots[0],ue=i.selectedSlots[i.selectedSlots.length-1],ie=i.selectedSlots.map(se=>de.from("time_slots_table").insert([{date:lt(n,"yyyy-MM-dd"),start_time:se.start_time,end_time:se.end_time,slot_details:{user_name:i.name,email:i.email,phone:i.phone,social_contact:i.social_contact,type:"booking",title:`Бронирование ${i.name}`,description:`Продолжительность: ${R()} часа(ов)`},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}])),ye=(await Promise.all(ie)).filter(se=>se.error);if(ye.length>0)throw ye[0].error;await $({date:lt(n,"dd.MM.yyyy"),startTime:re.start_time,endTime:ue.end_time,name:i.name,email:i.email,phone:i.phone,social_contact:i.social_contact}),await v(),w(l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"🎉 Бронирование успешно!"}),l.jsxs("p",{className:"mt-1",children:[lt(n,"dd.MM.yyyy")," ",re.start_time,"-",ue.end_time]})]})),s({name:"",email:"",phone:"",social_contact:"",selectedSlots:[],selectionState:"initial"}),m(!1)}catch(re){console.error("Booking error:",re),b(l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"😕 Ошибка бронирования"}),l.jsx("p",{className:"mt-1",children:"Пожалуйста, попробуйте еще раз или свяжитесь с нами"})]}))}finally{d(!1)}},R=()=>{if(i.selectedSlots.length===0)return 0;const V=i.selectedSlots[0],re=i.selectedSlots[i.selectedSlots.length-1],[ue,ie]=V.start_time.split(":").map(Number),[oe,ye]=re.end_time.split(":").map(Number);return oe-ue+(ye-ie)/60},M=V=>{V&&(console.log("Navigate to event:",V),alert(`Переход на мероприятие с ID: ${V}`))},L=()=>{const V=zB(j);return V===0?6:V-1},B=()=>{if(i.selectedSlots.length===0){b(l.jsx("div",{children:l.jsx("span",{className:"font-medium",children:"Пожалуйста, выберите хотя бы один слот"})}));return}m(!0)},U=()=>{if(i.selectedSlots.length===0)return"";const V=i.selectedSlots[0],re=i.selectedSlots[i.selectedSlots.length-1];return`${V.start_time}-${re.end_time}`},q=V=>{switch(A(V)){case"free":return"Свободно";case"busy":return"Занято";case"partial":return"Есть слоты";default:return""}},te=V=>{switch(A(V)){case"free":return{bg:"bg-green-100 dark:bg-green-900/30",border:"border-2 border-green-500 dark:border-green-700",text:"text-green-800 dark:text-green-200"};case"busy":return{bg:"bg-red-100 dark:bg-red-900/30",border:"border-2 border-red-500 dark:border-red-700",text:"text-red-800 dark:text-red-200"};case"partial":return{bg:"bg-orange-100 dark:bg-orange-900/30",border:"border-2 border-orange-500 dark:border-orange-700",text:"text-orange-800 dark:text-orange-200"};default:return{bg:"",border:"",text:""}}};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 bg-gray-50 text-gray-900 dark:bg-gray-800 dark:text-gray-100",children:[l.jsx(uq,{}),l.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-center",children:"Бронирование пространства"}),f&&l.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border-2 border-red-500 dark:border-red-700 text-red-800 dark:text-red-200 px-4 py-3 rounded mb-4",children:f}),l.jsxs("div",{className:"bg-white dark:bg-gray-700 p-4 sm:p-6 mb-8 rounded-lg shadow",ref:x,children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("button",{onClick:E,className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 text-sm sm:text-base",children:"< Назад"}),l.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:lt(e,"MMMM yyyy",{locale:na})}),l.jsx("button",{onClick:S,className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 text-sm sm:text-base",children:"Вперед >"})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-2",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(V=>l.jsx("div",{className:"text-center font-medium text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:V},V))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[Array.from({length:L()}).map((V,re)=>l.jsx("div",{className:"h-8 sm:h-10"},`empty-${re}`)),N.map(V=>{const re=y6(V,e),ue=n&&Ku(V,n),ie=Vk(V)&&!Ku(V,new Date),oe=Ku(V,t),ye=A(V),se=q(V),{bg:Te,border:Fe,text:P}=te(V);return l.jsxs("button",{"data-today":oe,onClick:()=>F(V),disabled:ie||ye==="busy",className:`h-12 sm:h-16 flex flex-col items-center justify-center rounded-md transition-colors text-sm sm:text-base
                  ${re?"":"text-gray-300 dark:text-gray-500"}
                  ${ie?"cursor-not-allowed opacity-50":"cursor-pointer hover:opacity-80"}
                  ${ue?"bg-blue-500 text-white hover:bg-blue-600 dark:hover:bg-blue-600":`${Te} ${Fe} ${P}`}
                  ${oe&&!ue?"ring-2 ring-blue-500 dark:ring-blue-400":""}
                `,children:[l.jsx("div",{className:"font-medium",children:lt(V,"d")}),re&&!ie&&ye!=="unknown"&&l.jsx("div",{className:"text-xs mt-1 hidden sm:block",children:se})]},V.toString())})]})]}),n&&l.jsxs("div",{className:"bg-white dark:bg-gray-700 p-4 sm:p-6 mb-8 rounded-lg shadow animate-fade-in",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:lt(n,"dd MMMM yyyy",{locale:na})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Занятые слоты:"}),T(n).length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:T(n).map((V,re)=>{var ue,ie;return l.jsxs("div",{className:`p-3 border-2 rounded-md ${((ue=V.slot_details)==null?void 0:ue.type)==="event"?"border-blue-500 dark:border-blue-700 bg-blue-100 dark:bg-blue-900/30 cursor-pointer hover:bg-blue-200 dark:hover:bg-blue-800/50":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-600"}`,onClick:()=>{var oe;return((oe=V.slot_details)==null?void 0:oe.type)==="event"&&M(V.slot_details.event_id)},children:[l.jsxs("div",{className:"font-medium",children:[V.start_time,"-",V.end_time]}),l.jsx("div",{className:"text-sm",children:((ie=V.slot_details)==null?void 0:ie.type)==="event"?V.slot_details.title:"Занято"})]},re)})}):l.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Нет занятых слотов"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Доступные слоты:"}),u?l.jsx("div",{className:"text-center py-8",children:"Загрузка..."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-4 mb-6",children:[C(n).map((V,re)=>{const ue=i.selectedSlots.some(ie=>ie.start_time===V.start_time&&ie.end_time===V.end_time);return l.jsx("div",{onClick:()=>O(V),className:`p-3 sm:p-4 border-2 rounded-md cursor-pointer transition-colors text-center ${ue?"bg-blue-100 dark:bg-blue-900 border-blue-500 dark:border-blue-700":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500"}`,children:l.jsxs("div",{className:"font-medium text-sm sm:text-base",children:[V.start_time,"-",V.end_time]})},re)}),C(n).length===0&&l.jsx("div",{className:"col-span-full text-center py-8 text-gray-500 dark:text-gray-400",children:"На выбранную дату нет доступных слотов"})]}),i.selectedSlots.length>0&&l.jsx("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-600 rounded-md border-2 border-gray-300 dark:border-gray-500",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Выбрано:"})," ",U()]}),l.jsx("button",{onClick:B,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 dark:bg-blue-700 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-800",children:"Выбрать"})]})})]})]})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-lg w-full max-w-md",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Подтверждение бронирования"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Выбранное время:"}),l.jsx("div",{className:"bg-gray-100 dark:bg-gray-600 p-3 rounded-md border-2 border-gray-300 dark:border-gray-500",children:U()})]}),l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Имя *"}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:k,className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email *"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:k,className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Телефон"}),l.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:k,className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"Необязательно"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ссылка на соцсети"}),l.jsx("input",{type:"text",name:"social_contact",value:i.social_contact,onChange:k,className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"Необязательно"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-6",children:[l.jsx("button",{type:"button",onClick:()=>m(!1),className:"w-full sm:w-auto px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600",children:"Отмена"}),l.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-800",disabled:u,children:u?"Отправка...":"Подтвердить"})]})]})]})})})]})},hq=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),pq=({isOpen:t,onClose:e,photos:r,currentIndex:n,onNavigate:a})=>{if(_.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),_.useEffect(()=>{const o=c=>{c.key==="Escape"&&e(),c.key==="ArrowLeft"&&a("prev"),c.key==="ArrowRight"&&a("next")};if(t)return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e,a]),!t||!(r!=null&&r.length))return null;const i=r[n],s=i!=null&&i.startsWith("http")?i:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${i}`;return l.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:text-gray-300 text-2xl z-10","aria-label":"Закрыть",children:"×"}),r.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>a("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 p-2","aria-label":"Предыдущее фото",children:l.jsx(Yd,{className:"w-8 h-8"})}),l.jsx("button",{onClick:()=>a("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 p-2","aria-label":"Следующее фото",children:l.jsx(Kd,{className:"w-8 h-8"})})]}),l.jsx("div",{className:"max-w-full max-h-full flex items-center justify-center",children:l.jsx("img",{src:s,alt:`Фото ${n+1}`,className:"max-w-full max-h-full object-contain"})}),l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-lg",children:[n+1," из ",r.length]}),l.jsx("div",{className:"absolute inset-0 -z-10",onClick:e})]})},mq=({photos:t,title:e})=>{const[r,n]=_.useState(0),[a,i]=_.useState(!0),[s,o]=_.useState(!1),[c,u]=_.useState(0);_.useEffect(()=>{if(!a||!(t!=null&&t.length))return;const y=setInterval(()=>{n(x=>(x+1)%t.length)},5e3);return()=>clearInterval(y)},[a,t==null?void 0:t.length]);const d=y=>{n(y),i(!1),setTimeout(()=>i(!0),1e4)},f=()=>{n(y=>(y+1)%t.length),i(!1),setTimeout(()=>i(!0),1e4)},h=()=>{n(y=>(y-1+t.length)%t.length),i(!1),setTimeout(()=>i(!0),1e4)},p=y=>{u(y),o(!0),i(!1)},m=()=>{o(!1),setTimeout(()=>i(!0),1e3)},g=y=>{u(y==="next"?x=>(x+1)%t.length:x=>(x-1+t.length)%t.length)};return t!=null&&t.length?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative h-64 md:h-96 w-full bg-gray-900 overflow-hidden",children:[l.jsxs("div",{className:"w-full h-full bg-cover bg-center transition-all duration-500 cursor-pointer",style:{backgroundImage:`url(${t[r].startsWith("http")?t[r]:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${t[r]}`})`},onClick:()=>p(r),children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 md:p-8 text-white",children:[l.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2",children:e}),l.jsx("p",{className:"text-base md:text-xl opacity-90 mb-2",children:"Аренда пространства для ваших мероприятий"}),l.jsxs("p",{className:"text-sm md:text-lg opacity-75",children:["Фото ",r+1," из ",t.length," • Нажмите для просмотра"]})]})]}),t.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:h,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all duration-200 backdrop-blur-sm z-10","aria-label":"Предыдущее фото",children:l.jsx(Yd,{className:"w-5 h-5"})}),l.jsx("button",{onClick:f,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all duration-200 backdrop-blur-sm z-10","aria-label":"Следующее фото",children:l.jsx(Kd,{className:"w-5 h-5"})})]}),t.length>1&&l.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:t.map((y,x)=>l.jsx("button",{onClick:()=>d(x),className:`w-2 h-2 rounded-full transition-all duration-200 ${x===r?"bg-white":"bg-white/50 hover:bg-white/75"}`,"aria-label":`Перейти к фото ${x+1}`},x))})]}),l.jsx(pq,{isOpen:s,onClose:m,photos:t,currentIndex:c,onNavigate:g})]}):null},gq=t=>{switch(t){case"hour":return l.jsx(bn,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"});case"day":return l.jsx(Oe,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"});case"week":return l.jsx(Oe,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"});case"month":return l.jsx(Oe,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"});default:return l.jsx(bn,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}},vq=t=>{switch(t){case"hour":return"час";case"day":return"день";case"week":return"неделя";case"month":return"месяц";default:return t}},xq=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(!0),[a,i]=_.useState(null);return _.useEffect(()=>{(async()=>{try{n(!0);const{data:o,error:c}=await hq.from("site_settings").select("rent_selection").single();if(c)if(c.code==="PGRST116")console.log("No site settings found, using defaults"),e({id:1,title:"Аренда пространства ScienceHub",description:"<p>Современное пространство для проведения ваших мероприятий, встреч и презентаций. Мы предлагаем комфортную атмосферу и все необходимое оборудование для успешного проведения любых событий.</p>",photos:["https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg","https://images.pexels.com/photos/1181248/pexels-photo-1181248.jpeg"],amenities:["Wi-Fi","Проектор","Звуковая система"],pricelist:[],contacts:{address:"Адрес будет указан при бронировании",phone:"+381 XX XXX XXXX",email:"info@sciencehub.rs"},main_prices:{hourly:25,daily:150},included_services:["Wi-Fi","Проектор","Звуковая система","Кондиционер","Кухонная зона","Парковка"]});else throw c;else{const u=o==null?void 0:o.rent_selection;e(u||{id:1,title:"Аренда пространства ScienceHub",description:"<p>Современное пространство для проведения ваших мероприятий, встреч и презентаций. Мы предлагаем комфортную атмосферу и все необходимое оборудование для успешного проведения любых событий.</p>",photos:["https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg","https://images.pexels.com/photos/1181248/pexels-photo-1181248.jpeg"],amenities:["Wi-Fi","Проектор","Звуковая система"],pricelist:[],contacts:{address:"Адрес будет указан при бронировании",phone:"+381 XX XXX XXXX",email:"info@sciencehub.rs"},main_prices:{hourly:25,daily:150},included_services:["Wi-Fi","Проектор","Звуковая система","Кондиционер","Кухонная зона","Парковка"]})}}catch(o){console.error("Error fetching data:",o),i("Не удалось загрузить информацию о пространстве")}finally{n(!1)}})()},[]),r?l.jsx(Ot,{children:l.jsx("div",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container text-center py-12",children:"Загрузка..."})})}):a||!t?l.jsx(Ot,{children:l.jsx("div",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container text-center py-12 text-red-600",children:a||"Данные не найдены"})})}):l.jsxs(Ot,{children:[t.photos&&t.photos.length>0&&l.jsx(mq,{photos:t.photos,title:t.title}),l.jsx("main",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container",children:[l.jsx("div",{className:"mb-12 bg-white dark:bg-dark-900 rounded-xl shadow-md p-6",children:l.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:t.description}})}),t.main_prices&&l.jsxs("div",{className:"mb-6 p-6 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[l.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Стоимость аренды"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[l.jsxs("div",{className:"text-center p-4 bg-white dark:bg-dark-800 rounded-lg shadow-sm",children:[l.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2",children:"Почасовая аренда"}),l.jsxs("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:[t.main_prices.hourly," €",l.jsx("span",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:" / час"})]})]}),l.jsxs("div",{className:"text-center p-4 bg-white dark:bg-dark-800 rounded-lg shadow-sm",children:[l.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2",children:"Дневная аренда"}),l.jsxs("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:[t.main_prices.daily," €",l.jsx("span",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:" / день"})]})]})]}),t.included_services&&t.included_services.length>0&&l.jsxs("div",{className:"mt-8 max-w-2xl mx-auto",children:[l.jsx("h3",{className:"text-lg font-medium text-center mb-4",children:"Включено в стоимость:"}),l.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-gray-600 dark:text-gray-300",children:t.included_services.map((s,o)=>l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx(Up,{className:"h-4 w-4 text-primary-600 dark:text-primary-400"}),s]},o))})]})]}),t.pricelist&&t.pricelist.length>0&&l.jsx("div",{className:"mb-12 bg-white dark:bg-dark-900 rounded-xl shadow-md overflow-hidden",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Дополнительные услуги"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.pricelist.map(s=>l.jsxs("div",{className:"border dark:border-dark-700 rounded-lg p-5 hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/30 p-2 rounded-full",children:gq(s.duration)}),l.jsx("h3",{className:"font-medium text-lg",children:s.name})]}),s.description&&l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:s.description}),l.jsxs("div",{className:"text-2xl font-bold",children:[s.price," €",l.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:[" ","/ ",vq(s.duration)]})]})]},s.id))})]})}),t.contacts&&l.jsxs("div",{className:"mb-12 bg-white dark:bg-dark-900 rounded-xl shadow-md p-6",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Контакты"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/30 p-2 rounded-full",children:l.jsx(vr,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-1",children:"Адрес"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.contacts.address}),t.contacts.map_link&&l.jsx("a",{href:t.contacts.map_link,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-primary-600 dark:text-primary-400 hover:underline",children:"Посмотреть на карте"})]})]}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/30 p-2 rounded-full",children:l.jsx(Vt,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-1",children:"Контакты"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.contacts.phone}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.contacts.email})]})]})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-md p-8 text-center",children:l.jsx(fq,{})})]})})]})},RN=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),yq=void 0,bq=void 0,wq=()=>{const[t,e]=_.useState([]),[r,n]=_.useState([]),[a,i]=_.useState(null),[s,o]=_.useState(!0),[c,u]=_.useState(null),[d,f]=_.useState(!1),[h,p]=_.useState(null),[m,g]=_.useState({name:"",contact:"",phone:"",comment:""}),[y,x]=_.useState({name:!1,phone:!1}),[v,b]=_.useState(!1),[w,S]=_.useState("idle");_.useEffect(()=>{let F=!0;const C=async()=>{var k,O;try{o(!0),u(null);const[$,D]=await Promise.all([RN.from("coworking_header").select("*").single(),RN.from("coworking_info_table").select("*").eq("active",!0)]);if(!F)return;if($.error)throw $.error;if(D.error)throw D.error;i($.data);const R=((k=D.data)==null?void 0:k.filter(L=>L.main_service))||[],M=((O=D.data)==null?void 0:O.filter(L=>!L.main_service))||[];e(R),n(M)}catch($){console.error("Error fetching data:",$),F&&u("Не удалось загрузить данные. Пожалуйста, попробуйте позже.")}finally{F&&o(!1)}},A=setTimeout(()=>{s&&(u("Превышено время ожидания загрузки данных"),o(!1))},1e4);return C(),()=>{F=!1,clearTimeout(A)}},[]);const E=F=>{p(F),f(!0),S("idle"),g({name:"",contact:"",phone:"",comment:""})},j=F=>{const{name:C,value:A}=F.target;g(k=>({...k,[C]:A})),(C==="name"||C==="phone")&&x(k=>({...k,[C]:!1}))},I=()=>{const F={name:!m.name.trim(),phone:!m.phone.trim()};return x(F),!F.name&&!F.phone},N=async()=>{const F=`Новая заявка на бронирование коворкинга:

Услуга: ${h==null?void 0:h.name}
Имя: ${m.name}
Контакт: ${m.contact||"не указано"}
Телефон: ${m.phone}
Комментарий: ${m.comment||"нет комментария"}`;try{if(!(await fetch(`https://api.telegram.org/bot${yq}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:bq,text:F})})).ok)throw new Error("Ошибка при отправке уведомления")}catch(C){throw console.error("Ошибка отправки в Telegram:",C),C}},T=async F=>{if(F.preventDefault(),!!I()){b(!0);try{await N(),S("success"),setTimeout(()=>{f(!1)},2e3)}catch{S("error")}finally{b(!1)}}};return s?l.jsxs(Ot,{children:[l.jsx(Jl,{title:"Загрузка...\\",description:"Загружаем данные о коворкинге"}),l.jsx("div",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container",children:l.jsxs("div",{className:"animate-pulse space-y-4 py-12",children:[l.jsx("div",{className:"h-8 w-64 bg-gray-200 dark:bg-dark-700 rounded"}),l.jsx("div",{className:"h-12 bg-gray-200 dark:bg-dark-700 rounded"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((F,C)=>l.jsx("div",{className:"h-64 bg-gray-200 dark:bg-dark-700 rounded-lg"},C))})]})})})]}):l.jsxs(Ot,{children:[a&&l.jsx(Jl,{title:a.title,description:a.description}),l.jsx("main",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container",children:[l.jsxs("div",{className:"mb-16",children:[l.jsx("h2",{className:"text-3xl font-semibold text-gray-900 dark:text-white mb-8 text-center",children:"Наши услуги"}),t.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"В данный момент нет доступных услуг. Пожалуйста, проверьте позже."})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(F=>l.jsx(MN,{service:F,onBookClick:()=>E(F)},F.id))})]}),r.length>0&&l.jsxs("div",{className:"mb-16",children:[l.jsx("h2",{className:"text-3xl font-semibold text-gray-900 dark:text-white mb-8 text-center",children:"Дополнительные услуги"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(F=>l.jsx(MN,{service:F,onBookClick:()=>E(F)},F.id))})]}),a&&l.jsxs("div",{className:"bg-white dark:bg-dark-700 rounded-xl shadow-lg p-8",children:[l.jsx("h2",{className:"text-3xl font-semibold text-gray-900 dark:text-white mb-6 text-center",children:"Контакты"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-3",children:"Адрес"}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",dangerouslySetInnerHTML:{__html:a.address}})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-3",children:"Телефон"}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",dangerouslySetInnerHTML:{__html:a.phone}})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-3",children:"Часы работы"}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300",dangerouslySetInnerHTML:{__html:a.working_hours}})]})]})]})]})}),l.jsx(Mc,{isOpen:d,onClose:()=>f(!1),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:["Бронирование: ",h==null?void 0:h.name]}),w==="success"?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-green-500 text-5xl mb-4",children:"✓"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Заявка отправлена!"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Мы свяжемся с вами в ближайшее время."})]}):l.jsxs("form",{onSubmit:T,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Ваше имя ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:j,className:`w-full px-3 py-2 border rounded-lg ${y.name?"border-red-500":"border-gray-300 dark:border-dark-600"} bg-white dark:bg-dark-800`,placeholder:"Иван Иванов"}),y.name&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Это поле обязательно для заполнения"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contact",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Контакт (соцсеть или почта)"}),l.jsx("input",{type:"text",id:"contact",name:"contact",value:m.contact,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-800",placeholder:"telegram: @username или email@example.com"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Телефон ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:j,className:`w-full px-3 py-2 border rounded-lg ${y.phone?"border-red-500":"border-gray-300 dark:border-dark-600"} bg-white dark:bg-dark-800`,placeholder:"+7 (123) 456-78-90"}),y.phone&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Это поле обязательно для заполнения"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Комментарий"}),l.jsx("textarea",{id:"comment",name:"comment",value:m.comment,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-800",rows:3,placeholder:"Напишите, когда бы вам хотелось у нас поработать"})]})]}),l.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",disabled:v,children:"Отмена"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors disabled:opacity-50",disabled:v,children:v?"Отправка...":"Отправить заявку"})]}),w==="error"&&l.jsx("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm",children:"Произошла ошибка при отправке. Пожалуйста, попробуйте позже."})]})]})})]})},MN=({service:t,onBookClick:e})=>{const r=()=>{switch(t.currency){case"euro":return"€";case"кофе":return"☕";default:return t.currency}},n=()=>{switch(t.period){case"час":return"час";case"день":return"день";case"месяц":return"месяц";default:return t.period}};return l.jsxs("div",{className:"bg-white dark:bg-dark-700 rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 h-full flex flex-col",children:[t.image_url&&l.jsx("div",{className:"h-48 overflow-hidden",children:l.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover",loading:"lazy"})}),l.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:t.name}),l.jsx("div",{className:"text-gray-600 dark:text-gray-300 mb-4 prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:t.description}})]}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[t.price," ",r()]}),l.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["/ ",n()]})]}),l.jsx("button",{onClick:e,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors",children:"Забронировать"})]})]})]})},_q=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),kq=({platform:t})=>{const r={Boosty:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/bosty-logo-100x100.png",Patreon:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/pn-logo-100x100.png",PayPal:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/pp-logo-100x100.png"}[t]||"";return l.jsx("img",{src:r,alt:t,className:"w-6 h-6 object-contain"})},Nq=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(!0),[a,i]=_.useState(null);return _.useEffect(()=>{(async()=>{try{const{data:o,error:c}=await _q.from("about_table").select("*").limit(1).single();if(c)throw c;e(o)}catch(o){console.error("Error fetching about data:",o),i("Failed to load about page data")}finally{n(!1)}})()},[]),r?l.jsxs(Ot,{children:[l.jsx(Jl,{title:"О проекте"}),l.jsx("div",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container text-center py-12",children:"Загрузка..."})})]}):a||!t?l.jsxs(Ot,{children:[l.jsx(Jl,{title:"О проекте"}),l.jsx("div",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsx("div",{className:"container text-center py-12 text-red-600",children:a||"Данные не найдены"})})]}):l.jsxs(Ot,{children:[l.jsx(Jl,{title:"О проекте",subtitle:"Science Hub — научно-популярное сообщество в Сербии"}),l.jsx("main",{className:"section bg-gray-50 dark:bg-dark-800",children:l.jsxs("div",{className:"container",children:[l.jsx("div",{className:"mb-16",children:l.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:t.project_info}})}),l.jsxs("div",{className:"mb-16",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-8",children:"Наша команда"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.team_members.map((s,o)=>l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden",children:l.jsx("img",{src:s.photo,alt:s.name,className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-medium mb-1",children:s.name}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.role})]})]},o))})]}),t.contributors.length>0&&l.jsxs("div",{className:"mb-16",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-8",children:"Нам помогают"}),l.jsx("div",{className:"flex flex-wrap justify-around gap-10",children:t.contributors.map((s,o)=>l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden mb-3",children:l.jsx("img",{src:s.photo,alt:s.name,className:"w-full h-full object-cover"})}),l.jsx("h3",{className:"text-lg font-medium",children:s.name})]},o))})]}),l.jsxs("div",{className:"mb-16",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-8",children:"Поддержать"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:t.support_platforms.map((s,o)=>l.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"p-4 border border-gray-200 dark:border-dark-700 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors flex items-center justify-center gap-2",children:[l.jsx(kq,{platform:s.platform}),l.jsx("span",{children:s.platform})]},o))})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold mb-8",children:"Контакты"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-gray-100 dark:bg-dark-700 rounded-full",children:l.jsx(ef,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-1",children:"Email"}),l.jsx("a",{href:`mailto:${t.contact_info.email}`,className:"text-gray-600 dark:text-gray-400 hover:text-primary transition-colors",children:t.contact_info.email})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-gray-100 dark:bg-dark-700 rounded-full",children:l.jsx(T0,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-1",children:"Телефон"}),l.jsx("a",{href:`tel:${t.contact_info.phone.replace(/\s/g,"")}`,className:"text-gray-600 dark:text-gray-400 hover:text-primary transition-colors",children:t.contact_info.phone})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-gray-100 dark:bg-dark-700 rounded-full",children:l.jsx(vr,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium mb-1",children:"Адрес"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.contact_info.address})]})]})]})]})]})})]})},Sq=()=>l.jsx(Ot,{children:l.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:l.jsxs("div",{className:"container max-w-2xl text-center",children:[l.jsx("div",{className:"mb-8 flex justify-center",children:l.jsx("div",{className:"relative",children:l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-4xl font-bold",children:"404"})})}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Страница не найдена"}),l.jsx("p",{className:"text-lg text-dark-600 dark:text-dark-300 mb-8",children:"Извините, запрошенная страница не существует или была перемещена."}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[l.jsx(Be,{to:"/",className:"btn-primary",children:"Вернуться на главную"}),l.jsx(Be,{to:"/events",className:"btn-outline",children:"Посмотреть мероприятия"})]})]})})});function Eq(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function Cq(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var jq=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Aq=function(t){jq(e,t);function e(r,n){var a=this.constructor,i=t.call(this,r,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),Eq(i,a.prototype),Cq(i),i}return e}(Error),Tq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_n=function(t){Tq(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(Aq),Iq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ya=function(t){Iq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(_n),Oq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Se=function(t){Oq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(_n),Dq=function(){function t(e){if(this.binarizer=e,e===null)throw new Se("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var i=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),Pq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fr=function(t){Pq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(_n),Rq=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),yt=function(){function t(){}return t.arraycopy=function(e,r,n,a,i){for(;i--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),Mq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yw=function(t){Mq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(_n),Lq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LN=function(t){Lq(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(Yw),Bq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nr=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new Se("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new LN(r);if(n>e)throw new LN(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var i=Bq(e),s=i.next();!s.done;s=i.next()){var o=s.value;a=31*a+o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,i=new Int32Array(a);return yt.arraycopy(e,r,i,0,a),i},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,i=e.length-1;a<=i;){var s=i+a>>1,o=n(r,e[s]);if(o>0)a=s+1;else if(o<0)i=s-1;else return s}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Le=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),hr=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);yt.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var s=n.length;i===0;){if(++a===s)return r;i=n[a]}var o=a*32+Le.numberOfTrailingZeros(i);return o>r?r:o},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var s=n.length;i===0;){if(++a===s)return r;i=~n[a]}var o=a*32+Le.numberOfTrailingZeros(i);return o>r?r:o},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Se;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),i=this.bits,s=n;s<=a;s++){var o=s>n?0:e&31,c=s<a?31:r&31,u=(2<<c)-(1<<o);i[s]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Se;if(r===e)return!0;r--;for(var a=Math.floor(e/32),i=Math.floor(r/32),s=this.bits,o=a;o<=i;o++){var c=o>a?0:e&31,u=o<i?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((s[o]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Se("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Se("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var i=0;i<a;i++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;r[n+i]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,i=0;i<n;i++){var s=a[i];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[r-i]=s}if(this.size!==n*32){for(var o=n*32-this.size,c=e[0]>>>o,i=1;i<n;i++){var u=e[i];c|=u<<32-o,e[i-1]=c,c=u>>>o}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&nr.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+nr.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),ky;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(ky||(ky={}));const It=ky;var Fq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),me=function(t){Fq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(_n),$q=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},it;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(it||(it={}));var rr=function(){function t(e,r,n){for(var a,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=$q(s),p=h.next();!p.done;p=h.next()){var m=p.value;t.NAME_TO_ECI.set(m,this)}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new me("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new me("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new me("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(it.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(it.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(it.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(it.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(it.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(it.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(it.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(it.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(it.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(it.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(it.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(it.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(it.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(it.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(it.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(it.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(it.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(it.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(it.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(it.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(it.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(it.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(it.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(it.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(it.Big5,28,"Big5"),t.GB18030=new t(it.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(it.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),Uq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kh=function(t){Uq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(_n),la=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof rr?e:rr.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",i=0,s=e.length;i<s;i++){var o=e[i].toString(16);o.length<2&&(o="0"+o),a+="%"+o}return decodeURIComponent(a)}if(n.equals(rr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Kh("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(rr.UTF8)||e.equals(rr.ISO8859_1)||e.equals(rr.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},t}(),qe=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return la.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(It.CHARACTER_SET)!==void 0)return r.get(It.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,s=!0,o=0,c=0,u=0,d=0,f=0,h=0,p=0,m=0,g=0,y=0,x=0,v=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||i||s);b++){var w=e[b]&255;s&&(o>0?w&128?o--:s=!1:w&128&&(w&64?(o++,w&32?(o++,w&16?(o++,w&8?s=!1:d++):u++):c++):s=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),i&&(f>0?w<64||w===127||w>252?i=!1:f--:w===128||w===160||w>239?i=!1:w>160&&w<224?(h++,m=0,p++,p>g&&(g=p)):w>127?(f++,p=0,m++,m>y&&(y=m)):(p=0,m=0))}return s&&o>0&&(s=!1),i&&f>0&&(i=!1),s&&(v||c+u+d>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||g>=3||y>=3)?t.SHIFT_JIS:a&&i?g===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:i?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function i(o,c,u,d,f,h){if(o==="%%")return"%";if(r[++a]!==void 0){o=d?parseInt(d.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(o);break;case"p":m=parseFloat(r[a]).toPrecision(o);break;case"e":m=parseFloat(r[a]).toExponential(o);break;case"x":m=parseInt(r[a]).toString(p||16);break;case"d":m=parseFloat(parseInt(r[a],p||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var g=parseInt(u),y=u&&u[0]+""=="0"?"0":" ";m.length<g;)m=c!==void 0?m+y:y+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,i)},t.getBytes=function(e,r){return la.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=rr.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=rr.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=rr.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Me=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=qe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),si=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new Se("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),i=0;i<r;i++)for(var s=e[i],o=0;o<n;o++)s[o]&&a.set(o,i);return a},t.parseFromString=function(e,r,n){if(e===null)throw new Se("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,s=0,o=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(i>s){if(o===-1)o=i-s;else if(i-s!==o)throw new Se("row lengths do not match");s=i,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[i]=!0,i++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[i]=!1,i++;else throw new Se("illegal character encountered: "+e.substring(u));if(i>s){if(o===-1)o=i-s;else if(i-s!==o)throw new Se("row lengths do not match");c++}for(var d=new t(o,c),f=0;f<i;f++)a[f]&&d.set(Math.floor(f%o),Math.floor(f/o));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Se("input matrix dimensions do not match");for(var r=new hr(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,s=this.height;i<s;i++)for(var o=i*n,c=e.getRow(i,r).getBitArray(),u=0;u<n;u++)a[o+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new Se("Left and top must be nonnegative");if(a<1||n<1)throw new Se("Height and width must be at least 1");var i=e+n,s=r+a;if(s>this.height||i>this.width)throw new Se("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,u=r;u<s;u++)for(var d=u*o,f=e;f<i;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new hr(this.width):r.clear();for(var n=this.rowSize,a=this.bits,i=e*n,s=0;s<n;s++)r.setBulk(s*32,a[i+s]);return r},t.prototype.setRow=function(e,r){yt.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new hr(e),a=new hr(e),i=0,s=Math.floor((r+1)/2);i<s;i++)n=this.getRow(i,n),a=this.getRow(r-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(r-1-i,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,i=e,s=r,o=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<s&&(s=u),u>c&&(c=u),d*32<i){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<i&&(i=d*32+h)}if(d*32+31>o){for(var h=31;!(f>>>h);)h--;d*32+h>o&&(o=d*32+h)}}}return o<i||c<s?null:Int32Array.from([i,s,o-i+1,c-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,i=n%e*32,s=r[n],o=0;!(s<<31-o&4294967295);)o++;return i+=o,Int32Array.from([i,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,s=r[n],o=31;!(s>>>o);)o--;return i+=o,Int32Array.from([i,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&nr.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+nr.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new Me,i=0,s=this.height;i<s;i++){for(var o=0,c=this.width;o<c;o++)a.append(this.get(o,i)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),zq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(t){zq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(_n),Hq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wq=function(t){Hq(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new hr(i):n.clear(),this.initArrays(i);for(var s=a.getRow(r,this.luminances),o=this.buckets,c=0;c<i;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(o);if(i<3)for(var c=0;c<i;c++)(s[c]&255)<u&&n.set(c);else for(var d=s[0]&255,f=s[1]&255,c=1;c<i-1;c++){var h=s[c+1]&255;(f*4-d-h)/2<u&&n.set(c),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),i=new si(n,a);this.initArrays(n);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(a*o/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;s[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),m=r.getMatrix(),o=0;o<a;o++)for(var g=o*n,f=0;f<n;f++){var h=m[g+f]&255;h<p&&i.set(f,o)}return i},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,i=0,s=0,o=0;o<n;o++)r[o]>s&&(i=o,s=r[o]),r[o]>a&&(a=r[o]);for(var c=0,u=0,o=0;o<n;o++){var d=o-i,f=r[o]*d*d;f>u&&(c=o,u=f)}if(i>c){var h=i;i=c,c=h}if(c-i<=n/16)throw new ee;for(var p=c-1,m=-1,o=c-1;o>i;o--){var g=o-i,f=g*g*(c-o)*(a-r[o]);f>m&&(p=o,m=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Rq),Vq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gq=function(t){Vq(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&s++;var o=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&o++;var c=e.calculateBlackPoints(i,s,o,n,a),u=new si(n,a);e.calculateThresholdForBlock(i,s,o,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,i,s,o,c){for(var u=s-e.BLOCK_SIZE,d=i-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(f,2,a-3),m=0;m<n;m++){var g=m<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var y=e.cap(m,2,n-3),x=0,v=-2;v<=2;v++){var b=o[p+v];x+=b[y-2]+b[y-1]+b[y]+b[y+1]+b[y+2]}var w=x/25;e.thresholdBlock(r,g,h,w,i,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,i,s,o){for(var c=0,u=a*s+n;c<e.BLOCK_SIZE;c++,u+=s)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=i&&o.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,i,s){for(var o=s-e.BLOCK_SIZE,c=i-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>o&&(f=o);for(var h=0;h<n;h++){var p=h<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var m=0,g=255,y=0,x=0,v=f*i+p;x<e.BLOCK_SIZE;x++,v+=i){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[v+b]&255;m+=w,w<g&&(g=w),w>y&&(y=w)}if(y-g>e.MIN_DYNAMIC_RANGE)for(x++,v+=i;x<e.BLOCK_SIZE;x++,v+=i)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[v+b]&255}var S=m>>e.BLOCK_SIZE_POWER*2;if(y-g<=e.MIN_DYNAMIC_RANGE&&(S=g/2,d>0&&h>0)){var E=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;g<E&&(S=E)}u[d][h]=S}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Wq),hm=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new Kh("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Kh("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Kh("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Me,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var s=a[i]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",r.append(o)}r.append(`
`)}return r.toString()},t}(),Xq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kw=function(t){Xq(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),i=this.getWidth(),s=0;s<i;s++)a[s]=255-(a[s]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(r[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,i){return new e(this.delegate.crop(r,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(hm),qq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yq=function(t){qq(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,i){i===void 0&&(i=!1);var s=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var o=0,c=0,u=r.length;o<u;o+=4,c++){var d=void 0,f=r[o+3];if(f===0)d=255;else{var h=r[o],p=r[o+1],m=r[o+2];d=306*h+601*p+117*m+512>>10}s[c]=d}else for(var o=0,c=0,g=r.length;o<g;o+=4,c++){var d=void 0,f=r[o+3];if(f===0)d=255;else{var h=r[o],p=r[o+1],m=r[o+2];d=306*h+601*p+117*m+512>>10}s[c]=255-d}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Se("Requested row is outside the image: "+r);var a=this.getWidth(),i=r*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return t.prototype.crop.call(this,r,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*s+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*s+Math.abs(Math.cos(i))*o);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(i),a.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Kw(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(hm),Kq=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Wr=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})},Vr=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Zq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bc=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Wr(this,void 0,void 0,function(){var e,r,n,a,i,s,o,c,u,d,f,h;return Vr(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=Zq(e),a=n.next();!a.done;a=n.next())i=a.value,s=i.kind==="video"?"videoinput":i.kind,s==="videoinput"&&(o=i.deviceId||i.id,c=i.label||"Video device "+(r.length+1),u=i.groupId,d={deviceId:o,label:c,kind:s,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Wr(this,void 0,void 0,function(){var e;return Vr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new Kq(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Wr(this,void 0,void 0,function(){var r;return Vr(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Wr(this,void 0,void 0,function(){return Vr(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Wr(this,void 0,void 0,function(){var n,a;return Vr(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Wr(this,void 0,void 0,function(){var n;return Vr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Wr(this,void 0,void 0,function(){var n,a;return Vr(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Wr(this,void 0,void 0,function(){return Vr(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Wr(this,void 0,void 0,function(){var a,i;return Vr(this,function(s){switch(s.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Wr(this,void 0,void 0,function(){var a;return Vr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Wr(this,void 0,void 0,function(){var a;return Vr(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Wr(this,void 0,void 0,function(){var n;return Vr(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Wr(this,void 0,void 0,function(){return Vr(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ya("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ya("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new ya("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new ya("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new ya("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new ya("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ya("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new ya("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ya("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new ya("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Wr(this,void 0,void 0,function(){return Vr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Wr(this,void 0,void 0,function(){return Vr(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(s,o){if(a._stopAsyncDecode){o(new ee("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);s(c)}catch(h){var u=r&&h instanceof ee,d=h instanceof fr||h instanceof me,f=d&&n;if(u||f)return setTimeout(i,a._timeBetweenDecodingAttempts,s,o);o(h)}};return new Promise(function(s,o){return i(s,o)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);r(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var s=c instanceof fr||c instanceof me,o=c instanceof ee;(s||o)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new Yq(n,r),i=new Gq(a);return new Dq(i)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),$r=function(){function t(e,r,n,a,i,s){n===void 0&&(n=r==null?0:8*r.length),s===void 0&&(s=yt.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,s==null?this.timestamp=yt.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);yt.arraycopy(r,0,n,0,r.length),yt.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Ny;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ny||(Ny={}));const Ne=Ny;var Sy;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Sy||(Sy={}));const Er=Sy;var pm=function(){function t(e,r,n,a,i,s){i===void 0&&(i=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Eu=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Se;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),Os=function(){function t(e,r){if(r.length===0)throw new Se;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),yt.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,i=r.length;a!==i;a++){var s=r[a];n=Eu.addOrSubtract(n,s)}return n}n=r[0];for(var o=r.length,c=this.field,a=1;a<o;a++)n=Eu.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Se("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),s=n.length-r.length;yt.arraycopy(n,0,i,0,s);for(var o=s;o<n.length;o++)i[o]=Eu.addOrSubtract(r[o-s],n[o]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Se("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,i=a.length,s=new Int32Array(n+i-1),o=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<i;d++)s[c+d]=Eu.addOrSubtract(s[c+d],o.multiply(u,a[d]));return new t(o,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),i=this.coefficients,s=0;s<r;s++)a[s]=n.multiply(i[s],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Se;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),s=this.field,o=0;o<a;o++)i[o]=s.multiply(n[o],r);return new t(s,i)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Se("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Se("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,i=e.getCoefficient(e.getDegree()),s=r.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var o=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),s),u=e.multiplyByMonomial(o,c),d=r.buildMonomial(o,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),Qq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W5=function(t){Qq(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(_n),Jq=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mn=function(t){Jq(e,t);function e(r,n,a){var i=t.call(this)||this;i.primitive=r,i.size=n,i.generatorBase=a;for(var s=new Int32Array(n),o=1,c=0;c<n;c++)s[c]=o,o*=2,o>=n&&(o^=r,o&=n-1);i.expTable=s;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[s[c]]=c;return i.logTable=u,i.zero=new Os(i,Int32Array.from([0])),i.one=new Os(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Se;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Os(this,a)},e.prototype.inverse=function(r){if(r===0)throw new W5;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Le.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Eu),eY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ch=function(t){eY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(_n),tY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pf=function(t){tY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(_n),mm=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new Os(n,e),i=new Int32Array(r),s=!0,o=0;o<r;o++){var c=a.evaluateAt(n.exp(o+n.getGeneratorBase()));i[i.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var u=new Os(n,i),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],p=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,p),o=0;o<p.length;o++){var g=e.length-1-n.log(p[o]);if(g<0)throw new ch("Bad error location");e[g]=mn.addOrSubtract(e[g],m[o])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var i=this.field,s=e,o=r,c=i.getZero(),u=i.getOne();o.getDegree()>=(n/2|0);){var d=s,f=c;if(s=o,c=u,s.isZero())throw new ch("r_{i-1} was zero");o=d;for(var h=i.getZero(),p=s.getCoefficient(s.getDegree()),m=i.inverse(p);o.getDegree()>=s.getDegree()&&!o.isZero();){var g=o.getDegree()-s.getDegree(),y=i.multiply(o.getCoefficient(o.getDegree()),m);h=h.addOrSubtract(i.buildMonomial(g,y)),o=o.addOrSubtract(s.multiplyByMonomial(g,y))}if(u=h.multiply(c).addOrSubtract(f),o.getDegree()>=s.getDegree())throw new pf("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new ch("sigmaTilde(0) was zero");var v=i.inverse(x),b=u.multiplyScalar(v),w=o.multiplyScalar(v);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,i=this.field,s=1;s<i.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=i.inverse(s),a++);if(a!==r)throw new ch("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),i=this.field,s=0;s<n;s++){for(var o=i.inverse(r[s]),c=1,u=0;u<n;u++)if(s!==u){var d=i.multiply(r[u],o),f=d&1?d&-2:d|1;c=i.multiply(c,f)}a[s]=i.multiply(e.evaluateAt(o),i.inverse(c)),i.getGeneratorBase()!==0&&(a[s]=i.multiply(a[s],o))}return a},t}(),_r;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(_r||(_r={}));var BN=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),i=t.convertBoolArrayToByteArray(a),s=t.getEncodedData(a),o=new pm(i,s,null,null);return o.setNumBits(a.length),o},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=_r.UPPER,a=_r.UPPER,i="",s=0;s<r;)if(a===_r.BINARY){if(r-s<5)break;var o=t.readCode(e,s,5);if(s+=5,o===0){if(r-s<11)break;o=t.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(r-s<8){s=r;break}var u=t.readCode(e,s,8);i+=qe.castAsNonUtf8Char(u),s+=8}a=n}else{var d=a===_r.DIGIT?4:5;if(r-s<d)break;var u=t.readCode(e,s,d);s+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(i+=f,a=n)}return i},t.getTable=function(e){switch(e){case"L":return _r.LOWER;case"P":return _r.PUNCT;case"M":return _r.MIXED;case"D":return _r.DIGIT;case"B":return _r.BINARY;case"U":default:return _r.UPPER}},t.getCharacter=function(e,r){switch(e){case _r.UPPER:return t.UPPER_TABLE[r];case _r.LOWER:return t.LOWER_TABLE[r];case _r.MIXED:return t.MIXED_TABLE[r];case _r.PUNCT:return t.PUNCT_TABLE[r];case _r.DIGIT:return t.DIGIT_TABLE[r];default:throw new pf("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=mn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=mn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=mn.AZTEC_DATA_10):(n=12,r=mn.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new me;for(var s=e.length%n,o=new Int32Array(i),c=0;c<i;c++,s+=n)o[c]=t.readCode(e,s,n);try{var u=new mm(r);u.decode(o,i-a)}catch(y){throw new me(y)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var h=o[c];if(h===0||h===d)throw new me;(h===1||h===d-1)&&f++}for(var p=new Array(a*n-f),m=0,c=0;c<a;c++){var h=o[c];if(h===1||h===d-1)p.fill(h>1,m,m+n-1),m+=n-1;else for(var g=n-1;g>=0;--g)p[m++]=(h&1<<g)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,i=new Int32Array(a),s=new Array(this.totalBitsInLayer(n,r));if(r)for(var o=0;o<i.length;o++)i[o]=o;else for(var c=a+1+2*Le.truncDivision(Le.truncDivision(a,2)-1,15),u=a/2,d=Le.truncDivision(c,2),o=0;o<u;o++){var f=o+Le.truncDivision(o,15);i[u-o-1]=d-f-1,i[u+o]=d+f+1}for(var o=0,h=0;o<n;o++){for(var p=(n-o)*4+(r?9:12),m=o*2,g=a-1-m,y=0;y<p;y++)for(var x=y*2,v=0;v<2;v++)s[h+x+v]=e.get(i[m+v],i[m+y]),s[h+2*p+x+v]=e.get(i[m+y],i[g-v]),s[h+4*p+x+v]=e.get(i[g-v],i[g-y]),s[h+6*p+x+v]=e.get(i[g-y],i[m+v]);h+=p*8}return s},t.readCode=function(e,r,n){for(var a=0,i=r;i<r+n;i++)a<<=1,e[i]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Qe=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var i=e-n,s=r-a;return Math.sqrt(i*i+s*s)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var i=e[n];r+=i}return r},t}(),Ey=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),we=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Ey.floatToIntBits(this.x)+Ey.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,s,o;if(n>=r&&n>=a?(s=e[0],i=e[1],o=e[2]):a>=n&&a>=r?(s=e[1],i=e[0],o=e[2]):(s=e[2],i=e[0],o=e[1]),this.crossProductZ(i,s,o)<0){var c=i;i=o,o=c}e[0]=i,e[1]=s,e[2]=o},t.distance=function(e,r){return Qe.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,i=r.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},t}(),Zw=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),rY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nY=function(t){rY(e,t);function e(r,n,a,i,s){var o=t.call(this,r,n)||this;return o.compact=a,o.nbDatablocks=i,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Zw),Cy=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,i=!1,s=!0,o=!1,c=!1,u=!1,d=!1,f=!1,h=this.width,p=this.height;s;){s=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,s=!0,c=!0):c||r++;if(r>=h){i=!0;break}for(var g=!0;(g||!u)&&a<p;)g=this.containsBlackPoint(e,r,a,!0),g?(a++,s=!0,u=!0):u||a++;if(a>=p){i=!0;break}for(var y=!0;(y||!d)&&e>=0;)y=this.containsBlackPoint(n,a,e,!1),y?(e--,s=!0,d=!0):d||e--;if(e<0){i=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,s=!0,f=!0):f||n--;if(n<0){i=!0;break}s&&(o=!0)}if(!i&&o){for(var v=r-e,b=null,w=1;b===null&&w<v;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new ee;for(var S=null,w=1;S===null&&w<v;w++)S=this.getBlackPointOnSegment(e,n+w,e+w,n);if(S==null)throw new ee;for(var E=null,w=1;E===null&&w<v;w++)E=this.getBlackPointOnSegment(r,n+w,r-w,n);if(E==null)throw new ee;for(var j=null,w=1;j===null&&w<v;w++)j=this.getBlackPointOnSegment(r,a-w,r-w,a);if(j==null)throw new ee;return this.centerEdges(j,b,E,S)}else throw new ee},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var i=Qe.round(Qe.distance(e,r,n,a)),s=(n-e)/i,o=(a-r)/i,c=this.image,u=0;u<i;u++){var d=Qe.round(e+u*s),f=Qe.round(r+u*o);if(c.get(d,f))return new we(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var i=e.getX(),s=e.getY(),o=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),h=a.getY(),p=t.CORR;return i<this.width/2?[new we(f-p,h+p),new we(o+p,c+p),new we(u-p,d-p),new we(i+p,s-p)]:[new we(f+p,h+p),new we(o+p,c-p),new we(u-p,d+p),new we(i-p,s-p)]},t.prototype.containsBlackPoint=function(e,r,n,a){var i=this.image;if(a){for(var s=e;s<=r;s++)if(i.get(s,n))return!0}else for(var o=e;o<=r;o++)if(i.get(n,o))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),FN=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),i=!0,s=0;s<r.length&&i;s+=2){var o=Math.floor(r[s]),c=Math.floor(r[s+1]);if(o<-1||o>n||c<-1||c>a)throw new ee;i=!1,o===-1?(r[s]=0,i=!0):o===n&&(r[s]=n-1,i=!0),c===-1?(r[s+1]=0,i=!0):c===a&&(r[s+1]=a-1,i=!0)}i=!0;for(var s=r.length-2;s>=0&&i;s-=2){var o=Math.floor(r[s]),c=Math.floor(r[s+1]);if(o<-1||o>n||c<-1||c>a)throw new ee;i=!1,o===-1?(r[s]=0,i=!0):o===n&&(r[s]=n-1,i=!0),c===-1?(r[s+1]=0,i=!0):c===a&&(r[s+1]=a-1,i=!0)}},t}(),V5=function(){function t(e,r,n,a,i,s,o,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=i,this.a32=s,this.a13=o,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,i,s,o,c,u,d,f,h,p,m,g,y){var x=t.quadrilateralToSquare(e,r,n,a,i,s,o,c),v=t.squareToQuadrilateral(u,d,f,h,p,m,g,y);return v.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,i=this.a13,s=this.a21,o=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var p=e[h],m=e[h+1],g=i*p+c*m+f;e[h]=(n*p+s*m+u)/g,e[h+1]=(a*p+o*m+d)/g}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,i=this.a13,s=this.a21,o=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var m=e[p],g=r[p],y=i*m+c*g+f;e[p]=(n*m+s*g+u)/y,r[p]=(a*m+o*g+d)/y}},t.squareToQuadrilateral=function(e,r,n,a,i,s,o,c){var u=e-n+i-o,d=r-a+s-c;if(u===0&&d===0)return new t(n-e,i-n,e,a-r,s-a,r,0,0,1);var f=n-i,h=o-i,p=a-s,m=c-s,g=f*m-h*p,y=(u*m-h*d)/g,x=(f*d-u*p)/g;return new t(n-e+y*n,o-e+x*o,e,a-r+y*a,c-r+x*c,r,y,x,1)},t.quadrilateralToSquare=function(e,r,n,a,i,s,o,c){return t.squareToQuadrilateral(e,r,n,a,i,s,o,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),aY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iY=function(t){aY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,i,s,o,c,u,d,f,h,p,m,g,y,x,v,b,w){var S=V5.quadrilateralToQuadrilateral(i,s,o,c,u,d,f,h,p,m,g,y,x,v,b,w);return this.sampleGridWithTransform(r,n,a,S)},e.prototype.sampleGridWithTransform=function(r,n,a,i){if(n<=0||a<=0)throw new ee;for(var s=new si(n,a),o=new Float32Array(2*n),c=0;c<a;c++){for(var u=o.length,d=c+.5,f=0;f<u;f+=2)o[f]=f/2+.5,o[f+1]=d;i.transformPoints(o),FN.checkAndNudgePoints(r,o);try{for(var f=0;f<u;f+=2)r.get(Math.floor(o[f]),Math.floor(o[f+1]))&&s.set(f/2,c)}catch{throw new ee}}return s},e}(FN),Qw=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new iY,t}(),cn=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new we(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),sY=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new nY(i,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,i=0;i<4;i++){var s=n[(this.shift+i)%4];this.compact?(a<<=7,a+=s>>1&127):(a<<=10,a+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(i,s,o){var c=(i>>r-2<<1)+(i&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Le.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new ee},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var i=n-a,s=new Int32Array(n),o=n-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new mm(mn.AZTEC_PARAM);c.decode(s,i)}catch{throw new ee}for(var u=0,o=0;o<a;o++)u=(u<<4)+s[o];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(r,s,1,-1),c=this.getFirstDifferent(n,s,1,1),u=this.getFirstDifferent(a,s,-1,1),d=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(i,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(o,c,u,d))break}r=o,n=c,a=u,i=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;var h=new we(r.getX()+.5,r.getY()-.5),p=new we(n.getX()+.5,n.getY()+.5),m=new we(a.getX()-.5,a.getY()+.5),g=new we(i.getX()-.5,i.getY()-.5);return this.expandSquare([h,p,m,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var i=new Cy(this.image).detect();e=i[0],r=i[1],n=i[2],a=i[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new cn(s+7,o-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new cn(s+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new cn(s-7,o+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new cn(s-7,o-7),!1,-1,-1).toResultPoint()}var c=Qe.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Qe.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var i=new Cy(this.image,15,c,u).detect();e=i[0],r=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new cn(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new cn(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new cn(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new cn(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Qe.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Qe.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new cn(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,i){var s=Qw.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,u=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,i=this.distanceResultPoint(e,r),s=i/n,o=e.getX(),c=e.getY(),u=s*(r.getX()-e.getX())/i,d=s*(r.getY()-e.getY())/i,f=0;f<n;f++)this.image.get(Qe.round(o+f*u),Qe.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var i=3;e=new cn(e.getX()-i,e.getY()+i),r=new cn(r.getX()-i,r.getY()-i),n=new cn(n.getX()+i,n.getY()-i),a=new cn(a.getX()+i,a.getY()+i);var s=this.getColor(a,e);if(s===0)return!1;var o=this.getColor(e,r);return o!==s||(o=this.getColor(r,n),o!==s)?!1:(o=this.getColor(n,a),o===s)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,i=(r.getY()-e.getY())/n,s=0,o=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)o+=a,c+=i,this.image.get(Qe.round(o),Qe.round(c))!==u&&s++;var h=s/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var i=e.getX()+n,s=e.getY()+a;this.isValid(i,s)&&this.image.get(i,s)===r;)i+=n,s+=a;for(i-=n,s-=a;this.isValid(i,s)&&this.image.get(i,s)===r;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===r;)s+=a;return s-=a,new cn(i,s)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new we(o+a*i,c+a*s),d=new we(o-a*i,c-a*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new we(o+a*i,c+a*s),h=new we(o-a*i,c-a*s),p=[u,f,d,h];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Qe.round(e.getX()),n=Qe.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Qe.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Qe.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Le.truncDivision(this.nbLayers-4,8)+1)+15},t}(),jy=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new sY(e.getBlackMatrix()),i=null,s=null;try{var o=a.detectMirror(!1);i=o.getPoints(),this.reportFoundResultPoints(r,i),s=new BN().decode(o)}catch(f){n=f}if(s==null)try{var o=a.detectMirror(!0);i=o.getPoints(),this.reportFoundResultPoints(r,i),s=new BN().decode(o)}catch(f){throw n??f}var c=new $r(s.getText(),s.getRawBytes(),s.getNumBits(),i,Ne.AZTEC,yt.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(Er.BYTE_SEGMENTS,u);var d=s.getECLevel();return d!=null&&c.putMetadata(Er.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(It.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,i,s){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),oY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){oY(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new jy,r)||this}return e})(Bc);var ir=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(It.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,r),s=i.getResultMetadata(),o=270;s!==null&&s.get(Er.ORIENTATION)===!0&&(o=o+s.get(Er.ORIENTATION)%360),i.putMetadata(Er.ORIENTATION,o);var c=i.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new we(u-c[d].getY()-1,c[d].getX());return i}else throw new ee}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),i=new hr(n),s=r&&r.get(It.TRY_HARDER)===!0,o=Math.max(1,a>>(s?8:5)),c;s?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,p=u+o*(h?f:-f);if(p<0||p>=a)break;try{i=e.getBlackRow(p,i)}catch{continue}for(var m=function(v){if(v===1&&(i.reverse(),r&&r.get(It.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(E,j){return b.set(j,E)}),b.delete(It.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=g.decodeRow(p,i,r);if(v===1){w.putMetadata(Er.ORIENTATION,180);var S=w.getResultPoints();S!==null&&(S[0]=new we(n-S[0].getX()-1,S[0].getY()),S[1]=new we(n-S[1].getX()-1,S[1].getY()))}return{value:w}}catch{}},g=this,y=0;y<2;y++){var x=m(y);if(typeof x=="object")return x.value}}throw new ee},t.recordPattern=function(e,r,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var s=e.getSize();if(r>=s)throw new ee;for(var o=!e.get(r),c=0,u=r;u<s;){if(e.get(u)!==o)n[c]++;else{if(++c===a)break;n[c]=1,o=!o}u++}if(!(c===a||c===a-1&&u===s))throw new ee},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,i=e.get(r);r>0&&a>=0;)e.get(--r)!==i&&(a--,i=!i);if(a>=0)throw new ee;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,i=0,s=0,o=0;o<a;o++)i+=e[o],s+=r[o];if(i<s)return Number.POSITIVE_INFINITY;var c=i/s;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,p=f>h?f-h:h-f;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/i},t}(),lY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$N=function(t){lY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),i=0,s=Int32Array.from([0,0,0,0,0,0]),o=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)s[i]++;else{if(i===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=ir.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=p)}if(h>=0&&r.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,h]);o+=s[0]+s[1],s=s.slice(2,s.length),s[i-1]=0,s[i]=0,i--}else i++;s[i]=1,c=!c}throw new ee},e.decodeCode=function(r,n,a){ir.recordPattern(r,a,n);for(var i=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,s=o)}if(s>=0)return s;throw new ee},e.prototype.decodeRow=function(r,n,a){var i=a&&a.get(It.ASSUME_GS1)===!0,s=e.findStartPattern(n),o=s[2],c=0,u=new Uint8Array(20);u[c++]=o;var d;switch(o){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new me}for(var f=!1,h=!1,p="",m=s[0],g=s[1],y=Int32Array.from([0,0,0,0,0,0]),x=0,v=0,b=o,w=0,S=!0,E=!1,j=!1;!f;){var I=h;switch(h=!1,x=v,v=e.decodeCode(n,y,g),u[c++]=v,v!==e.CODE_STOP&&(S=!0),v!==e.CODE_STOP&&(w++,b+=w*v),m=g,g+=y.reduce(function(D,R){return D+R},0),v){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new me}switch(d){case e.CODE_CODE_A:if(v<64)j===E?p+=String.fromCharCode(32+v):p+=String.fromCharCode(32+v+128),j=!1;else if(v<96)j===E?p+=String.fromCharCode(v-64):p+=String.fromCharCode(v+64),j=!1;else switch(v!==e.CODE_STOP&&(S=!1),v){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!E&&j?(E=!0,j=!1):E&&j?(E=!1,j=!1):j=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(v<96)j===E?p+=String.fromCharCode(32+v):p+=String.fromCharCode(32+v+128),j=!1;else switch(v!==e.CODE_STOP&&(S=!1),v){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!E&&j?(E=!0,j=!1):E&&j?(E=!1,j=!1):j=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(v<100)v<10&&(p+="0"),p+=v;else switch(v!==e.CODE_STOP&&(S=!1),v){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}I&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=g-m;if(g=n.getNextUnset(g),!n.isRange(g,Math.min(n.getSize(),g+(g-m)/2),!1))throw new ee;if(b-=w*x,b%103!==x)throw new fr;var T=p.length;if(T===0)throw new ee;T>0&&S&&(d===e.CODE_CODE_C?p=p.substring(0,T-2):p=p.substring(0,T-1));for(var F=(s[1]+s[0])/2,C=m+N/2,A=u.length,k=new Uint8Array(A),O=0;O<A;O++)k[O]=u[O];var $=[new we(F,r),new we(C,r)];return new $r(p,k,0,$,Ne.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ir),cY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UN=function(t){cY(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var i,s,o,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),p,m;do{e.recordPattern(n,f,u);var g=e.toNarrowWidePattern(u);if(g<0)throw new ee;p=e.patternToChar(g),this.decodeRowResult+=p,m=f;try{for(var y=(i=void 0,uv(u)),x=y.next();!x.done;x=y.next()){var v=x.value;f+=v}}catch(A){i={error:A}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=uv(u),S=w.next();!S.done;S=w.next()){var v=S.value;b+=v}}catch(A){o={error:A}}finally{try{S&&!S.done&&(c=w.return)&&c.call(w)}finally{if(o)throw o.error}}var E=f-m-b;if(f!==h&&E*2<b)throw new ee;if(this.usingCheckDigit){for(var j=this.decodeRowResult.length-1,I=0,N=0;N<j;N++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(j)!==e.ALPHABET_STRING.charAt(I%43))throw new fr;this.decodeRowResult=this.decodeRowResult.substring(0,j)}if(this.decodeRowResult.length===0)throw new ee;var T;this.extendedMode?T=e.decodeExtended(this.decodeRowResult):T=this.decodeRowResult;var F=(d[1]+d[0])/2,C=m+b/2;return new $r(T,null,0,[new we(F,r),new we(C,r)],Ne.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),i=r.getNextSet(0),s=0,o=i,c=!1,u=n.length,d=i;d<a;d++)if(r.get(d)!==c)n[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,c=!c}throw new ee},e.toNarrowWidePattern=function(r){var n,a,i=r.length,s=0,o;do{var c=2147483647;try{for(var u=(n=void 0,uv(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>s&&(c=f)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}s=c,o=0;for(var h=0,p=0,m=0;m<i;m++){var f=r[m];f>s&&(p|=1<<i-1-m,o++,h+=f)}if(o===3){for(var m=0;m<i&&o>0;m++){var f=r[m];if(f>s&&(o--,f*2>=h))return-1}return p}}while(o>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new ee},e.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var s=r.charAt(i);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=r.charAt(i+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new me;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new me;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new me;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new me;break}a+=c,i++}else a+=s}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ir),uY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zN=function(t){uY(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var i,s,o,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(n,d,h);var g=this.toPattern(h);if(g<0)throw new ee;p=this.patternToChar(g),this.decodeRowResult+=p,m=d;try{for(var y=(i=void 0,dv(h)),x=y.next();!x.done;x=y.next()){var v=x.value;d+=v}}catch(N){i={error:N}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}d=n.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=dv(h),S=w.next();!S.done;S=w.next()){var v=S.value;b+=v}}catch(N){o={error:N}}finally{try{S&&!S.done&&(c=w.return)&&c.call(w)}finally{if(o)throw o.error}}if(d===f||!n.get(d))throw new ee;if(this.decodeRowResult.length<2)throw new ee;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var E=this.decodeExtended(this.decodeRowResult),j=(u[1]+u[0])/2,I=m+b/2;return new $r(E,null,0,[new we(j,r),new we(I,r)],Ne.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var i=this.counters,s=a,o=!1,c=i.length,u=0,d=a;d<n;d++)if(r.get(d)!==o)i[u]++;else{if(u===c-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,o=!o}throw new ee},e.prototype.toPattern=function(r){var n,a,i=0;try{for(var s=dv(r),o=s.next();!o.done;o=s.next()){var c=o.value;i+=c}}catch(m){n={error:m}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/i);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var p=0;p<h;p++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new ee},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var s=r.charAt(i);if(s>="a"&&s<="d"){if(i>=n-1)throw new me;var o=r.charAt(i+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new me;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new me;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new me;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new me;break}a+=c,i++}else a+=s}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var i=1,s=0,o=n-1;o>=0;o--)s+=i*e.ALPHABET_STRING.indexOf(r.charAt(o)),++i>a&&(i=1);if(r.charAt(n)!==e.ALPHABET_STRING[s%47])throw new fr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ir),dY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HN=function(t){dY(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var i,s,o=this.decodeStart(n),c=this.decodeEnd(n),u=new Me;e.decodeMiddle(n,o[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(It.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,p=!1,m=0;try{for(var g=fY(f),y=g.next();!y.done;y=g.next()){var x=y.value;if(h===x){p=!0;break}x>m&&(m=x)}}catch(w){i={error:w}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}if(!p&&h>m&&(p=!0),!p)throw new me;var v=[new we(o[1],r),new we(c[0],r)],b=new $r(d,null,0,v,Ne.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,i){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);n<a;){ir.recordPattern(r,n,s);for(var u=0;u<5;u++){var d=2*u;o[u]=s[d],c[u]=s[d+1]}var f=e.decodeDigit(o);i.append(f.toString()),f=this.decodeDigit(c),i.append(f.toString()),s.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!r.get(i);i--)a--;if(a!==0)throw new ee},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new ee;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ee&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var i=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-i,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var i=a.length,s=new Int32Array(i),o=r.getSize(),c=!1,u=0,d=n;s.fill(0);for(var f=n;f<o;f++)if(r.get(f)!==c)s[u]++;else{if(u===i-1){if(ir.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=s[0]+s[1],yt.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new ee},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,s=0;s<i;s++){var o=e.PATTERNS[s],c=ir.patternMatchVariance(r,o,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=s):c===n&&(a=-1)}if(a>=0)return a%10;throw new ee},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ir),hY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_c=function(t){hY(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,i=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,i,!1,this.START_END_PATTERN,s);var o=a[0];i=a[1];var c=o-(i-o);c>=0&&(n=r.isRange(c,o,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var s=r.charAt(i).charCodeAt(0)-48;if(s<0||s>9)throw new me;a+=s}a*=3;for(var i=n-2;i>=0;i-=2){var s=r.charAt(i).charCodeAt(0)-48;if(s<0||s>9)throw new me;a+=s}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,i){return this.findGuardPattern(r,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(r,n,a,i,s){var o=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=i.length,f=a,h=n;h<o;h++)if(r.get(h)!==f)s[c]++;else{if(c===d-1){if(ir.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=s[0]+s[1];for(var p=s.slice(2,s.length),m=0;m<c-1;m++)s[m]=p[m];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new ee},e.decodeDigit=function(r,n,a,i){this.recordPattern(r,a,n);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=i.length,u=0;u<c;u++){var d=i[u],f=ir.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,o=u)}if(o>=0)return o;throw new ee},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ir),pY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mY=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),s=a.toString(),o=t.parseExtensionString(s),c=[new we((n[0]+n[1])/2,e),new we(i,e)],u=new $r(s,null,0,c,Ne.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u},t.prototype.decodeMiddle=function(e,r,n){var a,i,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=r[1],u=0,d=0;d<5&&c<o;d++){var f=_c.decodeDigit(e,s,c,_c.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,pY(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(y){a={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new ee;var g=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==g)throw new ee;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new ee},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Er.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,s=i<10?"0"+i:i.toString();return r+a+"."+s},t}(),gY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vY=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),s=a.toString(),o=t.parseExtensionString(s),c=[new we((n[0]+n[1])/2,e),new we(i,e)],u=new $r(s,null,0,c,Ne.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u},t.prototype.decodeMiddle=function(e,r,n){var a,i,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=r[1],u=0,d=0;d<2&&c<o;d++){var f=_c.decodeDigit(e,s,c,_c.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,gY(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new ee;if(parseInt(n.toString())%4!==u)throw new ee;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Er.ISSUE_NUMBER,parseInt(e)]])},t}(),xY=function(){function t(){}return t.decodeRow=function(e,r,n){var a=_c.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new mY;return i.decodeRow(e,r,a)}catch{var s=new vY;return s.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),yY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tr=function(t){yY(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),s=0;s<a.length;s++)i[s]=a[a.length-s-1];e.L_AND_G_PATTERNS[n]=i}return r}return e.prototype.decodeRow=function(r,n,a){var i=e.findStartGuardPattern(n),s=a==null?null:a.get(It.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new we((i[0]+i[1])/2,r);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(n,i,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(s!=null){var f=new we(u,r);s.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(s!=null){var p=new we((h[0]+h[1])/2,r);s.foundPossibleResultPoint(p)}var m=h[1],g=m+(m-h[0]);if(g>=n.getSize()||!n.isRange(m,g,!1))throw new ee;var y=d.toString();if(y.length<8)throw new me;if(!e.checkChecksum(y))throw new fr;var x=(i[1]+i[0])/2,v=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new we(x,r),new we(v,r)],S=new $r(y,null,0,w,b,new Date().getTime()),E=0;try{var j=xY.decodeRow(r,n,h[1]);S.putMetadata(Er.UPC_EAN_EXTENSION,j.getText()),S.putAllMetadata(j.getResultMetadata()),S.addResultPoints(j.getResultPoints()),E=j.getText().length}catch{}var I=a==null?null:a.get(It.ALLOWED_EAN_EXTENSIONS);if(I!=null){var N=!1;for(var T in I)if(E.toString()===T){N=!0;break}if(!N)throw new ee}return b===Ne.EAN_13||Ne.UPC_A,S},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var s=r.charAt(i).charCodeAt(0)-48;if(s<0||s>9)throw new me;a+=s}a*=3;for(var i=n-2;i>=0;i-=2){var s=r.charAt(i).charCodeAt(0)-48;if(s<0||s>9)throw new me;a+=s}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(_c),bY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ay=function(t){bY(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var i,s,o,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,p=0;p<6&&f<d;p++){var m=tr.decodeDigit(r,u,f,tr.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var g=(i=void 0,WN(u)),y=g.next();!y.done;y=g.next()){var x=y.value;f+=x}}catch(S){i={error:S}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}m>=10&&(h|=1<<5-p)}a=e.determineFirstDigit(a,h);var v=tr.findGuardPattern(r,f,!0,tr.MIDDLE_PATTERN,new Int32Array(tr.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var p=0;p<6&&f<d;p++){var m=tr.decodeDigit(r,u,f,tr.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(o=void 0,WN(u)),w=b.next();!w.done;w=b.next()){var x=w.value;f+=x}}catch(j){o={error:j}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(o)throw o.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Ne.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new ee},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(tr),wY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GN=function(t){wY(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var i,s,o,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var p=tr.decodeDigit(r,u,f,tr.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var m=(i=void 0,VN(u)),g=m.next();!g.done;g=m.next()){var y=g.value;f+=y}}catch(w){i={error:w}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}}var x=tr.findGuardPattern(r,f,!0,tr.MIDDLE_PATTERN,new Int32Array(tr.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var p=tr.decodeDigit(r,u,f,tr.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var v=(o=void 0,VN(u)),b=v.next();!b.done;b=v.next()){var y=b.value;f+=y}}catch(E){o={error:E}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Ne.EAN_8},e}(tr),_Y=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XN=function(t){_Y(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Ay,r}return e.prototype.getBarcodeFormat=function(){return Ne.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new $r(n.substring(1),null,null,r.getResultPoints(),Ne.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new ee},e.prototype.reset=function(){this.ean13Reader.reset()},e}(tr),kY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qN=function(t){kY(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var i,s,o=this.decodeMiddleCounters.map(function(y){return y});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(r,o,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var p=(i=void 0,NY(o)),m=p.next();!m.done;m=p.next()){var g=m.value;u+=g}}catch(y){i={error:y}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Me(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return tr.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){r.insert(0,"0"+a),r.append("0"+i);return}throw ee.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ne.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),a=new Me;a.append(r.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(tr),SY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fv=function(t){SY(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(It.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(Ne.EAN_13)>-1&&i.push(new Ay),a.indexOf(Ne.UPC_A)>-1&&i.push(new XN),a.indexOf(Ne.EAN_8)>-1&&i.push(new GN),a.indexOf(Ne.UPC_E)>-1&&i.push(new qN)),i.length===0&&(i.push(new Ay),i.push(new XN),i.push(new GN),i.push(new qN)),n.readers=i,n}return e.prototype.decodeRow=function(r,n,a){var i,s;try{for(var o=YN(this.readers),c=o.next();!c.done;c=o.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===Ne.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get(It.POSSIBLE_FORMATS),p=h==null||h.includes(Ne.UPC_A);if(f&&p){var m=d.getRawBytes(),g=new $r(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),Ne.UPC_A);return g.putAllMetadata(d.getResultMetadata()),g}return d}catch{}}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}throw new ee},e.prototype.reset=function(){var r,n;try{for(var a=YN(this.readers),i=a.next();!i.done;i=a.next()){var s=i.value;s.reset()}}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(ir),EY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CY=function(t){EY(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var i=this.getValidRowData(n);if(!i)throw new ee;var s=this.codaBarDecodeRow(i.row);if(!s)throw new ee;return new $r(s,null,0,[new we(i.left,r),new we(i.right,r)],Ne.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var s=[],o=n[0],c=1,u=1;u<n.length;u++)n[u]===o?c++:(o=n[u],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:a,right:i}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var i=r.splice(0,8).splice(0,7),s=i.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var o=n.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(ir),jY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},go=function(t){jY(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(ir.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new ee},e.count=function(r){return Qe.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,i=n[0],s=1;s<r.length;s++)n[s]>i&&(i=n[s],a=s);r[a]++},e.decrement=function(r,n){for(var a=0,i=n[0],s=1;s<r.length;s++)n[s]<i&&(i=n[s],a=s);r[a]--},e.isFinderPattern=function(r){var n,a,i=r[0]+r[1],s=i+r[2]+r[3],o=i/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=AY(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ir),rp=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),G5=function(){function t(e,r,n,a,i){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new we(n,i)),this.resultPoints.push(new we(a,i))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),TY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bl=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,i,s=0;try{for(var o=TY(e),c=o.next();!c.done;c=o.next()){var u=c.value;s+=u}}catch(v){a={error:v}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}for(var d=0,f=0,h=e.length,p=0;p<h-1;p++){var m=void 0;for(m=1,f|=1<<p;m<e[p];m++,f&=~(1<<p)){var g=t.combins(s-m-1,h-p-2);if(n&&f===0&&s-m-(h-p-1)>=h-p-1&&(g-=t.combins(s-m-(h-p),h-p-2)),h-p-1>1){for(var y=0,x=s-m-(h-p-2);x>r;x--)y+=t.combins(s-m-x-1,h-p-3);g-=y*(h-1-p)}else s-m>r&&g--;d+=g}s-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var i=1,s=1,o=e;o>n;o--)i*=o,s<=a&&(i/=s,s++);for(;s<=a;)i/=s,s++;return i},t}(),IY=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new hr(n),i=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)o&1<<c&&a.set(i),i++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(i),i++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&a.set(i),i++}return a},t}(),ro=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Jw=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),OY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ga=function(t){OY(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Jw),DY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),no=function(t){DY(e,t);function e(r,n,a){var i=t.call(this,r)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Jw),PY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gl=function(t){PY(e,t);function e(r,n,a){var i=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new me;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Jw),uh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RY=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,i,s,o,c,u;if(!e)return null;if(e.length<2)throw new ee;var d=e.substring(0,2);try{for(var f=uh(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===d)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(E){r={error:E}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new ee;var m=e.substring(0,3);try{for(var g=uh(t.THREE_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var p=y.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(E){a={error:E}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(a)throw a.error}}try{for(var x=uh(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),v=x.next();!v.done;v=x.next()){var p=v.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(E){s={error:E}}finally{try{v&&!v.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}if(e.length<4)throw new ee;var b=e.substring(0,4);try{for(var w=uh(t.FOUR_DIGIT_DATA_LENGTH),S=w.next();!S.done;S=w.next()){var p=S.value;if(p[0]===b)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(E){c={error:E}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new ee},t.processFixedAI=function(e,r,n){if(n.length<e)throw new ee;var a=n.substring(0,e);if(n.length<e+r)throw new ee;var i=n.substring(e,e+r),s=n.substring(e+r),o="("+a+")"+i,c=t.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),i;n.length<e+r?i=n.length:i=e+r;var s=n.substring(e,i),o=n.substring(i),c="("+a+")"+s,u=t.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Zh=function(){function t(e){this.buffer=new Me,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var i=this.decodeGeneralPurposeField(n,a),s=RY.parseFieldsInGeneralPurpose(i.getNewString());if(s!=null&&e.append(s),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new gl(this.information.getSize(),gl.FNC1,gl.FNC1):new gl(this.information.getSize(),r-1,gl.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new gl(e+7,a,i)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,i=0;i<n;++i)e.get(r+i)&&(a|=1<<n-i-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new no(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new no(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new no(this.current.getPosition(),this.buffer.toString()):r=new no(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ro(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new no(this.current.getPosition(),this.buffer.toString());return new ro(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ro(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new no(this.current.getPosition(),this.buffer.toString());return new ro(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ro(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new no(this.current.getPosition(),this.buffer.toString());return new ro(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ro(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ga(e+5,ga.FNC1);if(r>=5&&r<15)return new ga(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ga(e+7,""+(n+1));if(n>=90&&n<116)return new ga(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new me}return new ga(e+8,i)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ga(e+5,ga.FNC1);if(r>=5&&r<15)return new ga(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ga(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new pf("Decoding invalid alphanumeric value: "+n)}return new ga(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),X5=function(){function t(e){this.information=e,this.generalDecoder=new Zh(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),MY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Na=function(t){MY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var i=0;i<4;++i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);s/100===0&&r.append("0"),s/10===0&&r.append("0"),r.append(s)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,i=0;i<13;i++){var s=r.charAt(i+n).charCodeAt(0)-48;a+=i&1?s:3*s}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(X5),LY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BY=function(t){LY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Me;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Na),FY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Y=function(t){FY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Me;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(X5),UY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qh=function(t){UY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,i);for(var s=this.checkWeight(i),o=1e5,c=0;c<5;++c)s/o===0&&r.append("0"),o/=10;r.append(s)},e}(Na),zY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q5=function(t){zY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Qh.GTIN_SIZE+e.WEIGHT_SIZE)throw new ee;var r=new Me;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+Qh.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Qh),HY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WY=function(t){HY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(q5),VY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GY=function(t){VY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(q5),XY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qY=function(t){XY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Na.GTIN_SIZE)throw new ee;var r=new Me;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Na),YY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KY=function(t){YY(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Na.GTIN_SIZE)throw new ee;var r=new Me;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Na),ZY=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=function(t){ZY(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ee;var r=new Me;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var i=a%32;a/=32;var s=a%12+1;a/=12;var o=a;o/10===0&&r.append("0"),r.append(o),s/10===0&&r.append("0"),r.append(s),i/10===0&&r.append("0"),r.append(i)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Qh);function QY(t){try{if(t.get(1))return new BY(t);if(!t.get(2))return new $Y(t);var e=Zh.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new WY(t);case 5:return new GY(t)}var r=Zh.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new qY(t);case 13:return new KY(t)}var n=Zh.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Ki(t,"310","11");case 57:return new Ki(t,"320","11");case 58:return new Ki(t,"310","13");case 59:return new Ki(t,"320","13");case 60:return new Ki(t,"310","15");case 61:return new Ki(t,"320","15");case 62:return new Ki(t,"310","17");case 63:return new Ki(t,"320","17")}}catch(a){throw console.log(a),new pf("unknown decoder: "+t)}}var KN=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),JY=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,i){r.forEach(function(s){a.getLeftChar().getValue()===s.getLeftChar().getValue()&&a.getRightChar().getValue()===s.getRightChar().getValue()&&a.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),eK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tK=function(t){eK(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(o){if(o instanceof ee){if(!this.pairs.length)throw new ee;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(r,!1),i){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ee},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,i,s=n;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(a=void 0,Zi(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(o);try{return this.checkRows(f,s+1)}catch(h){console.log(h)}}}throw new ee},e.isValidSequence=function(r){var n,a;try{for(var i=Zi(e.FINDER_PATTERN_SEQUENCES),s=i.next();!s.done;s=i.next()){var o=s.value;if(!(r.length>o.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==o[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,i=!1,s=!1;a<this.rows.length;){var o=this.rows[a];if(o.getRowNumber()>r){s=o.isEquivalent(this.pairs);break}i=o.isEquivalent(this.pairs),a++}s||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new JY(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,i,s,o,c,u;try{for(var d=Zi(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var p=!0;try{for(var m=(s=void 0,Zi(h.getPairs())),g=m.next();!g.done;g=m.next()){var y=g.value,x=!1;try{for(var v=(c=void 0,Zi(r)),b=v.next();!b.done;b=v.next()){var w=b.value;if(KN.equals(y,w)){x=!0;break}}}catch(S){c={error:S}}finally{try{b&&!b.done&&(u=v.return)&&u.call(v)}finally{if(c)throw c.error}}x||(p=!1)}}catch(S){s={error:S}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}}}catch(S){a={error:S}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,i,s,o,c,u;try{for(var d=Zi(n),f=d.next();!f.done;f=d.next()){var h=f.value,p=!0;try{for(var m=(s=void 0,Zi(r)),g=m.next();!g.done;g=m.next()){var y=g.value,x=!1;try{for(var v=(c=void 0,Zi(h.getPairs())),b=v.next();!b.done;b=v.next()){var w=b.value;if(y.equals(w)){x=!0;break}}}catch(S){c={error:S}}finally{try{b&&!b.done&&(u=v.return)&&u.call(v)}finally{if(c)throw c.error}}if(!x){p=!1;break}}}catch(S){s={error:S}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}if(p)return!0}}catch(S){a={error:S}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=IY.buildBitArray(r),a=QY(n),i=a.parseInformation(),s=r[0].getFinderPattern().getResultPoints(),o=r[r.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new $r(i,null,null,c,Ne.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);i+=c.getLeftChar().getChecksumPortion(),s++;var u=c.getRightChar();u!=null&&(i+=u.getChecksumPortion(),s++)}i%=211;var d=211*(s-4)+i;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var s,o=!0,c=-1;do this.findNextPair(r,n,c),s=this.parseFoundFinderPattern(r,a,i),s===null?c=e.getNextSecondBar(r,this.startEnd[0]):o=!1;while(o);var u=this.decodeDataCharacter(r,s,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ee;var d;try{d=this.decodeDataCharacter(r,s,i,!1)}catch(f){d=null,console.log(f)}return new KN(u,d,s,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var s=r.getSize(),o;if(a>=0)o=a;else if(this.isEmptyPair(n))o=0;else{var c=n[n.length-1];o=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;o<s&&(d=!r.get(o),!!d);)o++;for(var f=0,h=o,p=o;p<s;p++)if(r.get(p)!==d)i[f]++;else{if(f===3){if(u&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(i),h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,d=!d}throw new ee},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var i=r[a];r[a]=r[n-a-1],r[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(r,n,a){var i,s,o;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,i=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=r.getNextUnset(this.startEnd[1]+1),i=o-this.startEnd[1];var u=this.getDecodeFinderCounters();yt.arraycopy(u,0,u,1,u.length-1),u[0]=i;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new G5(d,[s,o],s,o,n)},e.prototype.decodeDataCharacter=function(r,n,a,i){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(i)e.recordPatternInReverse(r,n.getStartEnd()[0],s);else{e.recordPattern(r,n.getStartEnd()[1],s);for(var c=0,u=s.length-1;c<u;c++,u--){var d=s[c];s[c]=s[u],s[u]=d}}var f=17,h=Qe.sum(new Int32Array(s))/f,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new ee;for(var m=this.getOddCounts(),g=this.getEvenCounts(),y=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var v=1*s[c]/h,b=v+.5;if(b<1){if(v<.3)throw new ee;b=1}else if(b>8){if(v>8.7)throw new ee;b=8}var w=c/2;c&1?(g[w]=b,x[w]=v-b):(m[w]=b,y[w]=v-b)}this.adjustOddEvenCounts(f);for(var S=4*n.getValue()+(a?0:2)+(i?0:1)-1,E=0,j=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,i)){var I=e.WEIGHTS[S][2*c];j+=m[c]*I}E+=m[c]}for(var N=0,c=g.length-1;c>=0;c--)if(e.isNotA1left(n,a,i)){var I=e.WEIGHTS[S][2*c+1];N+=g[c]*I}var T=j+N;if(E&1||E>13||E<4)throw new ee;var F=(13-E)/2,C=e.SYMBOL_WIDEST[F],A=9-C,k=Bl.getRSSvalue(m,C,!0),O=Bl.getRSSvalue(g,A,!1),$=e.EVEN_TOTAL_SUBSET[F],D=e.GSUM[F],R=k*$+O+D;return new rp(R,T)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=Qe.sum(new Int32Array(this.getOddCounts())),a=Qe.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1;n>13?s=!0:n<4&&(i=!0);var o=!1,c=!1;a>13?c=!0:a<4&&(o=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new ee;s=!0}else{if(!f)throw new ee;c=!0}else if(u===-1)if(d){if(f)throw new ee;i=!0}else{if(!f)throw new ee;o=!0}else if(u===0){if(d){if(!f)throw new ee;n<a?(i=!0,c=!0):(s=!0,o=!0)}else if(f)throw new ee}else throw new ee;if(i){if(s)throw new ee;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new ee;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(go),rK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nK=function(t){rK(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(rp),aK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZN=function(t){aK(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var i,s,o,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=hv(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var m=(o=void 0,hv(this.possibleRightPairs)),g=m.next();!g.done;g=m.next()){var y=g.value;if(y.getCount()>1&&e.checkChecksum(p,y))return e.constructResult(p,y)}}catch(x){o={error:x}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(o)throw o.error}}}}catch(x){i={error:x}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}throw new ee},e.addOrTally=function(r,n){var a,i;if(n!=null){var s=!1;try{for(var o=hv(r),c=o.next();!c.done;c=o.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),s=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}s||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),i=new String(a).toString(),s=new Me,o=13-i.length;o>0;o--)s.append("0");s.append(i);for(var c=0,o=0;o<13;o++){var u=s.charAt(o).charCodeAt(0)-48;c+=o&1?u:3*u}c=10-c%10,c===10&&(c=0),s.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new $r(s.toString(),null,0,[d[0],d[1],f[0],f[1]],Ne.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(r,n,a,i){try{var s=this.findFinderPattern(r,n),o=this.parseFoundFinderPattern(r,a,n,s),c=i==null?null:i.get(It.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(s[0]+s[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new we(u,a))}var d=this.decodeDataCharacter(r,o,!0),f=this.decodeDataCharacter(r,o,!1);return new nK(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var i=this.getDataCharacterCounters(),s=0;s<i.length;s++)i[s]=0;if(a)ir.recordPatternInReverse(r,n.getStartEnd()[0],i);else{ir.recordPattern(r,n.getStartEnd()[1]+1,i);for(var o=0,c=i.length-1;o<c;o++,c--){var u=i[o];i[o]=i[c],i[c]=u}}for(var d=a?16:15,f=Qe.sum(new Int32Array(i))/d,h=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),o=0;o<i.length;o++){var y=i[o]/f,x=Math.floor(y+.5);x<1?x=1:x>8&&(x=8);var v=Math.floor(o/2);o&1?(p[v]=x,g[v]=y-x):(h[v]=x,m[v]=y-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,o=h.length-1;o>=0;o--)w*=9,w+=h[o],b+=h[o];for(var S=0,E=0,o=p.length-1;o>=0;o--)S*=9,S+=p[o],E+=p[o];var j=w+3*S;if(a){if(b&1||b>12||b<4)throw new ee;var I=(12-b)/2,N=e.OUTSIDE_ODD_WIDEST[I],T=9-N,F=Bl.getRSSvalue(h,N,!1),C=Bl.getRSSvalue(p,T,!0),A=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],k=e.OUTSIDE_GSUM[I];return new rp(F*A+C+k,j)}else{if(E&1||E>10||E<4)throw new ee;var I=(10-E)/2,N=e.INSIDE_ODD_WIDEST[I],T=9-N,F=Bl.getRSSvalue(h,N,!0),C=Bl.getRSSvalue(p,T,!1),O=e.INSIDE_ODD_TOTAL_SUBSET[I],k=e.INSIDE_GSUM[I];return new rp(C*O+F+k,j)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=r.getSize(),s=!1,o=0;o<i&&(s=!r.get(o),n!==s);)o++;for(var c=0,u=o,d=o;d<i;d++)if(r.get(d)!==s)a[c]++;else{if(c===3){if(go.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,s=!s}throw new ee},e.prototype.parseFoundFinderPattern=function(r,n,a,i){for(var s=r.get(i[0]),o=i[0]-1;o>=0&&s!==r.get(o);)o--;o++;var c=i[0]-o,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);yt.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=o,p=i[1];return a&&(h=r.getSize()-1-h,p=r.getSize()-1-p),new G5(f,[o,i[1]],h,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=Qe.sum(new Int32Array(this.getOddCounts())),i=Qe.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,u=!1;r?(a>12?o=!0:a<4&&(s=!0),i>12?u=!0:i<4&&(c=!0)):(a>11?o=!0:a<5&&(s=!0),i>10?u=!0:i<4&&(c=!0));var d=a+i-n,f=(a&1)===(r?1:0),h=(i&1)===1;if(d===1)if(f){if(h)throw new ee;o=!0}else{if(!h)throw new ee;u=!0}else if(d===-1)if(f){if(h)throw new ee;s=!0}else{if(!h)throw new ee;c=!0}else if(d===0){if(f){if(!h)throw new ee;a<i?(s=!0,u=!0):(o=!0,c=!0)}else if(h)throw new ee}else throw new ee;if(s){if(o)throw new ee;go.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&go.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new ee;go.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&go.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(go),iK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cu=function(t){iK(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(It.POSSIBLE_FORMATS):null,i=r&&r.get(It.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=r&&r.get(It.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(Ne.EAN_13)||a.includes(Ne.UPC_A)||a.includes(Ne.EAN_8)||a.includes(Ne.UPC_E))&&n.readers.push(new fv(r)),a.includes(Ne.CODE_39)&&n.readers.push(new UN(i,s)),a.includes(Ne.CODE_93)&&n.readers.push(new zN),a.includes(Ne.CODE_128)&&n.readers.push(new $N),a.includes(Ne.ITF)&&n.readers.push(new HN),a.includes(Ne.CODABAR)&&n.readers.push(new CY),a.includes(Ne.RSS_14)&&n.readers.push(new ZN),a.includes(Ne.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new tK))),n.readers.length===0&&(n.readers.push(new fv(r)),n.readers.push(new UN),n.readers.push(new zN),n.readers.push(new fv(r)),n.readers.push(new $N),n.readers.push(new HN),n.readers.push(new ZN)),n}return e.prototype.decodeRow=function(r,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(r,n,a)}catch{}throw new ee},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(ir),sK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){sK(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Cu(n),r,n)||this}return e})(Bc);var QN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rt=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Je=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),oK=function(){function t(e,r,n,a,i,s){var o,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=s;var u=0,d=s.getECCodewords(),f=s.getECBlocks();try{for(var h=QN(f),p=h.next();!p.done;p=h.next()){var m=p.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(g){o={error:g}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(o)throw o.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new me;try{for(var i=QN(t.VERSIONS),s=i.next();!s.done;s=i.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===r)return o}}catch(c){n={error:c}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new me},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new rt(5,new Je(1,3))),new t(2,12,12,10,10,new rt(7,new Je(1,5))),new t(3,14,14,12,12,new rt(10,new Je(1,8))),new t(4,16,16,14,14,new rt(12,new Je(1,12))),new t(5,18,18,16,16,new rt(14,new Je(1,18))),new t(6,20,20,18,18,new rt(18,new Je(1,22))),new t(7,22,22,20,20,new rt(20,new Je(1,30))),new t(8,24,24,22,22,new rt(24,new Je(1,36))),new t(9,26,26,24,24,new rt(28,new Je(1,44))),new t(10,32,32,14,14,new rt(36,new Je(1,62))),new t(11,36,36,16,16,new rt(42,new Je(1,86))),new t(12,40,40,18,18,new rt(48,new Je(1,114))),new t(13,44,44,20,20,new rt(56,new Je(1,144))),new t(14,48,48,22,22,new rt(68,new Je(1,174))),new t(15,52,52,24,24,new rt(42,new Je(2,102))),new t(16,64,64,14,14,new rt(56,new Je(2,140))),new t(17,72,72,16,16,new rt(36,new Je(4,92))),new t(18,80,80,18,18,new rt(48,new Je(4,114))),new t(19,88,88,20,20,new rt(56,new Je(4,144))),new t(20,96,96,22,22,new rt(68,new Je(4,174))),new t(21,104,104,24,24,new rt(56,new Je(6,136))),new t(22,120,120,18,18,new rt(68,new Je(6,175))),new t(23,132,132,20,20,new rt(62,new Je(8,163))),new t(24,144,144,22,22,new rt(62,new Je(8,156),new Je(2,155))),new t(25,8,18,6,16,new rt(7,new Je(1,5))),new t(26,8,32,6,14,new rt(11,new Je(1,10))),new t(27,12,26,10,24,new rt(14,new Je(1,16))),new t(28,12,36,10,16,new rt(18,new Je(1,22))),new t(29,16,36,14,16,new rt(24,new Je(1,32))),new t(30,16,48,14,22,new rt(28,new Je(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),lK=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new me;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new si(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return oK.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,u=!1,d=!1;do if(n===i&&a===0&&!o)e[r++]=this.readCorner1(i,s)&255,n-=2,a+=2,o=!0;else if(n===i-2&&a===0&&s&3&&!c)e[r++]=this.readCorner2(i,s)&255,n-=2,a+=2,c=!0;else if(n===i+4&&a===2&&!(s&7)&&!u)e[r++]=this.readCorner3(i,s)&255,n-=2,a+=2,u=!0;else if(n===i-2&&a===0&&(s&7)===4&&!d)e[r++]=this.readCorner4(i,s)&255,n-=2,a+=2,d=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,i,s)&255),n-=2,a+=2;while(n>=0&&a<s);n+=1,a+=3;do n>=0&&a<s&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,i,s)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<s);if(r!==this.version.getTotalCodewords())throw new me;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var i=0;return this.readModule(e-2,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r,n,a)&&(i|=1),i<<=1,this.readModule(e,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e,r,n,a)&&(i|=1),i},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Se("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=r/a|0,o=n/i|0,c=s*a,u=o*i,d=new si(u,c),f=0;f<s;++f)for(var h=f*a,p=0;p<o;++p)for(var m=p*i,g=0;g<a;++g)for(var y=f*(a+2)+1+g,x=h+g,v=0;v<i;++v){var b=p*(i+2)+1+v;if(e.get(b,y)){var w=m+v;d.set(w,x)}}return d},t}(),JN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cK=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,i,s,o=r.getECBlocks(),c=0,u=o.getECBlocks();try{for(var d=JN(u),f=d.next();!f.done;f=d.next()){var h=f.value;c+=h.getCount()}}catch(k){n={error:k}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var p=new Array(c),m=0;try{for(var g=JN(u),y=g.next();!y.done;y=g.next())for(var h=y.value,x=0;x<h.getCount();x++){var v=h.getDataCodewords(),b=o.getECCodewords()+v;p[m++]=new t(v,new Uint8Array(b))}}catch(k){i={error:k}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}for(var w=p[0].codewords.length,S=w-o.getECCodewords(),E=S-1,j=0,x=0;x<E;x++)for(var I=0;I<m;I++)p[I].codewords[x]=e[j++];for(var N=r.getVersionNumber()===24,T=N?8:m,I=0;I<T;I++)p[I].codewords[S-1]=e[j++];for(var F=p[0].codewords.length,x=S;x<F;x++)for(var I=0;I<m;I++){var C=N?(I+8)%m:I,A=N&&C>7?x-1:x;p[C].codewords[A]=e[j++]}if(j!==e.length)throw new Se;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Y5=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Se(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var s=8-n,o=e<s?e:s,c=s-o,u=255>>8-o<<c;r=(i[a]&u)>>c,e-=o,n+=o,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|i[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(i[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Qt;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qt||(Qt={}));var uK=function(){function t(){}return t.decode=function(e){var r=new Y5(e),n=new Me,a=new Me,i=new Array,s=Qt.ASCII_ENCODE;do if(s===Qt.ASCII_ENCODE)s=this.decodeAsciiSegment(r,n,a);else{switch(s){case Qt.C40_ENCODE:this.decodeC40Segment(r,n);break;case Qt.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Qt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Qt.BASE256_ENCODE:this.decodeBase256Segment(r,n,i);break;default:throw new me}s=Qt.ASCII_ENCODE}while(s!==Qt.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new pm(e,n.toString(),i.length===0?null:i,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new me;if(i<=128)return a&&(i+=128),r.append(String.fromCharCode(i-1)),Qt.ASCII_ENCODE;if(i===129)return Qt.PAD_ENCODE;if(i<=229){var s=i-130;s<10&&r.append("0"),r.append(""+s)}else switch(i){case 230:return Qt.C40_ENCODE;case 231:return Qt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Qt.ANSIX12_ENCODE;case 239:return Qt.TEXT_ENCODE;case 240:return Qt.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new me;break}}while(e.available()>0);return Qt.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],i=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),a);for(var o=0;o<3;o++){var c=a[o];switch(i){case 0:if(c<3)i=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new me;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new me}i=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),i=0;break;default:throw new me}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],i=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),a);for(var o=0;o<3;o++){var c=a[o];switch(i){case 0:if(c<3)i=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new me;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new me}i=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),i=0}else throw new me;break;default:throw new me}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var s=n[i];switch(s){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(s<14)r.append(String.fromCharCode(s+44));else if(s<40)r.append(String.fromCharCode(s+51));else throw new me;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),s;if(i===0?s=e.available()/8|0:i<250?s=i:s=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),s<0)throw new me;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new me;o[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(o);try{r.append(la.decode(o,qe.ISO88591))}catch(u){throw new pf("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),dK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fK=function(){function t(){this.rsDecoder=new mm(mn.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new lK(e),i=a.getVersion(),s=a.readCodewords(),o=cK.getDataBlocks(s,i),c=0;try{for(var u=dK(o),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),p=o.length,m=0;m<p;m++){var g=o[m],y=g.getCodewords(),x=g.getNumDataCodewords();this.correctErrors(y,x);for(var v=0;v<x;v++)h[v*p+m]=y[v]}return uK.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new fr}for(var a=0;a<r;a++)e[a]=n[a]},t}(),hK=function(){function t(e){this.image=e,this.rectangleDetector=new Cy(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new ee;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],i=r[2],s=r[3],o=this.transitionsBetween(n,s)+1,c=this.transitionsBetween(i,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var u=t.sampleGrid(this.image,n,a,i,s,o,c);return new Zw(u,[n,a,i,s])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),i=(r.getY()-e.getY())/(n+1);return new we(e.getX()+a,e.getY()+i)},t.moveAway=function(e,r,n){var a=e.getX(),i=e.getY();return a<r?a-=1:a+=1,i<n?i-=1:i+=1,new we(a,i)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],i=e[2],s=this.transitionsBetween(r,n),o=this.transitionsBetween(n,a),c=this.transitionsBetween(a,i),u=this.transitionsBetween(i,r),d=s,f=[i,r,n,a];return d>o&&(d=o,f[0]=r,f[1]=n,f[2]=a,f[3]=i),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=i,f[3]=r),d>u&&(f[0]=a,f[1]=i,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],s=this.transitionsBetween(r,i),o=t.shiftPoint(n,a,(s+1)*4),c=t.shiftPoint(a,n,(s+1)*4),u=this.transitionsBetween(o,r),d=this.transitionsBetween(c,i);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],s=this.transitionsBetween(r,i),o=this.transitionsBetween(n,i),c=t.shiftPoint(r,n,(o+1)*4),u=t.shiftPoint(a,n,(s+1)*4);s=this.transitionsBetween(c,i),o=this.transitionsBetween(u,i);var d=new we(i.getX()+(a.getX()-n.getX())/(s+1),i.getY()+(a.getY()-n.getY())/(s+1)),f=new we(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),p=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>p?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],s=this.transitionsBetween(r,i)+1,o=this.transitionsBetween(a,i)+1,c=t.shiftPoint(r,n,o*4),u=t.shiftPoint(a,n,s*4);s=this.transitionsBetween(c,i)+1,o=this.transitionsBetween(u,i)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var d=(r.getX()+n.getX()+a.getX()+i.getX())/4,f=(r.getY()+n.getY()+a.getY()+i.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),i=t.moveAway(i,d,f);var h,p;return c=t.shiftPoint(r,n,o*4),c=t.shiftPoint(c,i,s*4),h=t.shiftPoint(n,r,o*4),h=t.shiftPoint(h,a,s*4),u=t.shiftPoint(a,i,o*4),u=t.shiftPoint(u,n,s*4),p=t.shiftPoint(i,a,o*4),p=t.shiftPoint(p,r,s*4),[c,h,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,i,s,o){var c=Qw.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(r.getX()),s=Math.trunc(r.getY()),o=Math.abs(s-a)>Math.abs(i-n);if(o){var c=n;n=a,a=c,c=i,i=s,s=c}for(var u=Math.abs(i-n),d=Math.abs(s-a),f=-u/2,h=a<s?1:-1,p=n<i?1:-1,m=0,g=this.image.get(o?a:n,o?n:a),y=n,x=a;y!==i;y+=p){var v=this.image.get(o?x:y,o?y:x);if(v!==g&&(m++,g=v),f+=d,f>0){if(x===s)break;x+=h,f-=u}}return m},t}(),Ty=function(){function t(){this.decoder=new fK}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(It.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=t.NO_POINTS}else{var s=new hK(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),a=s.getPoints()}var o=n.getRawBytes(),c=new $r(n.getText(),o,8*o.length,a,Ne.DATA_MATRIX,yt.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Er.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(Er.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new ee;var a=this.moduleSize(r,e),i=r[1],s=n[1],o=r[0],c=n[0],u=(c-o+1)/a,d=(s-i+1)/a;if(u<=0||d<=0)throw new ee;var f=a/2;i+=f,o+=f;for(var h=new si(u,d),p=0;p<d;p++)for(var m=i+p*a,g=0;g<u;g++)e.get(o+g*a,m)&&h.set(g,p);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],i=e[1];a<n&&r.get(a,i);)a++;if(a===n)throw new ee;var s=a-e[0];if(s===0)throw new ee;return s},t.NO_POINTS=[],t}(),pK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){pK(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ty,r)||this}return e})(Bc);var Fl;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Fl||(Fl={}));var mK=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new ya(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Se;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Fl.L,"L",1),t.M=new t(Fl.M,"M",0),t.Q=new t(Fl.Q,"Q",3),t.H=new t(Fl.H,"H",2),t}(),gK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K5=function(){function t(e){this.errorCorrectionLevel=mK.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Le.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,i=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=gK(t.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<i&&(s=u[1],i=f),e!==r&&(f=t.numBitsDiffering(r,d),f<i&&(s=u[1],i=f))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return i<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),vK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var i=vK(a),s=i.next();!s.done;s=i.next()){var o=s.value;n+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),z=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),xK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lo=function(){function t(e,r){for(var n,a,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=i;var o=0,c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();try{for(var d=xK(u),f=d.next();!f.done;f=d.next()){var h=f.value;o+=h.getCount()*(h.getDataCodewords()+c)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=o}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new me;try{return this.getVersionForNumber((e-17)/4)}catch{throw new me}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Se;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var i=t.VERSION_DECODE_INFO[a];if(i===e)return t.getVersionForNumber(a+7);var s=K5.numBitsDiffering(e,i);s<r&&(n=a+7,r=s)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new si(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,s=0;s<n;s++)a===0&&(s===0||s===n-1)||a===n-1&&s===0||r.setRegion(this.alignmentPatternCenters[s]-2,i,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Y(7,new z(1,19)),new Y(10,new z(1,16)),new Y(13,new z(1,13)),new Y(17,new z(1,9))),new t(2,Int32Array.from([6,18]),new Y(10,new z(1,34)),new Y(16,new z(1,28)),new Y(22,new z(1,22)),new Y(28,new z(1,16))),new t(3,Int32Array.from([6,22]),new Y(15,new z(1,55)),new Y(26,new z(1,44)),new Y(18,new z(2,17)),new Y(22,new z(2,13))),new t(4,Int32Array.from([6,26]),new Y(20,new z(1,80)),new Y(18,new z(2,32)),new Y(26,new z(2,24)),new Y(16,new z(4,9))),new t(5,Int32Array.from([6,30]),new Y(26,new z(1,108)),new Y(24,new z(2,43)),new Y(18,new z(2,15),new z(2,16)),new Y(22,new z(2,11),new z(2,12))),new t(6,Int32Array.from([6,34]),new Y(18,new z(2,68)),new Y(16,new z(4,27)),new Y(24,new z(4,19)),new Y(28,new z(4,15))),new t(7,Int32Array.from([6,22,38]),new Y(20,new z(2,78)),new Y(18,new z(4,31)),new Y(18,new z(2,14),new z(4,15)),new Y(26,new z(4,13),new z(1,14))),new t(8,Int32Array.from([6,24,42]),new Y(24,new z(2,97)),new Y(22,new z(2,38),new z(2,39)),new Y(22,new z(4,18),new z(2,19)),new Y(26,new z(4,14),new z(2,15))),new t(9,Int32Array.from([6,26,46]),new Y(30,new z(2,116)),new Y(22,new z(3,36),new z(2,37)),new Y(20,new z(4,16),new z(4,17)),new Y(24,new z(4,12),new z(4,13))),new t(10,Int32Array.from([6,28,50]),new Y(18,new z(2,68),new z(2,69)),new Y(26,new z(4,43),new z(1,44)),new Y(24,new z(6,19),new z(2,20)),new Y(28,new z(6,15),new z(2,16))),new t(11,Int32Array.from([6,30,54]),new Y(20,new z(4,81)),new Y(30,new z(1,50),new z(4,51)),new Y(28,new z(4,22),new z(4,23)),new Y(24,new z(3,12),new z(8,13))),new t(12,Int32Array.from([6,32,58]),new Y(24,new z(2,92),new z(2,93)),new Y(22,new z(6,36),new z(2,37)),new Y(26,new z(4,20),new z(6,21)),new Y(28,new z(7,14),new z(4,15))),new t(13,Int32Array.from([6,34,62]),new Y(26,new z(4,107)),new Y(22,new z(8,37),new z(1,38)),new Y(24,new z(8,20),new z(4,21)),new Y(22,new z(12,11),new z(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Y(30,new z(3,115),new z(1,116)),new Y(24,new z(4,40),new z(5,41)),new Y(20,new z(11,16),new z(5,17)),new Y(24,new z(11,12),new z(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Y(22,new z(5,87),new z(1,88)),new Y(24,new z(5,41),new z(5,42)),new Y(30,new z(5,24),new z(7,25)),new Y(24,new z(11,12),new z(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Y(24,new z(5,98),new z(1,99)),new Y(28,new z(7,45),new z(3,46)),new Y(24,new z(15,19),new z(2,20)),new Y(30,new z(3,15),new z(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Y(28,new z(1,107),new z(5,108)),new Y(28,new z(10,46),new z(1,47)),new Y(28,new z(1,22),new z(15,23)),new Y(28,new z(2,14),new z(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Y(30,new z(5,120),new z(1,121)),new Y(26,new z(9,43),new z(4,44)),new Y(28,new z(17,22),new z(1,23)),new Y(28,new z(2,14),new z(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Y(28,new z(3,113),new z(4,114)),new Y(26,new z(3,44),new z(11,45)),new Y(26,new z(17,21),new z(4,22)),new Y(26,new z(9,13),new z(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Y(28,new z(3,107),new z(5,108)),new Y(26,new z(3,41),new z(13,42)),new Y(30,new z(15,24),new z(5,25)),new Y(28,new z(15,15),new z(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Y(28,new z(4,116),new z(4,117)),new Y(26,new z(17,42)),new Y(28,new z(17,22),new z(6,23)),new Y(30,new z(19,16),new z(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Y(28,new z(2,111),new z(7,112)),new Y(28,new z(17,46)),new Y(30,new z(7,24),new z(16,25)),new Y(24,new z(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Y(30,new z(4,121),new z(5,122)),new Y(28,new z(4,47),new z(14,48)),new Y(30,new z(11,24),new z(14,25)),new Y(30,new z(16,15),new z(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Y(30,new z(6,117),new z(4,118)),new Y(28,new z(6,45),new z(14,46)),new Y(30,new z(11,24),new z(16,25)),new Y(30,new z(30,16),new z(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Y(26,new z(8,106),new z(4,107)),new Y(28,new z(8,47),new z(13,48)),new Y(30,new z(7,24),new z(22,25)),new Y(30,new z(22,15),new z(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Y(28,new z(10,114),new z(2,115)),new Y(28,new z(19,46),new z(4,47)),new Y(28,new z(28,22),new z(6,23)),new Y(30,new z(33,16),new z(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Y(30,new z(8,122),new z(4,123)),new Y(28,new z(22,45),new z(3,46)),new Y(30,new z(8,23),new z(26,24)),new Y(30,new z(12,15),new z(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new z(3,117),new z(10,118)),new Y(28,new z(3,45),new z(23,46)),new Y(30,new z(4,24),new z(31,25)),new Y(30,new z(11,15),new z(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new z(7,116),new z(7,117)),new Y(28,new z(21,45),new z(7,46)),new Y(30,new z(1,23),new z(37,24)),new Y(30,new z(19,15),new z(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new z(5,115),new z(10,116)),new Y(28,new z(19,47),new z(10,48)),new Y(30,new z(15,24),new z(25,25)),new Y(30,new z(23,15),new z(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new z(13,115),new z(3,116)),new Y(28,new z(2,46),new z(29,47)),new Y(30,new z(42,24),new z(1,25)),new Y(30,new z(23,15),new z(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new z(17,115)),new Y(28,new z(10,46),new z(23,47)),new Y(30,new z(10,24),new z(35,25)),new Y(30,new z(19,15),new z(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new z(17,115),new z(1,116)),new Y(28,new z(14,46),new z(21,47)),new Y(30,new z(29,24),new z(19,25)),new Y(30,new z(11,15),new z(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new z(13,115),new z(6,116)),new Y(28,new z(14,46),new z(23,47)),new Y(30,new z(44,24),new z(7,25)),new Y(30,new z(59,16),new z(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new z(12,121),new z(7,122)),new Y(28,new z(12,47),new z(26,48)),new Y(30,new z(39,24),new z(14,25)),new Y(30,new z(22,15),new z(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new z(6,121),new z(14,122)),new Y(28,new z(6,47),new z(34,48)),new Y(30,new z(46,24),new z(10,25)),new Y(30,new z(2,15),new z(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new z(17,122),new z(4,123)),new Y(28,new z(29,46),new z(14,47)),new Y(30,new z(49,24),new z(10,25)),new Y(30,new z(24,15),new z(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new z(4,122),new z(18,123)),new Y(28,new z(13,46),new z(32,47)),new Y(30,new z(48,24),new z(14,25)),new Y(30,new z(42,15),new z(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new z(20,117),new z(4,118)),new Y(28,new z(40,47),new z(7,48)),new Y(30,new z(43,24),new z(22,25)),new Y(30,new z(10,15),new z(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new z(19,118),new z(6,119)),new Y(28,new z(18,47),new z(31,48)),new Y(30,new z(34,24),new z(34,25)),new Y(30,new z(20,15),new z(61,16)))],t}(),or;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(or||(or={}));var eS=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[or.DATA_MASK_000,new t(or.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[or.DATA_MASK_001,new t(or.DATA_MASK_001,function(e,r){return(e&1)===0})],[or.DATA_MASK_010,new t(or.DATA_MASK_010,function(e,r){return r%3===0})],[or.DATA_MASK_011,new t(or.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[or.DATA_MASK_100,new t(or.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[or.DATA_MASK_101,new t(or.DATA_MASK_101,function(e,r){return e*r%6===0})],[or.DATA_MASK_110,new t(or.DATA_MASK_110,function(e,r){return e*r%6<3})],[or.DATA_MASK_111,new t(or.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),yK=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new me;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,s=a-7,n=a-1;n>=s;n--)i=this.copyBit(8,n,i);for(var r=a-8;r<a;r++)i=this.copyBit(r,8,i);if(this.parsedFormatInfo=K5.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new me},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Lo.getVersionForNumber(r);for(var n=0,a=e-11,i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(s,i,n);var o=Lo.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(var s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(s,i,n);if(o=Lo.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new me},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=eS.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=r.buildFunctionPattern(),s=!0,o=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var p=s?a-1-h:h,m=0;m<2;m++)i.get(f-m,p)||(d++,u<<=1,this.bitMatrix.get(f-m,p)&&(u|=1),d===8&&(o[c++]=u,d=0,u=0));s=!s}if(c!==r.getTotalCodewords())throw new me;return o},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=eS.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,i=e.getHeight();a<i;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),tS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bK=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,i,s,o;if(e.length!==r.getTotalCodewords())throw new Se;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=tS(d),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getCount()}}catch(A){a={error:A}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}var m=new Array(u),g=0;try{for(var y=tS(d),x=y.next();!x.done;x=y.next())for(var p=x.value,v=0;v<p.getCount();v++){var b=p.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[g++]=new t(b,new Uint8Array(w))}}catch(A){s={error:A}}finally{try{x&&!x.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}for(var S=m[0].codewords.length,E=m.length-1;E>=0;){var j=m[E].codewords.length;if(j===S)break;E--}E++;for(var I=S-c.getECCodewordsPerBlock(),N=0,v=0;v<I;v++)for(var T=0;T<g;T++)m[T].codewords[v]=e[N++];for(var T=E;T<g;T++)m[T].codewords[I]=e[N++];for(var F=m[0].codewords.length,v=I;v<F;v++)for(var T=0;T<g;T++){var C=T<E?v:v+1;m[T].codewords[C]=e[N++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),ea;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(ea||(ea={}));var _t=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Se;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(ea.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(ea.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(ea.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(ea.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(ea.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(ea.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(ea.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(ea.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(ea.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(ea.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),wK=function(){function t(){}return t.decode=function(e,r,n,a){var i=new Y5(e),s=new Me,o=new Array,c=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(i.available()<4)h=_t.TERMINATOR;else{var p=i.readBits(4);h=_t.forBits(p)}switch(h){case _t.TERMINATOR:break;case _t.FNC1_FIRST_POSITION:case _t.FNC1_SECOND_POSITION:f=!0;break;case _t.STRUCTURED_APPEND:if(i.available()<16)throw new me;c=i.readBits(8),u=i.readBits(8);break;case _t.ECI:var m=t.parseECIValue(i);if(d=rr.getCharacterSetECIByValue(m),d===null)throw new me;break;case _t.HANZI:var g=i.readBits(4),y=i.readBits(h.getCharacterCountBits(r));g===t.GB2312_SUBSET&&t.decodeHanziSegment(i,s,y);break;default:var x=i.readBits(h.getCharacterCountBits(r));switch(h){case _t.NUMERIC:t.decodeNumericSegment(i,s,x);break;case _t.ALPHANUMERIC:t.decodeAlphanumericSegment(i,s,x,f);break;case _t.BYTE:t.decodeByteSegment(i,s,x,d,o,a);break;case _t.KANJI:t.decodeKanjiSegment(i,s,x);break;default:throw new me}break}}while(h!==_t.TERMINATOR)}catch{throw new me}return new pm(e,s.toString(),o.length===0?null:o,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new me;for(var a=new Uint8Array(2*n),i=0;n>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,a[i]=o>>8&255,a[i+1]=o&255,i+=2,n--}try{r.append(la.decode(a,qe.GB2312))}catch(c){throw new me(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new me;for(var a=new Uint8Array(2*n),i=0;n>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,a[i]=o>>8,a[i+1]=o,i+=2,n--}try{r.append(la.decode(a,qe.SHIFT_JIS))}catch(c){throw new me(c)}},t.decodeByteSegment=function(e,r,n,a,i,s){if(8*n>e.available())throw new me;for(var o=new Uint8Array(n),c=0;c<n;c++)o[c]=e.readBits(8);var u;a===null?u=qe.guessEncoding(o,s):u=a.getName();try{r.append(la.decode(o,u))}catch(d){throw new me(d)}i.push(o)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new me;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var i=r.length();n>1;){if(e.available()<11)throw new me;var s=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(s/45))),r.append(t.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new me;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var o=i;o<r.length();o++)r.charAt(o)==="%"&&(o<r.length()-1&&r.charAt(o+1)==="%"?r.deleteCharAt(o+1):r.setCharAt(o,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new me;var a=e.readBits(10);if(a>=1e3)throw new me;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new me;var i=e.readBits(7);if(i>=100)throw new me;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new me;var s=e.readBits(4);if(s>=10)throw new me;r.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new me},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Z5=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),rS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_K=function(){function t(){this.rsDecoder=new mm(mn.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(si.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new yK(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(s){a=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,r);return i.setOther(new Z5(!0)),i}catch(s){throw a!==null?a:s}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,i,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=bK.getDataBlocks(u,o,c),f=0;try{for(var h=rS(d),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch(E){n={error:E}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var g=new Uint8Array(f),y=0;try{for(var x=rS(d),v=x.next();!v.done;v=x.next()){var m=v.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var S=0;S<w;S++)g[y++]=b[S]}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}return wK.decode(g,o,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new fr}for(var a=0;a<r;a++)e[a]=n[a]},t}(),kK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NK=function(t){kK(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var i=(this.getX()+n)/2,s=(this.getY()+r)/2,o=(this.estimatedModuleSize+a)/2;return new e(i,s,o)},e}(we),SK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EK=function(){function t(e,r,n,a,i,s,o){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,i=this.startY+r/2,s=new Int32Array(3),o=this.image,c=0;c<r;c++){var u=i+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=e;d<a&&!o.get(d,u);)d++;for(var f=0;d<a;){if(o.get(d,u))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,d);if(h!==null)return h}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;d++}if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&i.get(r,c)&&o[1]<=n;)o[1]++,c--;if(c<0||o[1]>n)return NaN;for(;c>=0&&!i.get(r,c)&&o[0]<=n;)o[0]++,c--;if(o[0]>n)return NaN;for(c=e+1;c<s&&i.get(r,c)&&o[1]<=n;)o[1]++,c++;if(c===s||o[1]>n)return NaN;for(;c<s&&!i.get(r,c)&&o[2]<=n;)o[2]++,c++;if(o[2]>n)return NaN;var u=o[0]+o[1]+o[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,i,s=e[0]+e[1]+e[2],o=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,o,2*e[1],s);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=SK(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,c,o))return h.combineEstimate(c,o,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}var p=new NK(o,c,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),CK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jK=function(t){CK(e,t);function e(r,n,a,i){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s.count=i,i===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var i=this.count+1,s=(this.count*this.getX()+n)/i,o=(this.count*this.getY()+r)/i,c=(this.count*this.estimatedModuleSize+a)/i;return new e(s,o,c,i)},e}(we),AK=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),su=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TK=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(It.TRY_HARDER)!==void 0,n=e!=null&&e.get(It.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),s=a.getWidth(),o=Math.floor(3*i/(4*t.MAX_MODULES));(o<t.MIN_SKIP||r)&&(o=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=o-1;d<i&&!c;d+=o){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<s;h++)if(a.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,d,h,n);if(p===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-o,h=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,d,s,n);p===!0&&(o=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return we.orderBestPatterns(g),new AK(g)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var i=r/7,s=i/2;return Math.abs(i-e[0])<s&&Math.abs(i-e[1])<s&&Math.abs(3*i-e[2])<3*s&&Math.abs(i-e[3])<s&&Math.abs(i-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var i=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&r>=s&&o.get(r-s,e-s);)i[2]++,s++;if(e<s||r<s)return!1;for(;e>=s&&r>=s&&!o.get(r-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||r<s||i[1]>n)return!1;for(;e>=s&&r>=s&&o.get(r-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;var c=o.getHeight(),u=o.getWidth();for(s=1;e+s<c&&r+s<u&&o.get(r+s,e+s);)i[2]++,s++;if(e+s>=c||r+s>=u)return!1;for(;e+s<c&&r+s<u&&!o.get(r+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=c||r+s>=u||i[3]>=n)return!1;for(;e+s<c&&r+s<u&&o.get(r+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;var d=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var i=this.image,s=i.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(r,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(r,c)&&o[1]<=n;)o[1]++,c--;if(c<0||o[1]>n)return NaN;for(;c>=0&&i.get(r,c)&&o[0]<=n;)o[0]++,c--;if(o[0]>n)return NaN;for(c=e+1;c<s&&i.get(r,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!i.get(r,c)&&o[3]<n;)o[3]++,c++;if(c===s||o[3]>=n)return NaN;for(;c<s&&i.get(r,c)&&o[4]<n;)o[4]++,c++;if(o[4]>=n)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var i=this.image,s=i.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(c,r);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(c,r)&&o[1]<=n;)o[1]++,c--;if(c<0||o[1]>n)return NaN;for(;c>=0&&i.get(c,r)&&o[0]<=n;)o[0]++,c--;if(o[0]>n)return NaN;for(c=e+1;c<s&&i.get(c,r);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!i.get(c,r)&&o[3]<n;)o[3]++,c++;if(c===s||o[3]>=n)return NaN;for(;c<s&&i.get(c,r)&&o[4]<n;)o[4]++,c++;if(o[4]>=n)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,n),o=this.crossCheckVertical(r,Math.floor(s),e[2],i);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],i),!isNaN(s)&&(!a||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],i)))){for(var c=i/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var p=d[f];if(p.aboutEquals(c,o,s)){d[f]=p.combineEstimate(o,s,c),u=!0;break}}if(!u){var m=new jK(s,o,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=su(this.possibleCenters),s=i.next();!s.done;s=i.next()){var o=s.value;if(o.getCount()>=t.CENTER_QUORUM)if(a==null)a=o;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-o.getX())-Math.abs(a.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,i=0,s=0,o=this.possibleCenters.length;try{for(var c=su(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(i++,s+=d.getEstimatedModuleSize())}}catch(g){e={error:g}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(i<3)return!1;var f=s/o,h=0;try{for(var p=su(this.possibleCenters),m=p.next();!m.done;m=p.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(g){n={error:g}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return h<=.05*s},t.prototype.selectBestPatterns=function(){var e,r,n,a,i=this.possibleCenters.length;if(i<3)throw new ee;var s=this.possibleCenters,o;if(i>3){var c=0,u=0;try{for(var d=su(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,p=h.getEstimatedModuleSize();c+=p,u+=p*p}}catch(S){e={error:S}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}o=c/i;var m=Math.sqrt(u/i-o*o);s.sort(function(S,E){var j=Math.abs(E.getEstimatedModuleSize()-o),I=Math.abs(S.getEstimatedModuleSize()-o);return j<I?-1:j>I?1:0});for(var g=Math.max(.2*o,m),y=0;y<s.length&&s.length>3;y++){var x=s[y];Math.abs(x.getEstimatedModuleSize()-o)>g&&(s.splice(y,1),y--)}}if(s.length>3){var c=0;try{for(var v=su(s),b=v.next();!b.done;b=v.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(E){n={error:E}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(n)throw n.error}}o=c/s.length,s.sort(function(E,j){if(j.getCount()===E.getCount()){var I=Math.abs(j.getEstimatedModuleSize()-o),N=Math.abs(E.getEstimatedModuleSize()-o);return I<N?1:I>N?-1:0}else return j.getCount()-E.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),IK=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(It.NEED_RESULT_POINT_CALLBACK);var r=new TK(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(r,n,a);if(i<1)throw new ee("No pattern found in proccess finder.");var s=t.computeDimension(r,n,a,i),o=Lo.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,u=null;if(o.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),h=1-3/c,p=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(f-r.getY())),g=4;g<=16;g<<=1)try{u=this.findAlignmentInRegion(i,p,m,g);break}catch(b){if(!(b instanceof ee))throw b}var y=t.createTransform(r,n,a,u,s),x=t.sampleGrid(this.image,y,s),v;return u===null?v=[a,r,n]:v=[a,r,n,u],new Zw(x,v)},t.createTransform=function(e,r,n,a,i){var s=i-3.5,o,c,u,d;return a!==null?(o=a.getX(),c=a.getY(),u=s-3,d=u):(o=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=s,d=s),V5.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,d,3.5,s,e.getX(),e.getY(),r.getX(),r.getY(),o,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=Qw.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var i=Qe.round(we.distance(e,r)/a),s=Qe.round(we.distance(e,n)/a),o=Math.floor((i+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new ee("Dimensions could be not found.")}return o},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,r,n,a),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*s);return s=1,c<0?(s=r/(r-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,r,o,c),i-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var i=Math.abs(a-r)>Math.abs(n-e);if(i){var s=e;e=r,r=s,s=n,n=a,a=s}for(var o=Math.abs(n-e),c=Math.abs(a-r),u=-o/2,d=e<n?1:-1,f=r<a?1:-1,h=0,p=n+d,m=e,g=r;m!==p;m+=d){var y=i?g:m,x=i?m:g;if(h===1===this.image.get(y,x)){if(h===2)return Qe.distance(m,g,e,r);h++}if(u+=c,u>0){if(g===a)break;g+=f,u-=o}}return h===2?Qe.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var i=Math.floor(a*e),s=Math.max(0,r-i),o=Math.min(this.image.getWidth()-1,r+i);if(o-s<e*3)throw new ee("Alignment top exceeds estimated module size.");var c=Math.max(0,n-i),u=Math.min(this.image.getHeight()-1,n+i);if(u-c<e*3)throw new ee("Alignment bottom exceeds estimated module size.");var d=new EK(this.image,s,c,o-s,u-c,e,this.resultPointCallback);return d.find()},t}(),Iy=function(){function t(){this.decoder=new _K}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(It.PURE_BARCODE)!==void 0){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),a=t.NO_POINTS}else{var s=new IK(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(s.getBits(),r),a=s.getPoints()}n.getOther()instanceof Z5&&n.getOther().applyMirroredCorrection(a);var o=new $r(n.getText(),n.getRawBytes(),void 0,a,Ne.QR_CODE,void 0),c=n.getByteSegments();c!==null&&o.putMetadata(Er.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&o.putMetadata(Er.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(o.putMetadata(Er.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(Er.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new ee;var a=this.moduleSize(r,e),i=r[1],s=n[1],o=r[0],c=n[0];if(o>=c||i>=s)throw new ee;if(s-i!==c-o&&(c=o+(s-i),c>=e.getWidth()))throw new ee;var u=Math.round((c-o+1)/a),d=Math.round((s-i+1)/a);if(u<=0||d<=0)throw new ee;if(d!==u)throw new ee;var f=Math.floor(a/2);i+=f,o+=f;var h=o+Math.floor((u-1)*a)-c;if(h>0){if(h>f)throw new ee;o-=h}var p=i+Math.floor((d-1)*a)-s;if(p>0){if(p>f)throw new ee;i-=p}for(var m=new si(u,d),g=0;g<d;g++)for(var y=i+Math.floor(g*a),x=0;x<u;x++)e.get(o+Math.floor(x*a),y)&&m.set(x,g);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),i=e[0],s=e[1],o=!0,c=0;i<a&&s<n;){if(o!==r.get(i,s)){if(++c===5)break;o=!o}i++,s++}if(i===a||s===n)throw new ee;return(i-e[0])/7},t.NO_POINTS=new Array,t}(),OK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ye=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Qe.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var s=OK(e),o=s.next();!o.done;o=s.next()){var c=o.value;a[i++]=c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=nr.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),DK=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),PK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RK=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),i=t.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=t.detect(n,a)),new DK(a,i)},t.detect=function(e,r){for(var n,a,i=new Array,s=0,o=0,c=!1;s<r.getHeight();){var u=t.findVertices(r,s,o);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,o=0;try{for(var d=(n=void 0,PK(i)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(s=Math.trunc(Math.max(s,h[1].getY()))),h[3]!=null&&(s=Math.max(s,Math.trunc(h[3].getY())))}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}s+=t.ROW_STEP;continue}if(c=!0,i.push(u),!e)break;u[2]!=null?(o=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(o=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return i},t.findVertices=function(e,r,n){var a=e.getHeight(),i=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,a,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,a,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,i,s){for(var o=new Array(4),c=!1,u=new Int32Array(s.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,i,a,n,!1,s,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,i,--a,n,!1,s,u);if(f!=null)d=f;else{a++;break}}o[0]=new we(d[0],a),o[1]=new we(d[1],a),c=!0;break}}var h=a+1;if(c){for(var p=0,f=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,s,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,o[2]=new we(f[0],h),o[3]=new we(f[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&nr.fill(o,null),o},t.findGuardPattern=function(e,r,n,a,i,s,o){nr.fillWithin(o,0,o.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,h=s.length,p=i;d<a;d++){var m=e.get(d,n);if(m!==p)o[f]++;else{if(f===h-1){if(t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=o[0]+o[1],yt.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,p=!p}}return f===h-1&&t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,i=0,s=0,o=0;o<a;o++)i+=e[o],s+=r[o];if(i<s)return 1/0;var c=i/s;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,p=f>h?f-h:h-f;if(p>n)return 1/0;u+=p}return u/i},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),MK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(){function t(e,r){if(r.length===0)throw new Se;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),yt.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=MK(this.coefficients),s=i.next();!s.done;s=i.next()){var o=s.value;a=this.field.add(a,o)}}catch(f){r={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Se("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),s=n.length-r.length;yt.arraycopy(n,0,i,0,s);for(var o=s;o<n.length;o++)i[o]=this.field.add(r[o-s],n[o]);return new t(this.field,i)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Se("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Se("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,i=a.length,s=new Int32Array(n+i-1),o=0;o<n;o++)for(var c=r[o],u=0;u<i;u++)s[o+u]=this.field.add(s[o+u],this.field.multiply(c,a[u]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Se;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Me,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),LK=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Se;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new W5;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),BK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FK=function(t){BK(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var i=1,s=0;s<r;s++)a.expTable[s]=i,i=i*n%r;for(var s=0;s<r-1;s++)a.logTable[a.expTable[s]]=s;return a.zero=new Io(a,new Int32Array([0])),a.one=new Io(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Se;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Io(this,a)},e.PDF417_GF=new e(Ye.NUMBER_OF_CODEWORDS,3),e}(LK),$K=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UK=function(){function t(){this.field=FK.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,i,s=new Io(this.field,e),o=new Int32Array(r),c=!1,u=r;u>0;u--){var d=s.evaluateAt(this.field.exp(u));o[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=$K(n),p=h.next();!p.done;p=h.next()){var m=p.value,g=this.field.exp(e.length-1-m),y=new Io(this.field,new Int32Array([this.field.subtract(0,g),1]));f=f.multiply(y)}}catch(I){a={error:I}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}for(var x=new Io(this.field,o),v=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=v[0],w=v[1],S=this.findErrorLocations(b),E=this.findErrorMagnitudes(w,b,S),u=0;u<S.length;u++){var j=e.length-1-this.field.log(S[u]);if(j<0)throw fr.getChecksumInstance();e[j]=this.field.subtract(e[j],E[u])}return S.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var i=e,s=r,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(n/2);){var u=i,d=o;if(i=s,o=c,i.isZero())throw fr.getChecksumInstance();s=u;for(var f=this.field.getZero(),h=i.getCoefficient(i.getDegree()),p=this.field.inverse(h);s.getDegree()>=i.getDegree()&&!s.isZero();){var m=s.getDegree()-i.getDegree(),g=this.field.multiply(s.getCoefficient(s.getDegree()),p);f=f.add(this.field.buildMonomial(m,g)),s=s.subtract(i.multiplyByMonomial(m,g))}c=f.multiply(o).subtract(d).negative()}var y=c.getCoefficient(0);if(y===0)throw fr.getChecksumInstance();var x=this.field.inverse(y),v=c.multiply(x),b=s.multiply(x);return[v,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,i=1;i<this.field.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==r)throw fr.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),i=new Int32Array(a),s=1;s<=a;s++)i[a-s]=this.field.multiply(s,r.getCoefficient(s));for(var o=new Io(this.field,i),c=n.length,u=new Int32Array(c),s=0;s<c;s++){var d=this.field.inverse(n[s]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(o.evaluateAt(d));u[s]=this.field.multiply(f,h)}return u},t}(),Oy=function(){function t(e,r,n,a,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,i)}return t.prototype.constructor_1=function(e,r,n,a,i){var s=r==null||n==null,o=a==null||i==null;if(s&&o)throw new ee;s?(r=new we(0,a.getY()),n=new we(0,i.getY())):o&&(a=new we(e.getWidth()-1,r.getY()),i=new we(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new we(c.getX(),u);n?a=d:s=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new we(f.getX(),h);n?i=p:o=p}return new t(this.image,a,i,s,o)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),zK=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),e2=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(s,o,c,u,d,f){if(s==="%%")return"%";if(r[++n]!==void 0){s=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,p;switch(f){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(s);break;case"p":p=parseFloat(r[n]).toPrecision(s);break;case"e":p=parseFloat(r[n]).toExponential(s);break;case"x":p=parseInt(r[n]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[n],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(c),g=c&&c[0]+""=="0"?"0":" ";p.length<m;)p=o!==void 0?p+g:g+p;return p}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),HK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q5=function(){function t(e){this.boundingBox=new Oy(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new e2,a=0;try{for(var i=HK(this.codewords),s=i.next();!s.done;s=i.next()){var o=s.value;if(o==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),WK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VK=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],s;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},ju=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,i=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>n?(n=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===n&&a.push(p.getKey())};try{for(var s=WK(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=VK(o.value,2),u=c[0],d=c[1];i(u,d)}}catch(f){e={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return Ye.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),GK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nS=function(t){GK(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=pv(this.getCodewords()),i=a.next();!i.done;i=a.next()){var s=i.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),s=this._isLeft?a.getBottomLeft():a.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,d=1,f=0,h=o;h<c;h++)if(n[h]!=null){var p=n[h],m=p.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=p.getRowNumber();else if(m<0||p.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var g=void 0;d>2?g=(d-2)*m:g=m;for(var y=g>=h,x=1;x<=g&&!y;x++)y=n[h-x]!=null;y?n[h]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var s=pv(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var u=c.getRowNumber();if(u>=i.length)continue;i[u]++}}}catch(d){r={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),u=-1,d=s;d<o;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),i=new ju,s=new ju,o=new ju,c=new ju;try{for(var u=pv(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(h*3+1);break;case 1:c.setValue(h/3),o.setValue(h%3);break;case 2:i.setValue(h+1);break}}}}catch(g){r={error:g}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(i.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<Ye.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>Ye.MAX_ROWS_IN_BARCODE)return null;var m=new zK(i.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var i=r[a];if(r[a]!=null){var s=i.getValue()%30,o=i.getRowNumber();if(o>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:s+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Q5),XK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qK=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ye.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(i=t.adjustRowNumberIfValid(a,i,o),o.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(i=t.adjustRowNumberIfValid(a,i,o),o.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var s=n[r],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=o[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=o[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=o[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=o[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=o[r+2],u[13]=c[r+2]);try{for(var d=XK(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(s,h))return}}catch(p){a={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new e2,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){r.format("    |   ");continue}r.format(" %3d|%3d",i.getRowNumber(),i.getValue())}r.format("%n")}return r.toString()},t}(),YK=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),KK=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ye.SYMBOL_TABLE.length;e++)for(var r=Ye.SYMBOL_TABLE[e],n=r&1,a=0;a<Ye.BARS_IN_MODULE;a++){for(var i=0;(r&1)===n;)i+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ye.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ye.BARS_IN_MODULE-a-1]=Math.fround(i/Ye.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Qe.sum(e),n=new Int32Array(Ye.BARS_IN_MODULE),a=0,i=0,s=0;s<Ye.MODULES_IN_CODEWORD;s++){var o=r/(2*Ye.MODULES_IN_CODEWORD)+s*r/Ye.MODULES_IN_CODEWORD;i+e[a]<=o&&(i+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Ye.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Qe.sum(e),n=new Array(Ye.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var i=Ey.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var o=0;o<t.RATIOS_TABLE.length;o++){for(var c=0,u=t.RATIOS_TABLE[o],d=0;d<Ye.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=i)break}c<i&&(i=c,s=Ye.SYMBOL_TABLE[o])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ye.SYMBOL_TABLE.length).map(function(e){return new Array(Ye.BARS_IN_MODULE)}),t}(),ZK=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),aS=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),QK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JK=function(t){QK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(_n),eZ=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new JK;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new Yw;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),tZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rZ=function(t){tZ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(_n),nZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aZ=function(t){nZ(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Se("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new rZ;a=Le.MAX_VALUE}this.buf=nr.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new Yw;this.ensureCapacity(this.count+a),yt.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return nr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(eZ),ft;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ft||(ft={}));function J5(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var dh;function os(t){if(typeof dh>"u"&&(dh=J5()),dh===null)throw new Error("BigInt is not supported!");return dh(t)}function iZ(){var t=[];t[0]=os(1);var e=os(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var sZ=function(){function t(){}return t.decode=function(e,r){var n=new Me(""),a=rr.ISO8859_1;n.enableDecoding(a);for(var i=1,s=e[i++],o=new ZK;i<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(s,e,a,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:rr.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,o);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new me;default:i--,i=t.textCompaction(e,i,n);break}if(i<e.length)s=e[i++];else throw me.getFormatInstance()}if(n.length()===0)throw me.getFormatInstance();var c=new pm(null,n.toString(),null,r);return c.setOther(o),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw me.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)a[i]=e[r];n.setSegmentIndex(Le.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Me;r=t.textCompaction(e,r,s),n.setFileId(s.toString());var o=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Me;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Me;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Me;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Me;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Le.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new Me;r=t.numericCompaction(e,r+1,h),n.setTimestamp(aS.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new Me;r=t.numericCompaction(e,r+1,p),n.setChecksum(Le.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new Me;r=t.numericCompaction(e,r+1,m),n.setFileSize(aS.parseLong(m.toString()));break;default:throw me.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw me.getFormatInstance()}if(o!==-1){var g=r-o;n.isLastSegment()&&g--,n.setOptionalData(nr.copyOfRange(e,o,o+g))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),i=new Int32Array((e[0]-r)*2),s=0,o=!1;r<e[0]&&!o;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[s]=c/30,a[s+1]=c%30,s+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,o=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],i[s]=c,s++;break}}return t.decodeTextCompaction(a,i,s,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var i=ft.ALPHA,s=ft.ALPHA,o=0;o<n;){var c=e[o],u="";switch(i){case ft.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:i=ft.LOWER;break;case t.ML:i=ft.MIXED;break;case t.PS:s=i,i=ft.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ft.ALPHA;break}break;case ft.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:s=i,i=ft.ALPHA_SHIFT;break;case t.ML:i=ft.MIXED;break;case t.PS:s=i,i=ft.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ft.ALPHA;break}break;case ft.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:i=ft.PUNCT;break;case 26:u=" ";break;case t.LL:i=ft.LOWER;break;case t.AL:i=ft.ALPHA;break;case t.PS:s=i,i=ft.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ft.ALPHA;break}break;case ft.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:i=ft.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ft.ALPHA;break}break;case ft.ALPHA_SHIFT:if(i=s,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=ft.ALPHA;break}break;case ft.PUNCT_SHIFT:if(i=s,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:i=ft.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ft.ALPHA;break}break}u!==""&&a.append(u),o++}},t.byteCompaction=function(e,r,n,a,i){var s=new aZ,o=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[o++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(o%5===0&&o>0){for(var h=0;h<6;++h)s.write(Number(os(c)>>os(8*(5-h))));c=0,o=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=f);for(var p=0;p<o;p++)s.write(d[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(o%5===0&&o>0){for(var h=0;h<6;++h)s.write(Number(os(c)>>os(8*(5-h))));c=0,o=0}}break}return i.append(la.decode(s.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,i=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var o=e[r++];if(r===e[0]&&(i=!0),o<t.TEXT_COMPACTION_MODE_LATCH)s[a]=o,a++;else switch(o){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||o===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(t.decodeBase900toBase10(s,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=os(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*os(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new me;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=J5()?iZ():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),ou=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oZ=function(){function t(){}return t.decode=function(e,r,n,a,i,s,o){for(var c=new Oy(e,r,n,a,i),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,s,o)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,s,o)),f=t.merge(u,d),f==null)throw ee.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))c=p;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var g=u!=null,y=1;y<=m;y++){var x=g?y:m-y;if(f.getDetectionResultColumn(x)===void 0){var v=void 0;x===0||x===m?v=new nS(c,x===0):v=new Q5(c),f.setDetectionResultColumn(x,v);for(var b=-1,w=b,S=c.getMinY();S<=c.getMaxY();S++){if(b=t.getStartColumn(f,x,S,g),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var E=t.detectCodeword(e,c.getMinX(),c.getMaxX(),g,b,S,s,o);E!=null&&(v.setCodeword(S,E),w=b,s=Math.min(s,E.getWidth()),o=Math.max(o,E.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Oy.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new qK(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=t.getMax(a),s=0;try{for(var o=ou(a),c=o.next();!c.done;c=o.next()){var u=c.value;if(s+=i-u,u>0)break}}catch(p){r={error:p}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;s>0&&d[f]==null;f++)s--;for(var h=0,f=a.length-1;f>=0&&(h+=i-a[f],!(a[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(s,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var i=ou(e),s=i.next();!s.done;s=i.next()){var o=s.value;a=Math.max(a,o)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,i,s){for(var o=new nS(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,f,i,s);h!=null&&(o.setCodeword(f,h),a?d=h.getStartX():d=h.getEndX())}return o},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>Ye.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[o][c+1].getValue(),d=o*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(s.push(d),i.push(u))}for(var f=new Array(i.length),h=0;h<f.length;h++)f[h]=i[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Ye.toIntArray(n),Ye.toIntArray(s),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,i){for(var s=new Int32Array(a.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)r[a[c]]=i[c][s[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof fr;if(!u)throw d}if(s.length===0)throw fr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<i[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw fr.getChecksumInstance()}throw fr.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,i,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new ju;var u=0;try{for(var d=ou(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var p=(a=void 0,ou(h.getCodewords())),m=p.next();!m.done;m=p.next()){var g=m.value;if(g!=null){var y=g.getRowNumber();if(y>=0){if(y>=s.length)continue;s[y][u].setValue(g.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return s},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var i,s,o=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-o)&&(c=e.getDetectionResultColumn(r-o).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-o)&&(c=e.getDetectionResultColumn(r-o).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-o);){r-=o;try{for(var d=(i=void 0,ou(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+o*u*(h.getEndX()-h.getStartX())}}catch(p){i={error:p}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,i,s,o,c){i=t.adjustCodewordStartColumn(e,r,n,a,i,s);var u=t.getModuleBitCount(e,r,n,a,i,s);if(u==null)return null;var d,f=Qe.sum(u);if(a)d=i+f;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}d=i,i=d-f}if(!t.checkCodewordSkew(f,o,c))return null;var m=KK.getDecodedValue(u),g=Ye.getCodeword(m);return g===-1?null:new YK(i,d,t.getCodewordBucketNumber(m),g)},t.getModuleBitCount=function(e,r,n,a,i,s){for(var o=i,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?o<n:o>=r)&&u<c.length;)e.get(o,s)===f?(c[u]++,o+=d):(u++,f=!f);return u===c.length||o===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,i,s){for(var o=i,c=a?-1:1,u=0;u<2;u++){for(;(a?o>=r:o<n)&&a===e.get(o,s);){if(Math.abs(i-o)>t.CODEWORD_SKEW_SIZE)return i;o+=c}c=-c,a=!a}return o},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw me.getFormatInstance();var a=1<<r+1,i=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var s=sZ.decode(e,""+r);return s.setErrorsCorrected(i),s.setErasures(n.length),s},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw fr.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw me.getFormatInstance();var n=e[0];if(n>e.length)throw me.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw me.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new e2,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new UK,t}(),lZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dy=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw ee.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof me||n instanceof fr?ee.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,i,s=new Array,o=RK.detectMultiple(e,r,n);try{for(var c=lZ(o.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=oZ.decode(o.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new $r(f.getText(),f.getRawBytes(),void 0,d,Ne.PDF_417);h.putMetadata(Er.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(Er.PDF417_EXTRA_METADATA,p),s.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return s.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Le.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),cZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iS=function(t){cZ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(_n),sS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uZ=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(It.TRY_HARDER)!==void 0,n=e==null?null:e.get(It.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(s){return s===Ne.UPC_A||s===Ne.UPC_E||s===Ne.EAN_13||s===Ne.EAN_8||s===Ne.CODABAR||s===Ne.CODE_39||s===Ne.CODE_93||s===Ne.CODE_128||s===Ne.ITF||s===Ne.RSS_14||s===Ne.RSS_EXPANDED});i&&!r&&a.push(new Cu(e)),n.includes(Ne.QR_CODE)&&a.push(new Iy),n.includes(Ne.DATA_MATRIX)&&a.push(new Ty),n.includes(Ne.AZTEC)&&a.push(new jy),n.includes(Ne.PDF_417)&&a.push(new Dy),i&&r&&a.push(new Cu(e))}a.length===0&&(r||a.push(new Cu(e)),a.push(new Iy),a.push(new Ty),a.push(new jy),a.push(new Dy),r&&a.push(new Cu(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=sS(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new iS("No readers where selected, nothing can be read.");try{for(var a=sS(this.readers),i=a.next();!i.done;i=a.next()){var s=i.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof iS)continue}}}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new ee("No MultiFormat Readers were able to detect the code.")},t}(),dZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fZ=function(t){dZ(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,i=new uZ;return i.setHints(r),a=t.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(Bc),hZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){hZ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Dy,r)||this}return e})(Bc);var pZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){pZ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Iy,r)||this}return e})(Bc);var Py;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Py||(Py={}));const fh=Py;var eT=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Os(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,i=r.length;i<=e;i++){var s=n.multiply(new Os(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));r.push(s),n=s}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Se("No error correction bytes");var n=e.length-r;if(n<=0)throw new Se("No data bytes provided");var a=this.buildGenerator(r),i=new Int32Array(n);yt.arraycopy(e,0,i,0,n);var s=new Os(this.field,i);s=s.multiplyByMonomial(r,1);for(var o=s.divide(a)[1],c=o.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;yt.arraycopy(c,0,e,n+u,c.length)},t}(),Au=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),s=0;s<i-1;s++)for(var o=n[s],c=0;c<a-1;c++){var u=o[c];u===o[c+1]&&u===n[s+1][c]&&u===n[s+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),s=0;s<i;s++)for(var o=0;o<a;o++){var c=n[s];o+6<a&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(t.isWhiteHorizontal(c,o-4,o)||t.isWhiteHorizontal(c,o+7,o+11))&&r++,s+6<i&&n[s][o]===1&&n[s+1][o]===0&&n[s+2][o]===1&&n[s+3][o]===1&&n[s+4][o]===1&&n[s+5][o]===0&&n[s+6][o]===1&&(t.isWhiteVertical(n,o,s-4,s)||t.isWhiteVertical(n,o,s+7,s+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),s=0;s<i;s++)for(var o=n[s],c=0;c<a;c++)o[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,i;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:i=n*r,a=(i&1)+i%3;break;case 6:i=n*r,a=(i&1)+i%3&1;break;case 7:i=n*r,a=i%3+(n+r&1)&1;break;default:throw new Se("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<a;o++){for(var c=0,u=-1,d=0;d<i;d++){var f=r?s[o][d]:s[d][o];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),mZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gZ=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=mZ(this.bytes),i=a.next();!i.done;i=a.next()){var s=i.value;nr.fill(s,e)}}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],s=r.bytes[n],o=0,c=this.width;o<c;++o)if(i[o]!==s[o])return!1;return!0},t.prototype.toString=function(){for(var e=new Me,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],i=0,s=this.width;i<s;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Ry=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Me;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),vZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wt=function(t){vZ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(_n),oS=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,a,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,a,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new hr;t.makeTypeInfoBits(e,r,a);for(var i=0,s=a.getSize();i<s;++i){var o=a.get(a.getSize()-1-i),c=t.TYPE_INFO_COORDINATES[i],u=c[0],d=c[1];if(n.setBoolean(u,d,o),i<8){var f=n.getWidth()-i-1,h=8;n.setBoolean(f,h,o)}else{var f=8,h=n.getHeight()-7+(i-8);n.setBoolean(f,h,o)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new hr;t.makeVersionInfoBits(e,n);for(var a=6*3-1,i=0;i<6;++i)for(var s=0;s<3;++s){var o=n.get(a);a--,r.setBoolean(i,r.getHeight()-11+s,o),r.setBoolean(r.getHeight()-11+s,i,o)}}},t.embedDataBits=function(e,r,n){for(var a=0,i=-1,s=n.getWidth()-1,o=n.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<n.getHeight();){for(var c=0;c<2;++c){var u=s-c;if(t.isEmpty(n.get(u,o))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Au.getDataMaskBit(r,u,o)&&(d=!d),n.setBoolean(u,o,d)}}o+=i}i=-i,o+=i,s-=2}if(a!==e.getSize())throw new wt("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Le.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Se("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Ry.isValidMaskPattern(r))throw new wt("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var i=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(i,10);var s=new hr;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new wt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new wt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new wt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new wt;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new wt;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var i=t.POSITION_ADJUSTMENT_PATTERN[a],s=0;s<5;++s)n.setNumber(e+s,r+a,i[s])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var i=t.POSITION_DETECTION_PATTERN[a],s=0;s<7;++s)n.setNumber(e+s,r+a,i[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,s=a.length;i!==s;i++){var o=a[i];if(o>=0)for(var c=0;c!==s;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,o))&&t.embedPositionAdjustmentPattern(u-2,o-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),xZ=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),lS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Au.applyMaskPenaltyRule1(e)+Au.applyMaskPenaltyRule2(e)+Au.applyMaskPenaltyRule3(e)+Au.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(fh.CHARACTER_SET)!==void 0;i&&(a=n.get(fh.CHARACTER_SET).toString());var s=this.chooseMode(e,a),o=new hr;if(s===_t.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=rr.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var u=new hr;this.appendBytes(e,s,u,a);var d;if(n!==null&&n.get(fh.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(fh.QR_VERSION).toString(),10);d=Lo.getVersionForNumber(f);var h=this.calculateBitsNeeded(s,o,u,d);if(!this.willFit(h,d,r))throw new wt("Data too big for requested version")}else d=this.recommendVersion(r,s,o,u);var p=new hr;p.appendBitArray(o);var m=s===_t.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,s,p),p.appendBitArray(u);var g=d.getECBlocksForLevel(r),y=d.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(y,p);var x=this.interleaveWithECBytes(p,d.getTotalCodewords(),y,g.getNumBlocks()),v=new Ry;v.setECLevel(r),v.setMode(s),v.setVersion(d);var b=d.getDimensionForVersion(),w=new gZ(b,b),S=this.chooseMaskPattern(x,r,d,w);return v.setMaskPattern(S),oS.buildMatrix(x,r,d,S,w),v.setMatrix(w),v},t.recommendVersion=function(e,r,n,a){var i=this.calculateBitsNeeded(r,n,a,Lo.getVersionForNumber(1)),s=this.chooseVersion(i,e),o=this.calculateBitsNeeded(r,n,a,s);return this.chooseVersion(o,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),rr.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return _t.KANJI;for(var n=!1,a=!1,i=0,s=e.length;i<s;++i){var o=e.charAt(i);if(t.isDigit(o))n=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)a=!0;else return _t.BYTE}return a?_t.ALPHANUMERIC:n?_t.NUMERIC:_t.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=la.encode(e,rr.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=r[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var i=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<Ry.NUM_MASK_PATTERNS;o++){oS.buildMatrix(e,r,n,o,a);var c=this.calculateMaskPenalty(a);c<i&&(i=c,s=o)}return s},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Lo.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new wt("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),i=r.getECBlocksForLevel(n),s=i.getTotalECCodewords(),o=a-s,c=(e+7)/8;return o>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new wt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var i=r.getSize()&7;if(i>0)for(var a=i;a<8;a++)r.appendBit(!1);for(var s=e-r.getSizeInBytes(),a=0;a<s;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new wt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,i,s){if(a>=n)throw new wt("Block ID too large");var o=e%n,c=n-o,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,p=u-f,m=d-h;if(p!==m)throw new wt("EC bytes mismatch");if(n!==c+o)throw new wt("RS blocks mismatch");if(e!==(f+p)*c+(h+m)*o)throw new wt("Total bytes mismatch");a<c?(i[0]=f,s[0]=p):(i[0]=h,s[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var i,s,o,c;if(e.getSizeInBytes()!==n)throw new wt("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,p=0;p<a;++p){var m=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,p,m,g);var y=m[0],x=new Uint8Array(y);e.toBytes(8*u,x,0,y);var v=t.generateECBytes(x,g[0]);h.push(new xZ(x,v)),d=Math.max(d,y),f=Math.max(f,v.length),u+=m[0]}if(n!==u)throw new wt("Data bytes does not match offset");for(var b=new hr,p=0;p<d;++p)try{for(var w=(i=void 0,lS(h)),S=w.next();!S.done;S=w.next()){var E=S.value,x=E.getDataBytes();p<x.length&&b.appendBits(x[p],8)}}catch(T){i={error:T}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}for(var p=0;p<f;++p)try{for(var j=(o=void 0,lS(h)),I=j.next();!I.done;I=j.next()){var E=I.value,v=E.getErrorCorrectionBytes();p<v.length&&b.appendBits(v[p],8)}}catch(T){o={error:T}}finally{try{I&&!I.done&&(c=j.return)&&c.call(j)}finally{if(o)throw o.error}}if(r!==b.getSizeInBytes())throw new wt("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),i=0;i<n;i++)a[i]=e[i]&255;new eT(mn.QR_CODE_FIELD_256).encode(a,r);for(var s=new Uint8Array(r),i=0;i<r;i++)s[i]=a[n+i];return s},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var i=n.getCharacterCountBits(r);if(e>=1<<i)throw new wt(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},t.appendBytes=function(e,r,n,a){switch(r){case _t.NUMERIC:t.appendNumericBytes(e,n);break;case _t.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case _t.BYTE:t.append8BitBytes(e,n,a);break;case _t.KANJI:t.appendKanjiBytes(e,n);break;default:throw new wt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var i=t.getDigit(e.charAt(a));if(a+2<n){var s=t.getDigit(e.charAt(a+1)),o=t.getDigit(e.charAt(a+2));r.appendBits(i*100+s*10+o,10),a+=3}else if(a+1<n){var s=t.getDigit(e.charAt(a+1));r.appendBits(i*10+s,7),a+=2}else r.appendBits(i,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var i=t.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new wt;if(a+1<n){var s=t.getAlphanumericCode(e.charCodeAt(a+1));if(s===-1)throw new wt;r.appendBits(i*45+s,11),a+=2}else r.appendBits(i,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=la.encode(e,n)}catch(c){throw new wt(c)}for(var i=0,s=a.length;i!==s;i++){var o=a[i];r.appendBits(o,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=la.encode(e,rr.SJIS)}catch(f){throw new wt(f)}for(var a=n.length,i=0;i<a;i+=2){var s=n[i]&255,o=n[i+1]&255,c=s<<8&4294967295|o,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new wt("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(_t.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=rr.UTF8.getName(),t})();var yZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){yZ(e,t);function e(r,n,a,i,s,o,c,u){var d=t.call(this,o,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=i,d.top=s,i+o>n||s+c>a)throw new Se("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(o,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Se("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return yt.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,i=new Uint8ClampedArray(a),s=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return yt.arraycopy(this.yuvData,s,i,0,a),i;for(var o=0;o<n;o++){var c=o*r;yt.arraycopy(this.yuvData,s,i,c,r),s+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),i=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<n;o++){for(var c=o*r,u=0;u<r;u++){var d=i[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,i=0,s=this.top*this.dataWidth+this.left;i<n;i++,s+=this.dataWidth)for(var o=s+r/2,c=s,u=s+r-1;c<o;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new Kw(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(hm);var bZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){bZ(e,t);function e(r,n,a,i,s,o,c){var u=t.call(this,n,a)||this;if(u.dataWidth=i,u.dataHeight=s,u.left=o,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),h=0;h<d;h++){var p=r[h],m=p>>16&255,g=p>>7&510,y=p&255;f[h]=(m+g+y)/4&255}u.luminances=f}else u.luminances=r;if(i===void 0&&(u.dataWidth=n),s===void 0&&(u.dataHeight=a),o===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new Se("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Se("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return yt.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,i=new Uint8ClampedArray(a),s=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return yt.arraycopy(this.luminances,s,i,0,a),i;for(var o=0;o<n;o++){var c=o*r;yt.arraycopy(this.luminances,s,i,c,r),s+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Kw(this)},e})(hm);var wZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Z=function(t){wZ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(rr),kZ=function(){function t(){}return t.ISO_8859_1=rr.ISO8859_1,t}(),My,NZ=301,SZ=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=NZ);return{LOG:t,ALOG:e}};My=SZ([],[]),My.LOG;My.ALOG;var cS;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(cS||(cS={}));var uS=129,tT=230,EZ=231,CZ=235,jZ=236,AZ=237,TZ=238,IZ=239,OZ=240,mv=254,DZ=254,dS="[)>05",fS="[)>06",hS="",st=0,kr=1,qr=2,Jt=3,lr=4,Pr=5,PZ=function(){function t(){}return t.prototype.getEncodingMode=function(){return st},t.prototype.encode=function(e){var r=Sa.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Sa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Pr:e.writeCodeword(EZ),e.signalEncoderChange(Pr);return;case kr:e.writeCodeword(tT),e.signalEncoderChange(kr);return;case Jt:e.writeCodeword(TZ),e.signalEncoderChange(Jt);break;case qr:e.writeCodeword(IZ),e.signalEncoderChange(qr);break;case lr:e.writeCodeword(OZ),e.signalEncoderChange(lr);break;default:throw new Error("Illegal mode: "+a)}else Sa.isExtendedASCII(n)?(e.writeCodeword(CZ),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Sa.isDigit(e)&&Sa.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),RZ=function(){function t(){}return t.prototype.getEncodingMode=function(){return Pr},t.prototype.encode=function(e){var r=new Me;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=Sa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(st);break}}var i=r.length()-1,s=1,o=e.getCodewordCount()+i+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(i<=249)r.setCharAt(0,qe.getCharAt(i));else if(i<=1555)r.setCharAt(0,qe.getCharAt(Math.floor(i/250)+249)),r.insert(1,qe.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),t2=function(){function t(){}return t.prototype.getEncodingMode=function(){return kr},t.prototype.encodeMaximal=function(e){for(var r=new Me,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,r),r.length()%3===0&&(a=e.pos,i=r.length())}if(i!==r.length()){var o=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(tT),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Me;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),i=Math.floor(r.length()/3)*2,s=e.getCodewordCount()+i;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Me;for(r.length()%3===2&&o!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||o!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=Sa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(st);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var i=r.length(),s=r.toString().substring(0,i-a);r.setLengthToZero(),r.append(s),e.pos--;var o=e.getCurrentChar();return a=this.encodeChar(o,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var s=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(mv)}else if(s===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(mv),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(s>0||e.hasMoreCharacters())&&e.writeCodeword(mv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(st)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,i=new Me;return i.append(n),i.append(a),i.toString()},t}(),MZ=function(){function t(){}return t.prototype.getEncodingMode=function(){return lr},t.prototype.encode=function(e){for(var r=new Me;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var i=r.toString().substring(4);r.setLengthToZero(),r.append(i);var s=Sa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(st);break}}}r.append(qe.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,o=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(st)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(qe.getCharAt(e-64)):Sa.illegalCharacter(qe.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,i=r>=3?e.charAt(2).charCodeAt(0):0,s=r>=4?e.charAt(3).charCodeAt(0):0,o=(n<<18)+(a<<12)+(i<<6)+s,c=o>>16&255,u=o>>8&255,d=o&255,f=new Me;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),LZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=function(){function t(e,r,n,a,i,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return t.lookup=function(e,r,n,a,i){var s,o;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var c=BZ($Z),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){s={error:f}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),FZ=function(t){LZ(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(et),$Z=[new et(!1,3,5,8,8,1),new et(!1,5,7,10,10,1),new et(!0,5,7,16,6,1),new et(!1,8,10,12,12,1),new et(!0,10,11,14,6,2),new et(!1,12,12,14,14,1),new et(!0,16,14,24,10,1),new et(!1,18,14,16,16,1),new et(!1,22,18,18,18,1),new et(!0,22,18,16,10,2),new et(!1,30,20,20,20,1),new et(!0,32,24,16,14,2),new et(!1,36,24,22,22,1),new et(!1,44,28,24,24,1),new et(!0,49,28,22,14,2),new et(!1,62,36,14,14,4),new et(!1,86,42,16,16,4),new et(!1,114,48,18,18,4),new et(!1,144,56,20,20,4),new et(!1,174,68,22,22,4),new et(!1,204,84,24,24,4,102,42),new et(!1,280,112,14,14,16,140,56),new et(!1,368,144,16,16,16,92,36),new et(!1,456,192,18,18,16,114,48),new et(!1,576,224,20,20,16,144,56),new et(!1,696,272,22,22,16,174,68),new et(!1,816,336,24,24,16,136,56),new et(!1,1050,408,18,18,36,175,68),new et(!1,1304,496,20,20,36,163,62),new FZ],UZ=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(o){return o.charCodeAt(0)}),n=new Me,a=0,i=r.length;a<i;a++){var s=String.fromCharCode(r[a]&255);if(s==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new Me,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=et.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),zZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HZ=function(t){zZ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Jt},e.prototype.encode=function(r){for(var n=new Me;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(r,n);var s=Sa.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){r.signalEncoderChange(st);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Sa.illegalCharacter(qe.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),i=n.length();r.pos-=i,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(DZ),r.getNewEncoding()<0&&r.signalEncoderChange(st)},e}(t2),WZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VZ=function(t){WZ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qr},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(t2),Sa=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=uS+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,i){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var s=new t2,o=[new PZ,s,new VZ,new HZ,new MZ,new RZ],c=new UZ(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(dS)&&e.endsWith(hS)?(c.writeCodeword(jZ),c.setSkipAtEnd(2),c.pos+=dS.length):e.startsWith(fS)&&e.endsWith(hS)&&(c.writeCodeword(AZ),c.setSkipAtEnd(2),c.pos+=fS.length);var u=st;for(i&&(s.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==st&&u!==Pr&&u!==lr&&c.writeCodeword("þ");var h=c.getCodewords();for(h.length()<f&&h.append(uS);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Jt&&a===Jt){for(var i=Math.min(r+3,e.length),s=r;s<i;s++)if(!this.isNativeX12(e.charCodeAt(s)))return st}else if(n===lr&&a===lr){for(var i=Math.min(r+4,e.length),s=r;s<i;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return st}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===st?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,s=new Uint8Array(6),o=[];;){if(r+i===e.length){nr.fill(s,0),nr.fill(o,0);var c=this.findMinimums(a,o,Le.MAX_VALUE,s),u=this.getMinimumCount(s);if(o[st]===c)return st;if(u===1){if(s[Pr]>0)return Pr;if(s[lr]>0)return lr;if(s[qr]>0)return qr;if(s[Jt]>0)return Jt}return kr}var d=e.charCodeAt(r+i);if(i++,this.isDigit(d)?a[st]+=.5:this.isExtendedASCII(d)?(a[st]=Math.ceil(a[st]),a[st]+=2):(a[st]=Math.ceil(a[st]),a[st]++),this.isNativeC40(d)?a[kr]+=2/3:this.isExtendedASCII(d)?a[kr]+=8/3:a[kr]+=4/3,this.isNativeText(d)?a[qr]+=2/3:this.isExtendedASCII(d)?a[qr]+=8/3:a[qr]+=4/3,this.isNativeX12(d)?a[Jt]+=2/3:this.isExtendedASCII(d)?a[Jt]+=13/3:a[Jt]+=10/3,this.isNativeEDIFACT(d)?a[lr]+=3/4:this.isExtendedASCII(d)?a[lr]+=17/4:a[lr]+=13/4,this.isSpecialB256(d)?a[Pr]+=4:a[Pr]++,i>=4){if(nr.fill(s,0),nr.fill(o,0),this.findMinimums(a,o,Le.MAX_VALUE,s),o[st]<this.min(o[Pr],o[kr],o[qr],o[Jt],o[lr]))return st;if(o[Pr]<o[st]||o[Pr]+1<this.min(o[kr],o[qr],o[Jt],o[lr]))return Pr;if(o[lr]+1<this.min(o[Pr],o[kr],o[qr],o[Jt],o[st]))return lr;if(o[qr]+1<this.min(o[Pr],o[kr],o[lr],o[Jt],o[st]))return qr;if(o[Jt]+1<this.min(o[Pr],o[kr],o[lr],o[qr],o[st]))return Jt;if(o[kr]+1<this.min(o[st],o[Pr],o[lr],o[qr])){if(o[kr]<o[Jt])return kr;if(o[kr]===o[Jt]){for(var f=r+i+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Jt;if(!this.isNativeX12(h))break;f++}return kr}}}}},t.min=function(e,r,n,a,i){var s=Math.min(e,Math.min(r,Math.min(n,a)));return i===void 0?s:Math.min(s,i)},t.findMinimums=function(e,r,n,a){for(var i=0;i<6;i++){var s=r[i]=Math.ceil(e[i]);n>s&&(n=s,nr.fill(a,0)),n===s&&(a[i]=a[i]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Le.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),gv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pS=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return la.encode(e,this.charset)!=null}catch{return!1}},t}(),GZ=function(){function t(e,r,n){var a,i,s,o,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new pS(_Z.forName(N))}),this.encoders=[];var d=[];d.push(new pS(kZ.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var m=(a=void 0,gv(d)),g=m.next();!g.done;g=m.next()){var y=g.value,x=e.charAt(h),v=x.charCodeAt(0);if(v===n||y.canEncode(x)){p=!0;break}}}catch(N){a={error:N}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}if(!p)try{for(var b=(s=void 0,gv(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var y=w.value;if(y.canEncode(e.charAt(h))){d.push(y),p=!0;break}}}catch(N){s={error:N}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(s)throw s.error}}p||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var S=0;try{for(var E=gv(d),j=E.next();!j.done;j=E.next()){var y=j.value;this.encoders[S++]=y}}catch(N){c={error:N}}finally{try{j&&!j.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}var I=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){I=h;break}}this.priorityEncoderIndex=I}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return la.encode(qe.getCharAt(e),this.encoders[r].name)},t}(),XZ=3,qZ=function(){function t(e,r,n){this.fnc1=n;var a=new GZ(e,r,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var s=e.charAt(i).charCodeAt(0);this.bytes[i]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Me,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,i,s){var o=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(o===s||r.canEncode(o,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(o===s||r.canEncode(o,d))&&this.addEdge(n,a+1,new mS(o,r,d,i,s))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,i=new mS[a+1][r.length()];this.addEdges(e,r,i,0,null,n);for(var s=1;s<=a;s++){for(var o=0;o<r.length();o++)i[s][o]!=null&&s<a&&this.addEdges(e,r,i,s,i[s][o],n);for(var o=0;o<r.length();o++)i[s-1][o]=null}for(var c=-1,u=Le.MAX_VALUE,o=0;o<r.length();o++)if(i[a][o]!=null){var d=i[a][o];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=i[a][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=r.encode(h.c,h.encoderIndex),s=p.length-1;s>=0;s--)f.unshift(p[s]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var g=[],s=0;s<g.length;s++)g[s]=f[s];return g},t}(),mS=function(){function t(e,r,n,a,i){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var s=this.isFNC1()?1:r.encode(e,n).length,o=a===null?0:a.encoderIndex;o!==n&&(s+=XZ),a!=null&&(s+=a.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),YZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var gS;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(gS||(gS={}));(function(t){YZ(e,t);function e(r,n,a,i,s){var o=t.call(this,r,n,a)||this;return o.shape=i,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(qZ);var KZ=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),vS=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),ZZ=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),QZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r2=function(t){QZ(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Le.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(ZZ),JZ=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eQ=function(t){JZ(e,t);function e(r,n,a){var i=t.call(this,r,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(r2);function tQ(t,e,r){return new eQ(t,e,r)}function lu(t,e,r){return new r2(t,e,r)}var rQ=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ds=0,np=1,ia=2,rT=3,Ya=4,nQ=new r2(null,0,0),vv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],aQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function iQ(t){var e,r;try{for(var n=aQ(t),a=n.next();!a.done;a=n.next()){var i=a.value;nr.fill(i,-1)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Ds][Ya]=0,t[np][Ya]=0,t[np][Ds]=28,t[rT][Ya]=0,t[ia][Ya]=0,t[ia][Ds]=15,t}var nT=iQ(nr.createInt32Array(6,6)),sQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oQ=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=vv[this.mode][e];a=lu(a,i&65535,i>>16),n+=i>>16}var s=e===ia?4:5;return a=lu(a,r,s),new t(a,e,0,n+s)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===ia?4:5;return n=lu(n,nT[this.mode][e],a),n=lu(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Ya||this.mode===ia){var i=vv[n][Ds];r=lu(r,i&65535,i>>16),a+=i>>16,n=Ds}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new t(r,n,this.binaryShiftByteCount+1,a+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=tQ(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(vv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var s=new hr;try{for(var o=sQ(a),c=o.next();!c.done;c=o.next()){var u=c.value;u.appendTo(s,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},t.prototype.toString=function(){return qe.format("%s bits=%d bytes=%d",rQ[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(nQ,Ds,0,0),t}();function lQ(t){var e=qe.getCharCode(" "),r=qe.getCharCode("."),n=qe.getCharCode(",");t[Ds][e]=1;for(var a=qe.getCharCode("Z"),i=qe.getCharCode("A"),s=i;s<=a;s++)t[Ds][s]=s-i+2;t[np][e]=1;for(var o=qe.getCharCode("z"),c=qe.getCharCode("a"),s=c;s<=o;s++)t[np][s]=s-c+2;t[ia][e]=1;for(var u=qe.getCharCode("9"),d=qe.getCharCode("0"),s=d;s<=u;s++)t[ia][s]=s-d+2;t[ia][n]=12,t[ia][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[rT][qe.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)qe.getCharCode(p[h])>0&&(t[Ya][qe.getCharCode(p[h])]=h);return t}var xv=lQ(nr.createInt32Array(5,256)),hh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cQ=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=qe.getCharCode(" "),r=qe.getCharCode(`
`),n=vS.singletonList(oQ.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,s=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case qe.getCharCode("\r"):i=s===r?2:0;break;case qe.getCharCode("."):i=s===e?3:0;break;case qe.getCharCode(","):i=s===e?4:0;break;case qe.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var o=vS.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return o.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,i=[];try{for(var s=hh(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,r,i)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,i=xv[e.getMode()][a]>0,s=null,o=0;o<=Ya;o++){var c=xv[o][a];if(c>0){if(s==null&&(s=e.endBinaryShift(r)),!i||o===e.getMode()||o===ia){var u=s.latchAndAppend(o,c);n.push(u)}if(!i&&nT[e.getMode()][o]>=0){var d=s.shiftAndAppend(o,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||xv[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,i,s=[];try{for(var o=hh(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForPair(u,r,n,s)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,r,n,a){var i=e.endBinaryShift(r);if(a.push(i.latchAndAppend(Ya,n)),e.getMode()!==Ya&&a.push(i.shiftAndAppend(Ya,n)),n===3||n===4){var s=i.latchAndAppend(ia,16-n).latchAndAppend(ia,1);a.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(o)}},t.simplifyStates=function(e){var r,n,a,i,s=[];try{for(var o=hh(e),c=o.next();!c.done;c=o.next()){var u=c.value,d=!0,f=function(y){if(y.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(y)&&(s=s.filter(function(x){return x!==y}))};try{for(var h=(a=void 0,hh(s)),p=h.next();!p.done;p=h.next()){var m=p.value,g=f(m);if(g==="break")break}}catch(y){a={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}d&&s.push(u)}}catch(y){r={error:y}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},t}(),uQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new cQ(e).encode(),i=Le.truncDivision(a.getSize()*r,100)+11,s=a.getSize()+i,o,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(o=n<0,c=Math.abs(n),c>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Se(qe.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,o),d=t.WORD_SIZE[c];var h=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+i>h)throw new Se("Data to large for user specified layer");if(o&&f.getSize()>d*64)throw new Se("Data to large for user specified layer")}else{d=0,f=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new Se("Data too large for an Aztec code");if(o=p<=3,c=o?p+1:p,u=t.totalBitsInLayer(c,o),!(s>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var h=u-u%d;if(!(o&&f.getSize()>d*64)&&f.getSize()+i<=h)break}}}var m=t.generateCheckWords(f,u,d),g=f.getSize()/d,y=t.generateModeMessage(o,c,g),x=(o?11:14)+c*4,v=new Int32Array(x),b;if(o){b=x;for(var p=0;p<v.length;p++)v[p]=p}else{b=x+1+2*Le.truncDivision(Le.truncDivision(x,2)-1,15);for(var w=Le.truncDivision(x,2),S=Le.truncDivision(b,2),p=0;p<w;p++){var E=p+Le.truncDivision(p,15);v[w-p-1]=S-E-1,v[w+p]=S+E+1}}for(var j=new si(b),p=0,I=0;p<c;p++){for(var N=(c-p)*4+(o?9:12),T=0;T<N;T++)for(var F=T*2,C=0;C<2;C++)m.get(I+F+C)&&j.set(v[p*2+C],v[p*2+T]),m.get(I+N*2+F+C)&&j.set(v[p*2+T],v[x-1-p*2-C]),m.get(I+N*4+F+C)&&j.set(v[x-1-p*2-C],v[x-1-p*2-T]),m.get(I+N*6+F+C)&&j.set(v[x-1-p*2-T],v[p*2+C]);I+=N*8}if(t.drawModeMessage(j,o,b,y),o)t.drawBullsEye(j,Le.truncDivision(b,2),5);else{t.drawBullsEye(j,Le.truncDivision(b,2),7);for(var p=0,T=0;p<Le.truncDivision(x,2)-1;p+=15,T+=16)for(var C=Le.truncDivision(b,2)&1;C<b;C+=2)j.set(Le.truncDivision(b,2)-T,C),j.set(Le.truncDivision(b,2)+T,C),j.set(C,Le.truncDivision(b,2)-T),j.set(C,Le.truncDivision(b,2)+T)}var A=new KZ;return A.setCompact(o),A.setSize(b),A.setLayers(c),A.setCodeWords(g),A.setMatrix(j),A},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var i=r-a;i<=r+a;i++)e.set(i,r-a),e.set(i,r+a),e.set(r-a,i),e.set(r+a,i);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new hr;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var i=Le.truncDivision(n,2);if(r)for(var s=0;s<7;s++){var o=i-3+s;a.get(s)&&e.set(o,i-5),a.get(s+7)&&e.set(i+5,o),a.get(20-s)&&e.set(o,i+5),a.get(27-s)&&e.set(i-5,o)}else for(var s=0;s<10;s++){var o=i-5+s+Le.truncDivision(s,5);a.get(s)&&e.set(o,i-7),a.get(s+10)&&e.set(i+7,o),a.get(29-s)&&e.set(o,i+7),a.get(39-s)&&e.set(i-7,o)}},t.generateCheckWords=function(e,r,n){var a,i,s=e.getSize()/n,o=new eT(t.getGF(n)),c=Le.truncDivision(r,n),u=t.bitsToWords(e,n,c);o.encode(u,c-s);var d=r%n,f=new hr;f.appendBits(0,d);try{for(var h=uQ(Array.from(u)),p=h.next();!p.done;p=h.next()){var m=p.value;f.appendBits(m,n)}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),i,s;for(i=0,s=e.getSize()/r;i<s;i++){for(var o=0,c=0;c<r;c++)o|=e.get(i*r+c)?1<<r-c-1:0;a[i]=o}return a},t.getGF=function(e){switch(e){case 4:return mn.AZTEC_PARAM;case 6:return mn.AZTEC_DATA_6;case 8:return mn.AZTEC_DATA_8;case 10:return mn.AZTEC_DATA_10;case 12:return mn.AZTEC_DATA_12;default:throw new Se("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new hr,a=e.getSize(),i=(1<<r)-2,s=0;s<a;s+=r){for(var o=0,c=0;c<r;c++)(s+c>=a||e.get(s+c))&&(o|=1<<r-1-c);(o&i)===i?(n.appendBits(o&i,r),s--):o&i?n.appendBits(o,r):(n.appendBits(o|1,r),s--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const aT=({isOpen:t,onClose:e,eventId:r})=>{const{user:n}=il(),[a,i]=_.useState(!1),[s,o]=_.useState(null),[c,u]=_.useState(!1),[d,f]=_.useState([]),[h,p]=_.useState(""),[m,g]=_.useState(""),[y,x]=_.useState(null),[v,b]=_.useState(0),[w,S]=_.useState(!1),E=_.useRef(null),j=_.useRef(null);_.useEffect(()=>(t?I():C(),()=>{C()}),[t]),_.useEffect(()=>{const O=()=>{E.current&&a?S(!0):S(!1)};O();const $=setInterval(O,100);return()=>clearInterval($)},[a]);const I=async()=>{try{const{data:O,error:$}=await de.from("user_attendance").select(`
          *,
          profiles!user_attendance_user_id_fkey(name),
          events(title)
        `).order("scanned_at",{ascending:!1}).limit(5);if($)throw $;f(O||[])}catch(O){console.error("Error fetching recent scans:",O)}},N=O=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(O),T=_.useCallback(async O=>{var D;const $=Date.now();if(!($-v<2e3)){b($);try{console.log("🔍 Обработка QR кода:",O);const R=JSON.parse(O);if(R.type==="user_attendance"&&R.userId&&R.qrToken){if(R.userId==="test"||!N(R.userId)){console.log("🧪 Обработка тестовых данных"),o({userId:R.userId,userName:R.userName||"Тестовый Пользователь",userEmail:R.userEmail||"test@example.com",qrToken:R.qrToken}),C(),K.success("🧪 Тестовый QR-код распознан");return}const{data:M,error:L}=await de.from("profiles").select("id, name, qr_token").eq("id",R.userId).eq("qr_token",R.qrToken).single();if(L||!M)throw new Error("QR-код недействителен");o({userId:M.id,userName:M.name||`Пользователь ${M.id.slice(0,8)}`,userEmail:R.userEmail||"Не указан",qrToken:M.qr_token}),C();return}if(R.type==="event_registration"&&R.registrationId&&R.eventId){if(R.registrationId==="test-reg"||R.eventId==="test-event"){console.log("🧪 Обработка тестовой регистрации"),o({userId:R.userId||"test-user",userName:R.fullName||"Тестовый Участник",userEmail:R.email||"test@example.com",qrToken:R.registrationId,registrationData:{registrationId:R.registrationId,eventId:R.eventId,eventTitle:"Тестовое Мероприятие",adultTickets:R.adultTickets||1,childTickets:R.childTickets||0,totalAmount:R.totalAmount||0,paymentStatus:R.paymentStatus||"free"}}),C(),K.success("🧪 Тестовая регистрация распознана");return}const{data:M,error:L}=await de.from("user_event_registrations").select(`
            *,
            event:events(id, title, start_at, location),
            profile:profiles(id, name)
          `).eq("registration_id",R.registrationId).eq("event_id",R.eventId).eq("status","active").single();if(L||!M)throw new Error("Регистрация не найдена");o({userId:M.user_id,userName:M.full_name,userEmail:M.email,qrToken:R.registrationId,registrationData:{registrationId:M.registration_id,eventId:M.event_id,eventTitle:(D=M.event)==null?void 0:D.title,adultTickets:M.adult_tickets,childTickets:M.child_tickets,totalAmount:M.total_amount,paymentStatus:M.payment_status}}),C();return}throw new Error("Неверный формат QR-кода")}catch(R){console.error("❌ Ошибка обработки QR:",R),K.error(R instanceof Error?R.message:"Ошибка QR-кода")}}},[v]),F=_.useCallback(async()=>{try{if(console.log("🚀 Запуск ZXing сканера..."),x(null),u(!0),await new Promise(R=>setTimeout(R,500)),!E.current)throw new Error("Видео элемент не готов. Попробуйте еще раз через секунду.");console.log("✅ Видео элемент найден");const O=new fZ;j.current=O,console.log("📷 Получение списка камер...");const $=await O.listVideoInputDevices();if($.length===0)throw new Error("Камеры не найдены");console.log(`✅ Найдено камер: ${$.length}`);const D=$[0].deviceId;console.log("🎯 Запуск декодирования..."),await O.decodeFromVideoDevice(D,E.current,(R,M)=>{R&&(console.log("✅ QR код найден:",R.getText()),T(R.getText())),M&&!(M instanceof ee)&&console.warn("⚠️ Ошибка декодирования:",M.message)}),i(!0),K.success("🎯 Сканер запущен")}catch(O){console.error("❌ Ошибка запуска:",O);let $="Ошибка запуска сканера";O instanceof Error&&(O.message.includes("Permission denied")||O.name==="NotAllowedError"?$="🚫 Доступ к камере запрещен. Разрешите доступ в настройках браузера.":O.message.includes("not found")||O.name==="NotFoundError"?$="📷 Камера не найдена. Проверьте подключение камеры.":O.message.includes("in use")||O.name==="NotReadableError"?$="🔒 Камера занята другим приложением.":O.message.includes("Видео элемент не готов")?$="⏳ Подождите секунду и попробуйте снова.":$=`❌ ${O.message}`),x($),K.error($)}finally{u(!1)}},[T]),C=_.useCallback(()=>{console.log("🛑 Остановка сканера...");try{j.current&&(j.current.reset(),j.current=null,console.log("✅ Сканер остановлен"))}catch(O){console.warn("⚠️ Ошибка остановки:",O)}i(!1),x(null),b(0),S(!1)},[]),A=async()=>{var O,$;if(!(!s||!n))try{if(u(!0),s.userId==="test"||s.userId==="test-user"||!N(s.userId)){console.log("🧪 Тестовое подтверждение посещения"),K.success(`✅ Тестовое посещение отмечено: ${s.userName}`),o(null),p(""),g("");return}const D={user_id:s.userId,scanned_by:n.id,event_id:r||((O=s.registrationData)==null?void 0:O.eventId)||null,location:h.trim()||null,notes:m.trim()||null,attendance_type:r||($=s.registrationData)!=null&&$.eventId?"event":"general"},{error:R}=await de.from("user_attendance").insert([D]);if(R)throw R;s.registrationData&&await de.from("user_event_registrations").update({attended_at:new Date().toISOString(),attendance_confirmed:!0}).eq("registration_id",s.registrationData.registrationId).eq("user_id",s.userId),K.success(`✅ Посещение отмечено: ${s.userName}`),o(null),p(""),g(""),await I()}catch(D){console.error("Attendance error:",D),K.error("Ошибка записи посещения")}finally{u(!1)}},k=O=>{const $=O.target.value;$.trim()&&(T($.trim()),O.target.value="")};return t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl w-full max-w-md max-h-[95vh] overflow-hidden",children:[l.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dc,{className:"h-5 w-5"}),l.jsx("h2",{className:"text-lg font-semibold",children:"QR Сканер"}),a&&l.jsx("span",{className:"text-xs bg-green-500 px-2 py-1 rounded animate-pulse",children:"🔴 LIVE"})]}),l.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 transition-colors p-1",children:l.jsx(Bt,{className:"h-6 w-6"})})]})}),l.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(95vh-80px)]",children:s?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(fc,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.registrationData?"✅ Регистрация найдена":"👤 Пользователь найден"}),l.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-3",children:[l.jsx("p",{className:"font-medium",children:s.userName}),l.jsx("p",{className:"text-sm text-gray-500",children:s.userEmail}),(s.userId==="test"||s.userId==="test-user"||!N(s.userId))&&l.jsx("div",{className:"mt-2 p-2 bg-yellow-100 dark:bg-yellow-900/20 rounded text-xs",children:"🧪 Тестовый режим - данные не будут сохранены в базу"}),s.registrationData&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-dark-600 text-sm",children:[l.jsxs("p",{className:"font-medium text-primary-600",children:["🎫 ",s.registrationData.eventTitle]}),l.jsxs("p",{className:"text-xs",children:["👥 ",s.registrationData.adultTickets," взрослых",s.registrationData.childTickets>0&&`, ${s.registrationData.childTickets} детей`]}),s.registrationData.totalAmount>0&&l.jsxs("p",{className:"text-xs",children:["💰 ",s.registrationData.totalAmount," ₽"]})]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["🆔 ",s.qrToken.slice(0,8),"..."]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"📍 Местоположение"}),l.jsx("input",{type:"text",value:h,onChange:O=>p(O.target.value),placeholder:"Главный зал, Коворкинг...",className:"w-full p-2 border border-gray-300 dark:border-dark-600 rounded dark:bg-dark-800 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"📝 Заметки"}),l.jsx("textarea",{value:m,onChange:O=>g(O.target.value),placeholder:"Дополнительная информация...",rows:2,className:"w-full p-2 border border-gray-300 dark:border-dark-600 rounded dark:bg-dark-800 text-sm"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>o(null),className:"flex-1 btn-outline py-3",children:"❌ Отмена"}),l.jsx("button",{onClick:A,disabled:c,className:"flex-1 btn-primary py-3 font-medium",children:c?"⏳ Сохранение...":"✅ Подтвердить"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[a?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative w-full aspect-square max-w-64 mx-auto rounded-lg overflow-hidden bg-black",children:[l.jsx("video",{ref:E,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"},autoPlay:!0,playsInline:!0,muted:!0}),w&&l.jsxs("div",{className:"absolute inset-4 border-2 border-primary-500 rounded-lg",children:[l.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-l-4 border-t-4 border-white rounded-tl"}),l.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-r-4 border-t-4 border-white rounded-tr"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-l-4 border-b-4 border-white rounded-bl"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-r-4 border-b-4 border-white rounded-br"}),l.jsx("div",{className:"absolute top-1/2 left-4 right-4 h-0.5 bg-primary-400 opacity-80 animate-pulse"})]}),!w&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-white text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),l.jsx("p",{className:"text-sm",children:"Загрузка видео..."})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"🎯 Наведите на QR-код"}),l.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["⚡ ",w?"Видео готово":"Загрузка..."]}),l.jsx("button",{onClick:C,className:"w-full btn-outline py-2",children:"⏹️ Остановить"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"w-full aspect-square max-w-64 mx-auto bg-gray-100 dark:bg-dark-700 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-dark-600",children:y?l.jsxs("div",{className:"text-center p-4",children:[l.jsx(Sd,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 max-w-48",children:y})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(dc,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),l.jsx("p",{className:"text-xs text-gray-500",children:"🚀 ZXing Ready"})]})}),l.jsx("button",{onClick:F,disabled:c,className:"w-full btn-primary disabled:opacity-50 py-3 text-lg font-medium",children:c?"🔄 Запуск...":"📱 Запустить сканер"})]}),l.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium mb-2",children:"💻 Ручной ввод:"}),l.jsx("textarea",{placeholder:"Вставьте JSON данные QR-кода...",className:"w-full p-2 border border-gray-300 dark:border-dark-600 rounded text-xs font-mono resize-none",rows:2,onChange:k}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"🧪 Тестовые данные:"}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-xs font-mono",children:["{",'"type":"user_attendance","userId":"test","qrToken":"test123","userName":"Тест Пользователь","userEmail":"test@test.com","timestamp":1703025600000',"}"]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-xs font-mono",children:["{",'"type":"event_registration","registrationId":"test-reg","eventId":"test-event","fullName":"Тест Участник","email":"test@test.com","adultTickets":2,"childTickets":1,"totalAmount":500,"paymentStatus":"paid"',"}"]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-base font-semibold mb-2 flex items-center gap-2",children:[l.jsx(Vt,{className:"h-4 w-4"}),"📋 Недавние сканы"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(O=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-dark-700 rounded text-sm",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"font-medium truncate",children:O.profiles.name}),l.jsx("p",{className:"text-xs text-gray-500",children:new Date(O.scanned_at).toLocaleString("ru-RU",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),l.jsx(fc,{className:"h-4 w-4 text-green-500 flex-shrink-0"})]},O.id))}):l.jsx("p",{className:"text-gray-500 text-center py-3 text-sm",children:"Нет сканов"})]})]})})]})}):null},dQ=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),fQ=()=>{const t=Ma();Hi();const[e,r]=_.useState(!1),[n,a]=_.useState(!1),[i,s]=_.useState(!1),[o,c]=_.useState(!1);_.useEffect(()=>{const m=()=>{const g=window.innerWidth<768;s(g),g&&a(!0)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const u=[{to:"/admin",icon:WM,label:"Главная страница",shortLabel:"Главная",end:!0},{to:"/admin/events",icon:Oe,label:"Мероприятия",shortLabel:"События"},{to:"/admin/speakers",icon:Vt,label:"Спикеры",shortLabel:"Спикеры"},{to:"/admin/attendance",icon:Vt,label:"Посещения",shortLabel:"Посещения"},{to:"/admin/rent",icon:PM,label:"Аренда",shortLabel:"Аренда"},{to:"/admin/coworking",icon:DM,label:"Коворкинг",shortLabel:"Коворк"},{to:"/admin/about",icon:Hp,label:"О нас",shortLabel:"О нас"},{to:"/admin/navigation",icon:Jx,label:"Навигация",shortLabel:"Навиг."},{to:"/admin/calendar",icon:Oe,label:"Календарь",shortLabel:"Календ."},{to:"/admin/event-statistics",icon:jo,label:"Статистика мероприятий",shortLabel:"Стат. мер."},{to:"/admin/export",icon:Qd,label:"Экспорт данных",shortLabel:"Экспорт"}],d=async()=>{try{const{error:m}=await dQ.auth.signOut();if(m)throw m;t("/"),K.success("Вы успешно вышли из системы")}catch(m){console.error("Logout error:",m),K.error("Ошибка при выходе из системы")}},f=()=>{a(!n)},h=()=>{r(!1)},p=()=>{c(!0),i&&h()};return l.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900",children:[e&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:h}),i&&l.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white dark:bg-dark-800 border-b border-gray-200 dark:border-dark-700 z-30 h-14 flex items-center justify-between px-4",children:[l.jsx("button",{onClick:()=>r(!e),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700",children:l.jsx(Jx,{className:"h-5 w-5"})}),l.jsx("h1",{className:"text-lg font-semibold",children:"Админ панель"}),l.jsx("button",{onClick:p,className:"p-2 rounded-lg bg-primary-500 hover:bg-primary-600 text-white",title:"QR Сканер",children:l.jsx(ql,{className:"h-5 w-5"})})]}),l.jsxs("aside",{className:`
        fixed top-0 left-0 h-full bg-white dark:bg-dark-800 border-r border-gray-200 dark:border-dark-700 z-50
        transition-all duration-300 ease-in-out
        ${i?`${e?"translate-x-0":"-translate-x-full"} w-64`:`${n?"w-16":"w-64"}`}
      `,children:[l.jsxs("div",{className:`
          h-12 flex items-center border-b border-gray-200 dark:border-dark-700
          ${n&&!i?"justify-center px-2":"justify-between px-4"}
        `,children:[(!n||i)&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center",children:l.jsx(Ed,{className:"h-5 w-5 text-white"})}),l.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Админ панель"})]}),!i&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:p,className:"p-1.5 rounded-lg bg-primary-500 hover:bg-primary-600 text-white transition-colors",title:"QR Сканер",children:l.jsx(ql,{className:"h-4 w-4"})}),l.jsx("button",{onClick:f,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors",children:n?l.jsx(Kd,{className:"h-4 w-4"}):l.jsx(Yd,{className:"h-4 w-4"})})]}),i&&l.jsx("button",{onClick:h,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700",children:l.jsx(Bt,{className:"h-4 w-4"})})]}),(!n||i)&&l.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-dark-700",children:l.jsxs("button",{onClick:p,className:"w-full flex items-center gap-3 px-3 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors font-medium",children:[l.jsx(ql,{className:"h-5 w-5"}),l.jsx("span",{children:"QR Сканер"})]})}),l.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:l.jsx("div",{className:"space-y-1 px-2",children:u.map(m=>{const g=m.icon;return l.jsxs(DR,{to:m.to,end:m.end,onClick:i?h:void 0,className:({isActive:y})=>`
                    group relative flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
                    ${y?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"}
                    ${n&&!i?"justify-center":""}
                  `,title:n&&!i?m.label:"",children:[l.jsx(g,{className:"h-5 w-5 flex-shrink-0"}),(!n||i)&&l.jsx("span",{className:"text-sm font-medium",children:m.label}),n&&!i&&l.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:m.label})]},m.to)})})}),l.jsx("div",{className:"border-t border-gray-200 dark:border-dark-700 p-2",children:l.jsxs("button",{onClick:d,className:`
              group relative w-full flex items-center gap-3 px-3 py-2.5 rounded-lg
              text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20
              transition-all duration-200
              ${n&&!i?"justify-center":""}
            `,title:n&&!i?"Выйти":"",children:[l.jsx(Mj,{className:"h-4 w-4 flex-shrink-0"}),(!n||i)&&l.jsx("span",{className:"text-sm",children:"Выйти"}),n&&!i&&l.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:"Выйти"})]})})]}),l.jsx("main",{className:`
        transition-all duration-300 ease-in-out
        ${i?"ml-0 pt-14":`${n?"ml-16":"ml-64"} pt-12`}
        p-3 md:p-4
      `,children:l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm p-3 md:p-6 min-h-[calc(100vh-5rem)] md:min-h-[calc(100vh-4rem)]",children:l.jsx(bR,{})})}),o&&l.jsx(aT,{isOpen:o,onClose:()=>c(!1)})]})},cu=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),uu={style:"centered",centered:{title:"ScienceHub",subtitle:"Место для научного сообщества",logoLight:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logo/logo_science_hub%20no_title.png",logoDark:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logo/logo_white_science_hub%20no_title.png"},slideshow:{slides:[],settings:{autoplaySpeed:5e3,transition:"fade"}}},yv={enabled:!0,title:"Добро пожаловать в ScienceHub",description:"Мы создаем уникальное пространство для науки, образования и инноваций. Присоединяйтесь к нашему сообществу исследователей, предпринимателей и энтузиастов.",image:"https://wummwcsqsznyyaajcxww.supabase.co/storage/v1/object/public/images/logo/logo_science_hub%20no_title.png",order:1},bv={enabled:!0,title:"Аренда помещений",description:"Предоставляем в аренду современные помещения для проведения мероприятий, конференций и лабораторных исследований.",image:"https://example.com/rent-image.jpg",order:2},wv={enabled:!0,title:"Коворкинг пространство",description:"Комфортные рабочие места для исследователей и стартапов с доступом ко всей инфраструктуре ScienceHub.",image:"https://example.com/coworking-image.jpg",order:3},_v={events_count:3,show_title:!0,show_date:!0,show_time:!0,show_language:!0,show_type:!0,show_age:!0,show_image:!0,show_price:!0},hQ=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(uu),[a,i]=_.useState(yv),[s,o]=_.useState(bv),[c,u]=_.useState(wv),[d,f]=_.useState(_v),[h,p]=_.useState(!1),[m,g]=_.useState(!1),y=_.useRef(null);_.useEffect(()=>{w()},[]);const x=async N=>new Promise(T=>{const F=new FileReader;F.onload=C=>{var k;const A=new Image;A.src=(k=C.target)==null?void 0:k.result,A.onload=()=>{const O=document.createElement("canvas"),$=O.getContext("2d");let D=A.width,R=A.height;if(D>1e3){const M=1e3/D;D=1e3,R=R*M}O.width=D,O.height=R,$?($.drawImage(A,0,0,D,R),O.toBlob(M=>{if(M&&M.size>1e6)O.toBlob(L=>{if(L){const B=new File([L],N.name,{type:"image/jpeg",lastModified:Date.now()});T(B)}else T(N)},"image/jpeg",.5);else if(M){const L=new File([M],N.name,{type:"image/jpeg",lastModified:Date.now()});T(L)}else T(N)},"image/jpeg",.7)):T(N)}},F.readAsDataURL(N)}),v=async(N,T)=>{try{const F=await x(N);await b(F,T),K.success("Изображение успешно загружено")}catch(F){console.error("Error uploading image:",F),K.error("Ошибка при загрузке изображения")}},b=async(N,T)=>{try{const F=Date.now(),C=N.name.split(".").pop(),k=`images/${`${T}_${F}.${C}`}`,{error:O}=await cu.storage.from("images").upload(k,N);if(O)throw O;const $=`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${k}`;T==="slide"?n(D=>({...D,slideshow:{...D.slideshow,slides:[...D.slideshow.slides,{id:crypto.randomUUID(),image:$,title:"Новый слайд",subtitle:"Описание слайда"}]}})):T==="info"?i(D=>({...D,image:$})):T==="rent"?o(D=>({...D,image:$})):T==="coworking"?u(D=>({...D,image:$})):T==="logo-light"?n(D=>({...D,centered:{...D.centered,logoLight:$}})):T==="logo-dark"&&n(D=>({...D,centered:{...D.centered,logoDark:$}}))}catch(F){throw console.error("Error uploading image:",F),F}},w=async()=>{var N;try{p(!0);const{data:T,error:F}=await cu.from("site_settings").select("*").single();if(F){if(F.code==="PGRST116"){const{data:C,error:A}=await cu.from("site_settings").insert([{header_settings:uu,info_section:yv,rent_selection:bv,coworking_selection:wv,homepage_settings:_v}]).select().single();if(A)throw A;if(C){e(C.id);return}}throw F}T&&(e(T.id),T.header_settings&&n({...uu,...T.header_settings,slideshow:{...uu.slideshow,...T.header_settings.slideshow,settings:{...uu.slideshow.settings,...(N=T.header_settings.slideshow)==null?void 0:N.settings}}}),T.info_section&&i({...yv,...T.info_section}),T.rent_selection&&o({...bv,...T.rent_selection}),T.coworking_selection&&u({...wv,...T.coworking_selection}),T.homepage_settings&&f({..._v,...T.homepage_settings}))}catch(T){console.error("Error fetching settings:",T),K.error("Ошибка при загрузке настроек")}finally{p(!1)}},S=async()=>{if(!t){K.error("ID настроек не найден");return}try{g(!0);const{error:N}=await cu.from("site_settings").update({header_settings:r,info_section:a,rent_selection:s,coworking_selection:c,homepage_settings:d}).eq("id",t);if(N)throw N;K.success("Настройки сохранены успешно")}catch(N){console.error("Error saving settings:",N),K.error("Ошибка при сохранении настроек")}finally{g(!1)}},E=()=>{const N={id:Date.now().toString(),image:"",title:"",subtitle:""};n(T=>({...T,slideshow:{...T.slideshow,slides:[...T.slideshow.slides,N]}}))},j=(N,T)=>{const F=[...r.slideshow.slides],C=F.findIndex(O=>O.id===N);if(C===-1)return;const A=T==="up"?C-1:C+1;if(A<0||A>=F.length)return;const[k]=F.splice(C,1);F.splice(A,0,k),n(O=>({...O,slideshow:{...O.slideshow,slides:F}}))},I=N=>{n(T=>({...T,slideshow:{...T.slideshow,slides:T.slideshow.slides.filter(F=>F.id!==N)}}))};return h?l.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsx("div",{className:"min-h-[calc(100vh-200px)] bg-gray-50 dark:bg-dark-900 py-8 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-dark-900 dark:text-white",children:"Управление главным экраном"}),l.jsx("p",{className:"text-dark-600 dark:text-dark-400 mt-1",children:"Настройте заголовок, слайдшоу и информационные разделы"})]}),l.jsxs("button",{onClick:S,disabled:m,className:"px-5 py-2.5 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg flex items-center gap-2 transition-colors disabled:opacity-70",children:[l.jsx(Oa,{className:"w-5 h-5"}),m?"Сохранение...":"Сохранить изменения"]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white mb-6",children:"Стиль шапки"}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>n(N=>({...N,style:"centered"})),className:`flex-1 min-w-[200px] p-4 rounded-lg border-2 flex flex-col items-center transition-colors ${r.style==="centered"?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-600 hover:border-dark-300 dark:hover:border-dark-500"}`,children:[l.jsx("div",{className:"w-16 h-16 bg-dark-100 dark:bg-dark-700 rounded-full mb-3 flex items-center justify-center",children:l.jsx(Wh,{className:"w-8 h-8 text-dark-500"})}),l.jsx("span",{className:"font-medium",children:"Центрированный логотип"})]}),l.jsxs("button",{onClick:()=>n(N=>({...N,style:"slideshow"})),className:`flex-1 min-w-[200px] p-4 rounded-lg border-2 flex flex-col items-center transition-colors ${r.style==="slideshow"?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-600 hover:border-dark-300 dark:hover:border-dark-500"}`,children:[l.jsx("div",{className:"w-16 h-16 bg-dark-100 dark:bg-dark-700 rounded-lg mb-3 flex items-center justify-center",children:l.jsx(qa,{className:"w-8 h-8 text-dark-500"})}),l.jsx("span",{className:"font-medium",children:"Слайдшоу"})]})]})]}),r.style==="centered"&&l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white mb-6",children:"Настройки центрированного стиля"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Заголовок"}),l.jsx("input",{type:"text",id:"title",value:r.centered.title,onChange:N=>n(T=>({...T,centered:{...T.centered,title:N.target.value}})),className:"w-full p-2.5 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-700 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Введите заголовок"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtitle",className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Подзаголовок"}),l.jsx("input",{type:"text",id:"subtitle",value:r.centered.subtitle,onChange:N=>n(T=>({...T,centered:{...T.centered,subtitle:N.target.value}})),className:"w-full p-2.5 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-700 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Введите подзаголовок"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Логотип (светлая тема)"}),l.jsxs("div",{className:"p-4 border border-dark-300 dark:border-dark-600 rounded-lg bg-white flex flex-col items-center",children:[l.jsx("img",{src:r.centered.logoLight,alt:"Light Logo Preview",className:"h-20 w-auto object-contain mb-3"}),l.jsxs("button",{onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async T=>{var C;const F=(C=T.target.files)==null?void 0:C[0];F&&await v(F,"logo-light")},N.click()},className:"px-3 py-1.5 text-sm bg-dark-100 hover:bg-dark-200 text-dark-800 rounded-lg flex items-center gap-1",children:[l.jsx(Ja,{className:"w-4 h-4"}),"Изменить"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Логотип (тёмная тема)"}),l.jsxs("div",{className:"p-4 border border-dark-300 dark:border-dark-600 rounded-lg bg-dark-900 flex flex-col items-center",children:[l.jsx("img",{src:r.centered.logoDark,alt:"Dark Logo Preview",className:"h-20 w-auto object-contain mb-3"}),l.jsxs("button",{onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async T=>{var C;const F=(C=T.target.files)==null?void 0:C[0];F&&await v(F,"logo-dark")},N.click()},className:"px-3 py-1.5 text-sm bg-dark-700 hover:bg-dark-600 text-white rounded-lg flex items-center gap-1",children:[l.jsx(Ja,{className:"w-4 h-4"}),"Изменить"]})]})]})]})]})]}),r.style==="slideshow"&&l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white",children:"Управление слайдшоу"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async T=>{var C;const F=(C=T.target.files)==null?void 0:C[0];F&&await v(F,"slide")},N.click()},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[l.jsx(Ao,{className:"w-4 h-4"}),"Загрузить изображение"]}),l.jsxs("button",{onClick:E,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[l.jsx(ha,{className:"w-4 h-4"}),"Добавить слайд"]})]})]}),l.jsx("div",{className:"space-y-6",children:r.slideshow.slides.length>0?l.jsx("div",{className:"space-y-4",children:r.slideshow.slides.map((N,T)=>l.jsx("div",{className:"border border-dark-300 dark:border-dark-600 rounded-lg p-4",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsx("div",{className:"w-full md:w-32 h-20 bg-dark-100 dark:bg-dark-700 rounded-lg flex items-center justify-center overflow-hidden relative group",children:N.image?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:N.image,alt:"Slide preview",className:"w-full h-full object-cover"}),l.jsx("button",{onClick:()=>{const F=document.createElement("input");F.type="file",F.accept="image/*",F.onchange=async C=>{var k;const A=(k=C.target.files)==null?void 0:k[0];if(A){const O=await x(A),$=Date.now(),D=A.name.split(".").pop(),M=`images/${`slide_${$}.${D}`}`,{error:L}=await cu.storage.from("images").upload(M,O);if(!L){const B=`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${M}`,U=r.slideshow.slides.map(q=>q.id===N.id?{...q,image:B}:q);n(q=>({...q,slideshow:{...q.slideshow,slides:U}})),K.success("Изображение обновлено")}}},F.click()},className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white",children:l.jsx(Ja,{className:"w-5 h-5"})})]}):l.jsx(qa,{className:"w-8 h-8 text-dark-400"})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsx("div",{children:l.jsx("input",{type:"text",value:N.title,onChange:F=>{const C=r.slideshow.slides.map(A=>A.id===N.id?{...A,title:F.target.value}:A);n(A=>({...A,slideshow:{...A.slideshow,slides:C}}))},className:"w-full p-2 border border-dark-300 dark:border-dark-600 rounded-md dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Введите заголовок слайда"})}),l.jsx("div",{children:l.jsx("input",{type:"text",value:N.subtitle,onChange:F=>{const C=r.slideshow.slides.map(A=>A.id===N.id?{...A,subtitle:F.target.value}:A);n(A=>({...A,slideshow:{...A.slideshow,slides:C}}))},className:"w-full p-2 border border-dark-300 dark:border-dark-600 rounded-md dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Введите подзаголовок"})})]}),l.jsxs("div",{className:"flex gap-2 self-center md:self-start",children:[l.jsx("button",{onClick:()=>j(N.id,"up"),disabled:T===0,className:"p-2 hover:bg-dark-200 dark:hover:bg-dark-600 rounded-md disabled:opacity-50",title:"Переместить вверх",children:l.jsx(Kx,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>j(N.id,"down"),disabled:T===r.slideshow.slides.length-1,className:"p-2 hover:bg-dark-200 dark:hover:bg-dark-600 rounded-md disabled:opacity-50",title:"Переместить вниз",children:l.jsx(Yx,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>I(N.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 text-red-500 rounded-md",title:"Удалить слайд",children:l.jsx(Rn,{className:"w-5 h-5"})})]})]})},N.id))}):l.jsxs("div",{className:"text-center py-12 bg-dark-50 dark:bg-dark-700 rounded-lg border-2 border-dashed border-dark-300 dark:border-dark-600",children:[l.jsx(qa,{className:"mx-auto h-12 w-12 text-dark-400"}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-dark-900 dark:text-white",children:"Нет добавленных слайдов"}),l.jsx("p",{className:"mt-1 text-sm text-dark-500 dark:text-dark-400",children:'Нажмите кнопку "Загрузить изображение" чтобы начать'})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg text-primary-600 dark:text-primary-400",children:l.jsx(Wh,{className:"w-5 h-5"})}),l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white",children:'Настройки блока "О нас"'})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a.enabled,onChange:N=>i(T=>({...T,enabled:N.target.checked})),className:"sr-only peer"}),l.jsx("div",{className:"relative w-11 h-6 bg-dark-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-dark-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-dark-600 peer-checked:bg-primary-600"}),l.jsx("span",{className:"ms-3 text-sm font-medium text-dark-700 dark:text-dark-300",children:a.enabled?"Включено":"Отключено"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Заголовок"}),l.jsx("input",{type:"text",value:a.title,onChange:N=>i(T=>({...T,title:N.target.value})),className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",placeholder:"Введите заголовок"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Описание"}),l.jsx("textarea",{value:a.description,onChange:N=>i(T=>({...T,description:N.target.value})),rows:4,className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",placeholder:"Введите описание"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Изображение"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-32 h-20 border border-dark-300 dark:border-dark-600 rounded-lg overflow-hidden",children:l.jsx("img",{src:a.image,alt:"Info section preview",className:"w-full h-full object-cover"})}),l.jsxs("button",{onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async T=>{var C;const F=(C=T.target.files)==null?void 0:C[0];F&&await v(F,"info")},N.click()},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[l.jsx(Ao,{className:"w-4 h-4"}),"Загрузить изображение"]})]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-6",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg text-primary-600 dark:text-primary-400",children:l.jsx(Oe,{className:"w-5 h-5"})}),l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white",children:'Настройки блока "Мероприятия"'})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Количество отображаемых мероприятий"}),l.jsxs("select",{value:d.events_count,onChange:N=>f(T=>({...T,events_count:parseInt(N.target.value)})),className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",children:[l.jsx("option",{value:1,children:"1 мероприятие"}),l.jsx("option",{value:2,children:"2 мероприятия"}),l.jsx("option",{value:3,children:"3 мероприятия"}),l.jsx("option",{value:4,children:"4 мероприятия"}),l.jsx("option",{value:6,children:"6 мероприятий"}),l.jsx("option",{value:8,children:"8 мероприятий"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-dark-900 dark:text-white mb-4",children:"Отображаемые элементы"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{key:"show_title",label:"Заголовок"},{key:"show_date",label:"Дата"},{key:"show_time",label:"Время"},{key:"show_language",label:"Язык"},{key:"show_type",label:"Тип события"},{key:"show_age",label:"Возрастная категория"},{key:"show_image",label:"Изображение"},{key:"show_price",label:"Цена"}].map(N=>l.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:d[N.key],onChange:T=>f(F=>({...F,[N.key]:T.target.checked})),className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),l.jsx("span",{className:"text-sm text-dark-700 dark:text-dark-300",children:N.label})]},N.key))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-dark-900 dark:text-white mb-4",children:"Предварительный просмотр"}),l.jsx("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4 border-2 border-dashed border-gray-300 dark:border-dark-600",children:l.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[l.jsx(Oe,{className:"w-8 h-8 mx-auto mb-2"}),l.jsxs("p",{children:["Будет показано ",d.events_count," мероприятий"]}),l.jsxs("p",{className:"text-xs mt-1",children:["С элементами: ",[d.show_title&&"заголовок",d.show_date&&"дата",d.show_time&&"время",d.show_image&&"изображение",d.show_price&&"цена"].filter(Boolean).join(", ")]})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg text-primary-600 dark:text-primary-400",children:l.jsx(Wh,{className:"w-5 h-5"})}),l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white",children:'Настройки блока "Аренда"'})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:s.enabled,onChange:N=>o(T=>({...T,enabled:N.target.checked})),className:"sr-only peer"}),l.jsx("div",{className:"relative w-11 h-6 bg-dark-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-dark-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-dark-600 peer-checked:bg-primary-600"}),l.jsx("span",{className:"ms-3 text-sm font-medium text-dark-700 dark:text-dark-300",children:s.enabled?"Включено":"Отключено"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Заголовок"}),l.jsx("input",{type:"text",value:s.title,onChange:N=>o(T=>({...T,title:N.target.value})),className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",placeholder:"Введите заголовок"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Описание"}),l.jsx("textarea",{value:s.description,onChange:N=>o(T=>({...T,description:N.target.value})),rows:4,className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",placeholder:"Введите описание"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Изображение"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-32 h-20 border border-dark-300 dark:border-dark-600 rounded-lg overflow-hidden",children:l.jsx("img",{src:s.image,alt:"Rent section preview",className:"w-full h-full object-cover"})}),l.jsxs("button",{onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async T=>{var C;const F=(C=T.target.files)==null?void 0:C[0];F&&await v(F,"rent")},N.click()},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[l.jsx(Ao,{className:"w-4 h-4"}),"Загрузить изображение"]})]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-dark-200 dark:border-dark-700 p-6 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg text-primary-600 dark:text-primary-400",children:l.jsx(Vt,{className:"w-5 h-5"})}),l.jsx("h2",{className:"text-xl font-semibold text-dark-900 dark:text-white",children:'Настройки блока "Коворкинг"'})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:c.enabled,onChange:N=>u(T=>({...T,enabled:N.target.checked})),className:"sr-only peer"}),l.jsx("div",{className:"relative w-11 h-6 bg-dark-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-dark-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-dark-600 peer-checked:bg-primary-600"}),l.jsx("span",{className:"ms-3 text-sm font-medium text-dark-700 dark:text-dark-300",children:c.enabled?"Включено":"Отключено"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Заголовок"}),l.jsx("input",{type:"text",value:c.title,onChange:N=>u(T=>({...T,title:N.target.value})),className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",placeholder:"Введите заголовок"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Описание"}),l.jsx("textarea",{value:c.description,onChange:N=>u(T=>({...T,description:N.target.value})),rows:4,className:"w-full p-3 border border-dark-300 dark:border-dark-600 rounded-lg dark:bg-dark-800 dark:text-white focus:ring-2 focus:ring-primary-500",placeholder:"Введите описание"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2",children:"Изображение"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-32 h-20 border border-dark-300 dark:border-dark-600 rounded-lg overflow-hidden",children:l.jsx("img",{src:c.image,alt:"Coworking section preview",className:"w-full h-full object-cover"})}),l.jsxs("button",{onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async T=>{var C;const F=(C=T.target.files)==null?void 0:C[0];F&&await v(F,"coworking")},N.click()},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[l.jsx(Ao,{className:"w-4 h-4"}),"Загрузить изображение"]})]})]})]})]}),l.jsx("input",{ref:y,type:"file",accept:"image/*",className:"hidden"})]})})},pQ=({isOpen:t,onClose:e,event:r})=>{const n=Ma(),[a,i]=_.useState(null),[s,o]=_.useState({}),[c,u]=_.useState(r),[d,f]=_.useState(!1),[h,p]=_.useState(!1);_.useEffect(()=>{u(r)},[r]);const m=()=>{if(ti(r.start_at))try{return lt(ji(r.start_at),"d MMMM yyyy",{locale:na})}catch(I){console.error("Error formatting start_at:",r.start_at,I)}if(ti(r.start_time))try{return lt(ji(r.start_time),"d MMMM yyyy",{locale:na})}catch(I){console.error("Error formatting start_time:",r.start_time,I)}if(ti(r.date))try{return lt(ji(r.date),"d MMMM yyyy",{locale:na})}catch(I){console.error("Error formatting date:",r.date,I)}return"Дата не указана"},g=()=>{var I;return(I=c.registrations)!=null&&I.reg_list?c.registrations.reg_list:c.registrations_list||[]},y=()=>{var I;return((I=c.registrations)==null?void 0:I.max_regs)!==void 0?c.registrations.max_regs:c.max_registrations||null},x=()=>{var I;return((I=c.registrations)==null?void 0:I.current)!==void 0?c.registrations.current:c.current_registration_count||0},v=I=>{i(I.id),o(I)},b=async I=>{try{if(f(!0),!s.full_name||!s.email){K.error("Имя и email обязательны для заполнения");return}const{data:N,error:T}=await de.from("events").select("registrations, registrations_list").eq("id",r.id).single();if(T)throw T;let F;if(N.registrations){const k=[...N.registrations.reg_list].map(O=>O.id===I?{...O,...s}:O);F={...N.registrations,reg_list:k}}else{const k=(N.registrations_list||[]).map(O=>O.id===I?{...O,...s}:O);F={max_regs:c.max_registrations||null,current:0,current_adults:0,current_children:0,reg_list:k}}const{error:C}=await de.from("events").update({registrations:F}).eq("id",r.id);if(C)throw C;u(A=>({...A,registrations:F})),i(null),o({}),K.success("Регистрация успешно обновлена")}catch(N){console.error("Error updating registration:",N),K.error("Ошибка при обновлении регистрации")}finally{f(!1)}},w=async I=>{if(confirm("Вы уверены, что хотите удалить эту регистрацию?"))try{p(!0);const{data:N,error:T}=await de.from("events").select("registrations, registrations_list").eq("id",r.id).single();if(T)throw T;let F;if(N.registrations){const k=[...N.registrations.reg_list].filter(O=>O.id!==I);F={...N.registrations,reg_list:k}}else{const k=(N.registrations_list||[]).filter(O=>O.id!==I);F={max_regs:c.max_registrations||null,current:0,current_adults:0,current_children:0,reg_list:k}}const{error:C}=await de.from("events").update({registrations:F}).eq("id",r.id);if(C)throw C;u(A=>({...A,registrations:F})),K.success("Регистрация удалена")}catch(N){console.error("Error deleting registration:",N),K.error("Ошибка при удалении регистрации")}finally{p(!1)}},S=g(),E=y(),j=x();return l.jsx(Mc,{isOpen:t,onClose:e,title:"Детали мероприятия",size:"xl",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Основная информация"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-dark-600 dark:text-dark-300",children:[l.jsx(Oe,{className:"h-5 w-5"}),l.jsx("span",{children:m()})]}),l.jsxs("div",{className:"flex items-center gap-2 text-dark-600 dark:text-dark-300",children:[l.jsx(vr,{className:"h-5 w-5"}),l.jsx("span",{children:r.location})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Статистика"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-dark-600 dark:text-dark-300",children:"Всего мест:"}),l.jsx("span",{className:"font-medium",children:E||"Не ограничено"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-dark-600 dark:text-dark-300",children:"Зарегистрировано:"}),l.jsx("span",{className:"font-medium",children:j})]}),r.payment_link&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-dark-600 dark:text-dark-300",children:"Переходов по ссылке оплаты:"}),l.jsx("span",{className:"font-medium",children:r.payment_link_clicks||0})]}),E&&E>0&&l.jsx("div",{className:"h-2 bg-gray-200 dark:bg-dark-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary-600 rounded-full transition-all",style:{width:`${j/E*100}%`}})})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-4",children:"Управление регистрациями"}),(S==null?void 0:S.length)>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 dark:bg-dark-700",children:[l.jsx("th",{className:"px-4 py-3 text-left",children:"Имя"}),l.jsx("th",{className:"px-4 py-3 text-left",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-center",children:"Взрослые"}),l.jsx("th",{className:"px-4 py-3 text-center",children:"Дети"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Сумма"}),l.jsx("th",{className:"px-4 py-3 text-center",children:"Статус"}),l.jsx("th",{className:"px-4 py-3 text-center",children:"Действия"})]})}),l.jsx("tbody",{children:S.map(I=>l.jsx("tr",{className:"border-t border-gray-200 dark:border-dark-700",children:a===I.id?l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"text",value:s.full_name||"",onChange:N=>o({...s,full_name:N.target.value}),className:"w-full px-2 py-1 border rounded"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"email",value:s.email||"",onChange:N=>o({...s,email:N.target.value}),className:"w-full px-2 py-1 border rounded"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("input",{type:"number",value:s.adult_tickets||0,onChange:N=>o({...s,adult_tickets:parseInt(N.target.value)}),className:"w-20 px-2 py-1 border rounded text-center",min:"0"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("input",{type:"number",value:s.child_tickets||0,onChange:N=>o({...s,child_tickets:parseInt(N.target.value)}),className:"w-20 px-2 py-1 border rounded text-center",min:"0"})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx("input",{type:"number",value:s.total_amount||0,onChange:N=>o({...s,total_amount:parseInt(N.target.value)}),className:"w-24 px-2 py-1 border rounded text-right",min:"0"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsxs("select",{value:s.status?"true":"false",onChange:N=>o({...s,status:N.target.value==="true"}),className:"px-2 py-1 border rounded",children:[l.jsx("option",{value:"true",children:"Активна"}),l.jsx("option",{value:"false",children:"Отменена"})]})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>b(I.id),disabled:d,className:"p-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:d?l.jsx(mr,{className:"h-4 w-4 animate-spin"}):l.jsx(Up,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>i(null),className:"p-1 text-gray-600 hover:bg-gray-100 dark:hover:bg-dark-700 rounded",children:l.jsx(Bt,{className:"h-4 w-4"})})]})})]}):l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-4 py-3",children:I.full_name}),l.jsx("td",{className:"px-4 py-3",children:I.email}),l.jsx("td",{className:"px-4 py-3 text-center",children:I.adult_tickets}),l.jsx("td",{className:"px-4 py-3 text-center",children:I.child_tickets}),l.jsx("td",{className:"px-4 py-3 text-right",children:I.total_amount}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${I.status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:I.status?"Активна":"Отменена"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>v(I),className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:l.jsx(Ja,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>w(I.id),disabled:h,className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:h?l.jsx(mr,{className:"h-4 w-4 animate-spin"}):l.jsx(Rn,{className:"h-4 w-4"})})]})})]})},I.id))})]})}):l.jsx("p",{className:"text-center py-4 text-dark-500 dark:text-dark-400",children:"Нет зарегистрированных участников"})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t border-gray-200 dark:border-dark-700",children:[l.jsx("button",{onClick:e,className:"btn-outline",children:"Закрыть"}),l.jsx("button",{onClick:()=>{e(),n(`/admin/events/${r.id}/edit`)},className:"btn-primary",children:"Редактировать"})]})]})})},xS=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),yS={active:"bg-gradient-to-r from-green-100 to-green-200 text-green-800 dark:from-green-900/30 dark:to-green-800/30 dark:text-green-400",draft:"bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 dark:from-yellow-900/30 dark:to-yellow-800/30 dark:text-yellow-400",past:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 dark:from-gray-900/30 dark:to-gray-800/30 dark:text-gray-400"},mQ=t=>{if(t.length<=50){const n=t.split(" ");if(n.length<=2)return{line1:n[0]||" ",line2:n[1]||" "};const a=Math.ceil(n.length/2);return{line1:n.slice(0,a).join(" "),line2:n.slice(a).join(" ")}}return{line1:t.substring(0,30),line2:t.substring(30,47)+"..."}},gQ=()=>{Ma();const[t,e]=_.useState([]),[r,n]=_.useState(!0),[a,i]=_.useState(""),[s,o]=_.useState("chronological"),[c,u]=_.useState("active"),[d,f]=_.useState([]),[h,p]=_.useState(null),[m,g]=_.useState(!1);_.useEffect(()=>{y()},[s,c]);const y=async()=>{try{n(!0);let C=xS.from("events").select(`
          *,
          time_slot:time_slots_table!fk_time_slots_event(
            id,
            start_at,
            end_at
          )
        `);c==="past"?C=C.or("status.eq.past,status.eq.active"):c!=="all"&&(C=C.eq("status",c));const{data:A,error:k}=await C;if(k)throw k;const O=(A||[]).map(D=>{var R,M,L,B;return{...D,start_at:((M=(R=D.time_slot)==null?void 0:R[0])==null?void 0:M.start_at)||D.start_at,end_at:((B=(L=D.time_slot)==null?void 0:L[0])==null?void 0:B.end_at)||D.end_at}});let $=O;switch(c==="past"?$=O.filter(D=>D.status==="past"||D.end_at&&fs(D.end_at)):c==="active"&&($=O.filter(D=>D.status==="active"&&(!D.end_at||!fs(D.end_at)))),s){case"chronological":c==="active"?$.sort((D,R)=>{const M=new Date(D.start_at||0),L=new Date(R.start_at||0);return M.getTime()-L.getTime()}):$.sort((D,R)=>{const M=new Date(D.created_at||0);return new Date(R.created_at||0).getTime()-M.getTime()});break;case"date-asc":$.sort((D,R)=>{const M=new Date(D.start_at||0),L=new Date(R.start_at||0);return M.getTime()-L.getTime()});break;case"date-desc":$.sort((D,R)=>{const M=new Date(D.start_at||0);return new Date(R.start_at||0).getTime()-M.getTime()});break;case"title-asc":$.sort((D,R)=>D.title.localeCompare(R.title));break;case"title-desc":$.sort((D,R)=>R.title.localeCompare(D.title));break}e($),f([])}catch(C){console.error("Error fetching events:",C),K.error("Ошибка при загрузке мероприятий")}finally{n(!1)}},x=async()=>{if(d.length===0)return;const C=d.length;if(confirm(`Вы уверены, что хотите удалить ${C} ${C===1?"мероприятие":"мероприятия"}?`))try{const{error:A}=await xS.from("events").delete().in("id",d);if(A)throw A;K.success(`Успешно удалено ${C} ${C===1?"мероприятие":"мероприятия"}`),f([]),y()}catch(A){console.error("Error deleting events:",A),K.error("Ошибка при удалении мероприятий")}},v=(C,A)=>{A.stopPropagation(),f(k=>k.includes(C)?k.filter(O=>O!==C):[...k,C])},b=C=>{C.stopPropagation(),d.length===w.length?f([]):f(w.map(A=>A.id))},w=t.filter(C=>{var k,O;return C.title.toLowerCase().includes(a.toLowerCase())||((k=C.description)==null?void 0:k.toLowerCase().includes(a.toLowerCase()))||((O=C.location)==null?void 0:O.toLowerCase().includes(a.toLowerCase()))}),S=C=>{var A;return((A=C.registrations)==null?void 0:A.current)!==void 0?C.registrations.current:C.current_registration_count||0},E=C=>{var A;return((A=C.registrations)==null?void 0:A.max_regs)!==void 0?C.registrations.max_regs:C.max_registrations||null},j=C=>{const A=C.payment_type,k=C.price;return A==="free"?"Бесплатно":A==="donation"?"Донат":A==="cost"&&k!==null&&k!==void 0?k===0?"Бесплатно":`${k} ${C.currency||"RUB"}`:"Бесплатно"},I=C=>{const A=S(C),k=E(C);return A>0||k!==null||C.payment_type!=="free"||C.status==="active"},N=C=>!!(C.registrations||C.registrations_list||C.current_registration_count!==void 0),T=C=>{if(!C.start_at)return"Время не указано";const A=en(C.start_at),k=C.end_at?ei(C.start_at,C.end_at):Li(C.start_at);return`${A} • ${k}`},F=[{id:"active",label:"Активные",count:t.filter(C=>C.status==="active"&&(!C.end_at||!fs(C.end_at))).length},{id:"past",label:"Прошедшие",count:t.filter(C=>C.status==="past"||C.end_at&&fs(C.end_at)).length},{id:"draft",label:"Черновики",count:t.filter(C=>C.status==="draft").length}];return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8 font-sans",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"mb-12 text-center",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-4 font-heading",children:"Управление мероприятиями"}),l.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"Создавайте, редактируйте и управляйте своими мероприятиями"})]}),l.jsx("div",{className:"flex justify-center mb-10",children:l.jsxs(Be,{to:"/admin/events/new",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg font-heading",children:[l.jsx(ha,{className:"w-5 h-5"}),"Создать мероприятие"]})}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg mb-8 border border-gray-100 dark:border-gray-700",children:[l.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx(ii,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Поиск мероприятий по названию, описанию или месту...",value:a,onChange:C=>i(C.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200"})]}),l.jsx("div",{className:"flex gap-4",children:l.jsxs("div",{className:"relative",children:[l.jsx(A0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsxs("select",{value:s,onChange:C=>o(C.target.value),className:"pl-10 pr-8 py-4 rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",children:[l.jsx("option",{value:"chronological",children:"Хронологически"}),l.jsx("option",{value:"date-desc",children:"Сначала новые"}),l.jsx("option",{value:"date-asc",children:"Сначала старые"}),l.jsx("option",{value:"title-asc",children:"По названию (А-Я)"}),l.jsx("option",{value:"title-desc",children:"По названию (Я-А)"})]})]})})]})}),l.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-xl mx-6 my-4",children:F.map(C=>l.jsxs("button",{onClick:()=>u(C.id),className:`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all duration-300 font-heading ${c===C.id?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-white dark:hover:bg-gray-600"}`,children:[C.label,C.count>0&&l.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-bold ${c===C.id?"bg-white/20 text-white":"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400"}`,children:C.count})]},C.id))})})})]}),t.length>0&&l.jsxs("div",{className:"mb-8 flex items-center gap-4 p-4 bg-white dark:bg-dark-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:d.length>0&&d.length===w.length,onChange:b,onClick:b,className:"form-checkbox h-5 w-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:border-dark-600 dark:bg-dark-700 dark:checked:bg-primary-600"}),l.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Выбрать все"})]}),d.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"text-gray-600 dark:text-gray-400 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm",children:["Выбрано: ",d.length]}),l.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg",children:[l.jsx(Rn,{className:"h-4 w-4"}),"Удалить выбранные"]})]})]}),r?l.jsxs("div",{className:"text-center py-16",children:[l.jsxs("div",{className:"relative inline-block",children:[l.jsx(mr,{className:"w-12 h-12 animate-spin text-primary-500"}),l.jsx("div",{className:"absolute inset-0 w-12 h-12 border-2 border-primary-200 dark:border-primary-800 rounded-full"})]}),l.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300 font-medium",children:"Загрузка мероприятий..."})]}):w.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/20 dark:to-primary-800/20 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Oe,{className:"w-12 h-12 text-primary-500"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 font-heading",children:"Мероприятия не найдены"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:a?"Попробуйте изменить параметры поиска или создайте новое мероприятие":"Создайте первое мероприятие, чтобы начать привлекать участников"}),l.jsxs(Be,{to:"/admin/events/new",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg font-heading",children:[l.jsx(ha,{className:"h-5 w-5"}),"Создать мероприятие"]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(C=>{const{line1:A,line2:k}=mQ(C.title),O=E(C),$=S(C),D=O?$/O*100:0,R=C.end_at?fs(C.end_at):!1;return l.jsxs("div",{className:"group relative bg-white dark:bg-dark-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 hover:border-primary-200 dark:hover:border-primary-600 cursor-pointer",onClick:()=>{p(C),g(!0)},children:[l.jsx("div",{className:"absolute top-4 left-4 z-10",children:l.jsx("input",{type:"checkbox",checked:d.includes(C.id),onChange:M=>M.stopPropagation(),onClick:M=>v(C.id,M),className:"form-checkbox h-5 w-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:border-dark-600 dark:bg-dark-700 dark:checked:bg-primary-600 shadow-lg"})}),l.jsxs("div",{className:"h-48 bg-cover bg-center relative",style:{backgroundImage:C.bg_image?`url(https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${C.bg_image})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-400 via-primary-500 to-primary-600"}),l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[l.jsx(Be,{to:`/events/${C.id}`,className:"p-2 bg-white/90 hover:bg-white dark:bg-dark-700/90 dark:hover:bg-dark-600 rounded-full shadow-lg flex items-center justify-center transition-all duration-200 transform hover:scale-110",title:"Просмотреть страницу",onClick:M=>M.stopPropagation(),children:l.jsx(Jd,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})}),l.jsx(Be,{to:`/admin/events/${C.id}/edit`,className:"p-2 bg-white/90 hover:bg-white dark:bg-dark-700/90 dark:hover:bg-dark-600 rounded-full shadow-lg flex items-center justify-center transition-all duration-200 transform hover:scale-110",title:"Редактировать",onClick:M=>M.stopPropagation(),children:l.jsx(Ja,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})})]}),l.jsx("div",{className:"absolute bottom-4 left-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold shadow-lg ${R?yS.past:yS[C.status]}`,children:R?"Прошло":C.status==="active"?"Активно":C.status==="draft"?"Черновик":"Прошло"})})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"h-[4rem] mb-4 overflow-hidden",children:l.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white font-heading group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:[A,k&&l.jsxs(l.Fragment,{children:[l.jsx("br",{}),k]})]})}),l.jsxs("div",{className:"space-y-3 mb-4",children:[l.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300 text-sm",children:[l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary-100 dark:bg-primary-900/30 rounded-lg mr-3",children:l.jsx(Oe,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),l.jsx("span",{className:"truncate font-medium",children:T(C)})]}),C.location&&l.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300 text-sm",children:[l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary-100 dark:bg-primary-900/30 rounded-lg mr-3",children:l.jsx(vr,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),l.jsx("span",{className:"truncate font-medium",children:C.location})]}),I(C)&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary-100 dark:bg-primary-900/30 rounded-lg mr-3",children:l.jsx(Vt,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),l.jsx("span",{className:"font-medium",children:N(C)?"Регистрации":"Участие"})]}),l.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[$,O&&O>0?`/${O}`:""]})]}),O&&O>0&&l.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"h-2 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full transition-all duration-500",style:{width:`${Math.min(D,100)}%`}})}),(!O||O===0)&&$>0&&l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Без ограничений"}),!N(C)&&l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Регистрация не требуется"})]})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Стоимость:"}),l.jsx("span",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:j(C)})]})]})]},C.id)})}),h&&l.jsx(pQ,{isOpen:m,onClose:()=>{g(!1),p(null)},event:h})]})})},vQ=["Lecture","Workshop","Movie Discussion","Conversation Club","Festival","Stand-up","Concert","Excursion","Discussion","Swap","Quiz"],xQ=["cost","free","donation"],yQ=["Русский","Английский","Сербский"],bQ=["0+","12+","18+"],wQ=["RSD","EUR","RUB"],_Q=["draft","active","past"],bS=70,wS=150,_S=800,kQ=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),NQ=({selectedSpeakerIds:t,hideSpeakersGallery:e,onSpeakerToggle:r,onHideGalleryChange:n})=>{const[a,i]=_.useState([]),[s,o]=_.useState([]),[c,u]=_.useState(!1),[d,f]=_.useState(null),[h,p]=_.useState(""),[m,g]=_.useState(!1),y=_.useRef(null);_.useEffect(()=>{x()},[]),_.useEffect(()=>{if(t&&t.length>0&&a.length>0){const j=a.filter(I=>t.includes(I.id));o(j)}else o([])},[t,a]),_.useEffect(()=>{const j=I=>{y.current&&!y.current.contains(I.target)&&g(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const x=async()=>{try{u(!0),f(null);const{data:j,error:I}=await kQ.from("speakers").select("*").order("name");if(I)throw I;i(j||[])}catch(j){console.error("Error fetching speakers:",j),f("Ошибка при загрузке спикеров")}finally{u(!1)}},v=j=>{r(j.id)},b=j=>{p(j),g(j.length>0)},w=j=>{t.includes(j.id)||v(j),p(""),g(!1)},S=a.filter(j=>h.length>0&&(j.name.toLowerCase().includes(h.toLowerCase())||j.field_of_expertise.toLowerCase().includes(h.toLowerCase()))),E=a.filter(j=>!t.includes(j.id));return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/30 rounded-xl mr-4",children:l.jsx(Cn,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Спикеры"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Выберите спикеров мероприятия"})]})]}),l.jsx("div",{className:"flex items-center",children:l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"checkbox",checked:e,onChange:j=>n(j.target.checked),className:"sr-only"}),l.jsx("div",{className:`w-11 h-6 rounded-full shadow-inner transition-colors duration-200 ${e?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"}`,children:l.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transform transition-transform duration-200 ${e?"translate-x-6":"translate-x-1"} mt-1`})})]}),l.jsx("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:"Скрыть галерею спикеров"})]})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"relative",ref:y,children:[l.jsx("input",{type:"text",placeholder:"Поиск и добавление спикеров...",value:h,onChange:j=>b(j.target.value),onFocus:()=>h.length>0&&g(!0),className:"w-full p-4 pl-12 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200"}),l.jsx(ii,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),m&&S.length>0&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:S.map(j=>{var I,N;return l.jsx("div",{onClick:()=>w(j),className:`p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors duration-150 ${t.includes(j.id)?"opacity-50 cursor-not-allowed":""}`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 mr-3 flex-shrink-0",children:(N=(I=j.photos)==null?void 0:I[0])!=null&&N.url?l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${j.photos[0].url}`,alt:j.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Cn,{className:"w-5 h-5 text-gray-400"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:j.name}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:j.field_of_expertise})]}),t.includes(j.id)&&l.jsx("span",{className:"text-xs text-primary-600 dark:text-primary-400 ml-2",children:"Выбран"})]})},j.id)})}),m&&h.length>0&&S.length===0&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg z-50 p-4 text-center text-gray-500 dark:text-gray-400",children:"Спикеры не найдены"})]}),s.length>0&&l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[l.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:["Выбранные спикеры (",s.length,"):"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(j=>{var I,N;return l.jsxs("div",{className:"flex items-center gap-2 bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 px-3 py-2 rounded-full border border-primary-200 dark:border-primary-700",children:[l.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-primary-200 dark:bg-primary-800 flex-shrink-0",children:(N=(I=j.photos)==null?void 0:I[0])!=null&&N.url?l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${j.photos[0].url}`,alt:j.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Cn,{className:"w-3 h-3 text-primary-600 dark:text-primary-400"})})}),l.jsx("span",{className:"text-sm font-medium",children:j.name}),l.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),v(j)},className:"text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-200 hover:bg-primary-200 dark:hover:bg-primary-800 rounded-full p-0.5 transition-colors duration-150",children:l.jsx(Bt,{className:"h-3 w-3"})})]},j.id)})})]}),!e&&l.jsx(l.Fragment,{children:c?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Загрузка спикеров..."})]}):d?l.jsx("div",{className:"text-center py-8 text-red-500",children:d}):l.jsxs("div",{children:[l.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:["Все спикеры (",E.length," доступно)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:E.map(j=>{var I,N;return l.jsx("div",{onClick:()=>v(j),className:"p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-md",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 mr-2 flex-shrink-0",children:(N=(I=j.photos)==null?void 0:I[0])!=null&&N.url?l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${j.photos[0].url}`,alt:j.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Cn,{className:"w-5 h-5 text-gray-400"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:j.name}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:j.field_of_expertise})]})]})},j.id)})})]})})]})]})},SQ=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),EQ=({eventType:t,festivalProgram:e=[],allSpeakers:r,onFestivalProgramChange:n})=>{const[a,i]=_.useState(null),[s,o]=_.useState(!1),[c,u]=_.useState({title:"",description:"",image_url:"",start_time:"",end_time:"",lecturer_id:""}),[d,f]=_.useState(null),h=_.useRef(null);if(t!=="Festival")return null;const p=()=>{if(!c.title||!c.start_time||!c.end_time){K.error("Заполните обязательные поля программы");return}const v=[...e||[]];a!==null?v[a]=c:v.push(c),n(v),u({title:"",description:"",image_url:"",start_time:"",end_time:"",lecturer_id:""}),i(null),o(!1),f(null)},m=v=>{e&&(u(e[v]),i(v),o(!0),e[v].image_url?f(`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${e[v].image_url}`):f(null))},g=v=>{const b=[...e||[]];b.splice(v,1),n(b)},y=async v=>{try{const b=Date.now(),w=v.name.split(".").pop()||"jpg",S=`program-images/${b}.${w}`,{error:E}=await SQ.storage.from("images").upload(S,v);if(E)throw E;u(j=>({...j,image_url:S})),f(`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${S}`),K.success("Изображение успешно загружено")}catch(b){console.error("Error uploading program image:",b),K.error("Ошибка при загрузке изображения")}},x=v=>{var w;const b=(w=v.target.files)==null?void 0:w[0];b&&y(b)};return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-pink-100 to-pink-200 dark:from-pink-900/30 dark:to-pink-800/30 rounded-xl mr-4",children:l.jsx(Oe,{className:"w-6 h-6 text-pink-600 dark:text-pink-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Программа фестиваля"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Добавьте пункты программы"})]})]}),l.jsxs("button",{type:"button",onClick:()=>{u({title:"",description:"",image_url:"",start_time:"",end_time:"",lecturer_id:""}),i(null),o(!0),f(null)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[l.jsx(ha,{className:"h-5 w-5"}),"Добавить пункт"]})]}),s?l.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:a!==null?"Редактирование пункта программы":"Новый пункт программы"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Название ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:c.title,onChange:v=>u({...c,title:v.target.value}),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-dark-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"Название пункта программы"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Время начала ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"time",value:c.start_time,onChange:v=>u({...c,start_time:v.target.value}),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-dark-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Время окончания ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"time",value:c.end_time,onChange:v=>u({...c,end_time:v.target.value}),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-dark-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Описание"}),l.jsx("textarea",{value:c.description,onChange:v=>u({...c,description:v.target.value}),rows:3,className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-dark-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"Описание пункта программы"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Спикер"}),l.jsxs("select",{value:c.lecturer_id,onChange:v=>u({...c,lecturer_id:v.target.value}),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-dark-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",children:[l.jsx("option",{value:"",children:"Выберите спикера"}),r.map(v=>l.jsx("option",{value:v.id,children:v.name},v.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Изображение"}),d?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:d,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),l.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{var v;return(v=h.current)==null?void 0:v.click()},className:"p-2 bg-white/90 hover:bg-white text-dark-800 rounded-full shadow-lg",title:"Изменить изображение",children:l.jsx(Ja,{className:"h-5 w-5"})}),l.jsx("button",{type:"button",onClick:()=>{u({...c,image_url:""}),f(null)},className:"p-2 bg-red-600/90 hover:bg-red-600 text-white rounded-full shadow-lg",title:"Удалить изображение",children:l.jsx(Rn,{className:"h-5 w-5"})})]})]}):l.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg p-6 text-center",children:[l.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:x,className:"hidden"}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"mb-3 p-2 bg-gray-100 dark:bg-dark-700 rounded-full",children:l.jsx(qa,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),l.jsx("button",{type:"button",onClick:()=>{var v;return(v=h.current)==null?void 0:v.click()},className:"px-3 py-1.5 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors text-sm",children:"Загрузить изображение"}),l.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Рекомендуемый размер: 800x600px"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>{o(!1),u({title:"",description:"",image_url:"",start_time:"",end_time:"",lecturer_id:""}),f(null)},className:"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"Отмена"}),l.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:a!==null?"Сохранить изменения":"Добавить пункт"})]})]})]}):null,e&&e.length>0?l.jsx("div",{className:"space-y-4",children:e.map((v,b)=>{const w=r.find(S=>S.id===v.lecturer_id);return l.jsx("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-xl p-4 border border-gray-200 dark:border-dark-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[v.image_url&&l.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${v.image_url}`,alt:v.title,className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:v.title}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(bn,{className:"h-4 w-4 mr-1"}),l.jsxs("span",{children:[v.start_time," - ",v.end_time]})]}),w&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(Vt,{className:"h-4 w-4 mr-1"}),l.jsx("span",{children:w.name})]})]}),v.description&&l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 line-clamp-2",children:v.description})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>m(b),className:"p-1.5 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:l.jsx(Ja,{className:"h-4 w-4"})}),l.jsx("button",{type:"button",onClick:()=>g(b),className:"p-1.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:l.jsx(Rn,{className:"h-4 w-4"})})]})]})},b)})}):l.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-dark-700 rounded-xl",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-dark-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Oe,{className:"h-8 w-8 text-gray-400 dark:text-gray-500"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Нет пунктов программы"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Добавьте пункты, чтобы создать программу фестиваля"}),l.jsxs("button",{type:"button",onClick:()=>{u({title:"",description:"",image_url:"",start_time:"",end_time:"",lecturer_id:""}),i(null),o(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[l.jsx(ha,{className:"h-5 w-5"}),"Добавить первый пункт"]})]})]})},kv=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),kS=()=>{const{id:t}=lw(),e=Ma(),[r,n]=_.useState(!1),[a,i]=_.useState(!1),[s,o]=_.useState([]),[c,u]=_.useState(!1),[d,f]=_.useState(0),h=_.useRef(null),[p,m]=_.useState(!1),[g,y]=_.useState({id:"",title:"",short_description:"",description:"",event_type:"Lecture",bg_image:"",original_bg_image:"",start_at:"",end_at:"",location:"",age_category:"0+",price:"",currency:"RSD",status:"draft",payment_type:"cost",payment_link:"",payment_widget_id:"",widget_chooser:!1,languages:["Русский"],speakers:[],hide_speakers_gallery:!0,couple_discount:"",child_half_price:!1,festival_program:[],video_url:"",photo_gallery:[]}),[x,v]=_.useState({title:!1,start_at:!1,end_at:!1,location:!1,price:!1,payment_link:!1});_.useEffect(()=>{if(b(),t)w(t);else{const D=new Date,R=new Date(D);R.setHours(18,0,0,0);const M=new Date(D);M.setHours(20,0,0,0),y(L=>({...L,id:crypto.randomUUID(),start_at:R.toISOString(),end_at:M.toISOString()}))}},[t]);const b=async()=>{try{const{data:D,error:R}=await kv.from("speakers").select("*").eq("active",!0);if(R)throw R;o(D||[])}catch(D){console.error("Error fetching speakers:",D),K.error("Ошибка при загрузке спикеров")}},w=async D=>{try{n(!0);const{data:R,error:M}=await kv.from("events").select("*").eq("id",D).single();if(M)throw M;let L=R.photo_gallery||[];if(typeof L=="string")try{L=JSON.parse(L)}catch(q){console.error("Error parsing photo_gallery:",q),L=[]}Array.isArray(L)||(L=[]);let B=R.start_at||"",U=R.end_at||"";!B&&R.start_time&&(B=R.start_time),!U&&R.end_time&&(U=R.end_time),!B&&R.date&&R.start_time&&(B=i3(ji(R.date),R.start_time)),!U&&R.date&&R.end_time&&(U=i3(ji(R.date),R.end_time)),y({...R,price:R.price!==null?String(R.price):"",couple_discount:R.couple_discount||"",languages:R.languages||["Русский"],speakers:R.speakers||[],hide_speakers_gallery:R.hide_speakers_gallery!==!1,festival_program:R.festival_program||[],video_url:R.video_url||"",photo_gallery:L,start_at:B,end_at:U})}catch(R){console.error("Error fetching event:",R),K.error("Ошибка при загрузке мероприятия")}finally{n(!1)}},S=()=>{const D={title:!g.title.trim(),start_at:!g.start_at,end_at:!g.end_at,location:!g.location.trim(),price:!1,payment_link:!1};if(g.start_at&&g.end_at){const R=new Date(g.start_at);new Date(g.end_at)<=R&&(D.end_at=!0,K.error("Время окончания должно быть позже времени начала"))}return g.status==="active"&&g.payment_type==="cost"&&!g.price&&!g.payment_link&&(D.price=!0,D.payment_link=!0,K.error("Для активных мероприятий необходимо указать либо цену, либо ссылку на оплату")),v(D),!Object.values(D).some(Boolean)},E=D=>{const{name:R,value:M}=D.target;R==="title"&&M.length>bS||R==="short_description"&&M.length>wS||R==="description"&&M.length>_S||(y(L=>({...L,[R]:M})),R in x&&v(L=>({...L,[R]:!1})))},j=(D,R)=>{if(!R)return;const M=new Date(R).toISOString();y(L=>({...L,[D]:M})),v(L=>({...L,[D]:!1}))},I=D=>{const{name:R,checked:M}=D.target;y(L=>({...L,[R]:M}))},N=D=>{const{value:R,checked:M}=D.target;y(M?L=>({...L,languages:[...L.languages,R]}):L=>({...L,languages:L.languages.filter(B=>B!==R)}))},T=D=>{y(R=>{const M=[...R.speakers];return M.includes(D)?{...R,speakers:M.filter(L=>L!==D)}:{...R,speakers:[...M,D]}})},F=D=>{y(R=>({...R,hide_speakers_gallery:D}))},C=D=>{y(R=>({...R,festival_program:D}))},A=D=>{if(!D)return"";try{const R=new Date(D);return new Date(R.getTime()-R.getTimezoneOffset()*6e4).toISOString().slice(0,16)}catch(R){return console.error("Error formatting datetime for input:",R),""}},k=async D=>{var M;const R=(M=D.target.files)==null?void 0:M[0];if(R)try{u(!0),f(0);const L=Date.now(),B=R.name.split(".").pop(),q=`events/${`${L}.${B}`}`,{data:te,error:V}=await kv.storage.from("images").upload(q,R,{cacheControl:"3600",upsert:!1,onUploadProgress:re=>{const ue=Math.round(re.loaded/re.total*100);f(ue)}});if(V)throw V;y(re=>({...re,bg_image:q,original_bg_image:re.bg_image||null})),K.success("Изображение успешно загружено")}catch(L){console.error("Error uploading file:",L),K.error("Ошибка при загрузке файла")}finally{u(!1),f(0),h.current&&(h.current.value="")}},O=async D=>{if(D.preventDefault(),!S()){K.error("Пожалуйста, заполните все обязательные поля");return}try{i(!0);const R={...g,price:g.price?parseFloat(g.price):null,couple_discount:g.couple_discount?parseFloat(g.couple_discount):null,photo_gallery:Array.isArray(g.photo_gallery)?g.photo_gallery:[],date:void 0,start_time:void 0,end_time:void 0};Object.keys(R).forEach(U=>{R[U]===void 0&&delete R[U]});const M=!t,L=await fetch("https://jfvinriqydjtwsmayxix.supabase.co/functions/v1/save-event",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"},body:JSON.stringify({eventData:R,isNew:M})}),B=await L.json();if(!L.ok)if(B.code==="PG_NET_EXTENSION_MISSING")console.warn("Database notification extension (pg_net) is not enabled. Notifications will not be sent.");else throw new Error(B.error||"Error saving event");K.success(M?"Мероприятие создано":"Мероприятие обновлено"),e("/admin/events")}catch(R){console.error("Error saving event:",R),K.error(`Ошибка при сохранении мероприятия: ${R.message}`)}finally{i(!1)}},$=async()=>{if(t)try{n(!0);const D=await fetch("https://jfvinriqydjtwsmayxix.supabase.co/functions/v1/save-event",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"},body:JSON.stringify({eventData:{id:t},action:"delete"})}),R=await D.json();if(!D.ok)throw new Error(R.error||"Error deleting event");K.success("Мероприятие удалено"),e("/admin/events")}catch(D){console.error("Error deleting event:",D),K.error("Ошибка при удалении мероприятия")}finally{n(!1),m(!1)}};return r?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t?"Редактирование мероприятия":"Создание мероприятия"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[t&&l.jsxs("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[l.jsx(Rn,{className:"h-5 w-5"}),"Удалить"]}),l.jsx("button",{type:"button",onClick:O,disabled:a,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 disabled:opacity-50 text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:a?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"h-5 w-5 animate-spin"}),"Сохранение..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"h-5 w-5"}),"Сохранить"]})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 p-6 mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[l.jsx(Fj,{className:"h-5 w-5 text-primary-600"}),"Статус мероприятия"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:_Q.map(D=>l.jsxs("button",{type:"button",onClick:()=>y(R=>({...R,status:D})),className:`p-4 rounded-xl border-2 text-center transition-all duration-200 ${g.status===D?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-dark-500"}`,children:[l.jsx("div",{className:"font-semibold text-lg mb-1",children:D==="active"?"🟢 Активное":D==="draft"?"📝 Черновик":"⏹️ Прошедшее"}),l.jsx("div",{className:"text-sm opacity-75",children:D==="active"?"Видно пользователям":D==="draft"?"Скрыто от пользователей":"Архивное событие"})]},D))})]}),l.jsxs("form",{onSubmit:O,className:"space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[l.jsx(Hp,{className:"h-5 w-5 text-primary-600"}),"Основная информация"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"title",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Название мероприятия ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:E,className:`w-full px-4 py-3 rounded-lg border transition-colors ${x.title?"border-red-500 focus:border-red-500":"border-gray-300 dark:border-dark-600 focus:border-primary-500"} bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800`,placeholder:"Введите название мероприятия"}),l.jsxs("div",{className:"flex justify-between mt-2",children:[x.title&&l.jsx("p",{className:"text-red-500 text-sm",children:"Обязательное поле"}),l.jsxs("p",{className:"text-gray-500 text-sm text-right ml-auto",children:[g.title.length,"/",bS]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"short_description",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Краткое описание"}),l.jsx("input",{type:"text",id:"short_description",name:"short_description",value:g.short_description,onChange:E,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors",placeholder:"Краткое описание для списка мероприятий"}),l.jsxs("p",{className:"text-gray-500 text-sm text-right mt-2",children:[g.short_description.length,"/",wS]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"description",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Полное описание"}),l.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:E,rows:6,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors resize-vertical",placeholder:"Подробное описание мероприятия"}),l.jsxs("p",{className:"text-gray-500 text-sm text-right mt-2",children:[g.description.length,"/",_S]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"event_type",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Тип мероприятия"}),l.jsx("select",{id:"event_type",name:"event_type",value:g.event_type,onChange:E,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors",children:vQ.map(D=>l.jsx("option",{value:D,children:D},D))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"age_category",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Возрастная категория"}),l.jsx("select",{id:"age_category",name:"age_category",value:g.age_category,onChange:E,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors",children:bQ.map(D=>l.jsx("option",{value:D,children:D},D))})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Языки"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:yQ.map(D=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer transition-colors",children:[l.jsx("input",{type:"checkbox",value:D,checked:g.languages.includes(D),onChange:N,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 transition-colors"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:D})]},D))})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[l.jsx(Oe,{className:"h-5 w-5 text-primary-600"}),"Дата и время проведения"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"start_at",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Дата и время начала ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"datetime-local",id:"start_at",name:"start_at",value:A(g.start_at),onChange:D=>j("start_at",D.target.value),className:`w-full px-4 py-3 rounded-lg border transition-colors ${x.start_at?"border-red-500 focus:border-red-500":"border-gray-300 dark:border-dark-600 focus:border-primary-500"} bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800`}),x.start_at&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Обязательное поле"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"end_at",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Дата и время окончания ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"datetime-local",id:"end_at",name:"end_at",value:A(g.end_at),onChange:D=>j("end_at",D.target.value),className:`w-full px-4 py-3 rounded-lg border transition-colors ${x.end_at?"border-red-500 focus:border-red-500":"border-gray-300 dark:border-dark-600 focus:border-primary-500"} bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800`}),x.end_at&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:x.end_at===!0?"Время окончания должно быть позже времени начала":"Обязательное поле"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"location",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Место проведения ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"location",name:"location",value:g.location,onChange:E,className:`w-full px-4 py-3 rounded-lg border transition-colors ${x.location?"border-red-500 focus:border-red-500":"border-gray-300 dark:border-dark-600 focus:border-primary-500"} bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800`,placeholder:"Адрес или название места"}),x.location&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Обязательное поле"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[l.jsx(dc,{className:"h-5 w-5 text-primary-600"}),"Медиа контент"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Главное изображение мероприятия"}),g.bg_image?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${g.bg_image}`,alt:"Event preview",className:"w-full h-64 object-cover rounded-lg",onError:D=>{const R=D.target;R.src="https://via.placeholder.com/800x400?text=Image+not+found"}}),l.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{var D;return(D=h.current)==null?void 0:D.click()},className:"p-2 bg-white/90 hover:bg-white text-dark-800 rounded-full shadow-lg transition-colors",title:"Изменить изображение",children:l.jsx(Ao,{className:"h-5 w-5"})}),l.jsx("button",{type:"button",onClick:()=>y(D=>({...D,bg_image:""})),className:"p-2 bg-red-600/90 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors",title:"Удалить изображение",children:l.jsx(Bt,{className:"h-5 w-5"})})]})]}):l.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg p-8 text-center",children:[l.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:k,className:"hidden"}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-dark-700 rounded-full",children:l.jsx(qa,{className:"h-6 w-6 text-gray-500 dark:text-gray-400"})}),l.jsx("button",{type:"button",onClick:()=>{var D;return(D=h.current)==null?void 0:D.click()},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors",disabled:c,children:c?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mr,{className:"h-5 w-5 animate-spin"}),l.jsxs("span",{children:["Загрузка... ",d,"%"]})]}):l.jsx("span",{children:"Загрузить изображение"})}),l.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Рекомендуемый размер: 1200x600px"})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"video_url",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:[l.jsx(a7,{className:"h-5 w-5 inline mr-2"}),"Ссылка на видео"]}),l.jsx("input",{type:"url",id:"video_url",name:"video_url",value:g.video_url,onChange:E,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors",placeholder:"https://youtube.com/watch?v=..."})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:[l.jsx(dc,{className:"h-5 w-5 inline mr-2"}),"Галерея фотографий"]}),l.jsxs("div",{className:"space-y-2",children:[Array.isArray(g.photo_gallery)&&g.photo_gallery.filter(D=>typeof D=="string"&&D.trim()!=="").map((D,R)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[l.jsx("input",{type:"url",value:D,onChange:M=>{const L=[...g.photo_gallery];L[R]=M.target.value,y(B=>({...B,photo_gallery:L}))},className:"flex-1 px-3 py-2 rounded border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-800 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500",placeholder:"URL фотографии"}),l.jsx("button",{type:"button",onClick:()=>{const M=g.photo_gallery.filter((L,B)=>B!==R);y(L=>({...L,photo_gallery:M}))},className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Удалить фотографию",children:l.jsx(Bt,{className:"h-4 w-4"})})]},R)),l.jsxs("button",{type:"button",onClick:()=>{y(D=>({...D,photo_gallery:[...Array.isArray(D.photo_gallery)?D.photo_gallery:[],""]}))},className:"flex items-center gap-2 px-4 py-2 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 transition-colors w-full",children:[l.jsx(ha,{className:"h-4 w-4"}),"Добавить фотографию"]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Вставьте прямую ссылку на изображение (например, из облачного хранилища)"}),Array.isArray(g.photo_gallery)&&g.photo_gallery.length>0&&l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mt-3",children:g.photo_gallery.filter(D=>typeof D=="string"&&D.trim()!=="").map((D,R)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:D,alt:`Preview ${R+1}`,className:"w-full h-32 object-cover rounded-lg",onError:M=>{const L=M.target;L.src="https://via.placeholder.com/300x200?text=Image+not+found"}}),l.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded-lg",children:l.jsx("button",{type:"button",onClick:()=>{const M=g.photo_gallery.filter((L,B)=>B!==R);y(L=>({...L,photo_gallery:M}))},className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",title:"Удалить",children:l.jsx(Rn,{className:"h-4 w-4"})})})]},R))})]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[l.jsx(Hu,{className:"h-5 w-5 text-primary-600"}),"Информация об оплате"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Тип оплаты"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:xQ.map(D=>l.jsxs("button",{type:"button",onClick:()=>y(R=>({...R,payment_type:D})),className:`p-4 rounded-xl border-2 text-center transition-all duration-200 ${g.payment_type===D?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-dark-500"}`,children:[l.jsx("div",{className:"font-semibold text-lg mb-1",children:D==="cost"?"💰 Платное":D==="free"?"🆓 Бесплатное":"💝 Донейшн"}),l.jsx("div",{className:"text-sm opacity-75",children:D==="cost"?"Фиксированная цена":D==="free"?"Без оплаты":"Добровольные взносы"})]},D))})]}),g.payment_type==="cost"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"price",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Цена"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",id:"price",name:"price",value:g.price,onChange:E,className:`w-full px-4 py-3 pr-16 rounded-lg border transition-colors ${x.price?"border-red-500 focus:border-red-500":"border-gray-300 dark:border-dark-600 focus:border-primary-500"} bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800`,placeholder:"Оставьте пустым для оплаты только онлайн",min:"0",step:"100"}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:l.jsx("span",{className:"text-gray-500 font-medium",children:g.currency})})]}),x.price&&x.payment_link&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Для активных мероприятий необходимо указать либо цену, либо ссылку на оплату"}),l.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Оставьте пустым для оплаты только онлайн"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"currency",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Валюта"}),l.jsx("select",{id:"currency",name:"currency",value:g.currency,onChange:E,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors",children:wQ.map(D=>l.jsx("option",{value:D,children:D},D))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"couple_discount",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Скидка для пар (%)"}),l.jsx("input",{type:"number",id:"couple_discount",name:"couple_discount",value:g.couple_discount,onChange:E,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors",placeholder:"Например: 10",min:"0",max:"100"})]}),l.jsx("div",{className:"form-group flex items-end",children:l.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer transition-colors w-full",children:[l.jsx("input",{type:"checkbox",name:"child_half_price",checked:g.child_half_price,onChange:I,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 transition-colors"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Детский билет за полцены"})]})})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{htmlFor:"payment_link",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:[l.jsx(GM,{className:"h-4 w-4 inline mr-2"}),"Ссылка на оплату"]}),l.jsx("input",{type:"url",id:"payment_link",name:"payment_link",value:g.payment_link,onChange:E,className:`w-full px-4 py-3 rounded-lg border transition-colors ${x.payment_link?"border-red-500 focus:border-red-500":"border-gray-300 dark:border-dark-600 focus:border-primary-500"} bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800`,placeholder:"https://..."}),x.price&&x.payment_link&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Для активных мероприятий необходимо указать либо цену, либо ссылку на оплату"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"payment_widget_id",className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"ID виджета оплаты"}),l.jsx("textarea",{id:"payment_widget_id",name:"payment_widget_id",value:g.payment_widget_id,onChange:E,rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-900 dark:text-white focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-colors resize-vertical",placeholder:"ID виджета или HTML-код"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-3 text-gray-700 dark:text-gray-300",children:"Виджет оплаты"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("button",{type:"button",onClick:()=>y(D=>({...D,widget_chooser:!1})),className:`p-4 rounded-xl border-2 text-center transition-all duration-200 ${g.widget_chooser?"border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-dark-500":"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300"}`,children:[l.jsx("div",{className:"font-semibold text-lg mb-1",children:"🔗 Ссылка"}),l.jsx("div",{className:"text-sm opacity-75",children:"Переход по ссылке"})]}),l.jsxs("button",{type:"button",onClick:()=>y(D=>({...D,widget_chooser:!0})),className:`p-4 rounded-xl border-2 text-center transition-all duration-200 ${g.widget_chooser?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:border-gray-300 dark:hover:border-dark-500"}`,children:[l.jsx("div",{className:"font-semibold text-lg mb-1",children:"🛠️ Виджет"}),l.jsx("div",{className:"text-sm opacity-75",children:"Встроенная форма"})]})]})]})]})]}),l.jsx(NQ,{selectedSpeakerIds:g.speakers,hideSpeakersGallery:g.hide_speakers_gallery,onSpeakerToggle:T,onHideGalleryChange:F,allSpeakers:s}),l.jsx(EQ,{eventType:g.event_type,festivalProgram:g.festival_program,allSpeakers:s,onFestivalProgramChange:C}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-6 border-t border-gray-200 dark:border-dark-600",children:[l.jsx("button",{type:"button",onClick:()=>e("/admin/events"),className:"px-6 py-3 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"Отмена"}),l.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:a?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"h-5 w-5 animate-spin"}),"Сохранение..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"h-5 w-5"}),"Сохранить"]})})]})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg max-w-md w-full p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[l.jsx(AM,{className:"h-6 w-6"}),l.jsx("h3",{className:"text-lg font-semibold",children:"Подтверждение удаления"})]}),l.jsx("p",{className:"mb-6 text-gray-700 dark:text-gray-300",children:"Вы уверены, что хотите удалить это мероприятие? Это действие нельзя отменить."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"Отмена"}),l.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Удалить"})]})]})})]})};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function NS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NS(Object(r),!0).forEach(function(n){TQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CQ(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sT(t){var e=CQ(t,"string");return typeof e=="symbol"?e:e+""}function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function jQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sT(n.key),n)}}function AQ(t,e,r){return e&&SS(t.prototype,e),r&&SS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function TQ(t,e,r){return e=sT(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oT(t){return IQ(t)||OQ(t)||DQ(t)||PQ()}function IQ(t){if(Array.isArray(t))return By(t)}function OQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DQ(t,e){if(t){if(typeof t=="string")return By(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return By(t,e)}}function By(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function PQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gm=typeof window<"u"&&typeof window.document<"u",oi=gm?window:{},n2=gm&&oi.document.documentElement?"ontouchstart"in oi.document.documentElement:!1,a2=gm?"PointerEvent"in oi:!1,Ct="cropper",i2="all",lT="crop",cT="move",uT="zoom",ao="e",io="w",vl="s",Qi="n",du="ne",fu="nw",hu="se",pu="sw",Fy="".concat(Ct,"-crop"),ES="".concat(Ct,"-disabled"),fn="".concat(Ct,"-hidden"),CS="".concat(Ct,"-hide"),RQ="".concat(Ct,"-invisible"),ap="".concat(Ct,"-modal"),$y="".concat(Ct,"-move"),Rd="".concat(Ct,"Action"),ph="".concat(Ct,"Preview"),s2="crop",dT="move",fT="none",Uy="crop",zy="cropend",Hy="cropmove",Wy="cropstart",jS="dblclick",MQ=n2?"touchstart":"mousedown",LQ=n2?"touchmove":"mousemove",BQ=n2?"touchend touchcancel":"mouseup",AS=a2?"pointerdown":MQ,TS=a2?"pointermove":LQ,IS=a2?"pointerup pointercancel":BQ,OS="ready",DS="resize",PS="wheel",Vy="zoom",RS="image/jpeg",FQ=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,$Q=/^data:/,UQ=/^data:image\/jpeg;base64,/,zQ=/^img|canvas$/i,hT=200,pT=100,MS={viewMode:0,dragMode:s2,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:hT,minContainerHeight:pT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},HQ='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',WQ=Number.isNaN||oi.isNaN;function We(t){return typeof t=="number"&&!WQ(t)}var LS=function(e){return e>0&&e<1/0};function Nv(t){return typeof t>"u"}function qo(t){return Ly(t)==="object"&&t!==null}var VQ=Object.prototype.hasOwnProperty;function $l(t){if(!qo(t))return!1;try{var e=t.constructor,r=e.prototype;return e&&r&&VQ.call(r,"isPrototypeOf")}catch{return!1}}function dn(t){return typeof t=="function"}var GQ=Array.prototype.slice;function mT(t){return Array.from?Array.from(t):GQ.call(t)}function Yt(t,e){return t&&dn(e)&&(Array.isArray(t)||We(t.length)?mT(t).forEach(function(r,n){e.call(t,r,n,t)}):qo(t)&&Object.keys(t).forEach(function(r){e.call(t,t[r],r,t)})),t}var At=Object.assign||function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return qo(e)&&n.length>0&&n.forEach(function(i){qo(i)&&Object.keys(i).forEach(function(s){e[s]=i[s]})}),e},XQ=/\.\d*(?:0|9){12}\d*$/;function ec(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return XQ.test(t)?Math.round(t*e)/e:t}var qQ=/^width|height|left|top|marginLeft|marginTop$/;function vs(t,e){var r=t.style;Yt(e,function(n,a){qQ.test(a)&&We(n)&&(n="".concat(n,"px")),r[a]=n})}function YQ(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function ur(t,e){if(e){if(We(t.length)){Yt(t,function(n){ur(n,e)});return}if(t.classList){t.classList.add(e);return}var r=t.className.trim();r?r.indexOf(e)<0&&(t.className="".concat(r," ").concat(e)):t.className=e}}function ni(t,e){if(e){if(We(t.length)){Yt(t,function(r){ni(r,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Ul(t,e,r){if(e){if(We(t.length)){Yt(t,function(n){Ul(n,e,r)});return}r?ur(t,e):ni(t,e)}}var KQ=/([a-z\d])([A-Z])/g;function o2(t){return t.replace(KQ,"$1-$2").toLowerCase()}function Gy(t,e){return qo(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(o2(e)))}function Md(t,e,r){qo(r)?t[e]=r:t.dataset?t.dataset[e]=r:t.setAttribute("data-".concat(o2(e)),r)}function ZQ(t,e){if(qo(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(o2(e)))}var gT=/\s\s*/,vT=function(){var t=!1;if(gm){var e=!1,r=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(i){e=i}});oi.addEventListener("test",r,n),oi.removeEventListener("test",r,n)}return t}();function va(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r;e.trim().split(gT).forEach(function(i){if(!vT){var s=t.listeners;s&&s[i]&&s[i][r]&&(a=s[i][r],delete s[i][r],Object.keys(s[i]).length===0&&delete s[i],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(i,a,n)})}function Qn(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r;e.trim().split(gT).forEach(function(i){if(n.once&&!vT){var s=t.listeners,o=s===void 0?{}:s;a=function(){delete o[i][r],t.removeEventListener(i,a,n);for(var u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];r.apply(t,d)},o[i]||(o[i]={}),o[i][r]&&t.removeEventListener(i,o[i][r],n),o[i][r]=a,t.listeners=o}t.addEventListener(i,a,n)})}function tc(t,e,r){var n;return dn(Event)&&dn(CustomEvent)?n=new CustomEvent(e,{detail:r,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,r)),t.dispatchEvent(n)}function xT(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Sv=oi.location,QQ=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function BS(t){var e=t.match(QQ);return e!==null&&(e[1]!==Sv.protocol||e[2]!==Sv.hostname||e[3]!==Sv.port)}function FS(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function td(t){var e=t.rotate,r=t.scaleX,n=t.scaleY,a=t.translateX,i=t.translateY,s=[];We(a)&&a!==0&&s.push("translateX(".concat(a,"px)")),We(i)&&i!==0&&s.push("translateY(".concat(i,"px)")),We(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),We(r)&&r!==1&&s.push("scaleX(".concat(r,")")),We(n)&&n!==1&&s.push("scaleY(".concat(n,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function JQ(t){var e=iT({},t),r=0;return Yt(t,function(n,a){delete e[a],Yt(e,function(i){var s=Math.abs(n.startX-i.startX),o=Math.abs(n.startY-i.startY),c=Math.abs(n.endX-i.endX),u=Math.abs(n.endY-i.endY),d=Math.sqrt(s*s+o*o),f=Math.sqrt(c*c+u*u),h=(f-d)/d;Math.abs(h)>Math.abs(r)&&(r=h)})}),r}function mh(t,e){var r=t.pageX,n=t.pageY,a={endX:r,endY:n};return e?a:iT({startX:r,startY:n},a)}function eJ(t){var e=0,r=0,n=0;return Yt(t,function(a){var i=a.startX,s=a.startY;e+=i,r+=s,n+=1}),e/=n,r/=n,{pageX:e,pageY:r}}function xs(t){var e=t.aspectRatio,r=t.height,n=t.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",i=LS(n),s=LS(r);if(i&&s){var o=r*e;a==="contain"&&o>n||a==="cover"&&o<n?r=n/e:n=r*e}else i?r=n/e:s&&(n=r*e);return{width:n,height:r}}function tJ(t){var e=t.width,r=t.height,n=t.degree;if(n=Math.abs(n)%180,n===90)return{width:r,height:e};var a=n%90*Math.PI/180,i=Math.sin(a),s=Math.cos(a),o=e*s+r*i,c=e*i+r*s;return n>90?{width:c,height:o}:{width:o,height:c}}function rJ(t,e,r,n){var a=e.aspectRatio,i=e.naturalWidth,s=e.naturalHeight,o=e.rotate,c=o===void 0?0:o,u=e.scaleX,d=u===void 0?1:u,f=e.scaleY,h=f===void 0?1:f,p=r.aspectRatio,m=r.naturalWidth,g=r.naturalHeight,y=n.fillColor,x=y===void 0?"transparent":y,v=n.imageSmoothingEnabled,b=v===void 0?!0:v,w=n.imageSmoothingQuality,S=w===void 0?"low":w,E=n.maxWidth,j=E===void 0?1/0:E,I=n.maxHeight,N=I===void 0?1/0:I,T=n.minWidth,F=T===void 0?0:T,C=n.minHeight,A=C===void 0?0:C,k=document.createElement("canvas"),O=k.getContext("2d"),$=xs({aspectRatio:p,width:j,height:N}),D=xs({aspectRatio:p,width:F,height:A},"cover"),R=Math.min($.width,Math.max(D.width,m)),M=Math.min($.height,Math.max(D.height,g)),L=xs({aspectRatio:a,width:j,height:N}),B=xs({aspectRatio:a,width:F,height:A},"cover"),U=Math.min(L.width,Math.max(B.width,i)),q=Math.min(L.height,Math.max(B.height,s)),te=[-U/2,-q/2,U,q];return k.width=ec(R),k.height=ec(M),O.fillStyle=x,O.fillRect(0,0,R,M),O.save(),O.translate(R/2,M/2),O.rotate(c*Math.PI/180),O.scale(d,h),O.imageSmoothingEnabled=b,O.imageSmoothingQuality=S,O.drawImage.apply(O,[t].concat(oT(te.map(function(V){return Math.floor(ec(V))})))),O.restore(),k}var yT=String.fromCharCode;function nJ(t,e,r){var n="";r+=e;for(var a=e;a<r;a+=1)n+=yT(t.getUint8(a));return n}var aJ=/^data:.*,/;function iJ(t){var e=t.replace(aJ,""),r=atob(e),n=new ArrayBuffer(r.length),a=new Uint8Array(n);return Yt(a,function(i,s){a[s]=r.charCodeAt(s)}),n}function sJ(t,e){for(var r=[],n=8192,a=new Uint8Array(t);a.length>0;)r.push(yT.apply(null,mT(a.subarray(0,n)))),a=a.subarray(n);return"data:".concat(e,";base64,").concat(btoa(r.join("")))}function oJ(t){var e=new DataView(t),r;try{var n,a,i;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,o=2;o+1<s;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){a=o;break}o+=1}if(a){var c=a+4,u=a+10;if(nJ(e,c,4)==="Exif"){var d=e.getUint16(u);if(n=d===18761,(n||d===19789)&&e.getUint16(u+2,n)===42){var f=e.getUint32(u+4,n);f>=8&&(i=u+f)}}}if(i){var h=e.getUint16(i,n),p,m;for(m=0;m<h;m+=1)if(p=i+m*12+2,e.getUint16(p,n)===274){p+=8,r=e.getUint16(p,n),e.setUint16(p,1,n);break}}}catch{r=1}return r}function lJ(t){var e=0,r=1,n=1;switch(t){case 2:r=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:r,scaleY:n}}var cJ={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,r=this.options,n=this.container,a=this.cropper,i=Number(r.minContainerWidth),s=Number(r.minContainerHeight);ur(a,fn),ni(e,fn);var o={width:Math.max(n.offsetWidth,i>=0?i:hT),height:Math.max(n.offsetHeight,s>=0?s:pT)};this.containerData=o,vs(a,{width:o.width,height:o.height}),ur(e,fn),ni(a,fn)},initCanvas:function(){var e=this.containerData,r=this.imageData,n=this.options.viewMode,a=Math.abs(r.rotate)%180===90,i=a?r.naturalHeight:r.naturalWidth,s=a?r.naturalWidth:r.naturalHeight,o=i/s,c=e.width,u=e.height;e.height*o>e.width?n===3?c=e.height*o:u=e.width/o:n===3?u=e.width/o:c=e.height*o;var d={aspectRatio:o,naturalWidth:i,naturalHeight:s,width:c,height:u};this.canvasData=d,this.limited=n===1||n===2,this.limitCanvas(!0,!0),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),d.left=(e.width-d.width)/2,d.top=(e.height-d.height)/2,d.oldLeft=d.left,d.oldTop=d.top,this.initialCanvasData=At({},d)},limitCanvas:function(e,r){var n=this.options,a=this.containerData,i=this.canvasData,s=this.cropBoxData,o=n.viewMode,c=i.aspectRatio,u=this.cropped&&s;if(e){var d=Number(n.minCanvasWidth)||0,f=Number(n.minCanvasHeight)||0;o>1?(d=Math.max(d,a.width),f=Math.max(f,a.height),o===3&&(f*c>d?d=f*c:f=d/c)):o>0&&(d?d=Math.max(d,u?s.width:0):f?f=Math.max(f,u?s.height:0):u&&(d=s.width,f=s.height,f*c>d?d=f*c:f=d/c));var h=xs({aspectRatio:c,width:d,height:f});d=h.width,f=h.height,i.minWidth=d,i.minHeight=f,i.maxWidth=1/0,i.maxHeight=1/0}if(r)if(o>(u?0:1)){var p=a.width-i.width,m=a.height-i.height;i.minLeft=Math.min(0,p),i.minTop=Math.min(0,m),i.maxLeft=Math.max(0,p),i.maxTop=Math.max(0,m),u&&this.limited&&(i.minLeft=Math.min(s.left,s.left+(s.width-i.width)),i.minTop=Math.min(s.top,s.top+(s.height-i.height)),i.maxLeft=s.left,i.maxTop=s.top,o===2&&(i.width>=a.width&&(i.minLeft=Math.min(0,p),i.maxLeft=Math.max(0,p)),i.height>=a.height&&(i.minTop=Math.min(0,m),i.maxTop=Math.max(0,m))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=a.width,i.maxTop=a.height},renderCanvas:function(e,r){var n=this.canvasData,a=this.imageData;if(r){var i=tJ({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),s=i.width,o=i.height,c=n.width*(s/n.naturalWidth),u=n.height*(o/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(u-n.height)/2,n.width=c,n.height=u,n.aspectRatio=s/o,n.naturalWidth=s,n.naturalHeight=o,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,vs(this.canvas,At({width:n.width,height:n.height},td({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var r=this.canvasData,n=this.imageData,a=n.naturalWidth*(r.width/r.naturalWidth),i=n.naturalHeight*(r.height/r.naturalHeight);At(n,{width:a,height:i,left:(r.width-a)/2,top:(r.height-i)/2}),vs(this.image,At({width:n.width,height:n.height},td(At({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,r=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,a=Number(e.autoCropArea)||.8,i={width:r.width,height:r.height};n&&(r.height*n>r.width?i.height=i.width/n:i.width=i.height*n),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*a),i.height=Math.max(i.minHeight,i.height*a),i.left=r.left+(r.width-i.width)/2,i.top=r.top+(r.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=At({},i)},limitCropBox:function(e,r){var n=this.options,a=this.containerData,i=this.canvasData,s=this.cropBoxData,o=this.limited,c=n.aspectRatio;if(e){var u=Number(n.minCropBoxWidth)||0,d=Number(n.minCropBoxHeight)||0,f=o?Math.min(a.width,i.width,i.width+i.left,a.width-i.left):a.width,h=o?Math.min(a.height,i.height,i.height+i.top,a.height-i.top):a.height;u=Math.min(u,a.width),d=Math.min(d,a.height),c&&(u&&d?d*c>u?d=u/c:u=d*c:u?d=u/c:d&&(u=d*c),h*c>f?h=f/c:f=h*c),s.minWidth=Math.min(u,f),s.minHeight=Math.min(d,h),s.maxWidth=f,s.maxHeight=h}r&&(o?(s.minLeft=Math.max(0,i.left),s.minTop=Math.max(0,i.top),s.maxLeft=Math.min(a.width,i.left+i.width)-s.width,s.maxTop=Math.min(a.height,i.top+i.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=a.width-s.width,s.maxTop=a.height-s.height))},renderCropBox:function(){var e=this.options,r=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Md(this.face,Rd,n.width>=r.width&&n.height>=r.height?cT:i2),vs(this.cropBox,At({width:n.width,height:n.height},td({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),tc(this.element,Uy,this.getData())}},uJ={initPreview:function(){var e=this.element,r=this.crossOrigin,n=this.options.preview,a=r?this.crossOriginUrl:this.url,i=e.alt||"The image to preview",s=document.createElement("img");if(r&&(s.crossOrigin=r),s.src=a,s.alt=i,this.viewBox.appendChild(s),this.viewBoxImage=s,!!n){var o=n;typeof n=="string"?o=e.ownerDocument.querySelectorAll(n):n.querySelector&&(o=[n]),this.previews=o,Yt(o,function(c){var u=document.createElement("img");Md(c,ph,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML}),r&&(u.crossOrigin=r),u.src=a,u.alt=i,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',c.innerHTML="",c.appendChild(u)})}},resetPreview:function(){Yt(this.previews,function(e){var r=Gy(e,ph);vs(e,{width:r.width,height:r.height}),e.innerHTML=r.html,ZQ(e,ph)})},preview:function(){var e=this.imageData,r=this.canvasData,n=this.cropBoxData,a=n.width,i=n.height,s=e.width,o=e.height,c=n.left-r.left-e.left,u=n.top-r.top-e.top;!this.cropped||this.disabled||(vs(this.viewBoxImage,At({width:s,height:o},td(At({translateX:-c,translateY:-u},e)))),Yt(this.previews,function(d){var f=Gy(d,ph),h=f.width,p=f.height,m=h,g=p,y=1;a&&(y=h/a,g=i*y),i&&g>p&&(y=p/i,m=a*y,g=p),vs(d,{width:m,height:g}),vs(d.getElementsByTagName("img")[0],At({width:s*y,height:o*y},td(At({translateX:-c*y,translateY:-u*y},e))))}))}},dJ={bind:function(){var e=this.element,r=this.options,n=this.cropper;dn(r.cropstart)&&Qn(e,Wy,r.cropstart),dn(r.cropmove)&&Qn(e,Hy,r.cropmove),dn(r.cropend)&&Qn(e,zy,r.cropend),dn(r.crop)&&Qn(e,Uy,r.crop),dn(r.zoom)&&Qn(e,Vy,r.zoom),Qn(n,AS,this.onCropStart=this.cropStart.bind(this)),r.zoomable&&r.zoomOnWheel&&Qn(n,PS,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&Qn(n,jS,this.onDblclick=this.dblclick.bind(this)),Qn(e.ownerDocument,TS,this.onCropMove=this.cropMove.bind(this)),Qn(e.ownerDocument,IS,this.onCropEnd=this.cropEnd.bind(this)),r.responsive&&Qn(window,DS,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,r=this.options,n=this.cropper;dn(r.cropstart)&&va(e,Wy,r.cropstart),dn(r.cropmove)&&va(e,Hy,r.cropmove),dn(r.cropend)&&va(e,zy,r.cropend),dn(r.crop)&&va(e,Uy,r.crop),dn(r.zoom)&&va(e,Vy,r.zoom),va(n,AS,this.onCropStart),r.zoomable&&r.zoomOnWheel&&va(n,PS,this.onWheel,{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&va(n,jS,this.onDblclick),va(e.ownerDocument,TS,this.onCropMove),va(e.ownerDocument,IS,this.onCropEnd),r.responsive&&va(window,DS,this.onResize)}},fJ={resize:function(){if(!this.disabled){var e=this.options,r=this.container,n=this.containerData,a=r.offsetWidth/n.width,i=r.offsetHeight/n.height,s=Math.abs(a-1)>Math.abs(i-1)?a:i;if(s!==1){var o,c;e.restore&&(o=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Yt(o,function(u,d){o[d]=u*s})),this.setCropBoxData(Yt(c,function(u,d){c[d]=u*s})))}}},dblclick:function(){this.disabled||this.options.dragMode===fT||this.setDragMode(YQ(this.dragBox,Fy)?dT:s2)},wheel:function(e){var r=this,n=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){r.wheeling=!1},50),e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*n,e)))},cropStart:function(e){var r=e.buttons,n=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(We(r)&&r!==1||We(n)&&n!==0||e.ctrlKey))){var a=this.options,i=this.pointers,s;e.changedTouches?Yt(e.changedTouches,function(o){i[o.identifier]=mh(o)}):i[e.pointerId||0]=mh(e),Object.keys(i).length>1&&a.zoomable&&a.zoomOnTouch?s=uT:s=Gy(e.target,Rd),FQ.test(s)&&tc(this.element,Wy,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===lT&&(this.cropping=!0,ur(this.dragBox,ap)))}},cropMove:function(e){var r=this.action;if(!(this.disabled||!r)){var n=this.pointers;e.preventDefault(),tc(this.element,Hy,{originalEvent:e,action:r})!==!1&&(e.changedTouches?Yt(e.changedTouches,function(a){At(n[a.identifier]||{},mh(a,!0))}):At(n[e.pointerId||0]||{},mh(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var r=this.action,n=this.pointers;e.changedTouches?Yt(e.changedTouches,function(a){delete n[a.identifier]}):delete n[e.pointerId||0],r&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Ul(this.dragBox,ap,this.cropped&&this.options.modal)),tc(this.element,zy,{originalEvent:e,action:r}))}}},hJ={change:function(e){var r=this.options,n=this.canvasData,a=this.containerData,i=this.cropBoxData,s=this.pointers,o=this.action,c=r.aspectRatio,u=i.left,d=i.top,f=i.width,h=i.height,p=u+f,m=d+h,g=0,y=0,x=a.width,v=a.height,b=!0,w;!c&&e.shiftKey&&(c=f&&h?f/h:1),this.limited&&(g=i.minLeft,y=i.minTop,x=g+Math.min(a.width,n.width,n.left+n.width),v=y+Math.min(a.height,n.height,n.top+n.height));var S=s[Object.keys(s)[0]],E={x:S.endX-S.startX,y:S.endY-S.startY},j=function(N){switch(N){case ao:p+E.x>x&&(E.x=x-p);break;case io:u+E.x<g&&(E.x=g-u);break;case Qi:d+E.y<y&&(E.y=y-d);break;case vl:m+E.y>v&&(E.y=v-m);break}};switch(o){case i2:u+=E.x,d+=E.y;break;case ao:if(E.x>=0&&(p>=x||c&&(d<=y||m>=v))){b=!1;break}j(ao),f+=E.x,f<0&&(o=io,f=-f,u-=f),c&&(h=f/c,d+=(i.height-h)/2);break;case Qi:if(E.y<=0&&(d<=y||c&&(u<=g||p>=x))){b=!1;break}j(Qi),h-=E.y,d+=E.y,h<0&&(o=vl,h=-h,d-=h),c&&(f=h*c,u+=(i.width-f)/2);break;case io:if(E.x<=0&&(u<=g||c&&(d<=y||m>=v))){b=!1;break}j(io),f-=E.x,u+=E.x,f<0&&(o=ao,f=-f,u-=f),c&&(h=f/c,d+=(i.height-h)/2);break;case vl:if(E.y>=0&&(m>=v||c&&(u<=g||p>=x))){b=!1;break}j(vl),h+=E.y,h<0&&(o=Qi,h=-h,d-=h),c&&(f=h*c,u+=(i.width-f)/2);break;case du:if(c){if(E.y<=0&&(d<=y||p>=x)){b=!1;break}j(Qi),h-=E.y,d+=E.y,f=h*c}else j(Qi),j(ao),E.x>=0?p<x?f+=E.x:E.y<=0&&d<=y&&(b=!1):f+=E.x,E.y<=0?d>y&&(h-=E.y,d+=E.y):(h-=E.y,d+=E.y);f<0&&h<0?(o=pu,h=-h,f=-f,d-=h,u-=f):f<0?(o=fu,f=-f,u-=f):h<0&&(o=hu,h=-h,d-=h);break;case fu:if(c){if(E.y<=0&&(d<=y||u<=g)){b=!1;break}j(Qi),h-=E.y,d+=E.y,f=h*c,u+=i.width-f}else j(Qi),j(io),E.x<=0?u>g?(f-=E.x,u+=E.x):E.y<=0&&d<=y&&(b=!1):(f-=E.x,u+=E.x),E.y<=0?d>y&&(h-=E.y,d+=E.y):(h-=E.y,d+=E.y);f<0&&h<0?(o=hu,h=-h,f=-f,d-=h,u-=f):f<0?(o=du,f=-f,u-=f):h<0&&(o=pu,h=-h,d-=h);break;case pu:if(c){if(E.x<=0&&(u<=g||m>=v)){b=!1;break}j(io),f-=E.x,u+=E.x,h=f/c}else j(vl),j(io),E.x<=0?u>g?(f-=E.x,u+=E.x):E.y>=0&&m>=v&&(b=!1):(f-=E.x,u+=E.x),E.y>=0?m<v&&(h+=E.y):h+=E.y;f<0&&h<0?(o=du,h=-h,f=-f,d-=h,u-=f):f<0?(o=hu,f=-f,u-=f):h<0&&(o=fu,h=-h,d-=h);break;case hu:if(c){if(E.x>=0&&(p>=x||m>=v)){b=!1;break}j(ao),f+=E.x,h=f/c}else j(vl),j(ao),E.x>=0?p<x?f+=E.x:E.y>=0&&m>=v&&(b=!1):f+=E.x,E.y>=0?m<v&&(h+=E.y):h+=E.y;f<0&&h<0?(o=fu,h=-h,f=-f,d-=h,u-=f):f<0?(o=pu,f=-f,u-=f):h<0&&(o=du,h=-h,d-=h);break;case cT:this.move(E.x,E.y),b=!1;break;case uT:this.zoom(JQ(s),e),b=!1;break;case lT:if(!E.x||!E.y){b=!1;break}w=xT(this.cropper),u=S.startX-w.left,d=S.startY-w.top,f=i.minWidth,h=i.minHeight,E.x>0?o=E.y>0?hu:du:E.x<0&&(u-=f,o=E.y>0?pu:fu),E.y<0&&(d-=h),this.cropped||(ni(this.cropBox,fn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(i.width=f,i.height=h,i.left=u,i.top=d,this.action=o,this.renderCropBox()),Yt(s,function(I){I.startX=I.endX,I.startY=I.endY})}},pJ={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ur(this.dragBox,ap),ni(this.cropBox,fn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=At({},this.initialImageData),this.canvasData=At({},this.initialCanvasData),this.cropBoxData=At({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(At(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ni(this.dragBox,ap),ur(this.cropBox,fn)),this},replace:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),r?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Yt(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ni(this.cropper,ES)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ur(this.cropper,ES)),this},destroy:function(){var e=this.element;return e[Ct]?(e[Ct]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,a=n.left,i=n.top;return this.moveTo(Nv(e)?e:a+Number(e),Nv(r)?r:i+Number(r))},moveTo:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,a=!1;return e=Number(e),r=Number(r),this.ready&&!this.disabled&&this.options.movable&&(We(e)&&(n.left=e,a=!0),We(r)&&(n.top=r,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(e,r){var n=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(n.width*e/n.naturalWidth,null,r)},zoomTo:function(e,r,n){var a=this.options,i=this.canvasData,s=i.width,o=i.height,c=i.naturalWidth,u=i.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&a.zoomable){var d=c*e,f=u*e;if(tc(this.element,Vy,{ratio:e,oldRatio:s/c,originalEvent:n})===!1)return this;if(n){var h=this.pointers,p=xT(this.cropper),m=h&&Object.keys(h).length?eJ(h):{pageX:n.pageX,pageY:n.pageY};i.left-=(d-s)*((m.pageX-p.left-i.left)/s),i.top-=(f-o)*((m.pageY-p.top-i.top)/o)}else $l(r)&&We(r.x)&&We(r.y)?(i.left-=(d-s)*((r.x-i.left)/s),i.top-=(f-o)*((r.y-i.top)/o)):(i.left-=(d-s)/2,i.top-=(f-o)/2);i.width=d,i.height=f,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),We(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var r=this.imageData.scaleY;return this.scale(e,We(r)?r:1)},scaleY:function(e){var r=this.imageData.scaleX;return this.scale(We(r)?r:1,e)},scale:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,a=!1;return e=Number(e),r=Number(r),this.ready&&!this.disabled&&this.options.scalable&&(We(e)&&(n.scaleX=e,a=!0),We(r)&&(n.scaleY=r,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.options,n=this.imageData,a=this.canvasData,i=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:i.left-a.left,y:i.top-a.top,width:i.width,height:i.height};var o=n.width/n.naturalWidth;if(Yt(s,function(d,f){s[f]=d/o}),e){var c=Math.round(s.y+s.height),u=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=u-s.x,s.height=c-s.y}}else s={x:0,y:0,width:0,height:0};return r.rotatable&&(s.rotate=n.rotate||0),r.scalable&&(s.scaleX=n.scaleX||1,s.scaleY=n.scaleY||1),s},setData:function(e){var r=this.options,n=this.imageData,a=this.canvasData,i={};if(this.ready&&!this.disabled&&$l(e)){var s=!1;r.rotatable&&We(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,s=!0),r.scalable&&(We(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,s=!0),We(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var o=n.width/n.naturalWidth;We(e.x)&&(i.left=e.x*o+a.left),We(e.y)&&(i.top=e.y*o+a.top),We(e.width)&&(i.width=e.width*o),We(e.height)&&(i.height=e.height*o),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?At({},this.containerData):{}},getImageData:function(){return this.sized?At({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,r={};return this.ready&&Yt(["left","top","width","height","naturalWidth","naturalHeight"],function(n){r[n]=e[n]}),r},setCanvasData:function(e){var r=this.canvasData,n=r.aspectRatio;return this.ready&&!this.disabled&&$l(e)&&(We(e.left)&&(r.left=e.left),We(e.top)&&(r.top=e.top),We(e.width)?(r.width=e.width,r.height=e.width/n):We(e.height)&&(r.height=e.height,r.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,r;return this.ready&&this.cropped&&(r={left:e.left,top:e.top,width:e.width,height:e.height}),r||{}},setCropBoxData:function(e){var r=this.cropBoxData,n=this.options.aspectRatio,a,i;return this.ready&&this.cropped&&!this.disabled&&$l(e)&&(We(e.left)&&(r.left=e.left),We(e.top)&&(r.top=e.top),We(e.width)&&e.width!==r.width&&(a=!0,r.width=e.width),We(e.height)&&e.height!==r.height&&(i=!0,r.height=e.height),n&&(a?r.height=r.width/n:i&&(r.width=r.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var r=this.canvasData,n=rJ(this.image,this.imageData,r,e);if(!this.cropped)return n;var a=this.getData(e.rounded),i=a.x,s=a.y,o=a.width,c=a.height,u=n.width/Math.floor(r.naturalWidth);u!==1&&(i*=u,s*=u,o*=u,c*=u);var d=o/c,f=xs({aspectRatio:d,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),h=xs({aspectRatio:d,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=xs({aspectRatio:d,width:e.width||(u!==1?n.width:o),height:e.height||(u!==1?n.height:c)}),m=p.width,g=p.height;m=Math.min(f.width,Math.max(h.width,m)),g=Math.min(f.height,Math.max(h.height,g));var y=document.createElement("canvas"),x=y.getContext("2d");y.width=ec(m),y.height=ec(g),x.fillStyle=e.fillColor||"transparent",x.fillRect(0,0,m,g);var v=e.imageSmoothingEnabled,b=v===void 0?!0:v,w=e.imageSmoothingQuality;x.imageSmoothingEnabled=b,w&&(x.imageSmoothingQuality=w);var S=n.width,E=n.height,j=i,I=s,N,T,F,C,A,k;j<=-o||j>S?(j=0,N=0,F=0,A=0):j<=0?(F=-j,j=0,N=Math.min(S,o+j),A=N):j<=S&&(F=0,N=Math.min(o,S-j),A=N),N<=0||I<=-c||I>E?(I=0,T=0,C=0,k=0):I<=0?(C=-I,I=0,T=Math.min(E,c+I),k=T):I<=E&&(C=0,T=Math.min(c,E-I),k=T);var O=[j,I,N,T];if(A>0&&k>0){var $=m/o;O.push(F*$,C*$,A*$,k*$)}return x.drawImage.apply(x,[n].concat(oT(O.map(function(D){return Math.floor(ec(D))})))),y},setAspectRatio:function(e){var r=this.options;return!this.disabled&&!Nv(e)&&(r.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var r=this.options,n=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var i=e===s2,s=r.movable&&e===dT;e=i||s?e:fT,r.dragMode=e,Md(n,Rd,e),Ul(n,Fy,i),Ul(n,$y,s),r.cropBoxMovable||(Md(a,Rd,e),Ul(a,Fy,i),Ul(a,$y,s))}return this}},mJ=oi.Cropper,bT=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(jQ(this,t),!e||!zQ.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=At({},MS,$l(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return AQ(t,[{key:"init",value:function(){var r=this.element,n=r.tagName.toLowerCase(),a;if(!r[Ct]){if(r[Ct]=this,n==="img"){if(this.isImg=!0,a=r.getAttribute("src")||"",this.originalUrl=a,!a)return;a=r.src}else n==="canvas"&&window.HTMLCanvasElement&&(a=r.toDataURL());this.load(a)}}},{key:"load",value:function(r){var n=this;if(r){this.url=r,this.imageData={};var a=this.element,i=this.options;if(!i.rotatable&&!i.scalable&&(i.checkOrientation=!1),!i.checkOrientation||!window.ArrayBuffer){this.clone();return}if($Q.test(r)){UQ.test(r)?this.read(iJ(r)):this.clone();return}var s=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=o,s.onerror=o,s.ontimeout=o,s.onprogress=function(){s.getResponseHeader("content-type")!==RS&&s.abort()},s.onload=function(){n.read(s.response)},s.onloadend=function(){n.reloading=!1,n.xhr=null},i.checkCrossOrigin&&BS(r)&&a.crossOrigin&&(r=FS(r)),s.open("GET",r,!0),s.responseType="arraybuffer",s.withCredentials=a.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(r){var n=this.options,a=this.imageData,i=oJ(r),s=0,o=1,c=1;if(i>1){this.url=sJ(r,RS);var u=lJ(i);s=u.rotate,o=u.scaleX,c=u.scaleY}n.rotatable&&(a.rotate=s),n.scalable&&(a.scaleX=o,a.scaleY=c),this.clone()}},{key:"clone",value:function(){var r=this.element,n=this.url,a=r.crossOrigin,i=n;this.options.checkCrossOrigin&&BS(n)&&(a||(a="anonymous"),i=FS(n)),this.crossOrigin=a,this.crossOriginUrl=i;var s=document.createElement("img");a&&(s.crossOrigin=a),s.src=i||n,s.alt=r.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),ur(s,CS),r.parentNode.insertBefore(s,r.nextSibling)}},{key:"start",value:function(){var r=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var a=oi.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(oi.navigator.userAgent),i=function(u,d){At(r.imageData,{naturalWidth:u,naturalHeight:d,aspectRatio:u/d}),r.initialImageData=At({},r.imageData),r.sizing=!1,r.sized=!0,r.build()};if(n.naturalWidth&&!a){i(n.naturalWidth,n.naturalHeight);return}var s=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){i(s.width,s.height),a||o.removeChild(s)},s.src=n.src,a||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))}},{key:"stop",value:function(){var r=this.image;r.onload=null,r.onerror=null,r.parentNode.removeChild(r),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var r=this.element,n=this.options,a=this.image,i=r.parentNode,s=document.createElement("div");s.innerHTML=HQ;var o=s.querySelector(".".concat(Ct,"-container")),c=o.querySelector(".".concat(Ct,"-canvas")),u=o.querySelector(".".concat(Ct,"-drag-box")),d=o.querySelector(".".concat(Ct,"-crop-box")),f=d.querySelector(".".concat(Ct,"-face"));this.container=i,this.cropper=o,this.canvas=c,this.dragBox=u,this.cropBox=d,this.viewBox=o.querySelector(".".concat(Ct,"-view-box")),this.face=f,c.appendChild(a),ur(r,fn),i.insertBefore(o,r.nextSibling),ni(a,CS),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,ur(d,fn),n.guides||ur(d.getElementsByClassName("".concat(Ct,"-dashed")),fn),n.center||ur(d.getElementsByClassName("".concat(Ct,"-center")),fn),n.background&&ur(o,"".concat(Ct,"-bg")),n.highlight||ur(f,RQ),n.cropBoxMovable&&(ur(f,$y),Md(f,Rd,i2)),n.cropBoxResizable||(ur(d.getElementsByClassName("".concat(Ct,"-line")),fn),ur(d.getElementsByClassName("".concat(Ct,"-point")),fn)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),dn(n.ready)&&Qn(r,OS,n.ready,{once:!0}),tc(r,OS)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var r=this.cropper.parentNode;r&&r.removeChild(this.cropper),ni(this.element,fn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=mJ,t}},{key:"setDefaults",value:function(r){At(MS,$l(r)&&r)}}])}();At(bT.prototype,cJ,uJ,dJ,fJ,hJ,pJ);var bo=function(){return bo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},bo.apply(this,arguments)};function Ev(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]])}return r}var gJ=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],vJ={opacity:0,maxWidth:"100%"},l2=ne.forwardRef(function(t,e){var r=Ev(t,[]),n=r.dragMode,a=n===void 0?"crop":n,i=r.src,s=r.style,o=r.className,c=r.crossOrigin,u=r.scaleX,d=r.scaleY,f=r.enable,h=r.zoomTo,p=r.rotateTo,m=r.alt,g=m===void 0?"picture":m,y=r.ready,x=r.onInitialized,v=Ev(r,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),b={scaleY:d,scaleX:u,enable:f,zoomTo:h,rotateTo:p},w=function(){for(var E=[],j=0;j<arguments.length;j++)E[j]=arguments[j];var I=_.useRef(null);return ne.useEffect(function(){E.forEach(function(N){N&&(typeof N=="function"?N(I.current):N.current=I.current)})},[E]),I}(e,_.useRef(null));_.useEffect(function(){var E;!((E=w.current)===null||E===void 0)&&E.cropper&&typeof h=="number"&&w.current.cropper.zoomTo(h)},[r.zoomTo]),_.useEffect(function(){var E;!((E=w.current)===null||E===void 0)&&E.cropper&&i!==void 0&&w.current.cropper.reset().clear().replace(i)},[i]),_.useEffect(function(){if(w.current!==null){var E=new bT(w.current,bo(bo({dragMode:a},v),{ready:function(j){j.currentTarget!==null&&function(I,N){N===void 0&&(N={});var T=N.enable,F=T===void 0||T,C=N.scaleX,A=C===void 0?1:C,k=N.scaleY,O=k===void 0?1:k,$=N.zoomTo,D=$===void 0?0:$,R=N.rotateTo;F?I.enable():I.disable(),I.scaleX(A),I.scaleY(O),R!==void 0&&I.rotateTo(R),D>0&&I.zoomTo(D)}(j.currentTarget.cropper,b),y&&y(j)}}));x&&x(E)}return function(){var j,I;(I=(j=w.current)===null||j===void 0?void 0:j.cropper)===null||I===void 0||I.destroy()}},[w]);var S=function(E){return gJ.reduce(function(j,I){var N=j,T=I;return N[T],Ev(N,[typeof T=="symbol"?T:T+""])},E)}(bo(bo({},v),{crossOrigin:c,src:i,alt:g}));return ne.createElement("div",{style:s,className:o},ne.createElement("img",bo({},S,{style:vJ,ref:w})))});const $S=({aspectRatio:t=1,targetWidth:e=800,targetHeight:r=800,storageBucket:n="images",storagePathPrefix:a,onUploadSuccess:i,initialImageUrl:s,onRemoveImage:o,recommendedText:c="Рекомендуемый размер: 800x800px",className:u="",buttonText:d="Загрузить изображение"})=>{const[f,h]=_.useState(null),[p,m]=_.useState(null),[g,y]=_.useState(!1),[x,v]=_.useState(!1),[b,w]=_.useState(0),S=_.useRef(null),E=async N=>{var F;const T=(F=N.target.files)==null?void 0:F[0];if(T)try{const C=await OL(T,{maxWidthOrHeight:2e3,maxSizeMB:2,useWebWorker:!0});h(C),y(!0)}catch(C){console.error("Error processing image:",C),alert("Ошибка при обработке изображения")}},j=async()=>{if(!(!p||!f))try{v(!0),w(0);const N=p.getCroppedCanvas({width:e,height:r,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}),T=await new Promise(O=>{N.toBlob($=>{if($)O($);else throw new Error("Failed to create blob")},"image/jpeg",.9)}),F=DL(f,a),{data:C,error:A}=await de.storage.from(n).upload(F,T,{cacheControl:"3600",upsert:!1,contentType:"image/jpeg",onUploadProgress:O=>{const $=Math.round(O.loaded/O.total*100);w($)}});if(A)throw A;const{data:k}=de.storage.from(n).getPublicUrl(F);i(k.publicUrl,F),y(!1),h(null),w(0)}catch(N){console.error("Error uploading image:",N),alert("Ошибка при загрузке изображения")}finally{v(!1)}},I=()=>{y(!1),h(null),S.current&&(S.current.value="")};return l.jsxs("div",{className:`image-upload-container ${u}`,children:[l.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:E,className:"hidden"}),g&&f?l.jsxs("div",{className:"space-y-4",children:[l.jsx(l2,{src:URL.createObjectURL(f),style:{height:400,width:"100%"},aspectRatio:t,guides:!0,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,onInitialized:N=>m(N),className:"max-w-full"}),x&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:"text-sm font-medium",children:"Загрузка"}),l.jsxs("span",{className:"text-sm font-medium",children:[b,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 dark:bg-dark-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsxs("button",{type:"button",onClick:I,disabled:x,className:"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors disabled:opacity-50",children:[l.jsx(Bt,{className:"h-4 w-4 mr-2 inline-block"}),"Отмена"]}),l.jsx("button",{type:"button",onClick:j,disabled:x,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50",children:x?l.jsx(l.Fragment,{children:l.jsx("span",{className:"animate-pulse",children:"Загрузка..."})}):l.jsxs(l.Fragment,{children:[l.jsx(Up,{className:"h-4 w-4 mr-2 inline-block"}),"Сохранить"]})})]})]}):s?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:s,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),l.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{var N;return(N=S.current)==null?void 0:N.click()},className:"p-2 bg-white/90 hover:bg-white text-dark-800 rounded-full shadow-lg",title:"Изменить изображение",children:l.jsx(Ao,{className:"h-5 w-5"})}),o&&l.jsx("button",{type:"button",onClick:o,className:"p-2 bg-red-600/90 hover:bg-red-600 text-white rounded-full shadow-lg",title:"Удалить изображение",children:l.jsx(Bt,{className:"h-5 w-5"})})]})]}):l.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg p-8 text-center",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"mb-4 p-3 bg-gray-100 dark:bg-dark-700 rounded-full",children:l.jsx(qa,{className:"h-6 w-6 text-gray-500 dark:text-gray-400"})}),l.jsx("button",{type:"button",onClick:()=>{var N;return(N=S.current)==null?void 0:N.click()},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors",children:d}),l.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:c})]})})]})},wT=({speakerId:t,photos:e=[],onPhotosUpdate:r,onImageSelect:n})=>{const[a,i]=_.useState(null),[s,o]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState(!1),h=async y=>{o(!0);try{const x=(Array.isArray(e)?e:[]).map(b=>({...b,isMain:b.url===y})),{error:v}=await de.from("speakers").update({photos:x}).eq("id",t);if(v)throw v;r(x),K.success("Основная фотография обновлена"),n&&n(zt(y))}catch(x){console.error("Error updating main photo:",x),K.error("Ошибка при обновлении фотографии")}finally{o(!1)}},p=async y=>{var x,v;if(confirm("Вы уверены, что хотите удалить эту фотографию?")){o(!0);try{const{error:b}=await de.storage.from("images").remove([y]);if(b)throw b;const w=Array.isArray(e)?e:[],S=w.filter(j=>j.url!==y);S.length>0&&((x=w.find(j=>j.url===y))!=null&&x.isMain)&&(S[0].isMain=!0);const{error:E}=await de.from("speakers").update({photos:S}).eq("id",t);if(E)throw E;r(S),n&&((v=w.find(j=>j.url===y))!=null&&v.isMain)&&n(S.length>0?zt(S[0].url):null),K.success("Фотография удалена")}catch(b){console.error("Error deleting photo:",b),K.error("Ошибка при удалении фотографии")}finally{o(!1)}}},m=(y,x)=>{const v=Array.isArray(e)?e:[],b={url:x};v.length===0&&(b.isMain=!0);const w=[...v,b];de.from("speakers").update({photos:w}).eq("id",t).then(({error:S})=>{if(S){console.error("Error updating speaker photos:",S),K.error("Ошибка при обновлении фотографий");return}r(w),b.isMain&&n&&n(y),K.success("Фотография успешно добавлена")})},g=Array.isArray(e)?e:[];return l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:g.map((y,x)=>l.jsxs("div",{className:`relative group aspect-square rounded-lg overflow-hidden border-2 ${y.isMain?"border-primary-600":"border-transparent"}`,children:[l.jsx("img",{src:zt(y.url),alt:`Фото ${x+1}`,className:"w-full h-full object-cover",onError:v=>{const b=v.target;b.src="https://via.placeholder.com/300?text=Error+loading+image"}}),l.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>h(y.url),disabled:s||y.isMain,className:`p-2 rounded-full ${y.isMain?"bg-primary-600 text-white":"bg-white/90 hover:bg-white text-gray-900"}`,title:y.isMain?"Основная фотография":"Сделать основной",children:y.isMain?l.jsx(Bj,{className:"h-5 w-5"}):l.jsx(r7,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>{u(y.url),f(!0)},className:"p-2 rounded-full bg-white/90 hover:bg-white text-gray-900",title:"Кадрировать",children:l.jsx(LM,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>i(y.url),className:"p-2 rounded-full bg-white/90 hover:bg-white text-gray-900",title:"Просмотреть",children:l.jsx($M,{className:"h-5 w-5"})}),!y.isMain&&l.jsx("button",{onClick:()=>p(y.url),className:"p-2 rounded-full bg-red-500/90 hover:bg-red-500 text-white",title:"Удалить",children:l.jsx(Bt,{className:"h-5 w-5"})})]}),y.isMain&&l.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-primary-600 text-white text-xs rounded-full",children:"Основная"})]},x))}),l.jsx("div",{className:"mt-4",children:l.jsx($S,{aspectRatio:1,targetWidth:800,targetHeight:800,storagePathPrefix:`speakers/${t}/`,onUploadSuccess:m,buttonText:"Загрузить фото",recommendedText:"Рекомендуемый размер: 800x800px"})}),d&&c&&l.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-6 max-w-4xl w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Обрезать фотографию"}),l.jsx("button",{onClick:()=>{f(!1),u(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full",children:l.jsx(Bt,{className:"h-5 w-5"})})]}),l.jsx($S,{aspectRatio:1,targetWidth:800,targetHeight:800,storagePathPrefix:`speakers/${t}/`,initialImageUrl:zt(c),onUploadSuccess:(y,x)=>{const v=g.map(b=>b.url===c?{...b,url:x}:b);r(v),de.from("speakers").update({photos:v}).eq("id",t).then(({error:b})=>{var w;if(b){console.error("Error updating speaker photos:",b),K.error("Ошибка при обновлении фотографий");return}(w=g.find(S=>S.url===c))!=null&&w.isMain&&n&&n(y),K.success("Фотография успешно обновлена"),f(!1),u(null)})}})]})}),a&&l.jsxs("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:[l.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 p-2 text-white hover:bg-white/10 rounded-full",children:l.jsx(Bt,{className:"h-6 w-6"})}),l.jsx("img",{src:zt(a),alt:"Полный размер",className:"max-w-full max-h-[90vh] object-contain"})]})]})},xJ=({isOpen:t,onClose:e,onSuccess:r})=>{const[n,a]=_.useState(!1),[i,s]=_.useState([]),[o]=_.useState(()=>crypto.randomUUID()),[c,u]=_.useState(null),[d,f]=_.useState({id:o,name:"",field_of_expertise:"",description:"",date_of_birth:"",active:!0}),h=async p=>{p.preventDefault(),a(!0);try{const{error:m}=await de.from("speakers").insert([{...d,photos:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(m)throw m;K.success("Спикер успешно создан"),r(),e()}catch(m){console.error("Error creating speaker:",m),K.error("Ошибка при создании спикера")}finally{a(!1)}};return l.jsx(Mc,{isOpen:t,onClose:e,title:"Добавить спикера",size:"lg",children:l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Фотографии"}),c&&l.jsx("div",{className:"mb-4",children:l.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 object-cover rounded-full mx-auto"})}),l.jsx(wT,{speakerId:o,photos:i,onPhotosUpdate:s,onImageSelect:u})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",className:"block font-medium mb-2",children:"Имя"}),l.jsx("input",{type:"text",id:"name",value:d.name,onChange:p=>f({...d,name:p.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 dark:border-dark-600",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"field_of_expertise",className:"block font-medium mb-2",children:"Специализация"}),l.jsx("input",{type:"text",id:"field_of_expertise",value:d.field_of_expertise,onChange:p=>f({...d,field_of_expertise:p.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 dark:border-dark-600",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"description",className:"block font-medium mb-2",children:"Описание"}),l.jsx("textarea",{id:"description",value:d.description,onChange:p=>f({...d,description:p.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 dark:border-dark-600",rows:4})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"date_of_birth",className:"block font-medium mb-2",children:"Дата рождения (необязательно)"}),l.jsx("input",{type:"date",id:"date_of_birth",value:d.date_of_birth,onChange:p=>f({...d,date_of_birth:p.target.value}),className:"w-full px-4 py-2 rounded-md border border-gray-300 dark:border-dark-600"})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:d.active,onChange:p=>f({...d,active:p.target.checked}),className:"form-checkbox"}),l.jsx("span",{className:"font-medium",children:"Активный спикер"})]})}),l.jsxs("div",{className:"flex justify-end gap-4 pb-2",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-md border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700",children:"Отмена"}),l.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:n?"Создание...":"Создать"})]})]})})},gh=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),yJ=()=>{var v,b;const[t,e]=_.useState(""),[r,n]=_.useState([]),[a,i]=_.useState(null),[s,o]=_.useState(!1),[c,u]=_.useState(!1),[d,f]=_.useState({}),[h,p]=_.useState(!1);_.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:w,error:S}=await gh.from("speakers").select("*").order("name");if(S)throw S;n(w||[])}catch(w){console.error("Error fetching speakers:",w),K.error("Failed to load speakers")}},g=async()=>{try{const{error:w}=await gh.from("speakers").update(d).eq("id",a==null?void 0:a.id);if(w)throw w;K.success("Speaker updated successfully"),m(),u(!1)}catch(w){console.error("Error updating speaker:",w),K.error("Failed to update speaker")}},y=r.filter(w=>w.name.toLowerCase().includes(t.toLowerCase())||w.field_of_expertise.toLowerCase().includes(t.toLowerCase())),x=async w=>{if(confirm("Вы уверены, что хотите удалить этого спикера? Это действие нельзя отменить."))try{const S=r.find(I=>I.id===w),E=Array.isArray(S==null?void 0:S.photos)?S.photos:[];if(E.length){const{error:I}=await gh.storage.from("images").remove(E.map(N=>N.url));if(I)throw I}const{error:j}=await gh.from("speakers").delete().eq("id",w);if(j)throw j;K.success("Спикер успешно удален"),m()}catch(S){console.error("Error deleting speaker:",S),K.error("Ошибка при удалении спикера")}};return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Управление спикерами"}),l.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>p(!0),children:[l.jsx(ha,{className:"h-5 w-5"}),"Добавить спикера"]})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Поиск спикеров...",value:t,onChange:w=>e(w.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-dark-600"})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map(w=>{var S,E;return l.jsxs("div",{className:"card hover:shadow-lg",children:[l.jsx("div",{className:"relative aspect-square",children:(E=(S=w.photos)==null?void 0:S[0])!=null&&E.url?l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${w.photos[0].url}`,alt:w.name,className:"w-full h-full object-cover",onError:j=>{const I=j.target;I.src="https://via.placeholder.com/300?text=No+image"}}):l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-dark-700",children:l.jsx(Cn,{className:"w-16 h-16 text-gray-400"})})}),l.jsxs("div",{className:"p-4",children:[l.jsx("h3",{className:"font-semibold text-lg mb-1",children:w.name}),l.jsx("p",{className:"text-primary-600 dark:text-primary-400 text-sm mb-4",children:w.field_of_expertise}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>{i(w),o(!0),u(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full",children:l.jsx(Jd,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>{i(w),f(w),o(!0),u(!0)},className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full",children:l.jsx(Ja,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>x(w.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-full text-red-600",title:"Удалить",children:l.jsx(Rn,{className:"h-5 w-5"})})]})]})]},w.id)})}),l.jsx(xJ,{isOpen:h,onClose:()=>p(!1),onSuccess:m}),s&&a&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold",children:c?"Редактировать спикера":"Информация о спикере"}),l.jsx("button",{onClick:()=>{o(!1),i(null),u(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full",children:l.jsx(Bt,{className:"h-5 w-5"})})]}),c?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Фотографии"}),l.jsx(wT,{speakerId:a.id,photos:a.photos||[],onPhotosUpdate:w=>{i({...a,photos:w}),f({...d,photos:w})}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Имя"}),l.jsx("input",{type:"text",value:d.name||"",onChange:w=>f({...d,name:w.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Специализация"}),l.jsx("input",{type:"text",value:d.field_of_expertise||"",onChange:w=>f({...d,field_of_expertise:w.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Описание"}),l.jsx("textarea",{value:d.description||"",onChange:w=>f({...d,description:w.target.value}),rows:4,className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Дата рождения"}),l.jsx("input",{type:"date",value:d.date_of_birth||"",onChange:w=>f({...d,date_of_birth:w.target.value}),className:"form-input"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"block font-medium mb-2",children:"Google Drive"}),l.jsx("input",{type:"url",value:d.google_drive_link||"",onChange:w=>f({...d,google_drive_link:w.target.value}),className:"form-input"})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:d.active,onChange:w=>f({...d,active:w.target.checked}),className:"form-checkbox"}),l.jsx("span",{className:"font-medium",children:"Активный спикер"})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>{u(!1),f(a)},className:"btn-outline",children:"Отмена"}),l.jsx("button",{onClick:g,className:"btn-primary",children:"Сохранить"})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-start gap-6",children:[l.jsx("div",{className:"w-32 h-32 flex-shrink-0",children:(b=(v=a.photos)==null?void 0:v[0])!=null&&b.url?l.jsx("img",{src:`https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/${a.photos[0].url}`,alt:a.name,className:"w-full h-full object-cover rounded-lg"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-dark-700 rounded-lg",children:l.jsx(Cn,{className:"w-12 h-12 text-gray-400"})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-xl font-semibold mb-2",children:a.name}),l.jsx("p",{className:"text-primary-600 dark:text-primary-400 mb-4",children:a.field_of_expertise}),l.jsx("p",{className:"text-dark-600 dark:text-dark-300",children:a.description})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium mb-2",children:"Дата рождения"}),l.jsx("p",{children:a.date_of_birth||"Не указана"})]}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium mb-2",children:"Статус"}),l.jsx("p",{children:a.active?"Активный":"Неактивный"})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>{u(!0),f(a)},className:"btn-primary",children:"Редактировать"})})]})]})})})]})},mu=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),bJ=()=>l.jsxs("div",{className:"flex justify-center items-center py-12",children:[l.jsxs("div",{className:"relative",children:[l.jsx(mr,{className:"w-8 h-8 animate-spin text-primary-500"}),l.jsx("div",{className:"absolute inset-0 w-8 h-8 border-2 border-primary-200 dark:border-primary-800 rounded-full"})]}),l.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300 font-medium",children:"Загрузка данных..."})]}),wJ=()=>{var $,D,R,M;const[t,e]=_.useState(null),[r,n]=_.useState(!0),[a,i]=_.useState(!1),[s,o]=_.useState({}),[c,u]=_.useState({name:"",price:0,duration:"hour",description:""}),[d,f]=_.useState(!1),[h,p]=_.useState(null),[m,g]=_.useState(null),[y,x]=_.useState(!1),v=_.useRef(null),b=_.useRef(null);_.useEffect(()=>{w()},[]);const w=async()=>{try{n(!0);const{data:L,error:B}=await mu.from("site_settings").select("rent_info_settings").select("*").single();if(B)throw B;e(L),o(L||{})}catch(L){console.error("Error fetching settings:",L),K.error("Не удалось загрузить настройки")}finally{n(!1)}},S=async()=>{try{i(!0);const{error:L}=await mu.from("site_settings").select("rent_info_settings").update(s).eq("id",t==null?void 0:t.id);if(L)throw L;await w(),K.success("Настройки успешно сохранены")}catch(L){console.error("Error saving settings:",L),K.error("Ошибка при сохранении настроек")}finally{i(!1)}},E=()=>{if(!c.name||c.price<=0)return;const L=[...s.pricelist||[],{...c,id:Date.now().toString()}];o(B=>({...B,pricelist:L})),u({name:"",price:0,duration:"hour",description:""})},j=L=>{const B=(s.pricelist||[]).filter(U=>U.id!==L);o(U=>({...U,pricelist:B}))},I=(L,B)=>{o(U=>({...U,[B]:L.target.value}))},N=(L,B)=>{o(U=>({...U,contacts:{...U.contacts||{},[B]:L.target.value}}))},T=(L,B)=>{u(U=>({...U,[B]:B==="price"?Number(L.target.value):L.target.value}))},F=async L=>{if(L.target.files&&L.target.files.length>0){const B=L.target.files[0];if(B.size>5*1024*1024){K.error("Файл слишком большой. Максимальный размер 5MB.");return}p(B),x(!0)}},C=()=>{if(v.current&&v.current.cropper){const L=v.current.cropper.getCroppedCanvas();g(L.toDataURL("image/jpeg",.8))}},A=async()=>{if(!(!m||!h))try{f(!0);const L=await fetch(m).then(oe=>oe.blob()),B=Date.now(),U=h.name.split(".").pop(),te=`rent_photos/${`${B}.${U}`}`,{data:V,error:re}=await mu.storage.from("images").upload(te,L,{cacheControl:"3600",upsert:!1,contentType:"image/jpeg"});if(re)throw re;const{data:ue}=mu.storage.from("images").getPublicUrl(te),ie=[...s.photos||[],ue.publicUrl];o(oe=>({...oe,photos:ie})),K.success("Фото успешно загружено"),O()}catch(L){console.error("Error uploading photo:",L),K.error("Ошибка при загрузке фото")}finally{f(!1)}},k=async L=>{try{const B=L.split("/"),q=`rent_photos/${B[B.length-1]}`,{error:te}=await mu.storage.from("images").remove([q]);if(te)throw te;const V=(s.photos||[]).filter(re=>re!==L);o(re=>({...re,photos:V})),K.success("Фото успешно удалено")}catch(B){console.error("Error deleting photo:",B),K.error("Ошибка при удалении фото")}},O=()=>{p(null),g(null),x(!1),b.current&&(b.current.value="")};return r?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8 font-sans",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx(bJ,{})})}):t?l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8 font-sans",children:[l.jsx("input",{type:"file",ref:b,onChange:F,accept:"image/*",className:"hidden"}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"mb-12 text-center",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-4 font-heading",children:"Управление арендой"}),l.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"Настройте информацию о ваших помещениях для аренды"})]}),l.jsx("div",{className:"flex justify-center mb-10",children:l.jsx("button",{onClick:S,disabled:a,className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg font-heading",children:a?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"w-5 h-5 animate-spin"}),"Сохранение..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"w-5 h-5"}),"Сохранить изменения"]})})}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/30 dark:to-primary-800/30 rounded-xl mr-4",children:l.jsx(Hp,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Основные настройки"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Заголовок и описание страницы аренды"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Заголовок страницы"}),l.jsx("input",{type:"text",value:s.title||"",onChange:L=>I(L,"title"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"Введите заголовок страницы аренды"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Описание страницы"}),l.jsx("textarea",{value:s.description||"",onChange:L=>I(L,"description"),rows:4,className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200 resize-none",placeholder:"Опишите ваши помещения для аренды..."})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/30 dark:to-blue-800/30 rounded-xl mr-4",children:l.jsx(qa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Фотогалерея"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Загрузите фотографии ваших помещений"})]})]}),l.jsx("div",{className:"mb-8",children:y?l.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Обрезка изображения"}),l.jsx("div",{className:"h-64 w-full relative rounded-lg overflow-hidden",children:l.jsx(l2,{src:h?URL.createObjectURL(h):"",style:{height:"100%",width:"100%"},initialAspectRatio:16/9,guides:!0,ref:v,crop:C,viewMode:1,minCropBoxHeight:100,minCropBoxWidth:100,responsive:!0,autoCropArea:1,checkOrientation:!1})}),m&&l.jsxs("div",{children:[l.jsx("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Предпросмотр:"}),l.jsx("div",{className:"flex justify-center",children:l.jsx("img",{src:m,alt:"Cropped preview",className:"max-h-40 rounded-lg border-2 border-gray-200 dark:border-gray-600 shadow-lg"})})]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-6 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",children:[l.jsx(Bt,{className:"w-5 h-5"}),"Отмена"]}),l.jsx("button",{onClick:A,disabled:d||!m,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 disabled:transform-none",children:d?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"w-5 h-5 animate-spin"}),"Загрузка..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"w-5 h-5"}),"Загрузить фото"]})})]})]}):l.jsx("div",{className:"p-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700/30 dark:to-gray-600/30 hover:border-primary-400 dark:hover:border-primary-500 transition-all duration-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"p-4 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/30 dark:to-primary-800/30 rounded-full",children:l.jsx(qa,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})})}),l.jsx("button",{onClick:()=>{var L;return(L=b.current)==null?void 0:L.click()},className:"text-primary-600 dark:text-primary-400 font-semibold hover:text-primary-700 dark:hover:text-primary-300 transition-colors duration-200",children:"Нажмите для загрузки фото"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"или перетащите файл сюда"}),l.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"JPG, PNG (максимум 5MB)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Текущие фотографии"}),s.photos&&s.photos.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:s.photos.map((L,B)=>l.jsxs("div",{className:"group relative",children:[l.jsx("div",{className:"aspect-square rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-600 shadow-lg hover:shadow-xl transition-all duration-300",children:l.jsx("img",{src:L,alt:`Rent photo ${B+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),l.jsx("button",{onClick:()=>k(L),className:"absolute top-2 right-2 p-2 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 transform hover:scale-110 shadow-lg",title:"Удалить фото",children:l.jsx(Rn,{className:"w-4 h-4"})})]},B))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx(qa,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Нет загруженных фотографий"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Добавьте фотографии ваших помещений"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30 rounded-xl mr-4",children:l.jsx(Hu,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Прайс-лист"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Варианты аренды и цены"})]})]}),l.jsxs("button",{onClick:E,disabled:!c.name||c.price<=0,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg font-heading disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[l.jsx(ha,{className:"w-5 h-5"}),"Добавить вариант"]})]}),l.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Добавить новый вариант"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Название"}),l.jsx("input",{type:"text",value:c.name,onChange:L=>T(L,"name"),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"Стандартный зал"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Цена (₽)"}),l.jsx("input",{type:"number",value:c.price,onChange:L=>T(L,"price"),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"1000"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Период"}),l.jsxs("select",{value:c.duration,onChange:L=>T(L,"duration"),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",children:[l.jsx("option",{value:"hour",children:"Почасово"}),l.jsx("option",{value:"day",children:"Посуточно"}),l.jsx("option",{value:"week",children:"Понедельно"}),l.jsx("option",{value:"month",children:"Помесячно"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Описание"}),l.jsx("input",{type:"text",value:c.description||"",onChange:L=>T(L,"description"),className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"Дополнительная информация"})]})]})]}),l.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[l.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Название"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Цена"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Период"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Описание"}),l.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:"Действия"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-gray-700",children:(s.pricelist||[]).length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[l.jsx(Hu,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Нет вариантов аренды"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Добавьте варианты аренды с ценами"})]})}):(s.pricelist||[]).map(L=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors duration-200",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:L.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[L.price.toLocaleString("ru-RU")," ₽"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:{hour:"Час",day:"День",week:"Неделя",month:"Месяц"}[L.duration]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs",children:L.description||"-"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:l.jsx("button",{onClick:()=>j(L.id),className:"inline-flex items-center justify-center w-8 h-8 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Удалить",children:l.jsx(Rn,{className:"w-4 h-4"})})})]},L.id))})]})})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/30 rounded-xl mr-4",children:l.jsx(T0,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Контактная информация"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Способы связи для аренды"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[l.jsx(vr,{className:"w-4 h-4 text-orange-500"}),"Адрес"]}),l.jsx("input",{type:"text",value:(($=s.contacts)==null?void 0:$.address)||"",onChange:L=>N(L,"address"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-800 transition-all duration-200",placeholder:"г. Москва, ул. Примерная, д. 1"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[l.jsx(T0,{className:"w-4 h-4 text-orange-500"}),"Телефон"]}),l.jsx("input",{type:"tel",value:((D=s.contacts)==null?void 0:D.phone)||"",onChange:L=>N(L,"phone"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-800 transition-all duration-200",placeholder:"+7 (999) 123-45-67"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[l.jsx(ef,{className:"w-4 h-4 text-orange-500"}),"Email"]}),l.jsx("input",{type:"email",value:((R=s.contacts)==null?void 0:R.email)||"",onChange:L=>N(L,"email"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-800 transition-all duration-200",placeholder:"example@mail.com"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:[l.jsx(vr,{className:"w-4 h-4 text-orange-500"}),"Ссылка на карту"]}),l.jsx("input",{type:"url",value:((M=s.contacts)==null?void 0:M.map_link)||"",onChange:L=>N(L,"map_link"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-800 transition-all duration-200",placeholder:"https://yandex.ru/maps/..."})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Загружено фото"}),l.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:(s.photos||[]).length})]}),l.jsx("div",{className:"p-3 bg-blue-200 dark:bg-blue-800 rounded-xl",children:l.jsx(qa,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})]})}),l.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-2xl p-6 border border-green-200 dark:border-green-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Вариантов аренды"}),l.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:(s.pricelist||[]).length})]}),l.jsx("div",{className:"p-3 bg-green-200 dark:bg-green-800 rounded-xl",children:l.jsx(Hu,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})]})}),l.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-2xl p-6 border border-purple-200 dark:border-purple-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Мин. цена"}),l.jsx("p",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:(s.pricelist||[]).length>0?`${Math.min(...(s.pricelist||[]).map(L=>L.price)).toLocaleString("ru-RU")} ₽`:"—"})]}),l.jsx("div",{className:"p-3 bg-purple-200 dark:bg-purple-800 rounded-xl",children:l.jsx(Wh,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})]})})]})]}),l.jsx("div",{className:"fixed bottom-6 right-6 md:hidden",children:l.jsx("button",{onClick:S,disabled:a,className:"flex items-center gap-2 px-6 py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:a?l.jsx(mr,{className:"w-6 h-6 animate-spin"}):l.jsx(Oa,{className:"w-6 h-6"})})})]})]}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8 font-sans",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"text-center py-12",children:l.jsx("div",{className:"text-yellow-600 dark:text-yellow-400 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:"Настройки аренды не найдены. Создайте новую запись."})})})})},_J=()=>{const[t,e]=_.useState(""),[r,n]=_.useState([]),[a,i]=_.useState({title:"",description:"",address:"",phone:"",working_hours:""}),[s,o]=_.useState(!0),[c,u]=_.useState(!1),[d,f]=_.useState(null),[h,p]=_.useState(null),[m,g]=_.useState({name:"",description:"",price:0,currency:"euro",period:"час",active:!0,image_url:"",main_service:!0}),[y,x]=_.useState(!1);_.useEffect(()=>{v()},[]);const v=async()=>{try{o(!0);const{data:N,error:T}=await de.from("coworking_info_table").select("*").order("order",{ascending:!0});if(T)throw T;n(N||[]);const{data:F,error:C}=await de.from("site_settings").select("coworking_header_settings").single();if(C){if(console.error("Error fetching settings:",C),C.code==="PGRST116"){i({title:"Коворкинг пространство",description:"Комфортные рабочие места для исследователей и стартапов",address:"Сараевская, 48",phone:"+381",working_hours:"10:00-18:00"});return}throw C}const A=(F==null?void 0:F.coworking_header_settings)||{};i({title:A.title||"",description:A.description||"",address:A.address||"",phone:A.phone||"",working_hours:A.working_hours||""})}catch(N){console.error("Error fetching data:",N),f("Не удалось загрузить данные"),K.error("Не удалось загрузить данные")}finally{o(!1)}},b=async()=>{try{u(!0);const{data:N,error:T}=await de.from("site_settings").select("id").single();if(T)throw console.error("Error fetching site settings ID:",T),T;const{error:F}=await de.from("site_settings").update({coworking_header_settings:a}).eq("id",N.id);if(F)throw F;K.success("Заголовок успешно сохранен"),f(null)}catch(N){console.error("Error saving header:",N),f("Ошибка при сохранении заголовка"),K.error("Ошибка при сохранении заголовка")}finally{u(!1)}},w=async()=>{try{if(!h)return;const{error:N}=await de.from("coworking_info_table").update(h).eq("id",h.id);if(N)throw N;await v(),p(null),x(!1),K.success("Услуга успешно обновлена")}catch(N){console.error("Error saving service:",N),K.error("Ошибка при сохранении")}},S=async()=>{try{if(!m.name||m.price<=0){K.error("Заполните название и цену");return}const N=r.reduce((C,A)=>A.order>C?A.order:C,0),T={...m,order:N+1},{error:F}=await de.from("coworking_info_table").insert([T]);if(F)throw F;await v(),g({name:"",description:"",price:0,currency:"euro",period:"час",active:!0,image_url:"",main_service:!0}),x(!1),K.success("Услуга успешно добавлена")}catch(N){console.error("Error adding service:",N),K.error("Ошибка при добавлении")}},E=async N=>{if(confirm("Удалить услугу?"))try{const{error:T}=await de.from("coworking_info_table").delete().eq("id",N);if(T)throw T;await v(),K.success("Услуга удалена")}catch(T){console.error("Error deleting service:",T),K.error("Ошибка при удалении")}},j=async(N,T)=>{const F=r.findIndex(A=>A.id===N);if(F===-1)return;const C=T==="up"?F-1:F+1;if(!(C<0||C>=r.length))try{const A=[{id:r[F].id,order:r[C].order},{id:r[C].id,order:r[F].order}];for(const k of A){const{error:O}=await de.from("coworking_info_table").update({order:k.order}).eq("id",k.id);if(O)throw O}await v()}catch(A){console.error("Error moving service:",A),K.error("Ошибка при перемещении")}},I=r.filter(N=>N.name.toLowerCase().includes(t.toLowerCase())||N.description.toLowerCase().includes(t.toLowerCase()));return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8 font-sans",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"mb-12 text-center",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-4 font-heading",children:"Управление коворкингом"}),l.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"Настройте информацию о коворкинг пространстве и услугах"})]}),d&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsx("p",{className:"text-red-600 dark:text-red-400",children:d})}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Zx,{className:"w-6 h-6 text-primary-600"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Настройки заголовка"})]}),l.jsx("button",{onClick:b,disabled:c,className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:c?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Сохранение..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"w-4 h-4"}),"Сохранить заголовок"]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Заголовок"}),l.jsx("input",{type:"text",value:a.title,onChange:N=>i({...a,title:N.target.value}),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Название коворкинг пространства"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Адрес"}),l.jsx("input",{type:"text",value:a.address||"",onChange:N=>i({...a,address:N.target.value}),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Адрес коворкинга"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Телефон"}),l.jsx("input",{type:"text",value:a.phone||"",onChange:N=>i({...a,phone:N.target.value}),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"+381 XX XXX XXXX"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Часы работы"}),l.jsx("input",{type:"text",value:a.working_hours||"",onChange:N=>i({...a,working_hours:N.target.value}),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"10:00-18:00"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Описание"}),l.jsx("textarea",{value:a.description,onChange:N=>i({...a,description:N.target.value}),rows:4,className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Описание коворкинг пространства"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Управление услугами"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[l.jsx(ha,{className:"w-4 h-4"}),"Добавить услугу"]})]}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"Поиск услуг...",value:t,onChange:N=>e(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),l.jsx("div",{className:"space-y-4",children:I.map((N,T)=>l.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:N.name}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N.active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:N.active?"Активна":"Неактивна"}),N.main_service&&l.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"Основная"})]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:N.description}),l.jsxs("p",{className:"text-lg font-semibold text-primary-600",children:[N.price," ",N.currency," / ",N.period]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>j(N.id,"up"),disabled:T===0,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50",children:l.jsx(RM,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>j(N.id,"down"),disabled:T===r.length-1,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50",children:l.jsx(Cd,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>p(N),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:l.jsx(Ja,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>E(N.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:l.jsx(Rn,{className:"w-4 h-4"})})]})]}),N.image_url&&l.jsx("div",{className:"mt-4",children:l.jsx("img",{src:N.image_url,alt:N.name,className:"w-32 h-20 object-cover rounded-lg"})})]},N.id))})]}),(y||h)&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h?"Редактировать услугу":"Добавить услугу"}),l.jsx("button",{onClick:()=>{x(!1),p(null)},className:"p-2 text-gray-400 hover:text-gray-600",children:l.jsx(Bt,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Название услуги"}),l.jsx("input",{type:"text",value:h?h.name||"":m.name,onChange:N=>h?p({...h,name:N.target.value}):g({...m,name:N.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Например: Рабочее место"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Описание"}),l.jsx("textarea",{value:h?h.description||"":m.description,onChange:N=>h?p({...h,description:N.target.value}):g({...m,description:N.target.value}),rows:3,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Описание услуги"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Цена"}),l.jsx("input",{type:"number",value:h?h.price||0:m.price,onChange:N=>h?p({...h,price:Number(N.target.value)}):g({...m,price:Number(N.target.value)}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Валюта"}),l.jsxs("select",{value:h?h.currency||"euro":m.currency,onChange:N=>h?p({...h,currency:N.target.value}):g({...m,currency:N.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"euro",children:"€"}),l.jsx("option",{value:"RSD",children:"RSD"}),l.jsx("option",{value:"кофе",children:"☕"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Период"}),l.jsxs("select",{value:h?h.period||"час":m.period,onChange:N=>h?p({...h,period:N.target.value}):g({...m,period:N.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"час",children:"час"}),l.jsx("option",{value:"день",children:"день"}),l.jsx("option",{value:"месяц",children:"месяц"}),l.jsx("option",{value:"Страница",children:"за страницу"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:h?h.active??!0:m.active,onChange:N=>h?p({...h,active:N.target.checked}):g({...m,active:N.target.checked}),className:"mr-2"}),"Активная услуга"]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:h?h.main_service??!0:m.main_service,onChange:N=>h?p({...h,main_service:N.target.checked}):g({...m,main_service:N.target.checked}),className:"mr-2"}),"Основная услуга"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{x(!1),p(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Отмена"}),l.jsx("button",{onClick:h?w:S,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:h?"Сохранить изменения":"Добавить услугу"})]})]})})]})})},kJ=()=>{var O,$,D,R;const[t,e]=_.useState(null),[r,n]=_.useState({}),[a,i]=_.useState(!0),[s,o]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState({name:"",price:0,duration:"hour",description:""}),[h,p]=_.useState(!1),[m,g]=_.useState(null),[y,x]=_.useState(!1),v=_.useRef(null),b=_.useRef(null);_.useEffect(()=>{w()},[]);const w=async()=>{try{i(!0);const{data:M,error:L}=await de.from("site_settings").select("rent_info_settings").single();if(L){if(console.error("Error fetching settings:",L),L.code==="PGRST116"){const U={title:"Аренда помещений",description:"Описание услуг аренды",contacts:{email:"rent@sciencehub.rs",phone:"+381 XX XXX XXXX",address:"Адрес",workingHours:"9:00 - 18:00"},pricelist:[],photos:[]};e(U),n(U);return}throw L}const B=(M==null?void 0:M.rent_info_settings)||{};e(B),n(B)}catch(M){console.error("Error fetching settings:",M),K.error("Не удалось загрузить настройки")}finally{i(!1)}},S=async()=>{try{o(!0);const{data:M,error:L}=await de.from("site_settings").select("id").single();if(L)throw console.error("Error fetching site settings ID:",L),L;const{error:B}=await de.from("site_settings").update({rent_info_settings:r}).eq("id",M.id);if(B)throw B;e(r),K.success("Настройки успешно сохранены")}catch(M){console.error("Error saving settings:",M),K.error("Ошибка при сохранении настроек")}finally{o(!1)}},E=()=>{if(!d.name||d.price<=0){K.error("Заполните название и цену");return}const M=[...r.pricelist||[],{...d,id:Date.now().toString()}];n(L=>({...L,pricelist:M})),f({name:"",price:0,duration:"hour",description:""})},j=M=>{const L=(r.pricelist||[]).filter(B=>B.id!==M);n(B=>({...B,pricelist:L}))},I=(M,L)=>{n(B=>({...B,[L]:M.target.value}))},N=(M,L)=>{n(B=>({...B,contacts:{...B.contacts||{},[L]:M.target.value}}))},T=(M,L)=>{f(B=>({...B,[L]:L==="price"?Number(M.target.value):M.target.value}))},F=async M=>{if(M.target.files&&M.target.files.length>0){const L=M.target.files[0];if(L.size>5*1024*1024){K.error("Файл слишком большой. Максимальный размер 5MB.");return}u(L),x(!0)}},C=()=>{if(v.current&&v.current.cropper){const M=v.current.cropper.getCroppedCanvas();g(M.toDataURL("image/jpeg",.8))}},A=async()=>{if(!(!m||!c))try{p(!0);const M=await fetch(m).then(ie=>ie.blob()),L=Date.now(),B=c.name.split(".").pop(),U=`rent-${L}.${B}`,{data:q,error:te}=await de.storage.from("images").upload(`rent/${U}`,M,{contentType:"image/jpeg",upsert:!1});if(te)throw te;const{data:V}=de.storage.from("images").getPublicUrl(`rent/${U}`),re=V.publicUrl,ue=[...r.photos||[],re];n(ie=>({...ie,photos:ue})),x(!1),g(null),u(null),K.success("Фото успешно загружено")}catch(M){console.error("Error uploading photo:",M),K.error("Ошибка при загрузке фото")}finally{p(!1)}},k=M=>{const L=(r.photos||[]).filter(B=>B!==M);n(B=>({...B,photos:L}))};return a?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8 font-sans",children:[l.jsx("input",{type:"file",ref:b,onChange:F,accept:"image/*",className:"hidden"}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"mb-12 text-center",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-4 font-heading",children:"Управление арендой"}),l.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"Настройте информацию о ваших помещениях для аренды"})]}),l.jsx("div",{className:"flex justify-center mb-10",children:l.jsx("button",{onClick:S,disabled:s,className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg font-heading",children:s?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"w-5 h-5 animate-spin"}),"Сохранение..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"w-5 h-5"}),"Сохранить изменения"]})})}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/30 dark:to-primary-800/30 rounded-xl mr-4",children:l.jsx(Hp,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading",children:"Основные настройки"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Заголовок и описание страницы аренды"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Заголовок страницы"}),l.jsx("input",{type:"text",value:r.title||"",onChange:M=>I(M,"title"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200",placeholder:"Введите заголовок страницы аренды"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Описание страницы"}),l.jsx("textarea",{value:r.description||"",onChange:M=>I(M,"description"),rows:4,className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 transition-all duration-200 resize-none",placeholder:"Опишите ваши помещения для аренды..."})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading mb-6",children:"Контактная информация"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:((O=r.contacts)==null?void 0:O.email)||"",onChange:M=>N(M,"email"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"contact@example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Телефон"}),l.jsx("input",{type:"tel",value:(($=r.contacts)==null?void 0:$.phone)||"",onChange:M=>N(M,"phone"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"+381 XX XXX XXXX"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Адрес"}),l.jsx("input",{type:"text",value:((D=r.contacts)==null?void 0:D.address)||"",onChange:M=>N(M,"address"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Адрес локации"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Часы работы"}),l.jsx("input",{type:"text",value:((R=r.contacts)==null?void 0:R.workingHours)||"",onChange:M=>N(M,"workingHours"),className:"w-full p-4 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Пн-Пт: 9:00-18:00"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading mb-6",children:"Прайс-лист"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[l.jsx("input",{type:"text",placeholder:"Название услуги",value:d.name,onChange:M=>T(M,"name"),className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),l.jsx("input",{type:"number",placeholder:"Цена",value:d.price,onChange:M=>T(M,"price"),className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),l.jsxs("select",{value:d.duration,onChange:M=>T(M,"duration"),className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"hour",children:"за час"}),l.jsx("option",{value:"day",children:"за день"}),l.jsx("option",{value:"week",children:"за неделю"}),l.jsx("option",{value:"month",children:"за месяц"})]}),l.jsx("input",{type:"text",placeholder:"Описание (опционально)",value:d.description,onChange:M=>T(M,"description"),className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),l.jsx("button",{onClick:E,className:"p-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center",children:l.jsx(ha,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"space-y-3",children:(r.pricelist||[]).map(M=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:M.name}),l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[M.price," RSD ",M.duration," ",M.description&&`• ${M.description}`]})]}),l.jsx("button",{onClick:()=>j(M.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:l.jsx(Rn,{className:"w-4 h-4"})})]},M.id))})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white font-heading mb-6",children:"Фотогалерея"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(r.photos||[]).map((M,L)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:M,alt:`Rent photo ${L+1}`,className:"w-full h-48 object-cover rounded-xl"}),l.jsx("button",{onClick:()=>k(M),className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Bt,{className:"w-4 h-4"})})]},L)),l.jsxs("button",{onClick:()=>{var M;return(M=b.current)==null?void 0:M.click()},className:"h-48 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl flex flex-col items-center justify-center text-gray-600 dark:text-gray-400 hover:border-primary-500 hover:text-primary-500 transition-colors",children:[l.jsx(Ao,{className:"w-8 h-8 mb-2"}),l.jsx("span",{children:"Добавить фото"})]})]})]})]})]}),y&&c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl max-w-2xl w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Обрезать изображение"}),l.jsx("div",{className:"mb-4",children:l.jsx(l2,{ref:v,src:URL.createObjectURL(c),style:{height:400,width:"100%"},aspectRatio:16/9,preview:".img-preview",guides:!1,onInitialized:C,onCrop:C})}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Отмена"}),l.jsx("button",{onClick:A,disabled:h,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:h?"Загрузка...":"Сохранить"})]})]})})]})};function _T(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,d1(t,e)}function Ee(){return Ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ee.apply(null,arguments)}function US(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?US(Object(r),!0).forEach(function(n){GB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function un(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var HS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),WS=function(){return Math.random().toString(36).substring(7).split("").join(".")},VS={INIT:"@@redux/INIT"+WS(),REPLACE:"@@redux/REPLACE"+WS()};function NJ(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function kT(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(un(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(un(1));return r(kT)(t,e)}if(typeof t!="function")throw new Error(un(2));var a=t,i=e,s=[],o=s,c=!1;function u(){o===s&&(o=s.slice())}function d(){if(c)throw new Error(un(3));return i}function f(g){if(typeof g!="function")throw new Error(un(4));if(c)throw new Error(un(5));var y=!0;return u(),o.push(g),function(){if(y){if(c)throw new Error(un(6));y=!1,u();var v=o.indexOf(g);o.splice(v,1),s=null}}}function h(g){if(!NJ(g))throw new Error(un(7));if(typeof g.type>"u")throw new Error(un(8));if(c)throw new Error(un(9));try{c=!0,i=a(i,g)}finally{c=!1}for(var y=s=o,x=0;x<y.length;x++){var v=y[x];v()}return g}function p(g){if(typeof g!="function")throw new Error(un(10));a=g,h({type:VS.REPLACE})}function m(){var g,y=f;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(un(11));function b(){v.next&&v.next(d())}b();var w=y(b);return{unsubscribe:w}}},g[HS]=function(){return this},g}return h({type:VS.INIT}),n={dispatch:h,subscribe:f,getState:d,replaceReducer:p},n[HS]=m,n}function GS(t,e){return function(){return e(t.apply(this,arguments))}}function XS(t,e){if(typeof t=="function")return GS(t,e);if(typeof t!="object"||t===null)throw new Error(un(16));var r={};for(var n in t){var a=t[n];typeof a=="function"&&(r[n]=GS(a,e))}return r}function NT(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function SJ(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(un(15))},s={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=e.map(function(c){return c(s)});return i=NT.apply(void 0,o)(a.dispatch),zS(zS({},a),{},{dispatch:i})}}}var ST={exports:{}},EJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CJ=EJ,jJ=CJ;function ET(){}function CT(){}CT.resetWarningCache=ET;var AJ=function(){function t(n,a,i,s,o,c){if(c!==jJ){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:CT,resetWarningCache:ET};return r.PropTypes=r,r};ST.exports=AJ();var jT=ST.exports,AT=ne.createContext(null);function TJ(t){t()}var TT=TJ,IJ=function(e){return TT=e},OJ=function(){return TT};function DJ(){var t=OJ(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var a=e;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=e;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,s=r={callback:a,next:null,prev:r};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var qS={notify:function(){},get:function(){return[]}};function IT(t,e){var r,n=qS;function a(f){return c(),n.subscribe(f)}function i(){n.notify()}function s(){d.onStateChange&&d.onStateChange()}function o(){return!!r}function c(){r||(r=e?e.addNestedSub(s):t.subscribe(s),n=DJ())}function u(){r&&(r(),r=void 0,n.clear(),n=qS)}var d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:s,isSubscribed:o,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return n}};return d}var OT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?_.useLayoutEffect:_.useEffect;function PJ(t){var e=t.store,r=t.context,n=t.children,a=_.useMemo(function(){var o=IT(e);return{store:e,subscription:o}},[e]),i=_.useMemo(function(){return e.getState()},[e]);OT(function(){var o=a.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),i!==e.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[a,i]);var s=r||AT;return ne.createElement(s.Provider,{value:a},n)}function ip(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var DT={exports:{}},ut={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yr=typeof Symbol=="function"&&Symbol.for,c2=yr?Symbol.for("react.element"):60103,u2=yr?Symbol.for("react.portal"):60106,vm=yr?Symbol.for("react.fragment"):60107,xm=yr?Symbol.for("react.strict_mode"):60108,ym=yr?Symbol.for("react.profiler"):60114,bm=yr?Symbol.for("react.provider"):60109,wm=yr?Symbol.for("react.context"):60110,d2=yr?Symbol.for("react.async_mode"):60111,_m=yr?Symbol.for("react.concurrent_mode"):60111,km=yr?Symbol.for("react.forward_ref"):60112,Nm=yr?Symbol.for("react.suspense"):60113,RJ=yr?Symbol.for("react.suspense_list"):60120,Sm=yr?Symbol.for("react.memo"):60115,Em=yr?Symbol.for("react.lazy"):60116,MJ=yr?Symbol.for("react.block"):60121,LJ=yr?Symbol.for("react.fundamental"):60117,BJ=yr?Symbol.for("react.responder"):60118,FJ=yr?Symbol.for("react.scope"):60119;function Fn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case c2:switch(t=t.type,t){case d2:case _m:case vm:case ym:case xm:case Nm:return t;default:switch(t=t&&t.$$typeof,t){case wm:case km:case Em:case Sm:case bm:return t;default:return e}}case u2:return e}}}function PT(t){return Fn(t)===_m}ut.AsyncMode=d2;ut.ConcurrentMode=_m;ut.ContextConsumer=wm;ut.ContextProvider=bm;ut.Element=c2;ut.ForwardRef=km;ut.Fragment=vm;ut.Lazy=Em;ut.Memo=Sm;ut.Portal=u2;ut.Profiler=ym;ut.StrictMode=xm;ut.Suspense=Nm;ut.isAsyncMode=function(t){return PT(t)||Fn(t)===d2};ut.isConcurrentMode=PT;ut.isContextConsumer=function(t){return Fn(t)===wm};ut.isContextProvider=function(t){return Fn(t)===bm};ut.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===c2};ut.isForwardRef=function(t){return Fn(t)===km};ut.isFragment=function(t){return Fn(t)===vm};ut.isLazy=function(t){return Fn(t)===Em};ut.isMemo=function(t){return Fn(t)===Sm};ut.isPortal=function(t){return Fn(t)===u2};ut.isProfiler=function(t){return Fn(t)===ym};ut.isStrictMode=function(t){return Fn(t)===xm};ut.isSuspense=function(t){return Fn(t)===Nm};ut.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===vm||t===_m||t===ym||t===xm||t===Nm||t===RJ||typeof t=="object"&&t!==null&&(t.$$typeof===Em||t.$$typeof===Sm||t.$$typeof===bm||t.$$typeof===wm||t.$$typeof===km||t.$$typeof===LJ||t.$$typeof===BJ||t.$$typeof===FJ||t.$$typeof===MJ)};ut.typeOf=Fn;DT.exports=ut;var $J=DT.exports,f2=$J,UJ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},zJ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},HJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},RT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h2={};h2[f2.ForwardRef]=HJ;h2[f2.Memo]=RT;function YS(t){return f2.isMemo(t)?RT:h2[t.$$typeof]||UJ}var WJ=Object.defineProperty,VJ=Object.getOwnPropertyNames,KS=Object.getOwnPropertySymbols,GJ=Object.getOwnPropertyDescriptor,XJ=Object.getPrototypeOf,ZS=Object.prototype;function MT(t,e,r){if(typeof e!="string"){if(ZS){var n=XJ(e);n&&n!==ZS&&MT(t,n,r)}var a=VJ(e);KS&&(a=a.concat(KS(e)));for(var i=YS(t),s=YS(e),o=0;o<a.length;++o){var c=a[o];if(!zJ[c]&&!(r&&r[c])&&!(s&&s[c])&&!(i&&i[c])){var u=GJ(e,c);try{WJ(t,c,u)}catch{}}}}return t}var qJ=MT;const QS=ci(qJ);var LT={exports:{}},mt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=60103,jm=60106,mf=60107,gf=60108,vf=60114,xf=60109,yf=60110,bf=60112,wf=60113,p2=60120,_f=60115,kf=60116,BT=60121,FT=60122,$T=60117,UT=60129,zT=60131;if(typeof Symbol=="function"&&Symbol.for){var br=Symbol.for;Cm=br("react.element"),jm=br("react.portal"),mf=br("react.fragment"),gf=br("react.strict_mode"),vf=br("react.profiler"),xf=br("react.provider"),yf=br("react.context"),bf=br("react.forward_ref"),wf=br("react.suspense"),p2=br("react.suspense_list"),_f=br("react.memo"),kf=br("react.lazy"),BT=br("react.block"),FT=br("react.server.block"),$T=br("react.fundamental"),UT=br("react.debug_trace_mode"),zT=br("react.legacy_hidden")}function La(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Cm:switch(t=t.type,t){case mf:case vf:case gf:case wf:case p2:return t;default:switch(t=t&&t.$$typeof,t){case yf:case bf:case kf:case _f:case xf:return t;default:return e}}case jm:return e}}}var YJ=xf,KJ=Cm,ZJ=bf,QJ=mf,JJ=kf,eee=_f,tee=jm,ree=vf,nee=gf,aee=wf;mt.ContextConsumer=yf;mt.ContextProvider=YJ;mt.Element=KJ;mt.ForwardRef=ZJ;mt.Fragment=QJ;mt.Lazy=JJ;mt.Memo=eee;mt.Portal=tee;mt.Profiler=ree;mt.StrictMode=nee;mt.Suspense=aee;mt.isAsyncMode=function(){return!1};mt.isConcurrentMode=function(){return!1};mt.isContextConsumer=function(t){return La(t)===yf};mt.isContextProvider=function(t){return La(t)===xf};mt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cm};mt.isForwardRef=function(t){return La(t)===bf};mt.isFragment=function(t){return La(t)===mf};mt.isLazy=function(t){return La(t)===kf};mt.isMemo=function(t){return La(t)===_f};mt.isPortal=function(t){return La(t)===jm};mt.isProfiler=function(t){return La(t)===vf};mt.isStrictMode=function(t){return La(t)===gf};mt.isSuspense=function(t){return La(t)===wf};mt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===mf||t===vf||t===UT||t===gf||t===wf||t===p2||t===zT||typeof t=="object"&&t!==null&&(t.$$typeof===kf||t.$$typeof===_f||t.$$typeof===xf||t.$$typeof===yf||t.$$typeof===bf||t.$$typeof===$T||t.$$typeof===BT||t[0]===FT)};mt.typeOf=La;LT.exports=mt;var iee=LT.exports,see=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],oee=["reactReduxForwardedRef"],lee=[],cee=[null,null];function uee(t,e){var r=t[1];return[e.payload,r+1]}function JS(t,e,r){OT(function(){return t.apply(void 0,e)},r)}function dee(t,e,r,n,a,i,s){t.current=n,e.current=a,r.current=!1,i.current&&(i.current=null,s())}function fee(t,e,r,n,a,i,s,o,c,u){if(t){var d=!1,f=null,h=function(){if(!d){var g=e.getState(),y,x;try{y=n(g,a.current)}catch(v){x=v,f=v}x||(f=null),y===i.current?s.current||c():(i.current=y,o.current=y,s.current=!0,u({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=h,r.trySubscribe(),h();var p=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return p}}var hee=function(){return[null,0]};function pee(t,e){e===void 0&&(e={});var r=e,n=r.getDisplayName,a=n===void 0?function(b){return"ConnectAdvanced("+b+")"}:n,i=r.methodName,s=i===void 0?"connectAdvanced":i,o=r.renderCountProp,c=o===void 0?void 0:o,u=r.shouldHandleStateChanges,d=u===void 0?!0:u,f=r.storeKey,h=f===void 0?"store":f;r.withRef;var p=r.forwardRef,m=p===void 0?!1:p,g=r.context,y=g===void 0?AT:g,x=ip(r,see),v=y;return function(w){var S=w.displayName||w.name||"Component",E=a(S),j=Ee({},x,{getDisplayName:a,methodName:s,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:E,wrappedComponentName:S,WrappedComponent:w}),I=x.pure;function N(k){return t(k.dispatch,j)}var T=I?_.useMemo:function(k){return k()};function F(k){var O=_.useMemo(function(){var G=k.reactReduxForwardedRef,J=ip(k,oee);return[k.context,G,J]},[k]),$=O[0],D=O[1],R=O[2],M=_.useMemo(function(){return $&&$.Consumer&&iee.isContextConsumer(ne.createElement($.Consumer,null))?$:v},[$,v]),L=_.useContext(M),B=!!k.store&&!!k.store.getState&&!!k.store.dispatch;L&&L.store;var U=B?k.store:L.store,q=_.useMemo(function(){return N(U)},[U]),te=_.useMemo(function(){if(!d)return cee;var G=IT(U,B?null:L.subscription),J=G.notifyNestedSubs.bind(G);return[G,J]},[U,B,L]),V=te[0],re=te[1],ue=_.useMemo(function(){return B?L:Ee({},L,{subscription:V})},[B,L,V]),ie=_.useReducer(uee,lee,hee),oe=ie[0],ye=oe[0],se=ie[1];if(ye&&ye.error)throw ye.error;var Te=_.useRef(),Fe=_.useRef(R),P=_.useRef(),Q=_.useRef(!1),X=T(function(){return P.current&&R===Fe.current?P.current:q(U.getState(),R)},[U,ye,R]);JS(dee,[Fe,Te,Q,R,X,P,re]),JS(fee,[d,U,V,q,Fe,Te,Q,P,re,se],[U,V,q]);var W=_.useMemo(function(){return ne.createElement(w,Ee({},X,{ref:D}))},[D,w,X]),H=_.useMemo(function(){return d?ne.createElement(M.Provider,{value:ue},W):W},[M,W,ue]);return H}var C=I?ne.memo(F):F;if(C.WrappedComponent=w,C.displayName=F.displayName=E,m){var A=ne.forwardRef(function(O,$){return ne.createElement(C,Ee({},O,{reactReduxForwardedRef:$}))});return A.displayName=E,A.WrappedComponent=w,QS(A,w)}return QS(C,w)}}function e4(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Cv(t,e){if(e4(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!e4(t[r[a]],e[r[a]]))return!1;return!0}function mee(t,e){var r={},n=function(s){var o=t[s];typeof o=="function"&&(r[s]=function(){return e(o.apply(void 0,arguments))})};for(var a in t)n(a);return r}function m2(t){return function(r,n){var a=t(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function t4(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function HT(t,e){return function(n,a){a.displayName;var i=function(o,c){return i.dependsOnOwnProps?i.mapToProps(o,c):i.mapToProps(o)};return i.dependsOnOwnProps=!0,i.mapToProps=function(o,c){i.mapToProps=t,i.dependsOnOwnProps=t4(t);var u=i(o,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=t4(u),u=i(o,c)),u},i}}function gee(t){return typeof t=="function"?HT(t):void 0}function vee(t){return t?void 0:m2(function(e){return{dispatch:e}})}function xee(t){return t&&typeof t=="object"?m2(function(e){return mee(t,e)}):void 0}const yee=[gee,vee,xee];function bee(t){return typeof t=="function"?HT(t):void 0}function wee(t){return t?void 0:m2(function(){return{}})}const _ee=[bee,wee];function kee(t,e,r){return Ee({},r,t,e)}function Nee(t){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,s=!1,o;return function(u,d,f){var h=t(u,d,f);return s?(!a||!i(h,o))&&(o=h):(s=!0,o=h),o}}}function See(t){return typeof t=="function"?Nee(t):void 0}function Eee(t){return t?void 0:function(){return kee}}const Cee=[See,Eee];var jee=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Aee(t,e,r,n){return function(i,s){return r(t(i,s),e(n,s),s)}}function Tee(t,e,r,n,a){var i=a.areStatesEqual,s=a.areOwnPropsEqual,o=a.areStatePropsEqual,c=!1,u,d,f,h,p;function m(b,w){return u=b,d=w,f=t(u,d),h=e(n,d),p=r(f,h,d),c=!0,p}function g(){return f=t(u,d),e.dependsOnOwnProps&&(h=e(n,d)),p=r(f,h,d),p}function y(){return t.dependsOnOwnProps&&(f=t(u,d)),e.dependsOnOwnProps&&(h=e(n,d)),p=r(f,h,d),p}function x(){var b=t(u,d),w=!o(b,f);return f=b,w&&(p=r(f,h,d)),p}function v(b,w){var S=!s(w,d),E=!i(b,u,w,d);return u=b,d=w,S&&E?g():S?y():E?x():p}return function(w,S){return c?v(w,S):m(w,S)}}function Iee(t,e){var r=e.initMapStateToProps,n=e.initMapDispatchToProps,a=e.initMergeProps,i=ip(e,jee),s=r(t,i),o=n(t,i),c=a(t,i),u=i.pure?Tee:Aee;return u(s,o,c,t,i)}var Oee=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function jv(t,e,r){for(var n=e.length-1;n>=0;n--){var a=e[n](t);if(a)return a}return function(i,s){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+s.wrappedComponentName+".")}}function Dee(t,e){return t===e}function Pee(t){var e=t===void 0?{}:t,r=e.connectHOC,n=r===void 0?pee:r,a=e.mapStateToPropsFactories,i=a===void 0?_ee:a,s=e.mapDispatchToPropsFactories,o=s===void 0?yee:s,c=e.mergePropsFactories,u=c===void 0?Cee:c,d=e.selectorFactory,f=d===void 0?Iee:d;return function(p,m,g,y){y===void 0&&(y={});var x=y,v=x.pure,b=v===void 0?!0:v,w=x.areStatesEqual,S=w===void 0?Dee:w,E=x.areOwnPropsEqual,j=E===void 0?Cv:E,I=x.areStatePropsEqual,N=I===void 0?Cv:I,T=x.areMergedPropsEqual,F=T===void 0?Cv:T,C=ip(x,Oee),A=jv(p,i,"mapStateToProps"),k=jv(m,o,"mapDispatchToProps"),O=jv(g,u,"mergeProps");return n(f,Ee({methodName:"connect",getDisplayName:function(D){return"Connect("+D+")"},shouldHandleStateChanges:!!p,initMapStateToProps:A,initMapDispatchToProps:k,initMergeProps:O,pure:b,areStatesEqual:S,areOwnPropsEqual:j,areStatePropsEqual:N,areMergedPropsEqual:F},C))}}const WT=Pee();IJ(Mp.unstable_batchedUpdates);function Ree(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function VT(t,e){var r=_.useState(function(){return{inputs:e,result:t()}})[0],n=_.useRef(!0),a=_.useRef(r),i=n.current||!!(e&&a.current.inputs&&Ree(e,a.current.inputs)),s=i?a.current:{inputs:e,result:t()};return _.useEffect(function(){n.current=!1,a.current=s},[s]),s.result}function Mee(t,e){return VT(function(){return t},e)}var Ke=VT,ke=Mee,Lee="Invariant failed";function Bee(t,e){throw new Error(Lee)}var Ca=function(e){var r=e.top,n=e.right,a=e.bottom,i=e.left,s=n-i,o=a-r,c={top:r,right:n,bottom:a,left:i,width:s,height:o,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},g2=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},r4=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},Fee=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Av={top:0,right:0,bottom:0,left:0},v2=function(e){var r=e.borderBox,n=e.margin,a=n===void 0?Av:n,i=e.border,s=i===void 0?Av:i,o=e.padding,c=o===void 0?Av:o,u=Ca(g2(r,a)),d=Ca(r4(r,s)),f=Ca(r4(d,c));return{marginBox:u,borderBox:Ca(r),paddingBox:d,contentBox:f,margin:a,border:s,padding:c}},Xn=function(e){var r=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&Bee(),a},$ee=function(){return{x:window.pageXOffset,y:window.pageYOffset}},sp=function(e,r){var n=e.borderBox,a=e.border,i=e.margin,s=e.padding,o=Fee(n,r);return v2({borderBox:o,border:a,margin:i,padding:s})},op=function(e,r){return r===void 0&&(r=$ee()),sp(e,r)},GT=function(e,r){var n={top:Xn(r.marginTop),right:Xn(r.marginRight),bottom:Xn(r.marginBottom),left:Xn(r.marginLeft)},a={top:Xn(r.paddingTop),right:Xn(r.paddingRight),bottom:Xn(r.paddingBottom),left:Xn(r.paddingLeft)},i={top:Xn(r.borderTopWidth),right:Xn(r.borderRightWidth),bottom:Xn(r.borderBottomWidth),left:Xn(r.borderLeftWidth)};return v2({borderBox:e,margin:n,padding:a,border:i})},XT=function(e){var r=e.getBoundingClientRect(),n=window.getComputedStyle(e);return GT(r,n)},n4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Uee(t,e){return!!(t===e||n4(t)&&n4(e))}function zee(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Uee(t[r],e[r]))return!1;return!0}function gr(t,e){e===void 0&&(e=zee);var r,n=[],a,i=!1;function s(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return i&&r===this&&e(o,n)||(a=t.apply(this,o),i=!0,r=this,n=o),a}return s}var Ld=function(e){var r=[],n=null,a=function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];r=o,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function qT(t,e){}qT.bind(null,"warn");qT.bind(null,"error");function Ps(){}function Hee(t,e){return Ee({},t,{},e)}function sa(t,e,r){var n=e.map(function(a){var i=Hee(r,a.options);return t.addEventListener(a.eventName,a.fn,i),function(){t.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var Wee="Invariant failed";function lp(t){this.message=t}lp.prototype.toString=function(){return this.message};function pe(t,e){throw new lp(Wee)}var Vee=function(t){_T(e,t);function e(){for(var n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,n.callbacks=null,n.unbind=Ps,n.onWindowError=function(o){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var u=o.error;u instanceof lp&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var r=e.prototype;return r.componentDidMount=function(){this.unbind=sa(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof lp){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(ne.Component),Gee=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,cp=function(e){return e+1},Xee=function(e){return`
  You have lifted an item in position `+cp(e.source.index)+`
`},YT=function(e,r){var n=e.droppableId===r.droppableId,a=cp(e.index),i=cp(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},KT=function(e,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+e+`
      has been combined with `+n.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},qee=function(e){var r=e.destination;if(r)return YT(e.source,r);var n=e.combine;return n?KT(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},a4=function(e){return`
  The item has returned to its starting position
  of `+cp(e.index)+`
`},Yee=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+a4(e.source)+`
    `;var r=e.destination,n=e.combine;return r?`
      You have dropped the item.
      `+YT(e.source,r)+`
    `:n?`
      You have dropped the item.
      `+KT(e.draggableId,e.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+a4(e.source)+`
  `},Jh={dragHandleUsageInstructions:Gee,onDragStart:Xee,onDragUpdate:qee,onDragEnd:Yee},xr={x:0,y:0},Cr=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},An=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},Rs=function(e,r){return e.x===r.x&&e.y===r.y},Fc=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},Yo=function(e,r,n){var a;return n===void 0&&(n=0),a={},a[e]=r,a[e==="x"?"y":"x"]=n,a},Bd=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},i4=function(e,r){return Math.min.apply(Math,r.map(function(n){return Bd(e,n)}))},ZT=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},Kee=function(t,e){var r=Ca({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},Nf=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},s4=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Zee={top:0,right:0,bottom:0,left:0},Qee=function(e,r){return r?Nf(e,r.scroll.diff.displacement):e},Jee=function(e,r,n){if(n&&n.increasedBy){var a;return Ee({},e,(a={},a[r.end]=e[r.end]+n.increasedBy[r.line],a))}return e},ete=function(e,r){return r&&r.shouldClipSubject?Kee(r.pageMarginBox,e):Ca(e)},kc=function(t){var e=t.page,r=t.withPlaceholder,n=t.axis,a=t.frame,i=Qee(e.marginBox,a),s=Jee(i,n,r),o=ete(s,a);return{page:e,withPlaceholder:r,active:o}},x2=function(t,e){t.frame||pe();var r=t.frame,n=An(e,r.scroll.initial),a=Fc(n),i=Ee({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:n,displacement:a},max:r.scroll.max}}),s=kc({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:i}),o=Ee({},t,{frame:i,subject:s});return o};function up(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function y2(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Ks(t,e){if(t.find)return t.find(e);var r=y2(t,e);if(r!==-1)return t[r]}function QT(t){return Array.prototype.slice.call(t)}var JT=gr(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),e8=gr(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),Am=gr(function(t){return up(t)}),tte=gr(function(t){return up(t)}),$c=gr(function(t,e){var r=tte(e).filter(function(n){return t===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function b2(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Tm(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Im=gr(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),rte=function(t){var e=t.isMovingForward,r=t.draggable,n=t.destination,a=t.insideDestination,i=t.previousImpact;if(!n.isCombineEnabled)return null;var s=b2(i);if(!s)return null;function o(g){var y={type:"COMBINE",combine:{draggableId:g,droppableId:n.descriptor.id}};return Ee({},i,{at:y})}var c=i.displaced.all,u=c.length?c[0]:null;if(e)return u?o(u):null;var d=Im(r,a);if(!u){if(!d.length)return null;var f=d[d.length-1];return o(f.descriptor.id)}var h=y2(d,function(g){return g.descriptor.id===u});h===-1&&pe();var p=h-1;if(p<0)return null;var m=d[p];return o(m.descriptor.id)},Uc=function(t,e){return t.descriptor.droppableId===e.descriptor.id},t8={point:xr,value:0},Fd={invisible:{},visible:{},all:[]},nte={displaced:Fd,displacedBy:t8,at:null},ca=function(t,e){return function(r){return t<=r&&r<=e}},r8=function(t){var e=ca(t.top,t.bottom),r=ca(t.left,t.right);return function(n){var a=e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=e(n.top)||e(n.bottom),s=r(n.left)||r(n.right),o=i&&s;if(o)return!0;var c=n.top<t.top&&n.bottom>t.bottom,u=n.left<t.left&&n.right>t.right,d=c&&u;if(d)return!0;var f=c&&s||u&&i;return f}},ate=function(t){var e=ca(t.top,t.bottom),r=ca(t.left,t.right);return function(n){var a=e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right);return a}},w2={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},n8={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},ite=function(t){return function(e){var r=ca(e.top,e.bottom),n=ca(e.left,e.right);return function(a){return t===w2?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},ste=function(e,r){var n=r.frame?r.frame.scroll.diff.displacement:xr;return Nf(e,n)},ote=function(e,r,n){return r.subject.active?n(r.subject.active)(e):!1},lte=function(e,r,n){return n(r)(e)},_2=function(e){var r=e.target,n=e.destination,a=e.viewport,i=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,o=i?ste(r,n):r;return ote(o,n,s)&&lte(o,a,s)},cte=function(e){return _2(Ee({},e,{isVisibleThroughFrameFn:r8}))},a8=function(e){return _2(Ee({},e,{isVisibleThroughFrameFn:ate}))},ute=function(e){return _2(Ee({},e,{isVisibleThroughFrameFn:ite(e.destination.axis)}))},dte=function(e,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[e])return!1;var s=i[e];return s?s.shouldAnimate:!0};function fte(t,e){var r=t.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return Ca(g2(r,n))}function $d(t){var e=t.afterDragging,r=t.destination,n=t.displacedBy,a=t.viewport,i=t.forceShouldAnimate,s=t.last;return e.reduce(function(c,u){var d=fte(u,n),f=u.descriptor.id;c.all.push(f);var h=cte({target:d,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var p=dte(f,s,i),m={draggableId:f,shouldAnimate:p};return c.visible[f]=m,c},{all:[],visible:{},invisible:{}})}function hte(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function o4(t){var e=t.insideDestination,r=t.inHomeList,n=t.displacedBy,a=t.destination,i=hte(e,{inHomeList:r});return{displaced:Fd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function dp(t){var e=t.draggable,r=t.insideDestination,n=t.destination,a=t.viewport,i=t.displacedBy,s=t.last,o=t.index,c=t.forceShouldAnimate,u=Uc(e,n);if(o==null)return o4({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var d=Ks(r,function(g){return g.descriptor.index===o});if(!d)return o4({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var f=Im(e,r),h=r.indexOf(d),p=f.slice(h),m=$d({afterDragging:p,destination:n,displacedBy:i,last:s,viewport:a.frame,forceShouldAnimate:c});return{displaced:m,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function zs(t,e){return!!e.effected[t]}var pte=function(t){var e=t.isMovingForward,r=t.destination,n=t.draggables,a=t.combine,i=t.afterCritical;if(!r.isCombineEnabled)return null;var s=a.draggableId,o=n[s],c=o.descriptor.index,u=zs(s,i);return u?e?c:c-1:e?c+1:c},mte=function(t){var e=t.isMovingForward,r=t.isInHomeList,n=t.insideDestination,a=t.location;if(!n.length)return null;var i=a.index,s=e?i+1:i-1,o=n[0].descriptor.index,c=n[n.length-1].descriptor.index,u=r?c:c+1;return s<o||s>u?null:s},gte=function(t){var e=t.isMovingForward,r=t.isInHomeList,n=t.draggable,a=t.draggables,i=t.destination,s=t.insideDestination,o=t.previousImpact,c=t.viewport,u=t.afterCritical,d=o.at;if(d||pe(),d.type==="REORDER"){var f=mte({isMovingForward:e,isInHomeList:r,location:d.destination,insideDestination:s});return f==null?null:dp({draggable:n,insideDestination:s,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:f})}var h=pte({isMovingForward:e,destination:i,displaced:o.displaced,draggables:a,combine:d.combine,afterCritical:u});return h==null?null:dp({draggable:n,insideDestination:s,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:h})},vte=function(t){var e=t.displaced,r=t.afterCritical,n=t.combineWith,a=t.displacedBy,i=!!(e.visible[n]||e.invisible[n]);return zs(n,r)?i?xr:Fc(a.point):i?a.point:xr},xte=function(t){var e=t.afterCritical,r=t.impact,n=t.draggables,a=Tm(r);a||pe();var i=a.draggableId,s=n[i].page.borderBox.center,o=vte({displaced:r.displaced,afterCritical:e,combineWith:i,displacedBy:r.displacedBy});return Cr(s,o)},i8=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},yte=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},k2=function(e,r,n){return r[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},l4=function(e){var r=e.axis,n=e.moveRelativeTo,a=e.isMoving;return Yo(r.line,n.marginBox[r.end]+i8(r,a),k2(r,n.marginBox,a))},c4=function(e){var r=e.axis,n=e.moveRelativeTo,a=e.isMoving;return Yo(r.line,n.marginBox[r.start]-yte(r,a),k2(r,n.marginBox,a))},bte=function(e){var r=e.axis,n=e.moveInto,a=e.isMoving;return Yo(r.line,n.contentBox[r.start]+i8(r,a),k2(r,n.contentBox,a))},wte=function(t){var e=t.impact,r=t.draggable,n=t.draggables,a=t.droppable,i=t.afterCritical,s=$c(a.descriptor.id,n),o=r.page,c=a.axis;if(!s.length)return bte({axis:c,moveInto:a.page,isMoving:o});var u=e.displaced,d=e.displacedBy,f=u.all[0];if(f){var h=n[f];if(zs(f,i))return c4({axis:c,moveRelativeTo:h.page,isMoving:o});var p=sp(h.page,d.point);return c4({axis:c,moveRelativeTo:p,isMoving:o})}var m=s[s.length-1];if(m.descriptor.id===r.descriptor.id)return o.borderBox.center;if(zs(m.descriptor.id,i)){var g=sp(m.page,Fc(i.displacedBy.point));return l4({axis:c,moveRelativeTo:g,isMoving:o})}return l4({axis:c,moveRelativeTo:m.page,isMoving:o})},Xy=function(t,e){var r=t.frame;return r?Cr(e,r.scroll.diff.displacement):e},_te=function(e){var r=e.impact,n=e.draggable,a=e.droppable,i=e.draggables,s=e.afterCritical,o=n.page.borderBox.center,c=r.at;return!a||!c?o:c.type==="REORDER"?wte({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:s}):xte({impact:r,draggables:i,afterCritical:s})},Om=function(t){var e=_te(t),r=t.droppable,n=r?Xy(r,e):e;return n},s8=function(t,e){var r=An(e,t.scroll.initial),n=Fc(r),a=Ca({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),i={frame:a,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:n}}};return i};function u4(t,e){return t.map(function(r){return e[r]})}function kte(t,e){for(var r=0;r<e.length;r++){var n=e[r].visible[t];if(n)return n}return null}var Nte=function(t){var e=t.impact,r=t.viewport,n=t.destination,a=t.draggables,i=t.maxScrollChange,s=s8(r,Cr(r.scroll.current,i)),o=n.frame?x2(n,Cr(n.frame.scroll.current,i)):n,c=e.displaced,u=$d({afterDragging:u4(c.all,a),destination:n,displacedBy:e.displacedBy,viewport:s.frame,last:c,forceShouldAnimate:!1}),d=$d({afterDragging:u4(c.all,a),destination:o,displacedBy:e.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),f={},h={},p=[c,u,d];c.all.forEach(function(g){var y=kte(g,p);if(y){h[g]=y;return}f[g]=!0});var m=Ee({},e,{displaced:{all:c.all,invisible:f,visible:h}});return m},Ste=function(t,e){return Cr(t.scroll.diff.displacement,e)},N2=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,n=t.viewport,a=Ste(n,e),i=An(a,r.page.borderBox.center);return Cr(r.client.borderBox.center,i)},o8=function(t){var e=t.draggable,r=t.destination,n=t.newPageBorderBoxCenter,a=t.viewport,i=t.withDroppableDisplacement,s=t.onlyOnMainAxis,o=s===void 0?!1:s,c=An(n,e.page.borderBox.center),u=Nf(e.page.borderBox,c),d={target:u,destination:r,withDroppableDisplacement:i,viewport:a};return o?ute(d):a8(d)},Ete=function(t){var e=t.isMovingForward,r=t.draggable,n=t.destination,a=t.draggables,i=t.previousImpact,s=t.viewport,o=t.previousPageBorderBoxCenter,c=t.previousClientSelection,u=t.afterCritical;if(!n.isEnabled)return null;var d=$c(n.descriptor.id,a),f=Uc(r,n),h=rte({isMovingForward:e,draggable:r,destination:n,insideDestination:d,previousImpact:i})||gte({isMovingForward:e,isInHomeList:f,draggable:r,draggables:a,destination:n,insideDestination:d,previousImpact:i,viewport:s,afterCritical:u});if(!h)return null;var p=Om({impact:h,draggable:r,droppable:n,draggables:a,afterCritical:u}),m=o8({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(m){var g=N2({pageBorderBoxCenter:p,draggable:r,viewport:s});return{clientSelection:g,impact:h,scrollJumpRequest:null}}var y=An(p,o),x=Nte({impact:h,viewport:s,destination:n,draggables:a,maxScrollChange:y});return{clientSelection:c,impact:x,scrollJumpRequest:y}},Gr=function(e){var r=e.subject.active;return r||pe(),r},Cte=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,n=t.source,a=t.droppables,i=t.viewport,s=n.subject.active;if(!s)return null;var o=n.axis,c=ca(s[o.start],s[o.end]),u=Am(a).filter(function(f){return f!==n}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return r8(i.frame)(Gr(f))}).filter(function(f){var h=Gr(f);return e?s[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<s[o.crossAxisStart]}).filter(function(f){var h=Gr(f),p=ca(h[o.start],h[o.end]);return c(h[o.start])||c(h[o.end])||p(s[o.start])||p(s[o.end])}).sort(function(f,h){var p=Gr(f)[o.crossAxisStart],m=Gr(h)[o.crossAxisStart];return e?p-m:m-p}).filter(function(f,h,p){return Gr(f)[o.crossAxisStart]===Gr(p[0])[o.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=ca(Gr(f)[o.start],Gr(f)[o.end]);return h(r[o.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return Gr(f)[o.start]-Gr(h)[o.start]})[0]:u.sort(function(f,h){var p=i4(r,s4(Gr(f))),m=i4(r,s4(Gr(h)));return p!==m?p-m:Gr(f)[o.start]-Gr(h)[o.start]})[0]},d4=function(e,r){var n=e.page.borderBox.center;return zs(e.descriptor.id,r)?An(n,r.displacedBy.point):n},jte=function(e,r){var n=e.page.borderBox;return zs(e.descriptor.id,r)?Nf(n,Fc(r.displacedBy.point)):n},Ate=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,n=t.destination,a=t.insideDestination,i=t.afterCritical,s=a.filter(function(o){return a8({target:jte(o,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var u=Bd(e,Xy(n,d4(o,i))),d=Bd(e,Xy(n,d4(c,i)));return u<d?-1:d<u?1:o.descriptor.index-c.descriptor.index});return s[0]||null},Sf=gr(function(e,r){var n=r[e.line];return{value:n,point:Yo(e.line,n)}}),Tte=function(e,r,n){var a=e.axis;if(e.descriptor.mode==="virtual")return Yo(a.line,r[a.line]);var i=e.subject.page.contentBox[a.size],s=$c(e.descriptor.id,n),o=s.reduce(function(d,f){return d+f.client.marginBox[a.size]},0),c=o+r[a.line],u=c-i;return u<=0?null:Yo(a.line,u)},l8=function(e,r){return Ee({},e,{scroll:Ee({},e.scroll,{max:r})})},c8=function(e,r,n){var a=e.frame;Uc(r,e)&&pe(),e.subject.withPlaceholder&&pe();var i=Sf(e.axis,r.displaceBy).point,s=Tte(e,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!a){var c=kc({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return Ee({},e,{subject:c})}var u=s?Cr(a.scroll.max,s):a.scroll.max,d=l8(a,u),f=kc({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:d});return Ee({},e,{subject:f,frame:d})},Ite=function(e){var r=e.subject.withPlaceholder;r||pe();var n=e.frame;if(!n){var a=kc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Ee({},e,{subject:a})}var i=r.oldFrameMaxScroll;i||pe();var s=l8(n,i),o=kc({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return Ee({},e,{subject:o,frame:s})},Ote=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,n=t.insideDestination,a=t.draggable,i=t.draggables,s=t.destination,o=t.viewport,c=t.afterCritical;if(!r){if(n.length)return null;var u={displaced:Fd,displacedBy:t8,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=Om({impact:u,draggable:a,droppable:s,draggables:i,afterCritical:c}),f=Uc(a,s)?s:c8(s,a,i),h=o8({draggable:a,destination:f,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var p=e[s.axis.line]<=r.page.borderBox.center[s.axis.line],m=function(){var y=r.descriptor.index;return r.descriptor.id===a.descriptor.id||p?y:y+1}(),g=Sf(s.axis,a.displaceBy);return dp({draggable:a,insideDestination:n,destination:s,viewport:o,displacedBy:g,last:Fd,index:m})},Dte=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,n=t.draggable,a=t.isOver,i=t.draggables,s=t.droppables,o=t.viewport,c=t.afterCritical,u=Cte({isMovingForward:e,pageBorderBoxCenter:r,source:a,droppables:s,viewport:o});if(!u)return null;var d=$c(u.descriptor.id,i),f=Ate({pageBorderBoxCenter:r,viewport:o,destination:u,insideDestination:d,afterCritical:c}),h=Ote({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:i,moveRelativeTo:f,insideDestination:d,viewport:o,afterCritical:c});if(!h)return null;var p=Om({impact:h,draggable:n,droppable:u,draggables:i,afterCritical:c}),m=N2({pageBorderBoxCenter:p,draggable:n,viewport:o});return{clientSelection:m,impact:h,scrollJumpRequest:null}},In=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},Pte=function(e,r){var n=In(e);return n?r[n]:null},Rte=function(t){var e=t.state,r=t.type,n=Pte(e.impact,e.dimensions.droppables),a=!!n,i=e.dimensions.droppables[e.critical.droppable.id],s=n||i,o=s.axis.direction,c=o==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||o==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,h=e.dimensions,p=h.draggables,m=h.droppables;return c?Ete({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:s,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Dte({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:s,draggables:p,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function vo(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function u8(t){var e=ca(t.top,t.bottom),r=ca(t.left,t.right);return function(a){return e(a.y)&&r(a.x)}}function Mte(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Lte(t){var e=t.pageBorderBox,r=t.draggable,n=t.candidates,a=r.page.borderBox.center,i=n.map(function(s){var o=s.axis,c=Yo(s.axis.line,e.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:Bd(a,c)}}).sort(function(s,o){return o.distance-s.distance});return i[0]?i[0].id:null}function Bte(t){var e=t.pageBorderBox,r=t.draggable,n=t.droppables,a=Am(n).filter(function(i){if(!i.isEnabled)return!1;var s=i.subject.active;if(!s||!Mte(e,s))return!1;if(u8(s)(e.center))return!0;var o=i.axis,c=s.center[o.crossAxisLine],u=e[o.crossAxisStart],d=e[o.crossAxisEnd],f=ca(s[o.crossAxisStart],s[o.crossAxisEnd]),h=f(u),p=f(d);return!h&&!p?!0:h?u<c:d>c});return a.length?a.length===1?a[0].descriptor.id:Lte({pageBorderBox:e,draggable:r,candidates:a}):null}var d8=function(e,r){return Ca(Nf(e,r))},Fte=function(t,e){var r=t.frame;return r?d8(e,r.scroll.diff.value):e};function f8(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function $te(t){var e=t.draggable,r=t.closest,n=t.inHomeList;return r?n&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Ute=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,n=t.destination,a=t.insideDestination,i=t.last,s=t.viewport,o=t.afterCritical,c=n.axis,u=Sf(n.axis,r.displaceBy),d=u.value,f=e[c.start],h=e[c.end],p=Im(r,a),m=Ks(p,function(y){var x=y.descriptor.id,v=y.page.borderBox.center[c.line],b=zs(x,o),w=f8({displaced:i,id:x});return b?w?h<=v:f<v-d:w?h<=v+d:f<v}),g=$te({draggable:r,closest:m,inHomeList:Uc(r,n)});return dp({draggable:r,insideDestination:a,destination:n,viewport:s,last:i,displacedBy:u,index:g})},zte=4,Hte=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,n=t.previousImpact,a=t.destination,i=t.insideDestination,s=t.afterCritical;if(!a.isCombineEnabled)return null;var o=a.axis,c=Sf(a.axis,e.displaceBy),u=c.value,d=r[o.start],f=r[o.end],h=Im(e,i),p=Ks(h,function(g){var y=g.descriptor.id,x=g.page.borderBox,v=x[o.size],b=v/zte,w=zs(y,s),S=f8({displaced:n.displaced,id:y});return w?S?f>x[o.start]+b&&f<x[o.end]-b:d>x[o.start]-u+b&&d<x[o.end]-u-b:S?f>x[o.start]+u+b&&f<x[o.end]+u-b:d>x[o.start]+b&&d<x[o.end]-b});if(!p)return null;var m={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}};return m},h8=function(t){var e=t.pageOffset,r=t.draggable,n=t.draggables,a=t.droppables,i=t.previousImpact,s=t.viewport,o=t.afterCritical,c=d8(r.page.borderBox,e),u=Bte({pageBorderBox:c,draggable:r,droppables:a});if(!u)return nte;var d=a[u],f=$c(d.descriptor.id,n),h=Fte(d,c);return Hte({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:d,insideDestination:f,afterCritical:o})||Ute({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:f,last:i.displaced,viewport:s,afterCritical:o})},S2=function(t,e){var r;return Ee({},t,(r={},r[e.descriptor.id]=e,r))},Wte=function(e){var r=e.previousImpact,n=e.impact,a=e.droppables,i=In(r),s=In(n);if(!i||i===s)return a;var o=a[i];if(!o.subject.withPlaceholder)return a;var c=Ite(o);return S2(a,c)},Vte=function(t){var e=t.draggable,r=t.draggables,n=t.droppables,a=t.previousImpact,i=t.impact,s=Wte({previousImpact:a,impact:i,droppables:n}),o=In(i);if(!o)return s;var c=n[o];if(Uc(e,c)||c.subject.withPlaceholder)return s;var u=c8(c,e,r);return S2(s,u)},rd=function(t){var e=t.state,r=t.clientSelection,n=t.dimensions,a=t.viewport,i=t.impact,s=t.scrollJumpRequest,o=a||e.viewport,c=n||e.dimensions,u=r||e.current.client.selection,d=An(u,e.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Cr(e.initial.client.borderBoxCenter,d)},h={selection:Cr(f.selection,o.scroll.current),borderBoxCenter:Cr(f.borderBoxCenter,o.scroll.current),offset:Cr(f.offset,o.scroll.diff.value)},p={client:f,page:h};if(e.phase==="COLLECTING")return Ee({phase:"COLLECTING"},e,{dimensions:c,viewport:o,current:p});var m=c.draggables[e.critical.draggable.id],g=i||h8({pageOffset:h.offset,draggable:m,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),y=Vte({draggable:m,impact:g,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables}),x=Ee({},e,{current:p,dimensions:{draggables:c.draggables,droppables:y},impact:g,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null});return x};function Gte(t,e){return t.map(function(r){return e[r]})}var p8=function(t){var e=t.impact,r=t.viewport,n=t.draggables,a=t.destination,i=t.forceShouldAnimate,s=e.displaced,o=Gte(s.all,n),c=$d({afterDragging:o,destination:a,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:s});return Ee({},e,{displaced:c})},m8=function(t){var e=t.impact,r=t.draggable,n=t.droppable,a=t.draggables,i=t.viewport,s=t.afterCritical,o=Om({impact:e,draggable:r,draggables:a,droppable:n,afterCritical:s});return N2({pageBorderBoxCenter:o,draggable:r,viewport:i})},g8=function(t){var e=t.state,r=t.dimensions,n=t.viewport;e.movementMode!=="SNAP"&&pe();var a=e.impact,i=n||e.viewport,s=r||e.dimensions,o=s.draggables,c=s.droppables,u=o[e.critical.draggable.id],d=In(a);d||pe();var f=c[d],h=p8({impact:a,viewport:i,destination:f,draggables:o}),p=m8({impact:h,draggable:u,droppable:f,draggables:o,viewport:i,afterCritical:e.afterCritical});return rd({impact:h,clientSelection:p,state:e,dimensions:s,viewport:i})},Xte=function(t){return{index:t.index,droppableId:t.droppableId}},v8=function(t){var e=t.draggable,r=t.home,n=t.draggables,a=t.viewport,i=Sf(r.axis,e.displaceBy),s=$c(r.descriptor.id,n),o=s.indexOf(e);o===-1&&pe();var c=s.slice(o+1),u=c.reduce(function(p,m){return p[m.descriptor.id]=!0,p},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:u},f=$d({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:i,at:{type:"REORDER",destination:Xte(e.descriptor)}};return{impact:h,afterCritical:d}},qte=function(t,e){return{draggables:t.draggables,droppables:S2(t.droppables,e)}},Yte=function(t){var e=t.draggable,r=t.offset,n=t.initialWindowScroll,a=sp(e.client,r),i=op(a,n),s=Ee({},e,{placeholder:Ee({},e.placeholder,{client:a}),client:a,page:i});return s},Kte=function(t){var e=t.frame;return e||pe(),e},Zte=function(t){var e=t.additions,r=t.updatedDroppables,n=t.viewport,a=n.scroll.diff.value;return e.map(function(i){var s=i.descriptor.droppableId,o=r[s],c=Kte(o),u=c.scroll.diff.value,d=Cr(a,u),f=Yte({draggable:i,offset:d,initialWindowScroll:n.scroll.initial});return f})},Qte=function(t){var e=t.state,r=t.published,n=r.modified.map(function(b){var w=e.dimensions.droppables[b.droppableId],S=x2(w,b.scroll);return S}),a=Ee({},e.dimensions.droppables,{},JT(n)),i=e8(Zte({additions:r.additions,updatedDroppables:a,viewport:e.viewport})),s=Ee({},e.dimensions.draggables,{},i);r.removals.forEach(function(b){delete s[b]});var o={droppables:a,draggables:s},c=In(e.impact),u=c?o.droppables[c]:null,d=o.draggables[e.critical.draggable.id],f=o.droppables[e.critical.droppable.id],h=v8({draggable:d,home:f,draggables:s,viewport:e.viewport}),p=h.impact,m=h.afterCritical,g=u&&u.isCombineEnabled?e.impact:p,y=h8({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:g,viewport:e.viewport,afterCritical:m}),x=Ee({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:y,onLiftImpact:p,dimensions:o,afterCritical:m,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return x;var v=Ee({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return v},qy=function(e){return e.movementMode==="SNAP"},Tv=function(e,r,n){var a=qte(e.dimensions,r);return!qy(e)||n?rd({state:e,dimensions:a}):g8({state:e,dimensions:a})};function Iv(t){return t.isDragging&&t.movementMode==="SNAP"?Ee({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var f4={phase:"IDLE",completed:null,shouldFlush:!1},Jte=function(t,e){if(t===void 0&&(t=f4),e.type==="FLUSH")return Ee({},f4,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&pe();var r=e.payload,n=r.critical,a=r.clientSelection,i=r.viewport,s=r.dimensions,o=r.movementMode,c=s.draggables[n.draggable.id],u=s.droppables[n.droppable.id],d={selection:a,borderBoxCenter:c.client.borderBox.center,offset:xr},f={client:d,page:{selection:Cr(d.selection,i.scroll.initial),borderBoxCenter:Cr(d.selection,i.scroll.initial),offset:Cr(d.selection,i.scroll.diff.value)}},h=Am(s.droppables).every(function(se){return!se.isFixedOnPage}),p=v8({draggable:c,home:u,draggables:s.draggables,viewport:i}),m=p.impact,g=p.afterCritical,y={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:f,current:f,isWindowScrollAllowed:h,impact:m,afterCritical:g,onLiftImpact:m,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return y}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&pe();var x=Ee({phase:"COLLECTING"},t,{phase:"COLLECTING"});return x}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||pe(),Qte({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;vo(t)||pe();var v=e.payload.client;return Rs(v,t.current.client.selection)?t:rd({state:t,clientSelection:v,impact:qy(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Iv(t);vo(t)||pe();var b=e.payload,w=b.id,S=b.newScroll,E=t.dimensions.droppables[w];if(!E)return t;var j=x2(E,S);return Tv(t,j,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;vo(t)||pe();var I=e.payload,N=I.id,T=I.isEnabled,F=t.dimensions.droppables[N];F||pe(),F.isEnabled===T&&pe();var C=Ee({},F,{isEnabled:T});return Tv(t,C,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;vo(t)||pe();var A=e.payload,k=A.id,O=A.isCombineEnabled,$=t.dimensions.droppables[k];$||pe(),$.isCombineEnabled===O&&pe();var D=Ee({},$,{isCombineEnabled:O});return Tv(t,D,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;vo(t)||pe(),t.isWindowScrollAllowed||pe();var R=e.payload.newScroll;if(Rs(t.viewport.scroll.current,R))return Iv(t);var M=s8(t.viewport,R);return qy(t)?g8({state:t,viewport:M}):rd({state:t,viewport:M})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!vo(t))return t;var L=e.payload.maxScroll;if(Rs(L,t.viewport.scroll.max))return t;var B=Ee({},t.viewport,{scroll:Ee({},t.viewport.scroll,{max:L})});return Ee({phase:"DRAGGING"},t,{viewport:B})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&pe();var U=Rte({state:t,type:e.type});return U?rd({state:t,impact:U.impact,clientSelection:U.clientSelection,scrollJumpRequest:U.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var q=e.payload.reason;t.phase!=="COLLECTING"&&pe();var te=Ee({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:q});return te}if(e.type==="DROP_ANIMATE"){var V=e.payload,re=V.completed,ue=V.dropDuration,ie=V.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||pe();var oe={phase:"DROP_ANIMATING",completed:re,dropDuration:ue,newHomeClientOffset:ie,dimensions:t.dimensions};return oe}if(e.type==="DROP_COMPLETE"){var ye=e.payload.completed;return{phase:"IDLE",completed:ye,shouldFlush:!1}}return t},ere=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},tre=function(e){return{type:"LIFT",payload:e}},rre=function(e){return{type:"INITIAL_PUBLISH",payload:e}},nre=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},are=function(){return{type:"COLLECTION_STARTING",payload:null}},ire=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},sre=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},ore=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},x8=function(e){return{type:"MOVE",payload:e}},lre=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},cre=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},ure=function(){return{type:"MOVE_UP",payload:null}},dre=function(){return{type:"MOVE_DOWN",payload:null}},fre=function(){return{type:"MOVE_RIGHT",payload:null}},hre=function(){return{type:"MOVE_LEFT",payload:null}},E2=function(){return{type:"FLUSH",payload:null}},pre=function(e){return{type:"DROP_ANIMATE",payload:e}},C2=function(e){return{type:"DROP_COMPLETE",payload:e}},y8=function(e){return{type:"DROP",payload:e}},mre=function(e){return{type:"DROP_PENDING",payload:e}},b8=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},gre=function(t){return function(e){var r=e.getState,n=e.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var s=i.payload,o=s.id,c=s.clientSelection,u=s.movementMode,d=r();d.phase==="DROP_ANIMATING"&&n(C2({completed:d.completed})),r().phase!=="IDLE"&&pe(),n(E2()),n(ere({draggableId:o,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:o,scrollOptions:f},p=t.startPublishing(h),m=p.critical,g=p.dimensions,y=p.viewport;n(rre({critical:m,dimensions:g,clientSelection:c,movementMode:u,viewport:y}))}}}},vre=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},j2={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ud={opacity:{drop:0,combining:.7},scale:{drop:.75}},A2={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},so=A2.outOfTheWay+"s "+j2.outOfTheWay,nd={fluid:"opacity "+so,snap:"transform "+so+", opacity "+so,drop:function(e){var r=e+"s "+j2.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+so,placeholder:"height "+so+", width "+so+", margin "+so},h4=function(e){return Rs(e,xr)?null:"translate("+e.x+"px, "+e.y+"px)"},Yy={moveTo:h4,drop:function(e,r){var n=h4(e);return n?r?n+" scale("+Ud.scale.drop+")":n:null}},Ky=A2.minDropTime,w8=A2.maxDropTime,xre=w8-Ky,p4=1500,yre=.6,bre=function(t){var e=t.current,r=t.destination,n=t.reason,a=Bd(e,r);if(a<=0)return Ky;if(a>=p4)return w8;var i=a/p4,s=Ky+xre*i,o=n==="CANCEL"?s*yre:s;return Number(o.toFixed(2))},wre=function(t){var e=t.impact,r=t.draggable,n=t.dimensions,a=t.viewport,i=t.afterCritical,s=n.draggables,o=n.droppables,c=In(e),u=c?o[c]:null,d=o[r.descriptor.droppableId],f=m8({impact:e,draggable:r,draggables:s,afterCritical:i,droppable:u||d,viewport:a}),h=An(f,r.client.borderBox.center);return h},_re=function(t){var e=t.draggables,r=t.reason,n=t.lastImpact,a=t.home,i=t.viewport,s=t.onLiftImpact;if(!n.at||r!=="DROP"){var o=p8({draggables:e,impact:s,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=Ee({},n,{displaced:Fd});return{impact:c,didDropInsideDroppable:!0}},kre=function(t){var e=t.getState,r=t.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=e(),s=a.payload.reason;if(i.phase==="COLLECTING"){r(mre({reason:s}));return}if(i.phase!=="IDLE"){var o=i.phase==="DROP_PENDING"&&i.isWaiting;o&&pe(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||pe();var c=i.critical,u=i.dimensions,d=u.draggables[i.critical.draggable.id],f=_re({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=f.impact,p=f.didDropInsideDroppable,m=p?b2(h):null,g=p?Tm(h):null,y={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:y,reason:s,mode:i.movementMode,destination:m,combine:g},v=wre({impact:h,draggable:d,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:h},w=!Rs(i.current.client.offset,v)||!!x.combine;if(!w){r(C2({completed:b}));return}var S=bre({current:i.current.client.offset,destination:v,reason:s}),E={newHomeClientOffset:v,dropDuration:S,completed:b};r(pre(E))}}}},_8=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Nre(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function Sre(t){var e=t.onWindowScroll;function r(){e(_8())}var n=Ld(r),a=Nre(n),i=Ps;function s(){return i!==Ps}function o(){s()&&pe(),i=sa(window,[a])}function c(){s()||pe(),n.cancel(),i(),i=Ps}return{start:o,stop:c,isActive:s}}var Ere=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},Cre=function(t){var e=Sre({onWindowScroll:function(n){t.dispatch(lre({newScroll:n}))}});return function(r){return function(n){!e.isActive()&&n.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&Ere(n)&&e.stop(),r(n)}}},jre=function(t){var e=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(s){e||r||(e=!0,t(s),clearTimeout(n))};return a.wasCalled=function(){return e},a},Are=function(){var t=[],e=function(i){var s=y2(t,function(u){return u.timerId===i});s===-1&&pe();var o=t.splice(s,1),c=o[0];c.callback()},r=function(i){var s=setTimeout(function(){return e(s)}),o={timerId:s,callback:i};t.push(o)},n=function(){if(t.length){var i=[].concat(t);t.length=0,i.forEach(function(s){clearTimeout(s.timerId),s.callback()})}};return{add:r,flush:n}},Tre=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},Ire=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},Ore=function(e,r){if(e===r)return!0;var n=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,a=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return n&&a},gu=function(e,r){r()},vh=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Ov=function(e,r,n,a){if(!e){n(a(r));return}var i=jre(n),s={announce:i};e(r,s),i.wasCalled()||n(a(r))},Dre=function(t,e){var r=Are(),n=null,a=function(h,p){n&&pe(),gu("onBeforeCapture",function(){var m=t().onBeforeCapture;if(m){var g={draggableId:h,mode:p};m(g)}})},i=function(h,p){n&&pe(),gu("onBeforeDragStart",function(){var m=t().onBeforeDragStart;m&&m(vh(h,p))})},s=function(h,p){n&&pe();var m=vh(h,p);n={mode:p,lastCritical:h,lastLocation:m.source,lastCombine:null},r.add(function(){gu("onDragStart",function(){return Ov(t().onDragStart,m,e,Jh.onDragStart)})})},o=function(h,p){var m=b2(p),g=Tm(p);n||pe();var y=!Ore(h,n.lastCritical);y&&(n.lastCritical=h);var x=!Tre(n.lastLocation,m);x&&(n.lastLocation=m);var v=!Ire(n.lastCombine,g);if(v&&(n.lastCombine=g),!(!y&&!x&&!v)){var b=Ee({},vh(h,n.mode),{combine:g,destination:m});r.add(function(){gu("onDragUpdate",function(){return Ov(t().onDragUpdate,b,e,Jh.onDragUpdate)})})}},c=function(){n||pe(),r.flush()},u=function(h){n||pe(),n=null,gu("onDragEnd",function(){return Ov(t().onDragEnd,h,e,Jh.onDragEnd)})},d=function(){if(n){var h=Ee({},vh(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:a,beforeStart:i,start:s,update:o,flush:c,drop:u,abort:d}},Pre=function(t,e){var r=Dre(t,e);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var s=i.payload.critical;r.beforeStart(s,i.payload.movementMode),a(i),r.start(s,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var o=i.payload.completed.result;r.flush(),a(i),r.drop(o);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Rre=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var n=t.getState();n.phase!=="DROP_ANIMATING"&&pe(),t.dispatch(C2({completed:n.completed}))}}},Mre=function(t){var e=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=t.getState();c.phase==="DROP_ANIMATING"&&t.dispatch(b8())}};r=requestAnimationFrame(function(){r=null,e=sa(window,[s])})}}}},Lre=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},Bre=function(t){var e=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!e){if(n.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){e=!1;var a=n.payload.completed.result;a.combine&&t.tryShiftRecord(a.draggableId,a.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},Fre=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},$re=function(t){return function(e){return function(r){return function(n){if(Fre(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=e.getState();a.phase!=="DRAGGING"&&pe(),t.start(a);return}r(n),t.scroll(e.getState())}}}},Ure=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(y8({reason:n.reason})))}}}},zre=NT,Hre=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,n=t.styleMarshal,a=t.getResponders,i=t.announce,s=t.autoScroller;return kT(Jte,zre(SJ(vre(n),Lre(e),gre(e),kre,Rre,Mre,Ure,$re(s),Cre,Bre(r),Pre(a,i))))},Dv=function(){return{additions:{},removals:{},modified:{}}};function Wre(t){var e=t.registry,r=t.callbacks,n=Dv(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var d=n,f=d.additions,h=d.removals,p=d.modified,m=Object.keys(f).map(function(x){return e.draggable.getById(x).getDimension(xr)}).sort(function(x,v){return x.descriptor.index-v.descriptor.index}),g=Object.keys(p).map(function(x){var v=e.droppable.getById(x),b=v.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:b}}),y={additions:m,removals:Object.keys(h),modified:g};n=Dv(),r.publish(y)}))},s=function(d){var f=d.descriptor.id;n.additions[f]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],i()},o=function(d){var f=d.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Dv())};return{add:s,remove:o,stop:c}}var k8=function(t){var e=t.scrollHeight,r=t.scrollWidth,n=t.height,a=t.width,i=An({x:r,y:e},{x:a,y:n}),s={x:Math.max(0,i.x),y:Math.max(0,i.y)};return s},N8=function(){var t=document.documentElement;return t||pe(),t},S8=function(){var t=N8(),e=k8({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},Vre=function(){var t=_8(),e=S8(),r=t.y,n=t.x,a=N8(),i=a.clientWidth,s=a.clientHeight,o=n+i,c=r+s,u=Ca({top:r,left:n,right:o,bottom:c}),d={frame:u,scroll:{initial:t,current:t,max:e,diff:{value:xr,displacement:xr}}};return d},Gre=function(t){var e=t.critical,r=t.scrollOptions,n=t.registry,a=Vre(),i=a.scroll.current,s=e.droppable,o=n.droppable.getAllByType(s.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(i)}),u={draggables:e8(c),droppables:JT(o)},d={dimensions:u,critical:e,viewport:a};return d};function m4(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var n=t.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Xre=function(t,e){var r=null,n=Wre({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),a=function(p,m){t.droppable.exists(p)||pe(),r&&e.updateDroppableIsEnabled({id:p,isEnabled:m})},i=function(p,m){r&&(t.droppable.exists(p)||pe(),e.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},s=function(p,m){r&&(t.droppable.exists(p)||pe(),e.updateDroppableScroll({id:p,newScroll:m}))},o=function(p,m){r&&t.droppable.getById(p).callbacks.scroll(m)},c=function(){if(r){n.stop();var p=r.critical.droppable;t.droppable.getAllByType(p.type).forEach(function(m){return m.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(p){r||pe();var m=r.critical.draggable;p.type==="ADDITION"&&m4(t,m,p.value)&&n.add(p.value),p.type==="REMOVAL"&&m4(t,m,p.value)&&n.remove(p.value)},d=function(p){r&&pe();var m=t.draggable.getById(p.draggableId),g=t.droppable.getById(m.descriptor.droppableId),y={draggable:m.descriptor,droppable:g.descriptor},x=t.subscribe(u);return r={critical:y,unsubscribe:x},Gre({critical:y,registry:t,scrollOptions:p.scrollOptions})},f={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:o,updateDroppableScroll:s,startPublishing:d,stopPublishing:c};return f},E8=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},qre=function(t){window.scrollBy(t.x,t.y)},Yre=gr(function(t){return Am(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),Kre=function(e,r){var n=Ks(Yre(r),function(a){return a.frame||pe(),u8(a.frame.pageMarginBox)(e)});return n},Zre=function(t){var e=t.center,r=t.destination,n=t.droppables;if(r){var a=n[r];return a.frame?a:null}var i=Kre(e,n);return i},Ms={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Qre=function(t,e){var r=t[e.size]*Ms.startFromPercentage,n=t[e.size]*Ms.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},C8=function(t){var e=t.startOfRange,r=t.endOfRange,n=t.current,a=r-e;if(a===0)return 0;var i=n-e,s=i/a;return s},T2=1,Jre=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return Ms.maxPixelScroll;if(t===e.startScrollingFrom)return T2;var r=C8({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),n=1-r,a=Ms.maxPixelScroll*Ms.ease(n);return Math.ceil(a)},g4=Ms.durationDampening.accelerateAt,v4=Ms.durationDampening.stopDampeningAt,ene=function(t,e){var r=e,n=v4,a=Date.now(),i=a-r;if(i>=v4)return t;if(i<g4)return T2;var s=C8({startOfRange:g4,endOfRange:n,current:i}),o=t*Ms.ease(s);return Math.ceil(o)},x4=function(t){var e=t.distanceToEdge,r=t.thresholds,n=t.dragStartTime,a=t.shouldUseTimeDampening,i=Jre(e,r);return i===0?0:a?Math.max(ene(i,n),T2):i},y4=function(t){var e=t.container,r=t.distanceToEdges,n=t.dragStartTime,a=t.axis,i=t.shouldUseTimeDampening,s=Qre(e,a),o=r[a.end]<r[a.start];return o?x4({distanceToEdge:r[a.end],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i}):-1*x4({distanceToEdge:r[a.start],thresholds:s,dragStartTime:n,shouldUseTimeDampening:i})},tne=function(t){var e=t.container,r=t.subject,n=t.proposedScroll,a=r.height>e.height,i=r.width>e.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},rne=ZT(function(t){return t===0?0:t}),j8=function(t){var e=t.dragStartTime,r=t.container,n=t.subject,a=t.center,i=t.shouldUseTimeDampening,s={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},o=y4({container:r,distanceToEdges:s,dragStartTime:e,axis:w2,shouldUseTimeDampening:i}),c=y4({container:r,distanceToEdges:s,dragStartTime:e,axis:n8,shouldUseTimeDampening:i}),u=rne({x:c,y:o});if(Rs(u,xr))return null;var d=tne({container:r,subject:n,proposedScroll:u});return d?Rs(d,xr)?null:d:null},nne=ZT(function(t){return t===0?0:t>0?1:-1}),I2=function(){var t=function(r,n){return r<0?r:r>n?r-n:0};return function(e){var r=e.current,n=e.max,a=e.change,i=Cr(r,a),s={x:t(i.x,n.x),y:t(i.y,n.y)};return Rs(s,xr)?null:s}}(),A8=function(e){var r=e.max,n=e.current,a=e.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},s=nne(a),o=I2({max:i,current:n,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},O2=function(e,r){return A8({current:e.scroll.current,max:e.scroll.max,change:r})},ane=function(e,r){if(!O2(e,r))return null;var n=e.scroll.max,a=e.scroll.current;return I2({current:a,max:n,change:r})},D2=function(e,r){var n=e.frame;return n?A8({current:n.scroll.current,max:n.scroll.max,change:r}):!1},ine=function(e,r){var n=e.frame;return!n||!D2(e,r)?null:I2({current:n.scroll.current,max:n.scroll.max,change:r})},sne=function(t){var e=t.viewport,r=t.subject,n=t.center,a=t.dragStartTime,i=t.shouldUseTimeDampening,s=j8({dragStartTime:a,container:e.frame,subject:r,center:n,shouldUseTimeDampening:i});return s&&O2(e,s)?s:null},one=function(t){var e=t.droppable,r=t.subject,n=t.center,a=t.dragStartTime,i=t.shouldUseTimeDampening,s=e.frame;if(!s)return null;var o=j8({dragStartTime:a,container:s.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return o&&D2(e,o)?o:null},b4=function(t){var e=t.state,r=t.dragStartTime,n=t.shouldUseTimeDampening,a=t.scrollWindow,i=t.scrollDroppable,s=e.current.page.borderBoxCenter,o=e.dimensions.draggables[e.critical.draggable.id],c=o.page.marginBox;if(e.isWindowScrollAllowed){var u=e.viewport,d=sne({dragStartTime:r,viewport:u,subject:c,center:s,shouldUseTimeDampening:n});if(d){a(d);return}}var f=Zre({center:s,destination:In(e.impact),droppables:e.dimensions.droppables});if(f){var h=one({dragStartTime:r,droppable:f,subject:c,center:s,shouldUseTimeDampening:n});h&&i(f.descriptor.id,h)}},lne=function(t){var e=t.scrollWindow,r=t.scrollDroppable,n=Ld(e),a=Ld(r),i=null,s=function(d){i||pe();var f=i,h=f.shouldUseTimeDampening,p=f.dragStartTime;b4({state:d,scrollWindow:n,scrollDroppable:a,dragStartTime:p,shouldUseTimeDampening:h})},o=function(d){i&&pe();var f=Date.now(),h=!1,p=function(){h=!0};b4({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),i={dragStartTime:f,shouldUseTimeDampening:h},h&&s(d)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:o,stop:c,scroll:s}},cne=function(t){var e=t.move,r=t.scrollDroppable,n=t.scrollWindow,a=function(u,d){var f=Cr(u.current.client.selection,d);e({client:f})},i=function(u,d){if(!D2(u,d))return d;var f=ine(u,d);if(!f)return r(u.descriptor.id,d),null;var h=An(d,f);r(u.descriptor.id,h);var p=An(d,h);return p},s=function(u,d,f){if(!u||!O2(d,f))return f;var h=ane(d,f);if(!h)return n(f),null;var p=An(f,h);n(p);var m=An(f,p);return m},o=function(u){var d=u.scrollJumpRequest;if(d){var f=In(u.impact);f||pe();var h=i(u.dimensions.droppables[f],d);if(h){var p=u.viewport,m=s(u.isWindowScrollAllowed,p,h);m&&a(u,m)}}};return o},une=function(t){var e=t.scrollDroppable,r=t.scrollWindow,n=t.move,a=lne({scrollWindow:r,scrollDroppable:e}),i=cne({move:n,scrollWindow:r,scrollDroppable:e}),s=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){a.scroll(u);return}u.scrollJumpRequest&&i(u)}},o={scroll:s,start:a.start,stop:a.stop};return o},Nc="data-rbd",Sc=function(){var t=Nc+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),Zy=function(){var t=Nc+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),dne=function(){var t=Nc+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),w4={contextId:Nc+"-scroll-container-context-id"},fne=function(e){return function(r){return"["+r+'="'+e+'"]'}},vu=function(e,r){return e.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},hne="pointer-events: none;",pne=function(t){var e=fne(t),r=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Sc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:hne,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+nd.outOfTheWay+`;
    `;return{selector:e(Zy.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),a={selector:e(dne.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},s=[n,r,a,i];return{always:vu(s,"always"),resting:vu(s,"resting"),dragging:vu(s,"dragging"),dropAnimating:vu(s,"dropAnimating"),userCancel:vu(s,"userCancel")}},On=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?_.useLayoutEffect:_.useEffect,Pv=function(){var e=document.querySelector("head");return e||pe(),e},_4=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function mne(t,e){var r=Ke(function(){return pne(t)},[t]),n=_.useRef(null),a=_.useRef(null),i=ke(gr(function(f){var h=a.current;h||pe(),h.textContent=f}),[]),s=ke(function(f){var h=n.current;h||pe(),h.textContent=f},[]);On(function(){!n.current&&!a.current||pe();var f=_4(e),h=_4(e);return n.current=f,a.current=h,f.setAttribute(Nc+"-always",t),h.setAttribute(Nc+"-dynamic",t),Pv().appendChild(f),Pv().appendChild(h),s(r.always),i(r.resting),function(){var p=function(g){var y=g.current;y||pe(),Pv().removeChild(y),g.current=null};p(n),p(a)}},[e,s,i,r.always,r.resting,t]);var o=ke(function(){return i(r.dragging)},[i,r.dragging]),c=ke(function(f){if(f==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),u=ke(function(){a.current&&i(r.resting)},[i,r.resting]),d=Ke(function(){return{dragging:o,dropping:c,resting:u}},[o,c,u]);return d}var T8=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function Dm(t){return t instanceof T8(t).HTMLElement}function gne(t,e){var r="["+Sc.contextId+'="'+t+'"]',n=QT(document.querySelectorAll(r));if(!n.length)return null;var a=Ks(n,function(i){return i.getAttribute(Sc.draggableId)===e});return!a||!Dm(a)?null:a}function vne(t){var e=_.useRef({}),r=_.useRef(null),n=_.useRef(null),a=_.useRef(!1),i=ke(function(h,p){var m={id:h,focus:p};return e.current[h]=m,function(){var y=e.current,x=y[h];x!==m&&delete y[h]}},[]),s=ke(function(h){var p=gne(t,h);p&&p!==document.activeElement&&p.focus()},[t]),o=ke(function(h,p){r.current===h&&(r.current=p)},[]),c=ke(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&s(h)}))},[s]),u=ke(function(h){r.current=null;var p=document.activeElement;p&&p.getAttribute(Sc.draggableId)===h&&(r.current=h)},[]);On(function(){return a.current=!0,function(){a.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var d=Ke(function(){return{register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[i,u,c,o]);return d}function xne(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var p=e.indexOf(f);p!==-1&&e.splice(p,1)}}function n(f){e.length&&e.forEach(function(h){return h(f)})}function a(f){return t.draggables[f]||null}function i(f){var h=a(f);return h||pe(),h}var s={register:function(h){t.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,p){var m=t.draggables[p.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,m=a(p);m&&h.uniqueId===m.uniqueId&&(delete t.draggables[p],n({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return up(t.draggables).filter(function(p){return p.descriptor.type===h})}};function o(f){return t.droppables[f]||null}function c(f){var h=o(f);return h||pe(),h}var u={register:function(h){t.droppables[h.descriptor.id]=h},unregister:function(h){var p=o(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete t.droppables[h.descriptor.id]},getById:c,findById:o,exists:function(h){return!!o(h)},getAllByType:function(h){return up(t.droppables).filter(function(p){return p.descriptor.type===h})}};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:s,droppable:u,subscribe:r,clean:d}}function yne(){var t=Ke(xne,[]);return _.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var P2=ne.createContext(null),fp=function(){var t=document.body;return t||pe(),t},bne={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},wne=function(e){return"rbd-announcement-"+e};function _ne(t){var e=Ke(function(){return wne(t)},[t]),r=_.useRef(null);_.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=e,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Ee(i.style,bne),fp().appendChild(i),function(){setTimeout(function(){var c=fp();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[e]);var n=ke(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var kne=0,Nne={separator:"::"};function R2(t,e){return e===void 0&&(e=Nne),Ke(function(){return""+t+e.separator+kne++},[e.separator,t])}function Sne(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function Ene(t){var e=t.contextId,r=t.text,n=R2("hidden-text",{separator:"-"}),a=Ke(function(){return Sne({contextId:e,uniqueId:n})},[n,e]);return _.useEffect(function(){var s=document.createElement("div");return s.id=a,s.textContent=r,s.style.display="none",fp().appendChild(s),function(){var c=fp();c.contains(s)&&c.removeChild(s)}},[a,r]),a}var Pm=ne.createContext(null);function I8(t){var e=_.useRef(t);return _.useEffect(function(){e.current=t}),e}function Cne(){var t=null;function e(){return!!t}function r(s){return s===t}function n(s){t&&pe();var o={abandon:s};return t=o,o}function a(){t||pe(),t=null}function i(){t&&(t.abandon(),a())}return{isClaimed:e,isActive:r,claim:n,release:a,tryAbandon:i}}var jne=9,Ane=13,M2=27,O8=32,Tne=33,Ine=34,One=35,Dne=36,Pne=37,Rne=38,Mne=39,Lne=40,xh,Bne=(xh={},xh[Ane]=!0,xh[jne]=!0,xh),D8=function(t){Bne[t.keyCode]&&t.preventDefault()},Rm=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Ks(e,function(n){return"on"+n in document});return r||t}(),P8=0,k4=5;function Fne(t,e){return Math.abs(e.x-t.x)>=k4||Math.abs(e.y-t.y)>=k4}var N4={type:"IDLE"};function $ne(t){var e=t.cancel,r=t.completed,n=t.getPhase,a=t.setPhase;return[{eventName:"mousemove",fn:function(s){var o=s.button,c=s.clientX,u=s.clientY;if(o===P8){var d={x:c,y:u},f=n();if(f.type==="DRAGGING"){s.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&pe();var h=f.point;if(Fne(h,d)){s.preventDefault();var p=f.actions.fluidLift(d);a({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(s){var o=n();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(s){n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:function(s){var o=n();if(o.type==="PENDING"){e();return}if(s.keyCode===M2){s.preventDefault(),e();return}D8(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(s){var o=n();if(o.type==="IDLE"&&pe(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Rm,fn:e}]}function Une(t){var e=_.useRef(N4),r=_.useRef(Ps),n=Ke(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===P8&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=t.findClosestDraggableId(f);if(h){var p=t.tryGetLock(h,s,{sourceEvent:f});if(p){f.preventDefault();var m={x:f.clientX,y:f.clientY};r.current(),u(p,m)}}}}}},[t]),a=Ke(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=t.findClosestDraggableId(f);if(h){var p=t.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||t.canGetLock(h)&&f.preventDefault())}}}}},[t]),i=ke(function(){var f={passive:!1,capture:!0};r.current=sa(window,[a,n],f)},[a,n]),s=ke(function(){var d=e.current;d.type!=="IDLE"&&(e.current=N4,r.current(),i())},[i]),o=ke(function(){var d=e.current;s(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[s]),c=ke(function(){var f={capture:!0,passive:!1},h=$ne({cancel:o,completed:s,getPhase:function(){return e.current},setPhase:function(m){e.current=m}});r.current=sa(window,h,f)},[o,s]),u=ke(function(f,h){e.current.type!=="IDLE"&&pe(),e.current={type:"PENDING",point:h,actions:f},c()},[c]);On(function(){return i(),function(){r.current()}},[i])}var xl;function zne(){}var Hne=(xl={},xl[Ine]=!0,xl[Tne]=!0,xl[Dne]=!0,xl[One]=!0,xl);function Wne(t,e){function r(){e(),t.cancel()}function n(){e(),t.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===M2){i.preventDefault(),r();return}if(i.keyCode===O8){i.preventDefault(),n();return}if(i.keyCode===Lne){i.preventDefault(),t.moveDown();return}if(i.keyCode===Rne){i.preventDefault(),t.moveUp();return}if(i.keyCode===Mne){i.preventDefault(),t.moveRight();return}if(i.keyCode===Pne){i.preventDefault(),t.moveLeft();return}if(Hne[i.keyCode]){i.preventDefault();return}D8(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Rm,fn:r}]}function Vne(t){var e=_.useRef(zne),r=Ke(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==O8)return;var s=t.findClosestDraggableId(i);if(!s)return;var o=t.tryGetLock(s,d,{sourceEvent:i});if(!o)return;i.preventDefault();var c=!0,u=o.snapLift();e.current();function d(){c||pe(),c=!1,e.current(),n()}e.current=sa(window,Wne(u,d),{capture:!0,passive:!1})}}},[t]),n=ke(function(){var i={passive:!1,capture:!0};e.current=sa(window,[r],i)},[r]);On(function(){return n(),function(){e.current()}},[n])}var Rv={type:"IDLE"},Gne=120,Xne=.15;function qne(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){e();return}a.keyCode===M2&&a.preventDefault(),e()}},{eventName:Rm,fn:e}]}function Yne(t){var e=t.cancel,r=t.completed,n=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;var o=i.touches[0],c=o.clientX,u=o.clientY,d={x:c,y:u};i.preventDefault(),s.actions.move(d)}},{eventName:"touchend",fn:function(i){var s=n();if(s.type!=="DRAGGING"){e();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){e();return}i.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(i){var s=n();s.type==="IDLE"&&pe();var o=i.touches[0];if(o){var c=o.force>=Xne;if(c){var u=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){u&&e();return}if(u){if(s.hasMoved){i.preventDefault();return}e();return}i.preventDefault()}}}},{eventName:Rm,fn:e}]}function Kne(t){var e=_.useRef(Rv),r=_.useRef(Ps),n=ke(function(){return e.current},[]),a=ke(function(p){e.current=p},[]),i=Ke(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var m=t.findClosestDraggableId(p);if(m){var g=t.tryGetLock(m,o,{sourceEvent:p});if(g){var y=p.touches[0],x=y.clientX,v=y.clientY,b={x,y:v};r.current(),f(g,b)}}}}}},[t]),s=ke(function(){var p={capture:!0,passive:!1};r.current=sa(window,[i],p)},[i]),o=ke(function(){var h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(Rv),r.current(),s())},[s,a]),c=ke(function(){var h=e.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=ke(function(){var p={capture:!0,passive:!1},m={cancel:c,completed:o,getPhase:n},g=sa(window,Yne(m),p),y=sa(window,qne(m),p);r.current=function(){g(),y()}},[c,n,o]),d=ke(function(){var p=n();p.type!=="PENDING"&&pe();var m=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:m,hasMoved:!1})},[n,a]),f=ke(function(p,m){n().type!=="IDLE"&&pe();var g=setTimeout(d,Gne);a({type:"PENDING",point:m,actions:p,longPressTimerId:g}),u()},[u,n,a,d]);On(function(){return s(),function(){r.current();var m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),a(Rv))}},[n,s,a]),On(function(){var p=sa(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Zne={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function R8(t,e){if(e==null)return!1;var r=!!Zne[e.tagName.toLowerCase()];if(r)return!0;var n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===t?!1:R8(t,e.parentElement)}function Qne(t,e){var r=e.target;return Dm(r)?R8(t,r):!1}var Jne=function(t){return Ca(t.getBoundingClientRect()).center};function eae(t){return t instanceof T8(t).Element}var tae=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Ks(e,function(n){return n in Element.prototype});return r||t}();function M8(t,e){return t==null?null:t[tae](e)?t:M8(t.parentElement,e)}function rae(t,e){return t.closest?t.closest(e):M8(t,e)}function nae(t){return"["+Sc.contextId+'="'+t+'"]'}function aae(t,e){var r=e.target;if(!eae(r))return null;var n=nae(t),a=rae(r,n);return!a||!Dm(a)?null:a}function iae(t,e){var r=aae(t,e);return r?r.getAttribute(Sc.draggableId):null}function sae(t,e){var r="["+Zy.contextId+'="'+t+'"]',n=QT(document.querySelectorAll(r)),a=Ks(n,function(i){return i.getAttribute(Zy.id)===e});return!a||!Dm(a)?null:a}function oae(t){t.preventDefault()}function yh(t){var e=t.expected,r=t.phase,n=t.isLockActive;return t.shouldWarn,!(!n()||e!==r)}function L8(t){var e=t.lockAPI,r=t.store,n=t.registry,a=t.draggableId;if(e.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!E8(r.getState(),a))}function lae(t){var e=t.lockAPI,r=t.contextId,n=t.store,a=t.registry,i=t.draggableId,s=t.forceSensorStop,o=t.sourceEvent,c=L8({lockAPI:e,store:n,registry:a,draggableId:i});if(!c)return null;var u=a.draggable.getById(i),d=sae(r,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&Qne(d,o))return null;var f=e.claim(s||Ps),h="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function m(){return e.isActive(f)}function g(E,j){yh({expected:E,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(j())}var y=g.bind(null,"DRAGGING");function x(E){function j(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(j(),h!=="PRE_DRAG"&&pe()),n.dispatch(tre(E.liftActionArgs)),h="DRAGGING";function I(N,T){if(T===void 0&&(T={shouldBlockNextClick:!1}),E.cleanup(),T.shouldBlockNextClick){var F=sa(window,[{eventName:"click",fn:oae,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}j(),n.dispatch(y8({reason:N}))}return Ee({isActive:function(){return yh({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(T){return I("DROP",T)},cancel:function(T){return I("CANCEL",T)}},E.actions)}function v(E){var j=Ld(function(N){y(function(){return x8({client:N})})}),I=x({liftActionArgs:{id:i,clientSelection:E,movementMode:"FLUID"},cleanup:function(){return j.cancel()},actions:{move:j}});return Ee({},I,{move:j})}function b(){var E={moveUp:function(){return y(ure)},moveRight:function(){return y(fre)},moveDown:function(){return y(dre)},moveLeft:function(){return y(hre)}};return x({liftActionArgs:{id:i,clientSelection:Jne(d),movementMode:"SNAP"},cleanup:Ps,actions:E})}function w(){var E=yh({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0});E&&e.release()}var S={isActive:function(){return yh({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:v,snapLift:b,abort:w};return S}var cae=[Une,Vne,Kne];function uae(t){var e=t.contextId,r=t.store,n=t.registry,a=t.customSensors,i=t.enableDefaultSensors,s=[].concat(i?cae:[],a||[]),o=_.useState(function(){return Cne()})[0],c=ke(function(v,b){v.isDragging&&!b.isDragging&&o.tryAbandon()},[o]);On(function(){var v=r.getState(),b=r.subscribe(function(){var w=r.getState();c(v,w),v=w});return b},[o,r,c]),On(function(){return o.tryAbandon},[o.tryAbandon]);for(var u=ke(function(x){return L8({lockAPI:o,registry:n,store:r,draggableId:x})},[o,n,r]),d=ke(function(x,v,b){return lae({lockAPI:o,registry:n,contextId:e,store:r,draggableId:x,forceSensorStop:v,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null})},[e,o,n,r]),f=ke(function(x){return iae(e,x)},[e]),h=ke(function(x){var v=n.draggable.findById(x);return v?v.options:null},[n.draggable]),p=ke(function(){o.isClaimed()&&(o.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(E2()))},[o,r]),m=ke(o.isClaimed,[o]),g=Ke(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:m}},[u,d,f,h,p,m]),y=0;y<s.length;y++)s[y](g)}var dae=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function xu(t){return t.current||pe(),t.current}function fae(t){var e=t.contextId,r=t.setCallbacks,n=t.sensors,a=t.nonce,i=t.dragHandleUsageInstructions,s=_.useRef(null),o=I8(t),c=ke(function(){return dae(o.current)},[o]),u=_ne(e),d=Ene({contextId:e,text:i}),f=mne(e,a),h=ke(function(N){xu(s).dispatch(N)},[]),p=Ke(function(){return XS({publishWhileDragging:nre,updateDroppableScroll:ire,updateDroppableIsEnabled:sre,updateDroppableIsCombineEnabled:ore,collectionStarting:are},h)},[h]),m=yne(),g=Ke(function(){return Xre(m,p)},[m,p]),y=Ke(function(){return une(Ee({scrollWindow:qre,scrollDroppable:g.scrollDroppable},XS({move:x8},h)))},[g.scrollDroppable,h]),x=vne(e),v=Ke(function(){return Hre({announce:u,autoScroller:y,dimensionMarshal:g,focusMarshal:x,getResponders:c,styleMarshal:f})},[u,y,g,x,c,f]);s.current=v;var b=ke(function(){var N=xu(s),T=N.getState();T.phase!=="IDLE"&&N.dispatch(E2())},[]),w=ke(function(){var N=xu(s).getState();return N.isDragging||N.phase==="DROP_ANIMATING"},[]),S=Ke(function(){return{isDragging:w,tryAbort:b}},[w,b]);r(S);var E=ke(function(N){return E8(xu(s).getState(),N)},[]),j=ke(function(){return vo(xu(s).getState())},[]),I=Ke(function(){return{marshal:g,focus:x,contextId:e,canLift:E,isMovementAllowed:j,dragHandleUsageInstructionsId:d,registry:m}},[e,g,d,x,E,j,m]);return uae({contextId:e,store:v,registry:m,customSensors:n,enableDefaultSensors:t.enableDefaultSensors!==!1}),_.useEffect(function(){return b},[b]),ne.createElement(Pm.Provider,{value:I},ne.createElement(PJ,{context:P2,store:v},t.children))}var hae=0;function pae(){return Ke(function(){return""+hae++},[])}function mae(t){var e=pae(),r=t.dragHandleUsageInstructions||Jh.dragHandleUsageInstructions;return ne.createElement(Vee,null,function(n){return ne.createElement(fae,{nonce:t.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var B8=function(e){return function(r){return e===r}},gae=B8("scroll"),vae=B8("auto"),S4=function(e,r){return r(e.overflowX)||r(e.overflowY)},xae=function(e){var r=window.getComputedStyle(e),n={overflowX:r.overflowX,overflowY:r.overflowY};return S4(n,gae)||S4(n,vae)},yae=function(){return!1},bae=function t(e){return e==null?null:e===document.body?yae()?e:null:e===document.documentElement?null:xae(e)?e:t(e.parentElement)},Qy=function(t){return{x:t.scrollLeft,y:t.scrollTop}},wae=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},_ae=function(t){var e=bae(t),r=wae(t);return{closestScrollable:e,isFixedOnPage:r}},kae=function(t){var e=t.descriptor,r=t.isEnabled,n=t.isCombineEnabled,a=t.isFixedOnPage,i=t.direction,s=t.client,o=t.page,c=t.closest,u=function(){if(!c)return null;var p=c.scrollSize,m=c.client,g=k8({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:xr,displacement:xr}}}}(),d=i==="vertical"?w2:n8,f=kc({page:o,withPlaceholder:null,axis:d,frame:u}),h={descriptor:e,isCombineEnabled:n,isFixedOnPage:a,axis:d,isEnabled:r,client:s,page:o,frame:u,subject:f};return h},Nae=function(e,r){var n=XT(e);if(!r||e!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,s=a+r.scrollHeight,o=i+r.scrollWidth,c={top:a,right:o,bottom:s,left:i},u=g2(c,n.border),d=v2({borderBox:u,margin:n.margin,border:n.border,padding:n.padding});return d},Sae=function(t){var e=t.ref,r=t.descriptor,n=t.env,a=t.windowScroll,i=t.direction,s=t.isDropDisabled,o=t.isCombineEnabled,c=t.shouldClipSubject,u=n.closestScrollable,d=Nae(e,u),f=op(d,a),h=function(){if(!u)return null;var m=XT(u),g={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:m,page:op(m,a),scroll:Qy(u),scrollSize:g,shouldClipSubject:c}}(),p=kae({descriptor:r,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:f,closest:h});return p},Eae={passive:!1},Cae={passive:!0},E4=function(t){return t.shouldPublishImmediately?Eae:Cae};function hp(t){var e=_.useContext(t);return e||pe(),e}var bh=function(e){return e&&e.env.closestScrollable||null};function jae(t){var e=_.useRef(null),r=hp(Pm),n=R2("droppable"),a=r.registry,i=r.marshal,s=I8(t),o=Ke(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),c=_.useRef(o),u=Ke(function(){return gr(function(w,S){e.current||pe();var E={x:w,y:S};i.updateDroppableScroll(o.id,E)})},[o.id,i]),d=ke(function(){var w=e.current;return!w||!w.env.closestScrollable?xr:Qy(w.env.closestScrollable)},[]),f=ke(function(){var w=d();u(w.x,w.y)},[d,u]),h=Ke(function(){return Ld(f)},[f]),p=ke(function(){var w=e.current,S=bh(w);w&&S||pe();var E=w.scrollOptions;if(E.shouldPublishImmediately){f();return}h()},[h,f]),m=ke(function(w,S){e.current&&pe();var E=s.current,j=E.getDroppableRef();j||pe();var I=_ae(j),N={ref:j,descriptor:o,env:I,scrollOptions:S};e.current=N;var T=Sae({ref:j,descriptor:o,env:I,windowScroll:w,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),F=I.closestScrollable;return F&&(F.setAttribute(w4.contextId,r.contextId),F.addEventListener("scroll",p,E4(N.scrollOptions))),T},[r.contextId,o,p,s]),g=ke(function(){var w=e.current,S=bh(w);return w&&S||pe(),Qy(S)},[]),y=ke(function(){var w=e.current;w||pe();var S=bh(w);e.current=null,S&&(h.cancel(),S.removeAttribute(w4.contextId),S.removeEventListener("scroll",p,E4(w.scrollOptions)))},[p,h]),x=ke(function(w){var S=e.current;S||pe();var E=bh(S);E||pe(),E.scrollTop+=w.y,E.scrollLeft+=w.x},[]),v=Ke(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:y,scroll:x}},[y,m,g,x]),b=Ke(function(){return{uniqueId:n,descriptor:o,callbacks:v}},[v,o,n]);On(function(){return c.current=b.descriptor,a.droppable.register(b),function(){e.current&&y(),a.droppable.unregister(b)}},[v,o,y,b,i,a.droppable]),On(function(){e.current&&i.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,i]),On(function(){e.current&&i.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,i])}function Mv(){}var C4={width:0,height:0,margin:Zee},Aae=function(e){var r=e.isAnimatingOpenOnMount,n=e.placeholder,a=e.animate;return r||a==="close"?C4:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Tae=function(e){var r=e.isAnimatingOpenOnMount,n=e.placeholder,a=e.animate,i=Aae({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?nd.placeholder:null}};function Iae(t){var e=_.useRef(null),r=ke(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),n=t.animate,a=t.onTransitionEnd,i=t.onClose,s=t.contextId,o=_.useState(t.animate==="open"),c=o[0],u=o[1];_.useEffect(function(){return c?n!=="open"?(r(),u(!1),Mv):e.current?Mv:(e.current=setTimeout(function(){e.current=null,u(!1)}),r):Mv},[n,c,r]);var d=ke(function(h){h.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),f=Tae({isAnimatingOpenOnMount:c,animate:t.animate,placeholder:t.placeholder});return ne.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":s,onTransitionEnd:d,ref:t.innerRef})}var Oae=ne.memo(Iae),L2=ne.createContext(null),Dae=function(t){_T(e,t);function e(){for(var n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}e.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},e}(ne.PureComponent),j4={dragging:5e3,dropAnimating:4500},Pae=function(e,r){return r?nd.drop(r.duration):e?nd.snap:nd.fluid},Rae=function(e,r){return e?r?Ud.opacity.drop:Ud.opacity.combining:null},Mae=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function Lae(t){var e=t.dimension,r=e.client,n=t.offset,a=t.combineWith,i=t.dropping,s=!!a,o=Mae(t),c=!!i,u=c?Yy.drop(n,s):Yy.moveTo(n),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Pae(o,i),transform:u,opacity:Rae(s,c),zIndex:c?j4.dropAnimating:j4.dragging,pointerEvents:"none"};return d}function Bae(t){return{transform:Yy.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function Fae(t){return t.type==="DRAGGING"?Lae(t):Bae(t)}function $ae(t,e,r){r===void 0&&(r=xr);var n=window.getComputedStyle(e),a=e.getBoundingClientRect(),i=GT(a,n),s=op(i,r),o={client:i,tagName:e.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},u={descriptor:t,placeholder:o,displaceBy:c,client:i,page:s};return u}function Uae(t){var e=R2("draggable"),r=t.descriptor,n=t.registry,a=t.getDraggableRef,i=t.canDragInteractiveElements,s=t.shouldRespectForcePress,o=t.isEnabled,c=Ke(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:s,isEnabled:o}},[i,o,s]),u=ke(function(p){var m=a();return m||pe(),$ae(r,m,p)},[r,a]),d=Ke(function(){return{uniqueId:e,descriptor:r,options:c,getDimension:u}},[r,u,c,e]),f=_.useRef(d),h=_.useRef(!0);On(function(){return n.draggable.register(f.current),function(){return n.draggable.unregister(f.current)}},[n.draggable]),On(function(){if(h.current){h.current=!1;return}var p=f.current;f.current=d,n.draggable.update(d,p)},[d,n.draggable])}function zae(t){t.preventDefault()}function Hae(t){var e=_.useRef(null),r=ke(function(N){e.current=N},[]),n=ke(function(){return e.current},[]),a=hp(Pm),i=a.contextId,s=a.dragHandleUsageInstructionsId,o=a.registry,c=hp(L2),u=c.type,d=c.droppableId,f=Ke(function(){return{id:t.draggableId,index:t.index,type:u,droppableId:d}},[t.draggableId,t.index,u,d]),h=t.children,p=t.draggableId,m=t.isEnabled,g=t.shouldRespectForcePress,y=t.canDragInteractiveElements,x=t.isClone,v=t.mapped,b=t.dropAnimationFinished;if(!x){var w=Ke(function(){return{descriptor:f,registry:o,getDraggableRef:n,canDragInteractiveElements:y,shouldRespectForcePress:g,isEnabled:m}},[f,o,n,y,g,m]);Uae(w)}var S=Ke(function(){return m?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:zae}:null},[i,s,p,m]),E=ke(function(N){v.type==="DRAGGING"&&v.dropping&&N.propertyName==="transform"&&b()},[b,v]),j=Ke(function(){var N=Fae(v),T=v.type==="DRAGGING"&&v.dropping?E:null,F={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":p,style:N,onTransitionEnd:T},dragHandleProps:S};return F},[i,S,p,v,E,r]),I=Ke(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(j,v.snapshot,I)}var F8=function(t,e){return t===e},$8=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},Wae=function(e){return e.combine?e.combine.draggableId:null},Vae=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function Gae(){var t=gr(function(a,i){return{x:a,y:i}}),e=gr(function(a,i,s,o,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:s,combineWith:o,combineTargetFor:null}}),r=gr(function(a,i,s,o,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:a,dimension:s,forceShouldAnimate:d,snapshot:e(i,o,c,u,null)}}}),n=function(i,s){if(i.isDragging){if(i.critical.draggable.id!==s.draggableId)return null;var o=i.current.client.offset,c=i.dimensions.draggables[s.draggableId],u=In(i.impact),d=Vae(i.impact),f=i.forceShouldAnimate;return r(t(o.x,o.y),i.movementMode,c,s.isClone,u,d,f)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==s.draggableId)return null;var p=s.isClone,m=i.dimensions.draggables[s.draggableId],g=h.result,y=g.mode,x=$8(g),v=Wae(g),b=i.dropDuration,w={duration:b,curve:j2.drop,moveTo:i.newHomeClientOffset,opacity:v?Ud.opacity.drop:null,scale:v?Ud.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:m,dropping:w,draggingOver:x,combineWith:v,mode:y,forceShouldAnimate:null,snapshot:e(y,p,x,v,w)}}}return null};return n}function U8(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var Xae={mapped:{type:"SECONDARY",offset:xr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:U8(null)}};function qae(){var t=gr(function(s,o){return{x:s,y:o}}),e=gr(U8),r=gr(function(s,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:s,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:e(o)}}}),n=function(o){return o?r(xr,o,!0):null},a=function(o,c,u,d){var f=u.displaced.visible[o],h=!!(d.inVirtualList&&d.effected[o]),p=Tm(u),m=p&&p.draggableId===o?c:null;if(!f){if(!h)return n(m);if(u.displaced.invisible[o])return null;var g=Fc(d.displacedBy.point),y=t(g.x,g.y);return r(y,m,!0)}if(h)return n(m);var x=u.displacedBy.point,v=t(x.x,x.y);return r(v,m,f.shouldAnimate)},i=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:a(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var u=o.completed;return u.result.draggableId===c.draggableId?null:a(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return i}var Yae=function(){var e=Gae(),r=qae(),n=function(i,s){return e(i,s)||r(i,s)||Xae};return n},Kae={dropAnimationFinished:b8},Zae=WT(Yae,Kae,null,{context:P2,pure:!0,areStatePropsEqual:F8})(Hae);function z8(t){var e=hp(L2),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:ne.createElement(Zae,t)}function Qae(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return ne.createElement(z8,Ee({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function Jae(t){var e=_.useContext(Pm);e||pe();var r=e.contextId,n=e.isMovementAllowed,a=_.useRef(null),i=_.useRef(null),s=t.children,o=t.droppableId,c=t.type,u=t.mode,d=t.direction,f=t.ignoreContainerClipping,h=t.isDropDisabled,p=t.isCombineEnabled,m=t.snapshot,g=t.useClone,y=t.updateViewportMaxScroll,x=t.getContainerForClone,v=ke(function(){return a.current},[]),b=ke(function(F){a.current=F},[]);ke(function(){return i.current},[]);var w=ke(function(F){i.current=F},[]),S=ke(function(){n()&&y({maxScroll:S8()})},[n,y]);jae({droppableId:o,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:v});var E=ne.createElement(Dae,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(F){var C=F.onClose,A=F.data,k=F.animate;return ne.createElement(Oae,{placeholder:A,onClose:C,innerRef:w,animate:k,contextId:r,onTransitionEnd:S})}),j=Ke(function(){return{innerRef:b,placeholder:E,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":r}}},[r,o,E,b]),I=g?g.dragging.draggableId:null,N=Ke(function(){return{droppableId:o,type:c,isUsingCloneFor:I}},[o,I,c]);function T(){if(!g)return null;var F=g.dragging,C=g.render,A=ne.createElement(z8,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(k,O){return C(k,O,F)});return AP.createPortal(A,x())}return ne.createElement(L2.Provider,{value:N},s(j,m),T())}var Lv=function(e,r){return e===r.droppable.type},A4=function(e,r){return r.draggables[e.draggable.id]},eie=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Ee({},e,{shouldAnimatePlaceholder:!1}),n=gr(function(s){return{draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}}}),a=gr(function(s,o,c,u,d,f){var h=d.descriptor.id,p=d.descriptor.droppableId===s;if(p){var m=f?{render:f,dragging:n(d.descriptor)}:null,g={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:m}}if(!o)return r;if(!u)return e;var y={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:y,useClone:null}}),i=function(o,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(o.isDragging){var p=o.critical;if(!Lv(d,p))return r;var m=A4(p,o.dimensions),g=In(o.impact)===u;return a(u,f,g,g,m,h)}if(o.phase==="DROP_ANIMATING"){var y=o.completed;if(!Lv(d,y.critical))return r;var x=A4(y.critical,o.dimensions);return a(u,f,$8(y.result)===u,In(y.impact)===u,x,h)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var v=o.completed;if(!Lv(d,v.critical))return r;var b=In(v.impact)===u,w=!!(v.impact.at&&v.impact.at.type==="COMBINE"),S=v.critical.droppable.id===u;return b?w?e:r:S?e:r}return r};return i},tie={updateViewportMaxScroll:cre};function rie(){return document.body||pe(),document.body}var nie={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:rie},H8=WT(eie,tie,null,{context:P2,pure:!0,areStatePropsEqual:F8})(Jae);H8.defaultProps=nie;const Bv=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),aie=()=>{const[t,e]=_.useState([]),[r,n]=_.useState({email:"",phone:"",address:"",workingHours:"",socialLinks:{telegram:"",instagram:"",youtube:""}}),[a,i]=_.useState({alignment:"center",style:"classic",spacing:"normal",height:"compact",showBorder:!0,showShadow:!0,backgroundColor:"white",animation:"slide",mobileCollapse:!0,showIcons:!1,showBadges:!0,stickyHeader:!0,maxWidth:"container"}),[s,o]=_.useState(!0),[c,u]=_.useState(!1),[d,f]=_.useState(null),[h,p]=_.useState("navigation"),[m,g]=_.useState(null),[y,x]=_.useState({label:"",path:"",badge:""}),[v,b]=_.useState(!1);_.useEffect(()=>{w()},[]);const w=async()=>{try{o(!0);const{data:C,error:A}=await Bv.from("site_settings").select("*").limit(1).single();if(A&&A.code!=="PGRST116")throw console.error("Fetch error:",A),A;if(C){console.log("Loaded settings:",C),f(C.id);const k=(C.navigation_items||[]).map((O,$)=>({...O,order:O.order!==void 0?O.order:$})).sort((O,$)=>O.order-$.order);e(k),n({...r,...C.footer_settings||{}}),i({...a,...C.topbar_settings||{}})}else{console.log("Creating new settings record");const k={navigation_items:[],footer_settings:r,topbar_settings:a},{data:O,error:$}=await Bv.from("site_settings").insert([k]).select("*").single();if($)throw console.error("Insert error:",$),$;console.log("Created new settings:",O),f(O.id)}}catch(C){console.error("Error fetching settings:",C),K.error("Ошибка при загрузке настроек: "+C.message)}finally{o(!1)}},S=C=>{if(!C.destination)return;const A=Array.from(t),[k]=A.splice(C.source.index,1);A.splice(C.destination.index,0,k);const O=A.map(($,D)=>({...$,order:D}));e(O)},E=C=>{e(A=>A.map(k=>k.id===C?{...k,visible:!k.visible}:k))},j=(C,A,k)=>{e(O=>O.map($=>$.id===C?{...$,[A]:k}:$))},I=()=>{if(!y.label||!y.path){K.error("Заполните название и путь");return}const A={id:y.label.toLowerCase().replace(/\s+/g,"-"),label:y.label,path:y.path,visible:!0,order:t.length,badge:y.badge?parseInt(y.badge):void 0};e(k=>[...k,A]),x({label:"",path:"",badge:""}),b(!1),K.success("Элемент навигации добавлен")},N=C=>{confirm("Удалить элемент навигации?")&&(e(A=>A.filter(k=>k.id!==C)),K.success("Элемент навигации удален"))},T=()=>{i({alignment:"center",style:"classic",spacing:"normal",height:"compact",showBorder:!0,showShadow:!0,backgroundColor:"white",animation:"slide",mobileCollapse:!0,showIcons:!1,showBadges:!0,stickyHeader:!0,maxWidth:"container"}),K.info("Настройки топбара сброшены к значениям по умолчанию")},F=async()=>{try{if(!d){K.error("ID настроек не найден");return}u(!0),console.log("Saving settings...",{navigation_items:t,footer_settings:r,topbar_settings:a});const{data:C,error:A}=await Bv.from("site_settings").update({navigation_items:t,footer_settings:r,topbar_settings:a}).eq("id",d).select();if(A)throw console.error("Save error:",A),A;console.log("Settings saved successfully:",C),K.success("Настройки сохранены")}catch(C){console.error("Error saving settings:",C),K.error("Ошибка при сохранении: "+C.message)}finally{u(!1)}};return s?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(mr,{className:"h-8 w-8 animate-spin text-primary-600"}),l.jsx("span",{className:"text-lg text-gray-900 dark:text-white",children:"Загрузка настроек..."})]})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Управление навигацией"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Настройка меню, топбара и футера сайта"})]}),l.jsx("button",{onClick:F,disabled:c,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"h-5 w-5 animate-spin"}),"Сохранение..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"h-5 w-5"}),"Сохранить изменения"]})})]}),l.jsx("div",{className:"border-b border-gray-200 dark:border-gray-600",children:l.jsx("nav",{className:"flex space-x-8",children:[{id:"navigation",label:"Навигация",icon:Sg},{id:"topbar",label:"Топбар",icon:Vu},{id:"footer",label:"Футер",icon:_k}].map(C=>{const A=C.icon;return l.jsxs("button",{onClick:()=>p(C.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${h===C.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[l.jsx(A,{className:"h-4 w-4"}),C.label]},C.id)})})}),h==="navigation"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Основное меню"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Перетаскивайте элементы для изменения порядка"})]}),l.jsxs("button",{onClick:()=>b(!v),className:"btn btn-outline flex items-center gap-2",children:[l.jsx(ha,{className:"h-4 w-4"}),"Добавить элемент"]})]}),v&&l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[l.jsx("h4",{className:"font-medium mb-3 text-gray-900 dark:text-white",children:"Новый элемент навигации"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Название *"}),l.jsx("input",{type:"text",placeholder:"Например: Контакты",value:y.label,onChange:C=>x(A=>({...A,label:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Путь *"}),l.jsx("input",{type:"text",placeholder:"Например: /contacts",value:y.path,onChange:C=>x(A=>({...A,path:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Бейдж (опционально)"}),l.jsx("input",{type:"number",placeholder:"5",value:y.badge,onChange:C=>x(A=>({...A,badge:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:I,className:"btn-primary",children:"Добавить"}),l.jsx("button",{onClick:()=>b(!1),className:"btn btn-outline",children:"Отмена"})]})]}),t.length===0?l.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[l.jsx(Sg,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Элементы навигации не найдены"}),l.jsx("p",{className:"text-sm",children:"Добавьте первый элемент меню"})]}):l.jsx(mae,{onDragEnd:S,children:l.jsx(H8,{droppableId:"nav-items",children:C=>l.jsxs("div",{...C.droppableProps,ref:C.innerRef,className:"space-y-3",children:[t.map((A,k)=>l.jsx(Qae,{draggableId:A.id,index:k,children:(O,$)=>l.jsxs("div",{ref:O.innerRef,...O.draggableProps,className:`flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border transition-all ${$.isDragging?"border-primary-300 shadow-lg bg-white dark:bg-dark-600":"border-gray-200 dark:border-gray-600"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[l.jsx("span",{...O.dragHandleProps,className:"cursor-grab active:cursor-grabbing",children:l.jsx(HM,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})}),l.jsx("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:m===A.id?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",value:A.label,onChange:D=>j(A.id,"label",D.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm",placeholder:"Название"}),l.jsx("input",{type:"text",value:A.path,onChange:D=>j(A.id,"path",D.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm",placeholder:"Путь"}),l.jsx("input",{type:"number",value:A.badge||"",onChange:D=>j(A.id,"badge",D.target.value?parseInt(D.target.value):void 0),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm",placeholder:"Бейдж"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:A.label}),!A.visible&&l.jsx("span",{className:"ml-2 text-xs text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded",children:"Скрыт"})]}),l.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:A.path}),l.jsxs("div",{className:"flex items-center gap-2",children:[A.badge&&l.jsxs("span",{className:"text-xs bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 px-2 py-1 rounded-full",children:["Бейдж: ",A.badge]}),l.jsxs("span",{className:"text-xs text-gray-400",children:["#",k+1]})]})]})})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[m===A.id?l.jsx("button",{onClick:()=>g(null),className:"p-2 text-primary-600 hover:bg-primary-100 dark:hover:bg-primary-900/20 rounded-md transition-colors",title:"Сохранить изменения",children:l.jsx(Oa,{className:"h-4 w-4"})}):l.jsx("button",{onClick:()=>g(A.id),className:"p-2 text-primary-600 hover:bg-primary-100 dark:hover:bg-primary-900/20 rounded-md transition-colors",title:"Редактировать",children:l.jsx(ZM,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>E(A.id),className:`p-2 rounded-md transition-colors ${A.visible?"text-primary-600 hover:bg-primary-100 dark:hover:bg-primary-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600"}`,title:A.visible?"Скрыть элемент":"Показать элемент",children:A.visible?l.jsx(Jd,{className:"h-4 w-4"}):l.jsx(UM,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>N(A.id),className:"p-2 text-primary-600 hover:bg-primary-100 dark:hover:bg-primary-900/20 rounded-md transition-colors",title:"Удалить элемент",children:l.jsx(Rn,{className:"h-4 w-4"})})]})]})},A.id)),C.placeholder]})})})]})}),h==="topbar"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Настройки топбара"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Настройте внешний вид и поведение верхней панели"})]}),l.jsxs("button",{onClick:T,className:"btn btn-outline flex items-center gap-2",children:[l.jsx(QM,{className:"h-4 w-4"}),"Сбросить"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-gray-900 dark:text-white",children:[l.jsx(Sg,{className:"h-5 w-5 text-primary-600"}),"Расположение и стиль"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Выравнивание навигации"}),l.jsxs("select",{value:a.alignment,onChange:C=>i(A=>({...A,alignment:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"left",children:"Слева"}),l.jsx("option",{value:"center",children:"По центру"}),l.jsx("option",{value:"right",children:"Справа"}),l.jsx("option",{value:"space-between",children:"Растянуть"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Стиль навигации"}),l.jsxs("select",{value:a.style,onChange:C=>i(A=>({...A,style:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"classic",children:"Классический (линия снизу)"}),l.jsx("option",{value:"modern",children:"Современный"}),l.jsx("option",{value:"minimal",children:"Минимальный"}),l.jsx("option",{value:"rounded",children:"Скругленный"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Отступы"}),l.jsxs("select",{value:a.spacing,onChange:C=>i(A=>({...A,spacing:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"compact",children:"Компактные"}),l.jsx("option",{value:"normal",children:"Обычные"}),l.jsx("option",{value:"relaxed",children:"Увеличенные"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Высота топбара"}),l.jsxs("select",{value:a.height,onChange:C=>i(A=>({...A,height:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"compact",children:"Компактная"}),l.jsx("option",{value:"normal",children:"Обычная"}),l.jsx("option",{value:"large",children:"Увеличенная"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Максимальная ширина"}),l.jsxs("select",{value:a.maxWidth,onChange:C=>i(A=>({...A,maxWidth:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"container",children:"Контейнер (1280px)"}),l.jsx("option",{value:"screen-xl",children:"Большой экран (1536px)"}),l.jsx("option",{value:"full",children:"Полная ширина"})]})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-gray-900 dark:text-white",children:[l.jsx(KM,{className:"h-5 w-5 text-primary-600"}),"Внешний вид"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Фон топбара"}),l.jsxs("select",{value:a.backgroundColor,onChange:C=>i(A=>({...A,backgroundColor:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"white",children:"Белый"}),l.jsx("option",{value:"transparent",children:"Прозрачный"}),l.jsx("option",{value:"blur",children:"Размытый"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Анимация"}),l.jsxs("select",{value:a.animation,onChange:C=>i(A=>({...A,animation:C.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"none",children:"Без анимации"}),l.jsx("option",{value:"slide",children:"Слайд"}),l.jsx("option",{value:"fade",children:"Затухание"}),l.jsx("option",{value:"bounce",children:"Подпрыгивание"})]})]}),l.jsx("div",{className:"space-y-3",children:[{key:"showBorder",label:"Показывать границу",desc:"Тонкая линия под топбаром"},{key:"showShadow",label:"Показывать тень",desc:"Мягкая тень под панелью"},{key:"stickyHeader",label:"Закрепленный заголовок",desc:"Топбар остается наверху при прокрутке"},{key:"showIcons",label:"Показывать иконки",desc:"Иконки рядом с пунктами меню"},{key:"showBadges",label:"Показывать бейджи",desc:"Числовые индикаторы на элементах"},{key:"mobileCollapse",label:"Сворачивать на мобильных",desc:"Гамбургер-меню на малых экранах"}].map(C=>l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a[C.key],onChange:A=>i(k=>({...k,[C.key]:A.target.checked})),className:"mt-1"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-900 dark:text-white",children:C.label}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C.desc})]})]},C.key))})]})]})]}),l.jsxs("div",{className:"mt-8 p-6 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[l.jsx("h4",{className:"font-medium mb-4 text-gray-900 dark:text-white",children:"Предварительный просмотр"}),l.jsxs("div",{className:`
                border rounded-lg bg-white dark:bg-dark-800 transition-all
                ${a.showBorder?"border-gray-200 dark:border-gray-600":"border-transparent"}
                ${a.showShadow?"shadow-lg":""}
                ${a.backgroundColor==="blur"?"backdrop-blur-sm bg-white/80 dark:bg-dark-800/80":""}
                ${a.backgroundColor==="transparent"?"bg-transparent":""}
              `,children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ScienceHub"}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx("span",{children:"Войти"}),l.jsx("span",{children:"🌙"})]})]}),l.jsx("div",{className:`
                  flex items-center p-4
                  ${a.alignment==="left"?"justify-start":""}
                  ${a.alignment==="center"?"justify-center":""}
                  ${a.alignment==="right"?"justify-end":""}
                  ${a.alignment==="space-between"?"justify-between":""}
                  ${a.spacing==="compact"?"gap-2":""}
                  ${a.spacing==="normal"?"gap-4":""}
                  ${a.spacing==="relaxed"?"gap-6":""}
                `,children:t.filter(C=>C.visible).slice(0,4).map((C,A)=>l.jsx("div",{className:`
                        px-3 py-2 text-sm font-medium cursor-pointer transition-all duration-300 relative
                        ${a.style==="classic"?"hover:text-primary-600 border-b-2 border-transparent hover:border-primary-600":""}
                        ${a.style==="modern"?"hover:bg-primary-100 dark:hover:bg-primary-900/20 rounded-lg":""}
                        ${a.style==="minimal"?"hover:opacity-80":""}
                        ${a.style==="rounded"?"hover:bg-primary-100 dark:hover:bg-primary-900/20 rounded-full":""}
                        ${a.animation==="slide"?"hover:transform hover:-translate-y-0.5":""}
                        ${a.animation==="fade"?"hover:opacity-70":""}
                        ${a.animation==="bounce"?"hover:animate-pulse":""}
                        ${A===0&&a.style==="classic"?"text-primary-600 border-b-2 border-primary-600":""}
                      `,children:l.jsxs("div",{className:"flex items-center gap-2",children:[C.label,a.showBadges&&C.badge&&l.jsx("span",{className:"bg-primary-500 text-white text-xs rounded-full px-1.5 py-0.5 min-w-[18px] h-4 flex items-center justify-center",children:C.badge})]})},C.id))})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Это примерный вид топбара с текущими настройками. Первый элемент показан как активный."})]})]})}),h==="footer"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Настройки футера"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Контактная информация и социальные сети"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-gray-900 dark:text-white",children:[l.jsx(_k,{className:"h-5 w-5 text-primary-600"}),"Контактная информация"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Email"}),l.jsx("input",{type:"email",value:r.email,onChange:C=>n(A=>({...A,email:C.target.value})),placeholder:"sciencehubrs@gmail.com",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Телефон"}),l.jsx("input",{type:"tel",value:r.phone,onChange:C=>n(A=>({...A,phone:C.target.value})),placeholder:"+381 629434798",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Адрес"}),l.jsx("input",{type:"text",value:r.address,onChange:C=>n(A=>({...A,address:C.target.value})),placeholder:"Sarajevska 48, Belgrade",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Часы работы"}),l.jsx("input",{type:"text",value:r.workingHours,onChange:C=>n(A=>({...A,workingHours:C.target.value})),placeholder:"Пн-Пт: 9:00-22:00, Сб-Вс: 10:00-20:00",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-gray-900 dark:text-white",children:[l.jsx(t7,{className:"h-5 w-5 text-primary-600"}),"Социальные сети"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Telegram"}),l.jsx("input",{type:"url",placeholder:"https://t.me/sciencehub",value:r.socialLinks.telegram,onChange:C=>n(A=>({...A,socialLinks:{...A.socialLinks,telegram:C.target.value}})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Instagram"}),l.jsx("input",{type:"url",placeholder:"https://instagram.com/sciencehub",value:r.socialLinks.instagram,onChange:C=>n(A=>({...A,socialLinks:{...A.socialLinks,instagram:C.target.value}})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-medium mb-2 text-gray-700 dark:text-gray-300",children:"YouTube"}),l.jsx("input",{type:"url",placeholder:"https://youtube.com/sciencehub",value:r.socialLinks.youtube,onChange:C=>n(A=>({...A,socialLinks:{...A.socialLinks,youtube:C.target.value}})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[l.jsx("h5",{className:"font-medium mb-3 text-gray-900 dark:text-white",children:"Предварительный просмотр ссылок"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.socialLinks).map(([C,A])=>{if(!A)return null;const k={telegram:"Telegram",instagram:"Instagram",youtube:"YouTube"};return l.jsxs("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 rounded-full text-sm hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors",children:[k[C],l.jsx("span",{className:"text-xs",children:"↗"})]},C)})}),Object.values(r.socialLinks).every(C=>!C)&&l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Добавьте ссылки на социальные сети"})]})]})]}),l.jsxs("div",{className:"mt-8 p-6 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[l.jsx("h4",{className:"font-medium mb-4 text-gray-900 dark:text-white",children:"Предварительный просмотр футера"}),l.jsx("div",{className:"bg-dark-900 text-white p-6 rounded-lg",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h5",{className:"font-semibold mb-3",children:"Контакты"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:"📧"}),l.jsx("span",{children:r.email})]}),r.phone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:"📞"}),l.jsx("span",{children:r.phone})]}),r.address&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:"📍"}),l.jsx("span",{children:r.address})]}),r.workingHours&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:"🕒"}),l.jsx("span",{children:r.workingHours})]})]})]}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-semibold mb-3",children:"Навигация"}),l.jsx("div",{className:"space-y-1 text-sm",children:t.filter(C=>C.visible).slice(0,5).map(C=>l.jsx("div",{className:"hover:text-primary-400 cursor-pointer",children:C.label},C.id))})]}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-semibold mb-3",children:"Мы в соцсетях"}),l.jsx("div",{className:"flex gap-3",children:Object.entries(r.socialLinks).map(([C,A])=>{if(!A)return null;const k={telegram:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/tg-logo-100x100.png",instagram:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/ist-logo-100x100.png",youtube:"https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/logos/yt_100x100.png"};return l.jsx("img",{src:k[C],alt:C,className:"w-8 h-8 cursor-pointer hover:scale-110 transition-transform"},C)})})]})]})})]})]})})]})};function wh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W8={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,i){function s(u,d){if(!a[u]){if(!n[u]){var f=typeof wh=="function"&&wh;if(!d&&f)return f(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=a[u]={exports:{}};n[u][0].call(p.exports,function(m){var g=n[u][1][m];return s(g||m)},p,p.exports,r,n,a,i)}return a[u].exports}for(var o=typeof wh=="function"&&wh,c=0;c<i.length;c++)s(i[c]);return s}({1:[function(r,n,a){var i=r("./utils"),s=r("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var u,d,f,h,p,m,g,y=[],x=0,v=c.length,b=v,w=i.getTypeOf(c)!=="string";x<c.length;)b=v-x,f=w?(u=c[x++],d=x<v?c[x++]:0,x<v?c[x++]:0):(u=c.charCodeAt(x++),d=x<v?c.charCodeAt(x++):0,x<v?c.charCodeAt(x++):0),h=u>>2,p=(3&u)<<4|d>>4,m=1<b?(15&d)<<2|f>>6:64,g=2<b?63&f:64,y.push(o.charAt(h)+o.charAt(p)+o.charAt(m)+o.charAt(g));return y.join("")},a.decode=function(c){var u,d,f,h,p,m,g=0,y=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&b--,c.charAt(c.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=s.uint8array?new Uint8Array(0|b):new Array(0|b);g<c.length;)u=o.indexOf(c.charAt(g++))<<2|(h=o.indexOf(c.charAt(g++)))>>4,d=(15&h)<<4|(p=o.indexOf(c.charAt(g++)))>>2,f=(3&p)<<6|(m=o.indexOf(c.charAt(g++))),v[y++]=u,p!==64&&(v[y++]=d),m!==64&&(v[y++]=f);return v}},{"./support":30,"./utils":32}],2:[function(r,n,a){var i=r("./external"),s=r("./stream/DataWorker"),o=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function u(d,f,h,p,m){this.compressedSize=d,this.uncompressedSize=f,this.crc32=h,this.compression=p,this.compressedContent=m}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,f,h){return d.pipe(new o).pipe(new c("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,a){var i=r("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,a){var i=r("./utils"),s=function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,f,h){var p=s,m=h+f;u^=-1;for(var g=h;g<m;g++)u=u>>>8^p[255&(u^d[g])];return-1^u}(0|c,o,o.length,0):function(u,d,f,h){var p=s,m=h+f;u^=-1;for(var g=h;g<m;g++)u=u>>>8^p[255&(u^d.charCodeAt(g))];return-1^u}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(r,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(r,n,a){var i=null;i=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:i}},{lie:37}],7:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=r("pako"),o=r("./utils"),c=r("./stream/GenericWorker"),u=i?"uint8array":"array";function d(f,h){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}a.magic="\b\0",o.inherits(d,c),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,f.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},a.compressWorker=function(f){return new d("Deflate",f)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,a){function i(p,m){var g,y="";for(g=0;g<m;g++)y+=String.fromCharCode(255&p),p>>>=8;return y}function s(p,m,g,y,x,v){var b,w,S=p.file,E=p.compression,j=v!==u.utf8encode,I=o.transformTo("string",v(S.name)),N=o.transformTo("string",u.utf8encode(S.name)),T=S.comment,F=o.transformTo("string",v(T)),C=o.transformTo("string",u.utf8encode(T)),A=N.length!==S.name.length,k=C.length!==T.length,O="",$="",D="",R=S.dir,M=S.date,L={crc32:0,compressedSize:0,uncompressedSize:0};m&&!g||(L.crc32=p.crc32,L.compressedSize=p.compressedSize,L.uncompressedSize=p.uncompressedSize);var B=0;m&&(B|=8),j||!A&&!k||(B|=2048);var U=0,q=0;R&&(U|=16),x==="UNIX"?(q=798,U|=function(V,re){var ue=V;return V||(ue=re?16893:33204),(65535&ue)<<16}(S.unixPermissions,R)):(q=20,U|=function(V){return 63&(V||0)}(S.dosPermissions)),b=M.getUTCHours(),b<<=6,b|=M.getUTCMinutes(),b<<=5,b|=M.getUTCSeconds()/2,w=M.getUTCFullYear()-1980,w<<=4,w|=M.getUTCMonth()+1,w<<=5,w|=M.getUTCDate(),A&&($=i(1,1)+i(d(I),4)+N,O+="up"+i($.length,2)+$),k&&(D=i(1,1)+i(d(F),4)+C,O+="uc"+i(D.length,2)+D);var te="";return te+=`
\0`,te+=i(B,2),te+=E.magic,te+=i(b,2),te+=i(w,2),te+=i(L.crc32,4),te+=i(L.compressedSize,4),te+=i(L.uncompressedSize,4),te+=i(I.length,2),te+=i(O.length,2),{fileRecord:f.LOCAL_FILE_HEADER+te+I+O,dirRecord:f.CENTRAL_FILE_HEADER+i(q,2)+te+i(F.length,2)+"\0\0\0\0"+i(U,4)+i(y,4)+I+O+F}}var o=r("../utils"),c=r("../stream/GenericWorker"),u=r("../utf8"),d=r("../crc32"),f=r("../signature");function h(p,m,g,y){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=g,this.encodeFileName=y,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,c),h.prototype.push=function(p){var m=p.meta.percent||0,g=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(m+100*(g-y-1))/g:100}}))},h.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var m=this.streamFiles&&!p.file.dir;if(m){var g=s(p,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(p){this.accumulate=!1;var m=this.streamFiles&&!p.file.dir,g=s(p,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),m)this.push({data:function(y){return f.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var p=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var g=this.bytesWritten-p,y=function(x,v,b,w,S){var E=o.transformTo("string",S(w));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(v,4)+i(b,4)+i(E.length,2)+E}(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(p){this._sources.push(p);var m=this;return p.on("data",function(g){m.processChunk(g)}),p.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),p.on("error",function(g){m.error(g)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(p){var m=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var g=0;g<m.length;g++)try{m[g].error(p)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,m=0;m<p.length;m++)p[m].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,a){var i=r("../compressions"),s=r("./ZipFileWorker");a.generateWorker=function(o,c,u){var d=new s(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{o.forEach(function(h,p){f++;var m=function(v,b){var w=v||b,S=i[w];if(!S)throw new Error(w+" is not a valid compression method !");return S}(p.options.compression,c.compression),g=p.options.compressionOptions||c.compressionOptions||{},y=p.dir,x=p.date;p._compressWorker(m,g).withStreamInfo("file",{name:h,dir:y,date:x,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=r("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,a){var i=r("./utils"),s=r("./external"),o=r("./utf8"),c=r("./zipEntries"),u=r("./stream/Crc32Probe"),d=r("./nodejsUtils");function f(h){return new s.Promise(function(p,m){var g=h.decompressed.getContentWorker().pipe(new u);g.on("error",function(y){m(y)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}n.exports=function(h,p){var m=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(h)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(g){var y=new c(p);return y.load(g),y}).then(function(g){var y=[s.Promise.resolve(g)],x=g.files;if(p.checkCRC32)for(var v=0;v<x.length;v++)y.push(f(x[v]));return s.Promise.all(y)}).then(function(g){for(var y=g.shift(),x=y.files,v=0;v<x.length;v++){var b=x[v],w=b.fileNameStr,S=i.resolve(b.fileNameStr);m.file(S,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:p.createFolders}),b.dir||(m.file(S).unsafeOriginalName=w)}return y.zipComment.length&&(m.comment=y.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,a){var i=r("../utils"),s=r("../stream/GenericWorker");function o(c,u){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,a){var i=r("readable-stream").Readable;function s(o,c,u){i.call(this,c),this._helper=o;var d=this;o.on("data",function(f,h){d.push(f)||d._helper.pause(),u&&u(h)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}r("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(r,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,n,a){function i(S,E,j){var I,N=o.getTypeOf(E),T=o.extend(j||{},d);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(S=x(S)),T.createFolders&&(I=y(S))&&v.call(this,I,!0);var F=N==="string"&&T.binary===!1&&T.base64===!1;j&&j.binary!==void 0||(T.binary=!F),(E instanceof f&&E.uncompressedSize===0||T.dir||!E||E.length===0)&&(T.base64=!1,T.binary=!0,E="",T.compression="STORE",N="string");var C=null;C=E instanceof f||E instanceof c?E:m.isNode&&m.isStream(E)?new g(S,E):o.prepareContent(S,E,T.binary,T.optimizedBinaryString,T.base64);var A=new h(S,C,T);this.files[S]=A}var s=r("./utf8"),o=r("./utils"),c=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),d=r("./defaults"),f=r("./compressedObject"),h=r("./zipObject"),p=r("./generate"),m=r("./nodejsUtils"),g=r("./nodejs/NodejsStreamInputAdapter"),y=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var E=S.lastIndexOf("/");return 0<E?S.substring(0,E):""},x=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},v=function(S,E){return E=E!==void 0?E:d.createFolders,S=x(S),this.files[S]||i.call(this,S,null,{dir:!0,createFolders:E}),this.files[S]};function b(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var E,j,I;for(E in this.files)I=this.files[E],(j=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&S(j,I)},filter:function(S){var E=[];return this.forEach(function(j,I){S(j,I)&&E.push(I)}),E},file:function(S,E,j){if(arguments.length!==1)return S=this.root+S,i.call(this,S,E,j),this;if(b(S)){var I=S;return this.filter(function(T,F){return!F.dir&&I.test(T)})}var N=this.files[this.root+S];return N&&!N.dir?N:null},folder:function(S){if(!S)return this;if(b(S))return this.filter(function(N,T){return T.dir&&S.test(N)});var E=this.root+S,j=v.call(this,E),I=this.clone();return I.root=j.name,I},remove:function(S){S=this.root+S;var E=this.files[S];if(E||(S.slice(-1)!=="/"&&(S+="/"),E=this.files[S]),E&&!E.dir)delete this.files[S];else for(var j=this.filter(function(N,T){return T.name.slice(0,S.length)===S}),I=0;I<j.length;I++)delete this.files[j[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var E,j={};try{if((j=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");o.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var I=j.comment||this.comment||"";E=p.generateWorker(this,j,I)}catch(N){(E=new c("error")).error(N)}return new u(E,j.type||"string",j.mimeType)},generateAsync:function(S,E){return this.generateInternalStream(S).accumulate(E)},generateNodeStream:function(S,E){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(E)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,a){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,a){var i=r("./DataReader");function s(o){i.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}r("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),f=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===u&&this.data[h+2]===d&&this.data[h+3]===f)return h-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),f=o.charCodeAt(3),h=this.readData(4);return c===h[0]&&u===h[1]&&d===h[2]&&f===h[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(r,n,a){var i=r("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=s},{"../utils":32}],19:[function(r,n,a){var i=r("./Uint8ArrayReader");function s(o){i.call(this,o)}r("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,a){var i=r("./DataReader");function s(o){i.call(this,o)}r("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(r,n,a){var i=r("./ArrayReader");function s(o){i.call(this,o)}r("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,a){var i=r("../utils"),s=r("../support"),o=r("./ArrayReader"),c=r("./StringReader"),u=r("./NodeBufferReader"),d=r("./Uint8ArrayReader");n.exports=function(f){var h=i.getTypeOf(f);return i.checkSupport(h),h!=="string"||s.uint8array?h==="nodebuffer"?new u(f):s.uint8array?new d(i.transformTo("uint8array",f)):new o(i.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,a){var i=r("./GenericWorker"),s=r("../utils");function o(c){i.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(o,i),o.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,a){var i=r("./GenericWorker"),s=r("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(o,i),o.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,a){var i=r("../utils"),s=r("./GenericWorker");function o(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(o,s),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}s.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,a){var i=r("../utils"),s=r("./GenericWorker");function o(c){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(c){o.processChunk(c)}),s.on("end",function(){o.end()}),s.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=i},{}],29:[function(r,n,a){var i=r("../utils"),s=r("./ConvertWorker"),o=r("./GenericWorker"),c=r("../base64"),u=r("../support"),d=r("../external"),f=null;if(u.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(m,g){return new d.Promise(function(y,x){var v=[],b=m._internalType,w=m._outputType,S=m._mimeType;m.on("data",function(E,j){v.push(E),g&&g(j)}).on("error",function(E){v=[],x(E)}).on("end",function(){try{var E=function(j,I,N){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",I),N);case"base64":return c.encode(I);default:return i.transformTo(j,I)}}(w,function(j,I){var N,T=0,F=null,C=0;for(N=0;N<I.length;N++)C+=I[N].length;switch(j){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(F=new Uint8Array(C),N=0;N<I.length;N++)F.set(I[N],T),T+=I[N].length;return F;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+j+"'")}}(b,v),S);y(E)}catch(j){x(j)}v=[]}).resume()})}function p(m,g,y){var x=g;switch(g){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=g,this._mimeType=y,i.checkSupport(x),this._worker=m.pipe(new s(x)),m.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}p.prototype={accumulate:function(m){return h(this,m)},on:function(m,g){var y=this;return m==="data"?this._worker.on(m,function(x){g.call(y,x.data,x.meta)}):this._worker.on(m,function(){i.delay(g,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!r("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,a){for(var i=r("./utils"),s=r("./support"),o=r("./nodejsUtils"),c=r("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}a.utf8encode=function(p){return s.nodebuffer?o.newBufferFrom(p,"utf-8"):function(m){var g,y,x,v,b,w=m.length,S=0;for(v=0;v<w;v++)(64512&(y=m.charCodeAt(v)))==55296&&v+1<w&&(64512&(x=m.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),v++),S+=y<128?1:y<2048?2:y<65536?3:4;for(g=s.uint8array?new Uint8Array(S):new Array(S),v=b=0;b<S;v++)(64512&(y=m.charCodeAt(v)))==55296&&v+1<w&&(64512&(x=m.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),v++),y<128?g[b++]=y:(y<2048?g[b++]=192|y>>>6:(y<65536?g[b++]=224|y>>>12:(g[b++]=240|y>>>18,g[b++]=128|y>>>12&63),g[b++]=128|y>>>6&63),g[b++]=128|63&y);return g}(p)},a.utf8decode=function(p){return s.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):function(m){var g,y,x,v,b=m.length,w=new Array(2*b);for(g=y=0;g<b;)if((x=m[g++])<128)w[y++]=x;else if(4<(v=u[x]))w[y++]=65533,g+=v-1;else{for(x&=v===2?31:v===3?15:7;1<v&&g<b;)x=x<<6|63&m[g++],v--;1<v?w[y++]=65533:x<65536?w[y++]=x:(x-=65536,w[y++]=55296|x>>10&1023,w[y++]=56320|1023&x)}return w.length!==y&&(w.subarray?w=w.subarray(0,y):w.length=y),i.applyFromCharCode(w)}(p=i.transformTo(s.uint8array?"uint8array":"array",p))},i.inherits(f,c),f.prototype.processChunk=function(p){var m=i.transformTo(s.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=m;(m=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),m.set(g,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var y=function(v,b){var w;for((b=b||v.length)>v.length&&(b=v.length),w=b-1;0<=w&&(192&v[w])==128;)w--;return w<0||w===0?b:w+u[v[w]]>b?w:b}(m),x=m;y!==m.length&&(s.uint8array?(x=m.subarray(0,y),this.leftOver=m.subarray(y,m.length)):(x=m.slice(0,y),this.leftOver=m.slice(y,m.length))),this.push({data:a.utf8decode(x),meta:p.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=f,i.inherits(h,c),h.prototype.processChunk=function(p){this.push({data:a.utf8encode(p.data),meta:p.meta})},a.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,a){var i=r("./support"),s=r("./base64"),o=r("./nodejsUtils"),c=r("./external");function u(g){return g}function d(g,y){for(var x=0;x<g.length;++x)y[x]=255&g.charCodeAt(x);return y}r("setimmediate"),a.newBlob=function(g,y){a.checkSupport("blob");try{return new Blob([g],{type:y})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(g),x.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,y,x){var v=[],b=0,w=g.length;if(w<=x)return String.fromCharCode.apply(null,g);for(;b<w;)y==="array"||y==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(b,Math.min(b+x,w)))):v.push(String.fromCharCode.apply(null,g.subarray(b,Math.min(b+x,w)))),b+=x;return v.join("")},stringifyByChar:function(g){for(var y="",x=0;x<g.length;x++)y+=String.fromCharCode(g[x]);return y},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(g){var y=65536,x=a.getTypeOf(g),v=!0;if(x==="uint8array"?v=f.applyCanBeUsed.uint8array:x==="nodebuffer"&&(v=f.applyCanBeUsed.nodebuffer),v)for(;1<y;)try{return f.stringifyByChunk(g,x,y)}catch{y=Math.floor(y/2)}return f.stringifyByChar(g)}function p(g,y){for(var x=0;x<g.length;x++)y[x]=g[x];return y}a.applyFromCharCode=h;var m={};m.string={string:u,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return m.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,o.allocBuffer(g.length))}},m.array={string:h,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(g)}},m.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(new Uint8Array(g))}},m.uint8array={string:h,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return o.newBufferFrom(g)}},m.nodebuffer={string:h,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return m.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:u},a.transformTo=function(g,y){if(y=y||"",!g)return y;a.checkSupport(g);var x=a.getTypeOf(y);return m[x][g](y)},a.resolve=function(g){for(var y=g.split("/"),x=[],v=0;v<y.length;v++){var b=y[v];b==="."||b===""&&v!==0&&v!==y.length-1||(b===".."?x.pop():x.push(b))}return x.join("/")},a.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(g)?"nodebuffer":i.uint8array&&g instanceof Uint8Array?"uint8array":i.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(g){if(!i[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(g){var y,x,v="";for(x=0;x<(g||"").length;x++)v+="\\x"+((y=g.charCodeAt(x))<16?"0":"")+y.toString(16).toUpperCase();return v},a.delay=function(g,y,x){setImmediate(function(){g.apply(x||null,y||[])})},a.inherits=function(g,y){function x(){}x.prototype=y.prototype,g.prototype=new x},a.extend=function(){var g,y,x={};for(g=0;g<arguments.length;g++)for(y in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],y)&&x[y]===void 0&&(x[y]=arguments[g][y]);return x},a.prepareContent=function(g,y,x,v,b){return c.Promise.resolve(y).then(function(w){return i.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new c.Promise(function(S,E){var j=new FileReader;j.onload=function(I){S(I.target.result)},j.onerror=function(I){E(I.target.error)},j.readAsArrayBuffer(w)}):w}).then(function(w){var S=a.getTypeOf(w);return S?(S==="arraybuffer"?w=a.transformTo("uint8array",w):S==="string"&&(b?w=s.decode(w):x&&v!==!0&&(w=function(E){return d(E,i.uint8array?new Uint8Array(E.length):new Array(E.length))}(w))),w):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,a){var i=r("./reader/readerFor"),s=r("./utils"),o=r("./signature"),c=r("./zipEntry"),u=r("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(h)+", expected "+s.pretty(f)+")")}},isSignature:function(f,h){var p=this.reader.index;this.reader.setIndex(f);var m=this.reader.readString(4)===h;return this.reader.setIndex(p),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",p=s.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,p,m=this.zip64EndOfCentralSize-44;0<m;)f=this.reader.readInt(2),h=this.reader.readInt(4),p=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var m=h-p;if(0<m)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,a){var i=r("./reader/readerFor"),s=r("./utils"),o=r("./compressedObject"),c=r("./crc32"),u=r("./utf8"),d=r("./compressions"),f=r("./support");function h(p,m){this.options=p,this.loadOptions=m}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var m,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(y){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===y)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var m=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(m),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var m,g,y,x=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<x;)m=p.readInt(2),g=p.readInt(2),y=p.readData(g),this.extraFields[m]={id:m,length:g,value:y};p.setIndex(x)},handleUTF8:function(){var p=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var g=s.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var x=s.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var m=i(p.value);return m.readInt(1)!==1||c(this.fileName)!==m.readInt(4)?null:u.utf8decode(m.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var m=i(p.value);return m.readInt(1)!==1||c(this.fileComment)!==m.readInt(4)?null:u.utf8decode(m.readData(p.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,a){function i(m,g,y){this.name=m,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=g,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var s=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),c=r("./utf8"),u=r("./compressedObject"),d=r("./stream/GenericWorker");i.prototype={internalStream:function(m){var g=null,y="string";try{if(!m)throw new Error("No output type specified.");var x=(y=m.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!x&&(g=g.pipe(new c.Utf8EncodeWorker)),!v&&x&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(b){(g=new d("error")).error(b)}return new s(g,y,"")},async:function(m,g){return this.internalStream(m).accumulate(g)},nodeStream:function(m,g){return this.internalStream(m||"nodebuffer").toNodejsStream(g)},_compressWorker:function(m,g){if(this._data instanceof u&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(y,m,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<f.length;p++)i.prototype[f[p]]=h;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,a){(function(i){var s,o,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,d=new c(m),f=i.document.createTextNode("");d.observe(f,{characterData:!0}),s=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var g=i.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},i.document.documentElement.appendChild(g)}:function(){setTimeout(m,0)};else{var h=new i.MessageChannel;h.port1.onmessage=m,s=function(){h.port2.postMessage(0)}}var p=[];function m(){var g,y;o=!0;for(var x=p.length;x;){for(y=p,p=[],g=-1;++g<x;)y[g]();x=p.length}o=!1}n.exports=function(g){p.push(g)!==1||o||s()}}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,a){var i=r("immediate");function s(){}var o={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==s&&g(this,x)}function h(x,v,b){this.promise=x,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function p(x,v,b){i(function(){var w;try{w=v(b)}catch(S){return o.reject(x,S)}w===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,w)})}function m(x){var v=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof v=="function")return function(){v.apply(x,arguments)}}function g(x,v){var b=!1;function w(j){b||(b=!0,o.reject(x,j))}function S(j){b||(b=!0,o.resolve(x,j))}var E=y(function(){v(S,w)});E.status==="error"&&w(E.value)}function y(x,v){var b={};try{b.value=x(v),b.status="success"}catch(w){b.status="error",b.value=w}return b}(n.exports=f).prototype.finally=function(x){if(typeof x!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(x()).then(function(){return b})},function(b){return v.resolve(x()).then(function(){throw b})})},f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,v){if(typeof x!="function"&&this.state===u||typeof v!="function"&&this.state===c)return this;var b=new this.constructor(s);return this.state!==d?p(b,this.state===u?x:v,this.outcome):this.queue.push(new h(b,x,v)),b},h.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},h.prototype.otherCallFulfilled=function(x){p(this.promise,this.onFulfilled,x)},h.prototype.callRejected=function(x){o.reject(this.promise,x)},h.prototype.otherCallRejected=function(x){p(this.promise,this.onRejected,x)},o.resolve=function(x,v){var b=y(m,v);if(b.status==="error")return o.reject(x,b.value);var w=b.value;if(w)g(x,w);else{x.state=u,x.outcome=v;for(var S=-1,E=x.queue.length;++S<E;)x.queue[S].callFulfilled(v)}return x},o.reject=function(x,v){x.state=c,x.outcome=v;for(var b=-1,w=x.queue.length;++b<w;)x.queue[b].callRejected(v);return x},f.resolve=function(x){return x instanceof this?x:o.resolve(new this(s),x)},f.reject=function(x){var v=new this(s);return o.reject(v,x)},f.all=function(x){var v=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=x.length,w=!1;if(!b)return this.resolve([]);for(var S=new Array(b),E=0,j=-1,I=new this(s);++j<b;)N(x[j],j);return I;function N(T,F){v.resolve(T).then(function(C){S[F]=C,++E!==b||w||(w=!0,o.resolve(I,S))},function(C){w||(w=!0,o.reject(I,C))})}},f.race=function(x){var v=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=x.length,w=!1;if(!b)return this.resolve([]);for(var S=-1,E=new this(s);++S<b;)j=x[S],v.resolve(j).then(function(I){w||(w=!0,o.resolve(E,I))},function(I){w||(w=!0,o.reject(E,I))});var j;return E}},{immediate:36}],38:[function(r,n,a){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,a){var i=r("./zlib/deflate"),s=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/messages"),u=r("./zlib/zstream"),d=Object.prototype.toString,f=0,h=-1,p=0,m=8;function g(x){if(!(this instanceof g))return new g(x);this.options=s.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},x||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==f)throw new Error(c[b]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var w;if(w=typeof v.dictionary=="string"?o.string2buf(v.dictionary):d.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=i.deflateSetDictionary(this.strm,w))!==f)throw new Error(c[b]);this._dict_set=!0}}function y(x,v){var b=new g(v);if(b.push(x,!0),b.err)throw b.msg||c[b.err];return b.result}g.prototype.push=function(x,v){var b,w,S=this.strm,E=this.options.chunkSize;if(this.ended)return!1;w=v===~~v?v:v===!0?4:0,typeof x=="string"?S.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?S.input=new Uint8Array(x):S.input=x,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new s.Buf8(E),S.next_out=0,S.avail_out=E),(b=i.deflate(S,w))!==1&&b!==f)return this.onEnd(b),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(S.output,S.next_out))):this.onData(s.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&b!==1);return w===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f):w!==2||(this.onEnd(f),!(S.avail_out=0))},g.prototype.onData=function(x){this.chunks.push(x)},g.prototype.onEnd=function(x){x===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=g,a.deflate=y,a.deflateRaw=function(x,v){return(v=v||{}).raw=!0,y(x,v)},a.gzip=function(x,v){return(v=v||{}).gzip=!0,y(x,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,a){var i=r("./zlib/inflate"),s=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/constants"),u=r("./zlib/messages"),d=r("./zlib/zstream"),f=r("./zlib/gzheader"),h=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||g&&g.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,y.windowBits);if(x!==c.Z_OK)throw new Error(u[x]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function m(g,y){var x=new p(y);if(x.push(g,!0),x.err)throw x.msg||u[x.err];return x.result}p.prototype.push=function(g,y){var x,v,b,w,S,E,j=this.strm,I=this.options.chunkSize,N=this.options.dictionary,T=!1;if(this.ended)return!1;v=y===~~y?y:y===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?j.input=o.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?j.input=new Uint8Array(g):j.input=g,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(I),j.next_out=0,j.avail_out=I),(x=i.inflate(j,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&N&&(E=typeof N=="string"?o.string2buf(N):h.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,x=i.inflateSetDictionary(this.strm,E)),x===c.Z_BUF_ERROR&&T===!0&&(x=c.Z_OK,T=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&x!==c.Z_STREAM_END&&(j.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(j.output,j.next_out),w=j.next_out-b,S=o.buf2string(j.output,b),j.next_out=w,j.avail_out=I-w,w&&s.arraySet(j.output,j.output,b,w,0),this.onData(S)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(T=!0)}while((0<j.avail_in||j.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(j.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Inflate=p,a.inflate=m,a.inflateRaw=function(g,y){return(y=y||{}).raw=!0,m(g,y)},a.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])}}return c},a.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var s={arraySet:function(c,u,d,f,h){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+f),h);else for(var p=0;p<f;p++)c[h+p]=u[d+p]},flattenChunks:function(c){var u,d,f,h,p,m;for(u=f=0,d=c.length;u<d;u++)f+=c[u].length;for(m=new Uint8Array(f),u=h=0,d=c.length;u<d;u++)p=c[u],m.set(p,h),h+=p.length;return m}},o={arraySet:function(c,u,d,f,h){for(var p=0;p<f;p++)c[h+p]=u[d+p]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(r,n,a){var i=r("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(f,h){if(h<65537&&(f.subarray&&o||!f.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(f,h));for(var p="",m=0;m<h;m++)p+=String.fromCharCode(f[m]);return p}c[254]=c[254]=1,a.string2buf=function(f){var h,p,m,g,y,x=f.length,v=0;for(g=0;g<x;g++)(64512&(p=f.charCodeAt(g)))==55296&&g+1<x&&(64512&(m=f.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),g++),v+=p<128?1:p<2048?2:p<65536?3:4;for(h=new i.Buf8(v),g=y=0;y<v;g++)(64512&(p=f.charCodeAt(g)))==55296&&g+1<x&&(64512&(m=f.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),g++),p<128?h[y++]=p:(p<2048?h[y++]=192|p>>>6:(p<65536?h[y++]=224|p>>>12:(h[y++]=240|p>>>18,h[y++]=128|p>>>12&63),h[y++]=128|p>>>6&63),h[y++]=128|63&p);return h},a.buf2binstring=function(f){return d(f,f.length)},a.binstring2buf=function(f){for(var h=new i.Buf8(f.length),p=0,m=h.length;p<m;p++)h[p]=f.charCodeAt(p);return h},a.buf2string=function(f,h){var p,m,g,y,x=h||f.length,v=new Array(2*x);for(p=m=0;p<x;)if((g=f[p++])<128)v[m++]=g;else if(4<(y=c[g]))v[m++]=65533,p+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&p<x;)g=g<<6|63&f[p++],y--;1<y?v[m++]=65533:g<65536?v[m++]=g:(g-=65536,v[m++]=55296|g>>10&1023,v[m++]=56320|1023&g)}return d(v,m)},a.utf8border=function(f,h){var p;for((h=h||f.length)>f.length&&(h=f.length),p=h-1;0<=p&&(192&f[p])==128;)p--;return p<0||p===0?h:p+c[f[p]]>h?p:h}},{"./common":41}],43:[function(r,n,a){n.exports=function(i,s,o,c){for(var u=65535&i|0,d=i>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;d=d+(u=u+s[c++]|0)|0,--f;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(r,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,a){var i=function(){for(var s,o=[],c=0;c<256;c++){s=c;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[c]=s}return o}();n.exports=function(s,o,c,u){var d=i,f=u+c;s^=-1;for(var h=u;h<f;h++)s=s>>>8^d[255&(s^o[h])];return-1^s}},{}],46:[function(r,n,a){var i,s=r("../utils/common"),o=r("./trees"),c=r("./adler32"),u=r("./crc32"),d=r("./messages"),f=0,h=4,p=0,m=-2,g=-1,y=4,x=2,v=8,b=9,w=286,S=30,E=19,j=2*w+1,I=15,N=3,T=258,F=T+N+1,C=42,A=113,k=1,O=2,$=3,D=4;function R(P,Q){return P.msg=d[Q],Q}function M(P){return(P<<1)-(4<P?9:0)}function L(P){for(var Q=P.length;0<=--Q;)P[Q]=0}function B(P){var Q=P.state,X=Q.pending;X>P.avail_out&&(X=P.avail_out),X!==0&&(s.arraySet(P.output,Q.pending_buf,Q.pending_out,X,P.next_out),P.next_out+=X,Q.pending_out+=X,P.total_out+=X,P.avail_out-=X,Q.pending-=X,Q.pending===0&&(Q.pending_out=0))}function U(P,Q){o._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,Q),P.block_start=P.strstart,B(P.strm)}function q(P,Q){P.pending_buf[P.pending++]=Q}function te(P,Q){P.pending_buf[P.pending++]=Q>>>8&255,P.pending_buf[P.pending++]=255&Q}function V(P,Q){var X,W,H=P.max_chain_length,G=P.strstart,J=P.prev_length,ae=P.nice_match,Z=P.strstart>P.w_size-F?P.strstart-(P.w_size-F):0,ce=P.window,ve=P.w_mask,fe=P.prev,_e=P.strstart+T,Ve=ce[G+J-1],Re=ce[G+J];P.prev_length>=P.good_match&&(H>>=2),ae>P.lookahead&&(ae=P.lookahead);do if(ce[(X=Q)+J]===Re&&ce[X+J-1]===Ve&&ce[X]===ce[G]&&ce[++X]===ce[G+1]){G+=2,X++;do;while(ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&ce[++G]===ce[++X]&&G<_e);if(W=T-(_e-G),G=_e-T,J<W){if(P.match_start=Q,ae<=(J=W))break;Ve=ce[G+J-1],Re=ce[G+J]}}while((Q=fe[Q&ve])>Z&&--H!=0);return J<=P.lookahead?J:P.lookahead}function re(P){var Q,X,W,H,G,J,ae,Z,ce,ve,fe=P.w_size;do{if(H=P.window_size-P.lookahead-P.strstart,P.strstart>=fe+(fe-F)){for(s.arraySet(P.window,P.window,fe,fe,0),P.match_start-=fe,P.strstart-=fe,P.block_start-=fe,Q=X=P.hash_size;W=P.head[--Q],P.head[Q]=fe<=W?W-fe:0,--X;);for(Q=X=fe;W=P.prev[--Q],P.prev[Q]=fe<=W?W-fe:0,--X;);H+=fe}if(P.strm.avail_in===0)break;if(J=P.strm,ae=P.window,Z=P.strstart+P.lookahead,ce=H,ve=void 0,ve=J.avail_in,ce<ve&&(ve=ce),X=ve===0?0:(J.avail_in-=ve,s.arraySet(ae,J.input,J.next_in,ve,Z),J.state.wrap===1?J.adler=c(J.adler,ae,ve,Z):J.state.wrap===2&&(J.adler=u(J.adler,ae,ve,Z)),J.next_in+=ve,J.total_in+=ve,ve),P.lookahead+=X,P.lookahead+P.insert>=N)for(G=P.strstart-P.insert,P.ins_h=P.window[G],P.ins_h=(P.ins_h<<P.hash_shift^P.window[G+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[G+N-1])&P.hash_mask,P.prev[G&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=G,G++,P.insert--,!(P.lookahead+P.insert<N)););}while(P.lookahead<F&&P.strm.avail_in!==0)}function ue(P,Q){for(var X,W;;){if(P.lookahead<F){if(re(P),P.lookahead<F&&Q===f)return k;if(P.lookahead===0)break}if(X=0,P.lookahead>=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,X=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),X!==0&&P.strstart-X<=P.w_size-F&&(P.match_length=V(P,X)),P.match_length>=N)if(W=o._tr_tally(P,P.strstart-P.match_start,P.match_length-N),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=N){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,X=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else W=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(W&&(U(P,!1),P.strm.avail_out===0))return k}return P.insert=P.strstart<N-1?P.strstart:N-1,Q===h?(U(P,!0),P.strm.avail_out===0?$:D):P.last_lit&&(U(P,!1),P.strm.avail_out===0)?k:O}function ie(P,Q){for(var X,W,H;;){if(P.lookahead<F){if(re(P),P.lookahead<F&&Q===f)return k;if(P.lookahead===0)break}if(X=0,P.lookahead>=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,X=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=N-1,X!==0&&P.prev_length<P.max_lazy_match&&P.strstart-X<=P.w_size-F&&(P.match_length=V(P,X),P.match_length<=5&&(P.strategy===1||P.match_length===N&&4096<P.strstart-P.match_start)&&(P.match_length=N-1)),P.prev_length>=N&&P.match_length<=P.prev_length){for(H=P.strstart+P.lookahead-N,W=o._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-N),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=H&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,X=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=N-1,P.strstart++,W&&(U(P,!1),P.strm.avail_out===0))return k}else if(P.match_available){if((W=o._tr_tally(P,0,P.window[P.strstart-1]))&&U(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return k}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(W=o._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<N-1?P.strstart:N-1,Q===h?(U(P,!0),P.strm.avail_out===0?$:D):P.last_lit&&(U(P,!1),P.strm.avail_out===0)?k:O}function oe(P,Q,X,W,H){this.good_length=P,this.max_lazy=Q,this.nice_length=X,this.max_chain=W,this.func=H}function ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*S+1)),this.bl_tree=new s.Buf16(2*(2*E+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(I+1),this.heap=new s.Buf16(2*w+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*w+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function se(P){var Q;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=x,(Q=P.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?C:A,P.adler=Q.wrap===2?0:1,Q.last_flush=f,o._tr_init(Q),p):R(P,m)}function Te(P){var Q=se(P);return Q===p&&function(X){X.window_size=2*X.w_size,L(X.head),X.max_lazy_match=i[X.level].max_lazy,X.good_match=i[X.level].good_length,X.nice_match=i[X.level].nice_length,X.max_chain_length=i[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=N-1,X.match_available=0,X.ins_h=0}(P.state),Q}function Fe(P,Q,X,W,H,G){if(!P)return m;var J=1;if(Q===g&&(Q=6),W<0?(J=0,W=-W):15<W&&(J=2,W-=16),H<1||b<H||X!==v||W<8||15<W||Q<0||9<Q||G<0||y<G)return R(P,m);W===8&&(W=9);var ae=new ye;return(P.state=ae).strm=P,ae.wrap=J,ae.gzhead=null,ae.w_bits=W,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=H+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+N-1)/N),ae.window=new s.Buf8(2*ae.w_size),ae.head=new s.Buf16(ae.hash_size),ae.prev=new s.Buf16(ae.w_size),ae.lit_bufsize=1<<H+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new s.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=Q,ae.strategy=G,ae.method=X,Te(P)}i=[new oe(0,0,0,0,function(P,Q){var X=65535;for(X>P.pending_buf_size-5&&(X=P.pending_buf_size-5);;){if(P.lookahead<=1){if(re(P),P.lookahead===0&&Q===f)return k;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var W=P.block_start+X;if((P.strstart===0||P.strstart>=W)&&(P.lookahead=P.strstart-W,P.strstart=W,U(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-F&&(U(P,!1),P.strm.avail_out===0))return k}return P.insert=0,Q===h?(U(P,!0),P.strm.avail_out===0?$:D):(P.strstart>P.block_start&&(U(P,!1),P.strm.avail_out),k)}),new oe(4,4,8,4,ue),new oe(4,5,16,8,ue),new oe(4,6,32,32,ue),new oe(4,4,16,16,ie),new oe(8,16,32,32,ie),new oe(8,16,128,128,ie),new oe(8,32,128,256,ie),new oe(32,128,258,1024,ie),new oe(32,258,258,4096,ie)],a.deflateInit=function(P,Q){return Fe(P,Q,v,15,8,0)},a.deflateInit2=Fe,a.deflateReset=Te,a.deflateResetKeep=se,a.deflateSetHeader=function(P,Q){return P&&P.state?P.state.wrap!==2?m:(P.state.gzhead=Q,p):m},a.deflate=function(P,Q){var X,W,H,G;if(!P||!P.state||5<Q||Q<0)return P?R(P,m):m;if(W=P.state,!P.output||!P.input&&P.avail_in!==0||W.status===666&&Q!==h)return R(P,P.avail_out===0?-5:m);if(W.strm=P,X=W.last_flush,W.last_flush=Q,W.status===C)if(W.wrap===2)P.adler=0,q(W,31),q(W,139),q(W,8),W.gzhead?(q(W,(W.gzhead.text?1:0)+(W.gzhead.hcrc?2:0)+(W.gzhead.extra?4:0)+(W.gzhead.name?8:0)+(W.gzhead.comment?16:0)),q(W,255&W.gzhead.time),q(W,W.gzhead.time>>8&255),q(W,W.gzhead.time>>16&255),q(W,W.gzhead.time>>24&255),q(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),q(W,255&W.gzhead.os),W.gzhead.extra&&W.gzhead.extra.length&&(q(W,255&W.gzhead.extra.length),q(W,W.gzhead.extra.length>>8&255)),W.gzhead.hcrc&&(P.adler=u(P.adler,W.pending_buf,W.pending,0)),W.gzindex=0,W.status=69):(q(W,0),q(W,0),q(W,0),q(W,0),q(W,0),q(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),q(W,3),W.status=A);else{var J=v+(W.w_bits-8<<4)<<8;J|=(2<=W.strategy||W.level<2?0:W.level<6?1:W.level===6?2:3)<<6,W.strstart!==0&&(J|=32),J+=31-J%31,W.status=A,te(W,J),W.strstart!==0&&(te(W,P.adler>>>16),te(W,65535&P.adler)),P.adler=1}if(W.status===69)if(W.gzhead.extra){for(H=W.pending;W.gzindex<(65535&W.gzhead.extra.length)&&(W.pending!==W.pending_buf_size||(W.gzhead.hcrc&&W.pending>H&&(P.adler=u(P.adler,W.pending_buf,W.pending-H,H)),B(P),H=W.pending,W.pending!==W.pending_buf_size));)q(W,255&W.gzhead.extra[W.gzindex]),W.gzindex++;W.gzhead.hcrc&&W.pending>H&&(P.adler=u(P.adler,W.pending_buf,W.pending-H,H)),W.gzindex===W.gzhead.extra.length&&(W.gzindex=0,W.status=73)}else W.status=73;if(W.status===73)if(W.gzhead.name){H=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>H&&(P.adler=u(P.adler,W.pending_buf,W.pending-H,H)),B(P),H=W.pending,W.pending===W.pending_buf_size)){G=1;break}G=W.gzindex<W.gzhead.name.length?255&W.gzhead.name.charCodeAt(W.gzindex++):0,q(W,G)}while(G!==0);W.gzhead.hcrc&&W.pending>H&&(P.adler=u(P.adler,W.pending_buf,W.pending-H,H)),G===0&&(W.gzindex=0,W.status=91)}else W.status=91;if(W.status===91)if(W.gzhead.comment){H=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>H&&(P.adler=u(P.adler,W.pending_buf,W.pending-H,H)),B(P),H=W.pending,W.pending===W.pending_buf_size)){G=1;break}G=W.gzindex<W.gzhead.comment.length?255&W.gzhead.comment.charCodeAt(W.gzindex++):0,q(W,G)}while(G!==0);W.gzhead.hcrc&&W.pending>H&&(P.adler=u(P.adler,W.pending_buf,W.pending-H,H)),G===0&&(W.status=103)}else W.status=103;if(W.status===103&&(W.gzhead.hcrc?(W.pending+2>W.pending_buf_size&&B(P),W.pending+2<=W.pending_buf_size&&(q(W,255&P.adler),q(W,P.adler>>8&255),P.adler=0,W.status=A)):W.status=A),W.pending!==0){if(B(P),P.avail_out===0)return W.last_flush=-1,p}else if(P.avail_in===0&&M(Q)<=M(X)&&Q!==h)return R(P,-5);if(W.status===666&&P.avail_in!==0)return R(P,-5);if(P.avail_in!==0||W.lookahead!==0||Q!==f&&W.status!==666){var ae=W.strategy===2?function(Z,ce){for(var ve;;){if(Z.lookahead===0&&(re(Z),Z.lookahead===0)){if(ce===f)return k;break}if(Z.match_length=0,ve=o._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++,ve&&(U(Z,!1),Z.strm.avail_out===0))return k}return Z.insert=0,ce===h?(U(Z,!0),Z.strm.avail_out===0?$:D):Z.last_lit&&(U(Z,!1),Z.strm.avail_out===0)?k:O}(W,Q):W.strategy===3?function(Z,ce){for(var ve,fe,_e,Ve,Re=Z.window;;){if(Z.lookahead<=T){if(re(Z),Z.lookahead<=T&&ce===f)return k;if(Z.lookahead===0)break}if(Z.match_length=0,Z.lookahead>=N&&0<Z.strstart&&(fe=Re[_e=Z.strstart-1])===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]){Ve=Z.strstart+T;do;while(fe===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]&&fe===Re[++_e]&&_e<Ve);Z.match_length=T-(Ve-_e),Z.match_length>Z.lookahead&&(Z.match_length=Z.lookahead)}if(Z.match_length>=N?(ve=o._tr_tally(Z,1,Z.match_length-N),Z.lookahead-=Z.match_length,Z.strstart+=Z.match_length,Z.match_length=0):(ve=o._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++),ve&&(U(Z,!1),Z.strm.avail_out===0))return k}return Z.insert=0,ce===h?(U(Z,!0),Z.strm.avail_out===0?$:D):Z.last_lit&&(U(Z,!1),Z.strm.avail_out===0)?k:O}(W,Q):i[W.level].func(W,Q);if(ae!==$&&ae!==D||(W.status=666),ae===k||ae===$)return P.avail_out===0&&(W.last_flush=-1),p;if(ae===O&&(Q===1?o._tr_align(W):Q!==5&&(o._tr_stored_block(W,0,0,!1),Q===3&&(L(W.head),W.lookahead===0&&(W.strstart=0,W.block_start=0,W.insert=0))),B(P),P.avail_out===0))return W.last_flush=-1,p}return Q!==h?p:W.wrap<=0?1:(W.wrap===2?(q(W,255&P.adler),q(W,P.adler>>8&255),q(W,P.adler>>16&255),q(W,P.adler>>24&255),q(W,255&P.total_in),q(W,P.total_in>>8&255),q(W,P.total_in>>16&255),q(W,P.total_in>>24&255)):(te(W,P.adler>>>16),te(W,65535&P.adler)),B(P),0<W.wrap&&(W.wrap=-W.wrap),W.pending!==0?p:1)},a.deflateEnd=function(P){var Q;return P&&P.state?(Q=P.state.status)!==C&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==A&&Q!==666?R(P,m):(P.state=null,Q===A?R(P,-3):p):m},a.deflateSetDictionary=function(P,Q){var X,W,H,G,J,ae,Z,ce,ve=Q.length;if(!P||!P.state||(G=(X=P.state).wrap)===2||G===1&&X.status!==C||X.lookahead)return m;for(G===1&&(P.adler=c(P.adler,Q,ve,0)),X.wrap=0,ve>=X.w_size&&(G===0&&(L(X.head),X.strstart=0,X.block_start=0,X.insert=0),ce=new s.Buf8(X.w_size),s.arraySet(ce,Q,ve-X.w_size,X.w_size,0),Q=ce,ve=X.w_size),J=P.avail_in,ae=P.next_in,Z=P.input,P.avail_in=ve,P.next_in=0,P.input=Q,re(X);X.lookahead>=N;){for(W=X.strstart,H=X.lookahead-(N-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[W+N-1])&X.hash_mask,X.prev[W&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=W,W++,--H;);X.strstart=W,X.lookahead=N-1,re(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=N-1,X.match_available=0,P.next_in=ae,P.input=Z,P.avail_in=J,X.wrap=G,p},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,a){n.exports=function(i,s){var o,c,u,d,f,h,p,m,g,y,x,v,b,w,S,E,j,I,N,T,F,C,A,k,O;o=i.state,c=i.next_in,k=i.input,u=c+(i.avail_in-5),d=i.next_out,O=i.output,f=d-(s-i.avail_out),h=d+(i.avail_out-257),p=o.dmax,m=o.wsize,g=o.whave,y=o.wnext,x=o.window,v=o.hold,b=o.bits,w=o.lencode,S=o.distcode,E=(1<<o.lenbits)-1,j=(1<<o.distbits)-1;e:do{b<15&&(v+=k[c++]<<b,b+=8,v+=k[c++]<<b,b+=8),I=w[v&E];t:for(;;){if(v>>>=N=I>>>24,b-=N,(N=I>>>16&255)===0)O[d++]=65535&I;else{if(!(16&N)){if(!(64&N)){I=w[(65535&I)+(v&(1<<N)-1)];continue t}if(32&N){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}T=65535&I,(N&=15)&&(b<N&&(v+=k[c++]<<b,b+=8),T+=v&(1<<N)-1,v>>>=N,b-=N),b<15&&(v+=k[c++]<<b,b+=8,v+=k[c++]<<b,b+=8),I=S[v&j];r:for(;;){if(v>>>=N=I>>>24,b-=N,!(16&(N=I>>>16&255))){if(!(64&N)){I=S[(65535&I)+(v&(1<<N)-1)];continue r}i.msg="invalid distance code",o.mode=30;break e}if(F=65535&I,b<(N&=15)&&(v+=k[c++]<<b,(b+=8)<N&&(v+=k[c++]<<b,b+=8)),p<(F+=v&(1<<N)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=N,b-=N,(N=d-f)<F){if(g<(N=F-N)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(A=x,(C=0)===y){if(C+=m-N,N<T){for(T-=N;O[d++]=x[C++],--N;);C=d-F,A=O}}else if(y<N){if(C+=m+y-N,(N-=y)<T){for(T-=N;O[d++]=x[C++],--N;);if(C=0,y<T){for(T-=N=y;O[d++]=x[C++],--N;);C=d-F,A=O}}}else if(C+=y-N,N<T){for(T-=N;O[d++]=x[C++],--N;);C=d-F,A=O}for(;2<T;)O[d++]=A[C++],O[d++]=A[C++],O[d++]=A[C++],T-=3;T&&(O[d++]=A[C++],1<T&&(O[d++]=A[C++]))}else{for(C=d-F;O[d++]=O[C++],O[d++]=O[C++],O[d++]=O[C++],2<(T-=3););T&&(O[d++]=O[C++],1<T&&(O[d++]=O[C++]))}break}}break}}while(c<u&&d<h);c-=T=b>>3,v&=(1<<(b-=T<<3))-1,i.next_in=c,i.next_out=d,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=d<h?h-d+257:257-(d-h),o.hold=v,o.bits=b}},{}],49:[function(r,n,a){var i=r("../utils/common"),s=r("./adler32"),o=r("./crc32"),c=r("./inffast"),u=r("./inftrees"),d=1,f=2,h=0,p=-2,m=1,g=852,y=592;function x(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(C){var A;return C&&C.state?(A=C.state,C.total_in=C.total_out=A.total=0,C.msg="",A.wrap&&(C.adler=1&A.wrap),A.mode=m,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new i.Buf32(g),A.distcode=A.distdyn=new i.Buf32(y),A.sane=1,A.back=-1,h):p}function w(C){var A;return C&&C.state?((A=C.state).wsize=0,A.whave=0,A.wnext=0,b(C)):p}function S(C,A){var k,O;return C&&C.state?(O=C.state,A<0?(k=0,A=-A):(k=1+(A>>4),A<48&&(A&=15)),A&&(A<8||15<A)?p:(O.window!==null&&O.wbits!==A&&(O.window=null),O.wrap=k,O.wbits=A,w(C))):p}function E(C,A){var k,O;return C?(O=new v,(C.state=O).window=null,(k=S(C,A))!==h&&(C.state=null),k):p}var j,I,N=!0;function T(C){if(N){var A;for(j=new i.Buf32(512),I=new i.Buf32(32),A=0;A<144;)C.lens[A++]=8;for(;A<256;)C.lens[A++]=9;for(;A<280;)C.lens[A++]=7;for(;A<288;)C.lens[A++]=8;for(u(d,C.lens,0,288,j,0,C.work,{bits:9}),A=0;A<32;)C.lens[A++]=5;u(f,C.lens,0,32,I,0,C.work,{bits:5}),N=!1}C.lencode=j,C.lenbits=9,C.distcode=I,C.distbits=5}function F(C,A,k,O){var $,D=C.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new i.Buf8(D.wsize)),O>=D.wsize?(i.arraySet(D.window,A,k-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(O<($=D.wsize-D.wnext)&&($=O),i.arraySet(D.window,A,k-O,$,D.wnext),(O-=$)?(i.arraySet(D.window,A,k-O,O,0),D.wnext=O,D.whave=D.wsize):(D.wnext+=$,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=$))),0}a.inflateReset=w,a.inflateReset2=S,a.inflateResetKeep=b,a.inflateInit=function(C){return E(C,15)},a.inflateInit2=E,a.inflate=function(C,A){var k,O,$,D,R,M,L,B,U,q,te,V,re,ue,ie,oe,ye,se,Te,Fe,P,Q,X,W,H=0,G=new i.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return p;(k=C.state).mode===12&&(k.mode=13),R=C.next_out,$=C.output,L=C.avail_out,D=C.next_in,O=C.input,M=C.avail_in,B=k.hold,U=k.bits,q=M,te=L,Q=h;e:for(;;)switch(k.mode){case m:if(k.wrap===0){k.mode=13;break}for(;U<16;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(2&k.wrap&&B===35615){G[k.check=0]=255&B,G[1]=B>>>8&255,k.check=o(k.check,G,2,0),U=B=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&B)<<8)+(B>>8))%31){C.msg="incorrect header check",k.mode=30;break}if((15&B)!=8){C.msg="unknown compression method",k.mode=30;break}if(U-=4,P=8+(15&(B>>>=4)),k.wbits===0)k.wbits=P;else if(P>k.wbits){C.msg="invalid window size",k.mode=30;break}k.dmax=1<<P,C.adler=k.check=1,k.mode=512&B?10:12,U=B=0;break;case 2:for(;U<16;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(k.flags=B,(255&k.flags)!=8){C.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){C.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=B>>8&1),512&k.flags&&(G[0]=255&B,G[1]=B>>>8&255,k.check=o(k.check,G,2,0)),U=B=0,k.mode=3;case 3:for(;U<32;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}k.head&&(k.head.time=B),512&k.flags&&(G[0]=255&B,G[1]=B>>>8&255,G[2]=B>>>16&255,G[3]=B>>>24&255,k.check=o(k.check,G,4,0)),U=B=0,k.mode=4;case 4:for(;U<16;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}k.head&&(k.head.xflags=255&B,k.head.os=B>>8),512&k.flags&&(G[0]=255&B,G[1]=B>>>8&255,k.check=o(k.check,G,2,0)),U=B=0,k.mode=5;case 5:if(1024&k.flags){for(;U<16;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}k.length=B,k.head&&(k.head.extra_len=B),512&k.flags&&(G[0]=255&B,G[1]=B>>>8&255,k.check=o(k.check,G,2,0)),U=B=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(M<(V=k.length)&&(V=M),V&&(k.head&&(P=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),i.arraySet(k.head.extra,O,D,V,P)),512&k.flags&&(k.check=o(k.check,O,V,D)),M-=V,D+=V,k.length-=V),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(M===0)break e;for(V=0;P=O[D+V++],k.head&&P&&k.length<65536&&(k.head.name+=String.fromCharCode(P)),P&&V<M;);if(512&k.flags&&(k.check=o(k.check,O,V,D)),M-=V,D+=V,P)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(M===0)break e;for(V=0;P=O[D+V++],k.head&&P&&k.length<65536&&(k.head.comment+=String.fromCharCode(P)),P&&V<M;);if(512&k.flags&&(k.check=o(k.check,O,V,D)),M-=V,D+=V,P)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;U<16;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(B!==(65535&k.check)){C.msg="header crc mismatch",k.mode=30;break}U=B=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),C.adler=k.check=0,k.mode=12;break;case 10:for(;U<32;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}C.adler=k.check=x(B),U=B=0,k.mode=11;case 11:if(k.havedict===0)return C.next_out=R,C.avail_out=L,C.next_in=D,C.avail_in=M,k.hold=B,k.bits=U,2;C.adler=k.check=1,k.mode=12;case 12:if(A===5||A===6)break e;case 13:if(k.last){B>>>=7&U,U-=7&U,k.mode=27;break}for(;U<3;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}switch(k.last=1&B,U-=1,3&(B>>>=1)){case 0:k.mode=14;break;case 1:if(T(k),k.mode=20,A!==6)break;B>>>=2,U-=2;break e;case 2:k.mode=17;break;case 3:C.msg="invalid block type",k.mode=30}B>>>=2,U-=2;break;case 14:for(B>>>=7&U,U-=7&U;U<32;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if((65535&B)!=(B>>>16^65535)){C.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&B,U=B=0,k.mode=15,A===6)break e;case 15:k.mode=16;case 16:if(V=k.length){if(M<V&&(V=M),L<V&&(V=L),V===0)break e;i.arraySet($,O,D,V,R),M-=V,D+=V,L-=V,R+=V,k.length-=V;break}k.mode=12;break;case 17:for(;U<14;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(k.nlen=257+(31&B),B>>>=5,U-=5,k.ndist=1+(31&B),B>>>=5,U-=5,k.ncode=4+(15&B),B>>>=4,U-=4,286<k.nlen||30<k.ndist){C.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;U<3;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}k.lens[J[k.have++]]=7&B,B>>>=3,U-=3}for(;k.have<19;)k.lens[J[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,X={bits:k.lenbits},Q=u(0,k.lens,0,19,k.lencode,0,k.work,X),k.lenbits=X.bits,Q){C.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;oe=(H=k.lencode[B&(1<<k.lenbits)-1])>>>16&255,ye=65535&H,!((ie=H>>>24)<=U);){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(ye<16)B>>>=ie,U-=ie,k.lens[k.have++]=ye;else{if(ye===16){for(W=ie+2;U<W;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(B>>>=ie,U-=ie,k.have===0){C.msg="invalid bit length repeat",k.mode=30;break}P=k.lens[k.have-1],V=3+(3&B),B>>>=2,U-=2}else if(ye===17){for(W=ie+3;U<W;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}U-=ie,P=0,V=3+(7&(B>>>=ie)),B>>>=3,U-=3}else{for(W=ie+7;U<W;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}U-=ie,P=0,V=11+(127&(B>>>=ie)),B>>>=7,U-=7}if(k.have+V>k.nlen+k.ndist){C.msg="invalid bit length repeat",k.mode=30;break}for(;V--;)k.lens[k.have++]=P}}if(k.mode===30)break;if(k.lens[256]===0){C.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,X={bits:k.lenbits},Q=u(d,k.lens,0,k.nlen,k.lencode,0,k.work,X),k.lenbits=X.bits,Q){C.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,X={bits:k.distbits},Q=u(f,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,X),k.distbits=X.bits,Q){C.msg="invalid distances set",k.mode=30;break}if(k.mode=20,A===6)break e;case 20:k.mode=21;case 21:if(6<=M&&258<=L){C.next_out=R,C.avail_out=L,C.next_in=D,C.avail_in=M,k.hold=B,k.bits=U,c(C,te),R=C.next_out,$=C.output,L=C.avail_out,D=C.next_in,O=C.input,M=C.avail_in,B=k.hold,U=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;oe=(H=k.lencode[B&(1<<k.lenbits)-1])>>>16&255,ye=65535&H,!((ie=H>>>24)<=U);){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(oe&&!(240&oe)){for(se=ie,Te=oe,Fe=ye;oe=(H=k.lencode[Fe+((B&(1<<se+Te)-1)>>se)])>>>16&255,ye=65535&H,!(se+(ie=H>>>24)<=U);){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}B>>>=se,U-=se,k.back+=se}if(B>>>=ie,U-=ie,k.back+=ie,k.length=ye,oe===0){k.mode=26;break}if(32&oe){k.back=-1,k.mode=12;break}if(64&oe){C.msg="invalid literal/length code",k.mode=30;break}k.extra=15&oe,k.mode=22;case 22:if(k.extra){for(W=k.extra;U<W;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}k.length+=B&(1<<k.extra)-1,B>>>=k.extra,U-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;oe=(H=k.distcode[B&(1<<k.distbits)-1])>>>16&255,ye=65535&H,!((ie=H>>>24)<=U);){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(!(240&oe)){for(se=ie,Te=oe,Fe=ye;oe=(H=k.distcode[Fe+((B&(1<<se+Te)-1)>>se)])>>>16&255,ye=65535&H,!(se+(ie=H>>>24)<=U);){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}B>>>=se,U-=se,k.back+=se}if(B>>>=ie,U-=ie,k.back+=ie,64&oe){C.msg="invalid distance code",k.mode=30;break}k.offset=ye,k.extra=15&oe,k.mode=24;case 24:if(k.extra){for(W=k.extra;U<W;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}k.offset+=B&(1<<k.extra)-1,B>>>=k.extra,U-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){C.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(L===0)break e;if(V=te-L,k.offset>V){if((V=k.offset-V)>k.whave&&k.sane){C.msg="invalid distance too far back",k.mode=30;break}re=V>k.wnext?(V-=k.wnext,k.wsize-V):k.wnext-V,V>k.length&&(V=k.length),ue=k.window}else ue=$,re=R-k.offset,V=k.length;for(L<V&&(V=L),L-=V,k.length-=V;$[R++]=ue[re++],--V;);k.length===0&&(k.mode=21);break;case 26:if(L===0)break e;$[R++]=k.length,L--,k.mode=21;break;case 27:if(k.wrap){for(;U<32;){if(M===0)break e;M--,B|=O[D++]<<U,U+=8}if(te-=L,C.total_out+=te,k.total+=te,te&&(C.adler=k.check=k.flags?o(k.check,$,te,R-te):s(k.check,$,te,R-te)),te=L,(k.flags?B:x(B))!==k.check){C.msg="incorrect data check",k.mode=30;break}U=B=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;U<32;){if(M===0)break e;M--,B+=O[D++]<<U,U+=8}if(B!==(4294967295&k.total)){C.msg="incorrect length check",k.mode=30;break}U=B=0}k.mode=29;case 29:Q=1;break e;case 30:Q=-3;break e;case 31:return-4;case 32:default:return p}return C.next_out=R,C.avail_out=L,C.next_in=D,C.avail_in=M,k.hold=B,k.bits=U,(k.wsize||te!==C.avail_out&&k.mode<30&&(k.mode<27||A!==4))&&F(C,C.output,C.next_out,te-C.avail_out)?(k.mode=31,-4):(q-=C.avail_in,te-=C.avail_out,C.total_in+=q,C.total_out+=te,k.total+=te,k.wrap&&te&&(C.adler=k.check=k.flags?o(k.check,$,te,C.next_out-te):s(k.check,$,te,C.next_out-te)),C.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(q==0&&te===0||A===4)&&Q===h&&(Q=-5),Q)},a.inflateEnd=function(C){if(!C||!C.state)return p;var A=C.state;return A.window&&(A.window=null),C.state=null,h},a.inflateGetHeader=function(C,A){var k;return C&&C.state&&2&(k=C.state).wrap?((k.head=A).done=!1,h):p},a.inflateSetDictionary=function(C,A){var k,O=A.length;return C&&C.state?(k=C.state).wrap!==0&&k.mode!==11?p:k.mode===11&&s(1,A,O,0)!==k.check?-3:F(C,A,O,O)?(k.mode=31,-4):(k.havedict=1,h):p},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,a){var i=r("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,f,h,p,m,g,y,x){var v,b,w,S,E,j,I,N,T,F=x.bits,C=0,A=0,k=0,O=0,$=0,D=0,R=0,M=0,L=0,B=0,U=null,q=0,te=new i.Buf16(16),V=new i.Buf16(16),re=null,ue=0;for(C=0;C<=15;C++)te[C]=0;for(A=0;A<p;A++)te[f[h+A]]++;for($=F,O=15;1<=O&&te[O]===0;O--);if(O<$&&($=O),O===0)return m[g++]=20971520,m[g++]=20971520,x.bits=1,0;for(k=1;k<O&&te[k]===0;k++);for($<k&&($=k),C=M=1;C<=15;C++)if(M<<=1,(M-=te[C])<0)return-1;if(0<M&&(d===0||O!==1))return-1;for(V[1]=0,C=1;C<15;C++)V[C+1]=V[C]+te[C];for(A=0;A<p;A++)f[h+A]!==0&&(y[V[f[h+A]]++]=A);if(j=d===0?(U=re=y,19):d===1?(U=s,q-=257,re=o,ue-=257,256):(U=c,re=u,-1),C=k,E=g,R=A=B=0,w=-1,S=(L=1<<(D=$))-1,d===1&&852<L||d===2&&592<L)return 1;for(;;){for(I=C-R,T=y[A]<j?(N=0,y[A]):y[A]>j?(N=re[ue+y[A]],U[q+y[A]]):(N=96,0),v=1<<C-R,k=b=1<<D;m[E+(B>>R)+(b-=v)]=I<<24|N<<16|T|0,b!==0;);for(v=1<<C-1;B&v;)v>>=1;if(v!==0?(B&=v-1,B+=v):B=0,A++,--te[C]==0){if(C===O)break;C=f[h+y[A]]}if($<C&&(B&S)!==w){for(R===0&&(R=$),E+=k,M=1<<(D=C-R);D+R<O&&!((M-=te[D+R])<=0);)D++,M<<=1;if(L+=1<<D,d===1&&852<L||d===2&&592<L)return 1;m[w=B&S]=$<<24|D<<16|E-g|0}}return B!==0&&(m[E+B]=C-R<<24|64<<16|0),x.bits=$,0}},{"../utils/common":41}],51:[function(r,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,a){var i=r("../utils/common"),s=0,o=1;function c(H){for(var G=H.length;0<=--G;)H[G]=0}var u=0,d=29,f=256,h=f+1+d,p=30,m=19,g=2*h+1,y=15,x=16,v=7,b=256,w=16,S=17,E=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));c(F);var C=new Array(2*p);c(C);var A=new Array(512);c(A);var k=new Array(256);c(k);var O=new Array(d);c(O);var $,D,R,M=new Array(p);function L(H,G,J,ae,Z){this.static_tree=H,this.extra_bits=G,this.extra_base=J,this.elems=ae,this.max_length=Z,this.has_stree=H&&H.length}function B(H,G){this.dyn_tree=H,this.max_code=0,this.stat_desc=G}function U(H){return H<256?A[H]:A[256+(H>>>7)]}function q(H,G){H.pending_buf[H.pending++]=255&G,H.pending_buf[H.pending++]=G>>>8&255}function te(H,G,J){H.bi_valid>x-J?(H.bi_buf|=G<<H.bi_valid&65535,q(H,H.bi_buf),H.bi_buf=G>>x-H.bi_valid,H.bi_valid+=J-x):(H.bi_buf|=G<<H.bi_valid&65535,H.bi_valid+=J)}function V(H,G,J){te(H,J[2*G],J[2*G+1])}function re(H,G){for(var J=0;J|=1&H,H>>>=1,J<<=1,0<--G;);return J>>>1}function ue(H,G,J){var ae,Z,ce=new Array(y+1),ve=0;for(ae=1;ae<=y;ae++)ce[ae]=ve=ve+J[ae-1]<<1;for(Z=0;Z<=G;Z++){var fe=H[2*Z+1];fe!==0&&(H[2*Z]=re(ce[fe]++,fe))}}function ie(H){var G;for(G=0;G<h;G++)H.dyn_ltree[2*G]=0;for(G=0;G<p;G++)H.dyn_dtree[2*G]=0;for(G=0;G<m;G++)H.bl_tree[2*G]=0;H.dyn_ltree[2*b]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function oe(H){8<H.bi_valid?q(H,H.bi_buf):0<H.bi_valid&&(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function ye(H,G,J,ae){var Z=2*G,ce=2*J;return H[Z]<H[ce]||H[Z]===H[ce]&&ae[G]<=ae[J]}function se(H,G,J){for(var ae=H.heap[J],Z=J<<1;Z<=H.heap_len&&(Z<H.heap_len&&ye(G,H.heap[Z+1],H.heap[Z],H.depth)&&Z++,!ye(G,ae,H.heap[Z],H.depth));)H.heap[J]=H.heap[Z],J=Z,Z<<=1;H.heap[J]=ae}function Te(H,G,J){var ae,Z,ce,ve,fe=0;if(H.last_lit!==0)for(;ae=H.pending_buf[H.d_buf+2*fe]<<8|H.pending_buf[H.d_buf+2*fe+1],Z=H.pending_buf[H.l_buf+fe],fe++,ae===0?V(H,Z,G):(V(H,(ce=k[Z])+f+1,G),(ve=j[ce])!==0&&te(H,Z-=O[ce],ve),V(H,ce=U(--ae),J),(ve=I[ce])!==0&&te(H,ae-=M[ce],ve)),fe<H.last_lit;);V(H,b,G)}function Fe(H,G){var J,ae,Z,ce=G.dyn_tree,ve=G.stat_desc.static_tree,fe=G.stat_desc.has_stree,_e=G.stat_desc.elems,Ve=-1;for(H.heap_len=0,H.heap_max=g,J=0;J<_e;J++)ce[2*J]!==0?(H.heap[++H.heap_len]=Ve=J,H.depth[J]=0):ce[2*J+1]=0;for(;H.heap_len<2;)ce[2*(Z=H.heap[++H.heap_len]=Ve<2?++Ve:0)]=1,H.depth[Z]=0,H.opt_len--,fe&&(H.static_len-=ve[2*Z+1]);for(G.max_code=Ve,J=H.heap_len>>1;1<=J;J--)se(H,ce,J);for(Z=_e;J=H.heap[1],H.heap[1]=H.heap[H.heap_len--],se(H,ce,1),ae=H.heap[1],H.heap[--H.heap_max]=J,H.heap[--H.heap_max]=ae,ce[2*Z]=ce[2*J]+ce[2*ae],H.depth[Z]=(H.depth[J]>=H.depth[ae]?H.depth[J]:H.depth[ae])+1,ce[2*J+1]=ce[2*ae+1]=Z,H.heap[1]=Z++,se(H,ce,1),2<=H.heap_len;);H.heap[--H.heap_max]=H.heap[1],function(Re,Gt){var Un,an,zn,nt,Tr,St,sn=Gt.dyn_tree,Vi=Gt.max_code,Gi=Gt.stat_desc.static_tree,Qs=Gt.stat_desc.has_stree,Xi=Gt.stat_desc.extra_bits,pi=Gt.stat_desc.extra_base,Hn=Gt.stat_desc.max_length,Ba=0;for(nt=0;nt<=y;nt++)Re.bl_count[nt]=0;for(sn[2*Re.heap[Re.heap_max]+1]=0,Un=Re.heap_max+1;Un<g;Un++)Hn<(nt=sn[2*sn[2*(an=Re.heap[Un])+1]+1]+1)&&(nt=Hn,Ba++),sn[2*an+1]=nt,Vi<an||(Re.bl_count[nt]++,Tr=0,pi<=an&&(Tr=Xi[an-pi]),St=sn[2*an],Re.opt_len+=St*(nt+Tr),Qs&&(Re.static_len+=St*(Gi[2*an+1]+Tr)));if(Ba!==0){do{for(nt=Hn-1;Re.bl_count[nt]===0;)nt--;Re.bl_count[nt]--,Re.bl_count[nt+1]+=2,Re.bl_count[Hn]--,Ba-=2}while(0<Ba);for(nt=Hn;nt!==0;nt--)for(an=Re.bl_count[nt];an!==0;)Vi<(zn=Re.heap[--Un])||(sn[2*zn+1]!==nt&&(Re.opt_len+=(nt-sn[2*zn+1])*sn[2*zn],sn[2*zn+1]=nt),an--)}}(H,G),ue(ce,Ve,H.bl_count)}function P(H,G,J){var ae,Z,ce=-1,ve=G[1],fe=0,_e=7,Ve=4;for(ve===0&&(_e=138,Ve=3),G[2*(J+1)+1]=65535,ae=0;ae<=J;ae++)Z=ve,ve=G[2*(ae+1)+1],++fe<_e&&Z===ve||(fe<Ve?H.bl_tree[2*Z]+=fe:Z!==0?(Z!==ce&&H.bl_tree[2*Z]++,H.bl_tree[2*w]++):fe<=10?H.bl_tree[2*S]++:H.bl_tree[2*E]++,ce=Z,Ve=(fe=0)===ve?(_e=138,3):Z===ve?(_e=6,3):(_e=7,4))}function Q(H,G,J){var ae,Z,ce=-1,ve=G[1],fe=0,_e=7,Ve=4;for(ve===0&&(_e=138,Ve=3),ae=0;ae<=J;ae++)if(Z=ve,ve=G[2*(ae+1)+1],!(++fe<_e&&Z===ve)){if(fe<Ve)for(;V(H,Z,H.bl_tree),--fe!=0;);else Z!==0?(Z!==ce&&(V(H,Z,H.bl_tree),fe--),V(H,w,H.bl_tree),te(H,fe-3,2)):fe<=10?(V(H,S,H.bl_tree),te(H,fe-3,3)):(V(H,E,H.bl_tree),te(H,fe-11,7));ce=Z,Ve=(fe=0)===ve?(_e=138,3):Z===ve?(_e=6,3):(_e=7,4)}}c(M);var X=!1;function W(H,G,J,ae){te(H,(u<<1)+(ae?1:0),3),function(Z,ce,ve,fe){oe(Z),q(Z,ve),q(Z,~ve),i.arraySet(Z.pending_buf,Z.window,ce,ve,Z.pending),Z.pending+=ve}(H,G,J)}a._tr_init=function(H){X||(function(){var G,J,ae,Z,ce,ve=new Array(y+1);for(Z=ae=0;Z<d-1;Z++)for(O[Z]=ae,G=0;G<1<<j[Z];G++)k[ae++]=Z;for(k[ae-1]=Z,Z=ce=0;Z<16;Z++)for(M[Z]=ce,G=0;G<1<<I[Z];G++)A[ce++]=Z;for(ce>>=7;Z<p;Z++)for(M[Z]=ce<<7,G=0;G<1<<I[Z]-7;G++)A[256+ce++]=Z;for(J=0;J<=y;J++)ve[J]=0;for(G=0;G<=143;)F[2*G+1]=8,G++,ve[8]++;for(;G<=255;)F[2*G+1]=9,G++,ve[9]++;for(;G<=279;)F[2*G+1]=7,G++,ve[7]++;for(;G<=287;)F[2*G+1]=8,G++,ve[8]++;for(ue(F,h+1,ve),G=0;G<p;G++)C[2*G+1]=5,C[2*G]=re(G,5);$=new L(F,j,f+1,h,y),D=new L(C,I,0,p,y),R=new L(new Array(0),N,0,m,v)}(),X=!0),H.l_desc=new B(H.dyn_ltree,$),H.d_desc=new B(H.dyn_dtree,D),H.bl_desc=new B(H.bl_tree,R),H.bi_buf=0,H.bi_valid=0,ie(H)},a._tr_stored_block=W,a._tr_flush_block=function(H,G,J,ae){var Z,ce,ve=0;0<H.level?(H.strm.data_type===2&&(H.strm.data_type=function(fe){var _e,Ve=4093624447;for(_e=0;_e<=31;_e++,Ve>>>=1)if(1&Ve&&fe.dyn_ltree[2*_e]!==0)return s;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return o;for(_e=32;_e<f;_e++)if(fe.dyn_ltree[2*_e]!==0)return o;return s}(H)),Fe(H,H.l_desc),Fe(H,H.d_desc),ve=function(fe){var _e;for(P(fe,fe.dyn_ltree,fe.l_desc.max_code),P(fe,fe.dyn_dtree,fe.d_desc.max_code),Fe(fe,fe.bl_desc),_e=m-1;3<=_e&&fe.bl_tree[2*T[_e]+1]===0;_e--);return fe.opt_len+=3*(_e+1)+5+5+4,_e}(H),Z=H.opt_len+3+7>>>3,(ce=H.static_len+3+7>>>3)<=Z&&(Z=ce)):Z=ce=J+5,J+4<=Z&&G!==-1?W(H,G,J,ae):H.strategy===4||ce===Z?(te(H,2+(ae?1:0),3),Te(H,F,C)):(te(H,4+(ae?1:0),3),function(fe,_e,Ve,Re){var Gt;for(te(fe,_e-257,5),te(fe,Ve-1,5),te(fe,Re-4,4),Gt=0;Gt<Re;Gt++)te(fe,fe.bl_tree[2*T[Gt]+1],3);Q(fe,fe.dyn_ltree,_e-1),Q(fe,fe.dyn_dtree,Ve-1)}(H,H.l_desc.max_code+1,H.d_desc.max_code+1,ve+1),Te(H,H.dyn_ltree,H.dyn_dtree)),ie(H),ae&&oe(H)},a._tr_tally=function(H,G,J){return H.pending_buf[H.d_buf+2*H.last_lit]=G>>>8&255,H.pending_buf[H.d_buf+2*H.last_lit+1]=255&G,H.pending_buf[H.l_buf+H.last_lit]=255&J,H.last_lit++,G===0?H.dyn_ltree[2*J]++:(H.matches++,G--,H.dyn_ltree[2*(k[J]+f+1)]++,H.dyn_dtree[2*U(G)]++),H.last_lit===H.lit_bufsize-1},a._tr_align=function(H){te(H,2,3),V(H,b,F),function(G){G.bi_valid===16?(q(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)}(H)}},{"../utils/common":41}],53:[function(r,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,a){(function(i){(function(s,o){if(!s.setImmediate){var c,u,d,f,h=1,p={},m=!1,g=s.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(s);y=y&&y.setTimeout?y:s,c={}.toString.call(s.process)==="[object process]"?function(w){process.nextTick(function(){v(w)})}:function(){if(s.postMessage&&!s.importScripts){var w=!0,S=s.onmessage;return s.onmessage=function(){w=!1},s.postMessage("","*"),s.onmessage=S,w}}()?(f="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",b,!1):s.attachEvent("onmessage",b),function(w){s.postMessage(f+w,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(w){v(w.data)},function(w){d.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(w){var S=g.createElement("script");S.onreadystatechange=function(){v(w),S.onreadystatechange=null,u.removeChild(S),S=null},u.appendChild(S)}):function(w){setTimeout(v,0,w)},y.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var S=new Array(arguments.length-1),E=0;E<S.length;E++)S[E]=arguments[E+1];var j={callback:w,args:S};return p[h]=j,c(h),h++},y.clearImmediate=x}function x(w){delete p[w]}function v(w){if(m)setTimeout(v,0,w);else{var S=p[w];if(S){m=!0;try{(function(E){var j=E.callback,I=E.args;switch(I.length){case 0:j();break;case 1:j(I[0]);break;case 2:j(I[0],I[1]);break;case 3:j(I[0],I[1],I[2]);break;default:j.apply(o,I)}})(S)}finally{x(w),m=!1}}}}function b(w){w.source===s&&typeof w.data=="string"&&w.data.indexOf(f)===0&&v(+w.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(W8);var iie=W8.exports;const sie=ci(iie);var V8={exports:{}};(function(t,e){(function(r,n){n()})(kt,function(){function r(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,d,f){var h=new XMLHttpRequest;h.open("GET",u),h.responseType="blob",h.onload=function(){c(h.response,d,f)},h.onerror=function(){console.error("could not download file")},h.send()}function a(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof kt=="object"&&kt.global===kt?kt:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,d,f){var h=s.URL||s.webkitURL,p=document.createElement("a");d=d||u.name||"download",p.download=d,p.rel="noopener",typeof u=="string"?(p.href=u,p.origin===location.origin?i(p):a(p.href)?n(u,d,f):i(p,p.target="_blank")):(p.href=h.createObjectURL(u),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){i(p)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,f){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,f),d);else if(a(u))n(u,d,f);else{var h=document.createElement("a");h.href=u,h.target="_blank",setTimeout(function(){i(h)})}}:function(u,d,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof u=="string")return n(u,d,f);var p=u.type==="application/octet-stream",m=/constructor/i.test(s.HTMLElement)||s.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||p&&m||o)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=g?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=b:location=b,h=null},y.readAsDataURL(u)}else{var x=s.URL||s.webkitURL,v=x.createObjectURL(u);h?h.location=v:location.href=v,h=null,setTimeout(function(){x.revokeObjectURL(v)},4e4)}});s.saveAs=c.saveAs=c,t.exports=c})})(V8);var oie=V8.exports;const T4=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),lie=()=>{const[t,e]=_.useState([]),[r,n]=_.useState(!0),[a,i]=_.useState(!1),[s,o]=_.useState(!1),[c,u]=_.useState(0),[d,f]=_.useState(0),[h,p]=_.useState(0),[m,g]=_.useState(""),[y,x]=_.useState({delimiter:",",encoding:"utf-8",dateFormat:"DD.MM.YYYY",includeHeaders:!0}),v=[{name:"profiles",displayName:"Профили",description:"Пользователи и роли",icon:Vt,category:"users",color:"blue"},{name:"events",displayName:"Мероприятия",description:"События и расписание",icon:Oe,category:"content",color:"green"},{name:"speakers",displayName:"Спикеры",description:"Докладчики",icon:Vt,category:"content",color:"purple"},{name:"user_attendance",displayName:"Посещения",description:"QR-сканирования",icon:Ed,category:"users",color:"orange"},{name:"user_favorite_events",displayName:"Избранное",description:"Любимые события",icon:Ia,category:"users",color:"red"},{name:"user_favorite_speakers",displayName:"Избранные спикеры",description:"Любимые докладчики",icon:Ia,category:"users",color:"pink"},{name:"user_event_registrations",displayName:"Регистрации",description:"Записи на события",icon:zM,category:"users",color:"indigo"},{name:"site_settings",displayName:"Настройки",description:"Конфигурация сайта",icon:Vu,category:"system",color:"gray"},{name:"coworking_info_table",displayName:"Коворкинг",description:"Услуги коворкинга",icon:Zx,category:"content",color:"teal"},{name:"rent_info",displayName:"Аренда",description:"Данные об аренде",icon:Zx,category:"content",color:"cyan"}];_.useEffect(()=>{b()},[]);const b=async()=>{try{n(!0);const k=v.map(async D=>{try{const{count:R,error:M}=await T4.from(D.name).select("*",{count:"exact",head:!0});return M?(console.warn(`Table ${D.name} not accessible:`,M),null):{...D,count:R||0,selected:!1}}catch(R){return console.warn(`Error accessing table ${D.name}:`,R),null}}),$=(await Promise.all(k)).filter(Boolean);e($)}catch(k){console.error("Error fetching tables:",k),K.error("Ошибка загрузки данных")}finally{n(!1)}},w=k=>{e(O=>O.map($=>$.name===k?{...$,selected:!$.selected}:$))},S=k=>{e(O=>O.map($=>$.category===k?{...$,selected:!0}:$))},E=()=>{e(k=>k.map(O=>({...O,selected:!0})))},j=()=>{e(k=>k.map(O=>({...O,selected:!1})))},I=async()=>{const k=t.filter(O=>O.selected);if(k.length===0){K.error("Выберите хотя бы одну таблицу для экспорта");return}try{i(!0),u(0),p(k.length),f(0);const O=new sie;for(let M=0;M<k.length;M++){const L=k[M];g(L.displayName),u(M/k.length*100);try{const{data:B,error:U}=await T4.from(L.name).select("*");if(U){console.error(`Error exporting ${L.name}:`,U);continue}if(B&&B.length>0){const q=N(B,L.name);O.file(`${L.name}.csv`,q)}f(M+1)}catch(B){console.error(`Error processing table ${L.name}:`,B)}}u(100),g("Создание архива...");const $=T(k);O.file("README.txt",$);const D=await O.generateAsync({type:"blob"}),R=`science-hub-export-${new Date().toISOString().split("T")[0]}.zip`;oie.saveAs(D,R),K.success(`Экспорт завершен! Экспортировано ${k.length} таблиц`)}catch(O){console.error("Export error:",O),K.error("Ошибка при экспорте данных")}finally{i(!1),u(0),f(0),g(""),o(!1)}},N=(k,O)=>{if(!k||k.length===0)return"";const $=y.delimiter,D=Object.keys(k[0]),R=[];return y.includeHeaders&&R.push(D.join($)),R.push(...k.map(M=>D.map(L=>{let B=M[L];if(B&&typeof B=="string"&&B.match(/^\d{4}-\d{2}-\d{2}T/)){const U=new Date(B);switch(y.dateFormat){case"DD.MM.YYYY":B=U.toLocaleDateString("ru-RU");break;case"MM/DD/YYYY":B=U.toLocaleDateString("en-US");break;default:B=U.toISOString()}}return B&&typeof B=="string"&&(B.includes($)||B.includes('"')||B.includes(`
`))&&(B=`"${B.replace(/"/g,'""')}"`),B??""}).join($))),R.join(`
`)},T=k=>`
SCIENCE HUB - ЭКСПОРТ ДАННЫХ
===========================

Дата экспорта: ${new Date().toLocaleString("ru-RU")}
Всего таблиц: ${k.length}

ЭКСПОРТИРОВАННЫЕ ТАБЛИЦЫ:
${k.map(O=>`
- ${O.name}.csv
  Название: ${O.displayName}
  Описание: ${O.description}
  Записей: ${O.count}
`).join("")}

НАСТРОЙКИ ЭКСПОРТА:
- Разделитель: ${y.delimiter===","?"Запятая":y.delimiter===";"?"Точка с запятой":"Табуляция"}
- Формат даты: ${y.dateFormat}
- Заголовки: ${y.includeHeaders?"Включены":"Не включены"}
- Кодировка: ${y.encoding}

Создано системой Science Hub
    `.trim(),F=k=>{const O={blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",orange:"text-orange-600",red:"text-red-600",pink:"text-pink-600",indigo:"text-indigo-600",gray:"text-gray-600",teal:"text-teal-600",cyan:"text-cyan-600"};return O[k]||O.gray},C={users:t.filter(k=>k.category==="users"),content:t.filter(k=>k.category==="content"),system:t.filter(k=>k.category==="system")},A=t.filter(k=>k.selected).length;return r?l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-3",children:[l.jsx(mr,{className:"h-8 w-8 animate-spin text-primary-600"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Загрузка таблиц..."})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-2",children:"Экспорт данных"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Экспорт данных из базы в CSV формате"})]}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[l.jsxs("button",{onClick:E,className:"px-3 py-1.5 text-xs font-medium border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:["Все (",t.length,")"]}),l.jsx("button",{onClick:j,className:"px-3 py-1.5 text-xs font-medium border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"Очистить"}),l.jsxs("button",{onClick:()=>S("users"),className:"px-3 py-1.5 text-xs font-medium border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:["Пользователи (",C.users.length,")"]}),l.jsxs("button",{onClick:()=>S("content"),className:"px-3 py-1.5 text-xs font-medium border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:["Контент (",C.content.length,")"]})]}),Object.entries(C).map(([k,O])=>{if(O.length===0)return null;const $={users:"👥 Пользователи",content:"📝 Контент",system:"⚙️ Система"};return l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:$[k]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:O.map(D=>{const R=D.icon;return l.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-sm ${D.selected?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500"}`,onClick:()=>w(D.name),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx(R,{className:`h-4 w-4 ${F(D.color)}`}),l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${D.selected?"border-primary-500 bg-primary-500":"border-gray-300 dark:border-gray-600"}`,children:D.selected&&l.jsx(fc,{className:"h-3 w-3 text-white"})})]}),l.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1",children:D.displayName}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:D.description}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[D.count," записей"]}),l.jsx(BM,{className:"h-3 w-3 text-gray-400"})]})]},D.name)})})]},k)}),l.jsxs("div",{className:"flex flex-col items-center space-y-3 pt-4 border-t border-gray-200 dark:border-dark-600",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Выбрано: ",l.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:A})," из ",t.length]}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Записей: ",t.filter(k=>k.selected).reduce((k,O)=>k+O.count,0)]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>o(!0),disabled:A===0||a,className:"flex items-center gap-2 px-4 py-2 text-sm border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors disabled:opacity-50",children:[l.jsx(Vu,{className:"h-4 w-4"}),"Настройки"]}),l.jsxs("button",{onClick:I,disabled:A===0||a,className:"flex items-center gap-2 px-4 py-2 text-sm bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors disabled:opacity-50",children:[a?l.jsx(mr,{className:"h-4 w-4 animate-spin"}):l.jsx(Qd,{className:"h-4 w-4"}),a?"Экспорт...":"Экспортировать"]})]})]}),a&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl p-6 max-w-sm w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(TM,{className:"h-12 w-12 text-primary-500 mx-auto mb-3"}),l.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Экспорт данных"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:m}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"w-full bg-gray-200 dark:bg-dark-600 rounded-full h-2",children:l.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 h-2 rounded-full transition-all duration-500",style:{width:`${c}%`}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400",children:[l.jsxs("span",{children:[Math.round(c),"%"]}),l.jsxs("span",{children:[d," / ",h]})]})]})]})})}),s&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-md w-full",children:[l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-dark-600",children:l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[l.jsx(Vu,{className:"h-4 w-4"}),"Настройки экспорта"]})}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Разделитель CSV"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:",",label:"Запятая"},{value:";",label:"Точка с запятой"},{value:"	",label:"Табуляция"}].map(k=>l.jsx("button",{onClick:()=>x(O=>({...O,delimiter:k.value})),className:`p-2 text-xs rounded border transition-colors ${y.delimiter===k.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-300 dark:border-dark-600 hover:border-gray-400"}`,children:k.label},k.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Формат даты"}),l.jsx("div",{className:"space-y-1",children:[{value:"DD.MM.YYYY",label:"ДД.ММ.ГГГГ"},{value:"MM/DD/YYYY",label:"ММ/ДД/ГГГГ"},{value:"ISO",label:"ISO формат"}].map(k=>l.jsx("button",{onClick:()=>x(O=>({...O,dateFormat:k.value})),className:`w-full p-2 text-xs text-left rounded border transition-colors ${y.dateFormat===k.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-300 dark:border-dark-600 hover:border-gray-400"}`,children:k.label},k.value))})]}),l.jsx("div",{children:l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:y.includeHeaders,onChange:k=>x(O=>({...O,includeHeaders:k.target.checked})),className:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),l.jsx("span",{className:"text-sm",children:"Включить заголовки"})]})})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-dark-600 flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-dark-600 rounded hover:bg-gray-50 dark:hover:bg-dark-700",children:"Отмена"}),l.jsx("button",{onClick:I,className:"px-3 py-1.5 text-sm bg-primary-600 hover:bg-primary-700 text-white rounded",children:"Экспорт"})]})]})})]})};var cie=Object.defineProperty,uie=(t,e,r)=>e in t?cie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fv=(t,e,r)=>(uie(t,typeof e!="symbol"?e+"":e,r),r);let die=class{constructor(){Fv(this,"current",this.detect()),Fv(this,"handoffState","pending"),Fv(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Bo=new die;function Mm(t){var e,r;return Bo.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function Lm(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Wi(){let t=[],e={addEventListener(r,n,a,i){return r.addEventListener(n,a,i),e.add(()=>r.removeEventListener(n,a,i))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Lm(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,a){let i=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:i})})},group(r){let n=Wi();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let a of t.splice(n,1))a()}},dispose(){for(let r of t.splice(0))r()}};return e}function B2(){let[t]=_.useState(Wi);return _.useEffect(()=>()=>t.dispose(),[t]),t}let Lr=(t,e)=>{Bo.isServer?_.useEffect(t,e):_.useLayoutEffect(t,e)};function ll(t){let e=_.useRef(t);return Lr(()=>{e.current=t},[t]),e}let pt=function(t){let e=ll(t);return ne.useCallback((...r)=>e.current(...r),[e])},fie=_.createContext(void 0);function hie(){return _.useContext(fie)}function Jy(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function $i(t,e,...r){if(t in e){let a=e[t];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,$i),n}var pp=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(pp||{}),ys=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(ys||{});function pa(){let t=mie();return _.useCallback(e=>pie({mergeRefs:t,...e}),[t])}function pie({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:a,visible:i=!0,name:s,mergeRefs:o}){o=o??gie;let c=G8(e,t);if(i)return _h(c,r,n,s,o);let u=a??0;if(u&2){let{static:d=!1,...f}=c;if(d)return _h(f,r,n,s,o)}if(u&1){let{unmount:d=!0,...f}=c;return $i(d?0:1,{0(){return null},1(){return _h({...f,hidden:!0,style:{display:"none"}},r,n,s,o)}})}return _h(c,r,n,s,o)}function _h(t,e={},r,n,a){let{as:i=r,children:s,refName:o="ref",...c}=$v(t,["unmount","static"]),u=t.ref!==void 0?{[o]:t.ref}:{},d=typeof s=="function"?s(e):s;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(e){let h=!1,p=[];for(let[m,g]of Object.entries(e))typeof g=="boolean"&&(h=!0),g===!0&&p.push(m.replace(/([A-Z])/g,y=>`-${y.toLowerCase()}`));if(h){f["data-headlessui-state"]=p.join(" ");for(let m of p)f[`data-${m}`]=""}}if(i===_.Fragment&&(Object.keys(xo(c)).length>0||Object.keys(xo(f)).length>0))if(!_.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(xo(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(xo(c)).concat(Object.keys(xo(f))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=d.props,p=h==null?void 0:h.className,m=typeof p=="function"?(...x)=>Jy(p(...x),c.className):Jy(p,c.className),g=m?{className:m}:{},y=G8(d.props,xo($v(c,["ref"])));for(let x in f)x in y&&delete f[x];return _.cloneElement(d,Object.assign({},y,f,u,{ref:a(vie(d),u.ref)},g))}return _.createElement(i,Object.assign({},$v(c,["ref"]),i!==_.Fragment&&u,i!==_.Fragment&&f),d)}function mie(){let t=_.useRef([]),e=_.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function gie(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function G8(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):e[a]=n[a];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[a=>{var i;return(i=a==null?void 0:a.preventDefault)==null?void 0:i.call(a)}]);for(let n in r)Object.assign(e,{[n](a,...i){let s=r[n];for(let o of s){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;o(a,...i)}}});return e}function kn(t){var e;return Object.assign(_.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function xo(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function $v(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function vie(t){return ne.version.split(".")[0]>="19"?t.props.ref:t.ref}let xie="span";var mp=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(mp||{});function yie(t,e){var r;let{features:n=1,...a}=t,i={ref:e,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return pa()({ourProps:i,theirProps:a,slot:{},defaultTag:xie,name:"Hidden"})}let eb=kn(yie);function X8(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function Ls(t){return X8(t)&&"tagName"in t}function Ko(t){return Ls(t)&&"accessKey"in t}function bs(t){return Ls(t)&&"tabIndex"in t}function bie(t){return Ls(t)&&"style"in t}function wie(t){return Ko(t)&&t.nodeName==="IFRAME"}function _ie(t){return Ko(t)&&t.nodeName==="INPUT"}let q8=Symbol();function kie(t,e=!0){return Object.assign(t,{[q8]:e})}function fi(...t){let e=_.useRef(t);_.useEffect(()=>{e.current=t},[t]);let r=pt(n=>{for(let a of e.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return t.every(n=>n==null||(n==null?void 0:n[q8]))?void 0:r}let F2=_.createContext(null);F2.displayName="DescriptionContext";function Y8(){let t=_.useContext(F2);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Y8),e}return t}function Nie(){let[t,e]=_.useState([]);return[t.length>0?t.join(" "):void 0,_.useMemo(()=>function(r){let n=pt(i=>(e(s=>[...s,i]),()=>e(s=>{let o=s.slice(),c=o.indexOf(i);return c!==-1&&o.splice(c,1),o}))),a=_.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return ne.createElement(F2.Provider,{value:a},r.children)},[e])]}let Sie="p";function Eie(t,e){let r=_.useId(),n=hie(),{id:a=`headlessui-description-${r}`,...i}=t,s=Y8(),o=fi(e);Lr(()=>s.register(a),[a,s.register]);let c=n||!1,u=_.useMemo(()=>({...s.slot,disabled:c}),[s.slot,c]),d={ref:o,...s.props,id:a};return pa()({ourProps:d,theirProps:i,slot:u,defaultTag:Sie,name:s.name||"Description"})}let Cie=kn(Eie),jie=Object.assign(Cie,{});var K8=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(K8||{});let Aie=_.createContext(()=>{});function Tie({value:t,children:e}){return ne.createElement(Aie.Provider,{value:t},e)}let Z8=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var Iie=Object.defineProperty,Oie=(t,e,r)=>e in t?Iie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Die=(t,e,r)=>(Oie(t,e+"",r),r),Q8=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},qn=(t,e,r)=>(Q8(t,e,"read from private field"),r?r.call(t):e.get(t)),Uv=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},I4=(t,e,r,n)=>(Q8(t,e,"write to private field"),e.set(t,r),r),za,Tu,Iu;let Pie=class{constructor(e){Uv(this,za,{}),Uv(this,Tu,new Z8(()=>new Set)),Uv(this,Iu,new Set),Die(this,"disposables",Wi()),I4(this,za,e)}dispose(){this.disposables.dispose()}get state(){return qn(this,za)}subscribe(e,r){let n={selector:e,callback:r,current:e(qn(this,za))};return qn(this,Iu).add(n),this.disposables.add(()=>{qn(this,Iu).delete(n)})}on(e,r){return qn(this,Tu).get(e).add(r),this.disposables.add(()=>{qn(this,Tu).get(e).delete(r)})}send(e){let r=this.reduce(qn(this,za),e);if(r!==qn(this,za)){I4(this,za,r);for(let n of qn(this,Iu)){let a=n.selector(qn(this,za));J8(n.current,a)||(n.current=a,n.callback(a))}for(let n of qn(this,Tu).get(e.type))n(qn(this,za),e)}}};za=new WeakMap,Tu=new WeakMap,Iu=new WeakMap;function J8(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:zv(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:zv(t.entries(),e.entries()):O4(t)&&O4(e)?zv(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function zv(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function O4(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var Rie=Object.defineProperty,Mie=(t,e,r)=>e in t?Rie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D4=(t,e,r)=>(Mie(t,typeof e!="symbol"?e+"":e,r),r),Lie=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(Lie||{});let Bie={0(t,e){let r=e.id,n=t.stack,a=t.stack.indexOf(r);if(a!==-1){let i=t.stack.slice();return i.splice(a,1),i.push(r),n=i,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let a=t.stack.slice();return a.splice(n,1),{...t,stack:a}}},Fie=class eI extends Pie{constructor(){super(...arguments),D4(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),D4(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new eI({stack:[]})}reduce(e,r){return $i(r.type,Bie,e,r)}};const tI=new Z8(()=>Fie.new());var rI={exports:{}},nI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=_;function $ie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Uie=typeof Object.is=="function"?Object.is:$ie,zie=Ef.useSyncExternalStore,Hie=Ef.useRef,Wie=Ef.useEffect,Vie=Ef.useMemo,Gie=Ef.useDebugValue;nI.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var i=Hie(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Vie(function(){function c(p){if(!u){if(u=!0,d=p,p=n(p),a!==void 0&&s.hasValue){var m=s.value;if(a(m,p))return f=m}return f=p}if(m=f,Uie(d,p))return m;var g=n(p);return a!==void 0&&a(m,g)?(d=p,m):(d=p,f=g)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var o=zie(t,i[0],i[1]);return Wie(function(){s.hasValue=!0,s.value=o},[o]),Gie(o),o};rI.exports=nI;var Xie=rI.exports;function aI(t,e,r=J8){return Xie.useSyncExternalStoreWithSelector(pt(n=>t.subscribe(qie,n)),pt(()=>t.state),pt(()=>t.state),pt(e),r)}function qie(t){return t}function Cf(t,e){let r=_.useId(),n=tI.get(e),[a,i]=aI(n,_.useCallback(s=>[n.selectors.isTop(s,r),n.selectors.inStack(s,r)],[n,r]));return Lr(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?i?a:!0:!1}let tb=new Map,ad=new Map;function P4(t){var e;let r=(e=ad.get(t))!=null?e:0;return ad.set(t,r+1),r!==0?()=>R4(t):(tb.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>R4(t))}function R4(t){var e;let r=(e=ad.get(t))!=null?e:1;if(r===1?ad.delete(t):ad.set(t,r-1),r!==1)return;let n=tb.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,tb.delete(t))}function Yie(t,{allowed:e,disallowed:r}={}){let n=Cf(t,"inert-others");Lr(()=>{var a,i;if(!n)return;let s=Wi();for(let c of(a=r==null?void 0:r())!=null?a:[])c&&s.add(P4(c));let o=(i=e==null?void 0:e())!=null?i:[];for(let c of o){if(!c)continue;let u=Mm(c);if(!u)continue;let d=c.parentElement;for(;d&&d!==u.body;){for(let f of d.children)o.some(h=>f.contains(h))||s.add(P4(f));d=d.parentElement}}return s.dispose},[n,e,r])}function Kie(t,e,r){let n=ll(a=>{let i=a.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&r()});_.useEffect(()=>{if(!t)return;let a=e===null?null:Ko(e)?e:e.current;if(!a)return;let i=Wi();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>n.current(a));s.observe(a),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>n.current(a));s.observe(a),i.add(()=>s.disconnect())}return()=>i.dispose()},[e,n,t])}let gp=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),Zie=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var _i=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(_i||{}),rb=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(rb||{}),Qie=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Qie||{});function Jie(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(gp)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function ese(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Zie)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var iI=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(iI||{});function tse(t,e=0){var r;return t===((r=Mm(t))==null?void 0:r.body)?!1:$i(e,{0(){return t.matches(gp)},1(){let n=t;for(;n!==null;){if(n.matches(gp))return!0;n=n.parentElement}return!1}})}var rse=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(rse||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ii(t){t==null||t.focus({preventScroll:!0})}let nse=["textarea","input"].join(",");function ase(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,nse))!=null?r:!1}function ise(t,e=r=>r){return t.slice().sort((r,n)=>{let a=e(r),i=e(n);if(a===null||i===null)return 0;let s=a.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function id(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,s=Array.isArray(t)?r?ise(t):t:e&64?ese(t):Jie(t);a.length>0&&s.length>1&&(s=s.filter(p=>!a.some(m=>m!=null&&"current"in m?(m==null?void 0:m.current)===p:m===p))),n=n??i.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,s.indexOf(n))-1;if(e&4)return Math.max(0,s.indexOf(n))+1;if(e&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},d=0,f=s.length,h;do{if(d>=f||d+f<=0)return 0;let p=c+d;if(e&16)p=(p+f)%f;else{if(p<0)return 3;if(p>=f)return 1}h=s[p],h==null||h.focus(u),d+=o}while(h!==i.activeElement);return e&6&&ase(h)&&h.select(),2}function sI(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function sse(){return/Android/gi.test(window.navigator.userAgent)}function M4(){return sI()||sse()}function kh(t,e,r,n){let a=ll(r);_.useEffect(()=>{if(!t)return;function i(s){a.current(s)}return document.addEventListener(e,i,n),()=>document.removeEventListener(e,i,n)},[t,e,n])}function oI(t,e,r,n){let a=ll(r);_.useEffect(()=>{if(!t)return;function i(s){a.current(s)}return window.addEventListener(e,i,n),()=>window.removeEventListener(e,i,n)},[t,e,n])}const L4=30;function ose(t,e,r){let n=ll(r),a=_.useCallback(function(o,c){if(o.defaultPrevented)return;let u=c(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function f(h){return typeof h=="function"?f(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let f of d)if(f!==null&&(f.contains(u)||o.composed&&o.composedPath().includes(f)))return;return!tse(u,iI.Loose)&&u.tabIndex!==-1&&o.preventDefault(),n.current(o,u)},[n,e]),i=_.useRef(null);kh(t,"pointerdown",o=>{var c,u;M4()||(i.current=((u=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:u[0])||o.target)},!0),kh(t,"pointerup",o=>{if(M4()||!i.current)return;let c=i.current;return i.current=null,a(o,()=>c)},!0);let s=_.useRef({x:0,y:0});kh(t,"touchstart",o=>{s.current.x=o.touches[0].clientX,s.current.y=o.touches[0].clientY},!0),kh(t,"touchend",o=>{let c={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(c.x-s.current.x)>=L4||Math.abs(c.y-s.current.y)>=L4))return a(o,()=>bs(o.target)?o.target:null)},!0),oI(t,"blur",o=>a(o,()=>wie(window.document.activeElement)?window.document.activeElement:null),!0)}function Bm(...t){return _.useMemo(()=>Mm(...t),[...t])}function lI(t,e,r,n){let a=ll(r);_.useEffect(()=>{t=t??window;function i(s){a.current(s)}return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)},[t,e,n])}function lse(t){return _.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function cse(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...i){let s=e[a].call(r,...i);s&&(r=s,n.forEach(o=>o()))}}}function use(){let t;return{before({doc:e}){var r;let n=e.documentElement,a=(r=e.defaultView)!=null?r:window;t=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,t-a);r.style(n,"paddingRight",`${i}px`)}}}function dse(){return sI()?{before({doc:t,d:e,meta:r}){function n(a){return r.containers.flatMap(i=>i()).some(i=>i.contains(a))}e.microTask(()=>{var a;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=Wi();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let i=(a=window.scrollY)!=null?a:window.pageYOffset,s=null;e.addEventListener(t,"click",o=>{if(bs(o.target))try{let c=o.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=t.querySelector(u);bs(d)&&!n(d)&&(s=d)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(bs(o.target)&&bie(o.target))if(n(o.target)){let c=o.target;for(;c.parentElement&&n(c.parentElement);)c=c.parentElement;e.style(c,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(bs(o.target)){if(_ie(o.target))return;if(n(o.target)){let c=o.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let c=(o=window.scrollY)!=null?o:window.pageYOffset;i!==c&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function fse(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function hse(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let Oo=cse(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:Wi(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:hse(r)},a=[dse(),use(),fse()];a.forEach(({before:i})=>i==null?void 0:i(n)),a.forEach(({after:i})=>i==null?void 0:i(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Oo.subscribe(()=>{let t=Oo.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",a=r.count!==0;(a&&!n||!a&&n)&&Oo.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Oo.dispatch("TEARDOWN",r)}});function pse(t,e,r=()=>({containers:[]})){let n=lse(Oo),a=e?n.get(e):void 0,i=a?a.count>0:!1;return Lr(()=>{if(!(!e||!t))return Oo.dispatch("PUSH",e,r),()=>Oo.dispatch("POP",e,r)},[t,e]),i}function mse(t,e,r=()=>[document.body]){let n=Cf(t,"scroll-lock");pse(n,e,a=>{var i;return{containers:[...(i=a.containers)!=null?i:[],r]}})}function gse(t=0){let[e,r]=_.useState(t),n=_.useCallback(c=>r(c),[e]),a=_.useCallback(c=>r(u=>u|c),[e]),i=_.useCallback(c=>(e&c)===c,[e]),s=_.useCallback(c=>r(u=>u&~c),[r]),o=_.useCallback(c=>r(u=>u^c),[r]);return{flags:e,setFlag:n,addFlag:a,hasFlag:i,removeFlag:s,toggleFlag:o}}var vse={},B4,F4;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((B4=process==null?void 0:vse)==null?void 0:B4.NODE_ENV)==="test"&&typeof((F4=Element==null?void 0:Element.prototype)==null?void 0:F4.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var xse=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(xse||{});function yse(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function bse(t,e,r,n){let[a,i]=_.useState(r),{hasFlag:s,addFlag:o,removeFlag:c}=gse(t&&a?3:0),u=_.useRef(!1),d=_.useRef(!1),f=B2();return Lr(()=>{var h;if(t){if(r&&i(!0),!e){r&&o(3);return}return(h=n==null?void 0:n.start)==null||h.call(n,r),wse(e,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(r?(o(3),c(4)):(o(4),c(2)))},run(){d.current?r?(c(3),o(4)):(c(4),o(3)):r?c(1):o(1)},done(){var p;d.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,c(7),r||i(!1),(p=n==null?void 0:n.end)==null||p.call(n,r))}})}},[t,r,e,f]),t?[a,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function wse(t,{prepare:e,run:r,done:n,inFlight:a}){let i=Wi();return kse(t,{prepare:e,inFlight:a}),i.nextFrame(()=>{r(),i.requestAnimationFrame(()=>{i.add(_se(t,n))})}),i.dispose}function _se(t,e){var r,n;let a=Wi();if(!t)return a.dispose;let i=!1;a.add(()=>{i=!0});let s=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(o=>o instanceof CSSTransition))!=null?n:[];return s.length===0?(e(),a.dispose):(Promise.allSettled(s.map(o=>o.finished)).then(()=>{i||e()}),a.dispose)}function kse(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function $2(t,e){let r=_.useRef([]),n=pt(t);_.useEffect(()=>{let a=[...r.current];for(let[i,s]of e.entries())if(r.current[i]!==s){let o=n(e,a);return r.current=e,o}},[n,...e])}function Fm(){return typeof window<"u"}function zc(t){return cI(t)?(t.nodeName||"").toLowerCase():"#document"}function Dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function hi(t){var e;return(e=(cI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function cI(t){return Fm()?t instanceof Node||t instanceof Dn(t).Node:!1}function Pa(t){return Fm()?t instanceof Element||t instanceof Dn(t).Element:!1}function li(t){return Fm()?t instanceof HTMLElement||t instanceof Dn(t).HTMLElement:!1}function $4(t){return!Fm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dn(t).ShadowRoot}function jf(t){const{overflow:e,overflowX:r,overflowY:n,display:a}=Ra(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(a)}function Nse(t){return["table","td","th"].includes(zc(t))}function $m(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function U2(t){const e=z2(),r=Pa(t)?Ra(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Sse(t){let e=Hs(t);for(;li(e)&&!Ec(e);){if(U2(e))return e;if($m(e))return null;e=Hs(e)}return null}function z2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ec(t){return["html","body","#document"].includes(zc(t))}function Ra(t){return Dn(t).getComputedStyle(t)}function Um(t){return Pa(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Hs(t){if(zc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||$4(t)&&t.host||hi(t);return $4(e)?e.host:e}function uI(t){const e=Hs(t);return Ec(e)?t.ownerDocument?t.ownerDocument.body:t.body:li(e)&&jf(e)?e:uI(e)}function zd(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const a=uI(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),s=Dn(a);if(i){const o=nb(s);return e.concat(s,s.visualViewport||[],jf(a)?a:[],o&&r?zd(o):[])}return e.concat(a,zd(a,[],r))}function nb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const Cc=Math.min,Fo=Math.max,vp=Math.round,Nh=Math.floor,ai=t=>({x:t,y:t}),Ese={left:"right",right:"left",bottom:"top",top:"bottom"},Cse={start:"end",end:"start"};function ab(t,e,r){return Fo(t,Cc(e,r))}function Af(t,e){return typeof t=="function"?t(e):t}function Zo(t){return t.split("-")[0]}function Tf(t){return t.split("-")[1]}function dI(t){return t==="x"?"y":"x"}function H2(t){return t==="y"?"height":"width"}function ws(t){return["top","bottom"].includes(Zo(t))?"y":"x"}function W2(t){return dI(ws(t))}function jse(t,e,r){r===void 0&&(r=!1);const n=Tf(t),a=W2(t),i=H2(a);let s=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=xp(s)),[s,xp(s)]}function Ase(t){const e=xp(t);return[ib(t),e,ib(e)]}function ib(t){return t.replace(/start|end/g,e=>Cse[e])}function Tse(t,e,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return r?e?a:n:e?n:a;case"left":case"right":return e?i:s;default:return[]}}function Ise(t,e,r,n){const a=Tf(t);let i=Tse(Zo(t),r==="start",n);return a&&(i=i.map(s=>s+"-"+a),e&&(i=i.concat(i.map(ib)))),i}function xp(t){return t.replace(/left|right|bottom|top/g,e=>Ese[e])}function Ose(t){return{top:0,right:0,bottom:0,left:0,...t}}function fI(t){return typeof t!="number"?Ose(t):{top:t,right:t,bottom:t,left:t}}function yp(t){const{x:e,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:e,right:e+n,bottom:r+a,x:e,y:r}}function U4(t,e,r){let{reference:n,floating:a}=t;const i=ws(e),s=W2(e),o=H2(s),c=Zo(e),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let p;switch(c){case"top":p={x:d,y:n.y-a.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-a.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Tf(e)){case"start":p[s]-=h*(r&&u?-1:1);break;case"end":p[s]+=h*(r&&u?-1:1);break}return p}const Dse=async(t,e,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:s}=r,o=i.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:a}),{x:d,y:f}=U4(u,n,c),h=n,p={},m=0;for(let g=0;g<o.length;g++){const{name:y,fn:x}=o[g],{x:v,y:b,data:w,reset:S}=await x({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:p,rects:u,platform:s,elements:{reference:t,floating:e}});d=v??d,f=b??f,p={...p,[y]:{...p[y],...w}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:a}):S.rects),{x:d,y:f}=U4(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:p}};async function hI(t,e){var r;e===void 0&&(e={});const{x:n,y:a,platform:i,rects:s,elements:o,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Af(e,t),m=fI(p),y=o[h?f==="floating"?"reference":"floating":f],x=yp(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),v=f==="floating"?{x:n,y:a,width:s.floating.width,height:s.floating.height}:s.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),w=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},S=yp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-S.top+m.top)/w.y,bottom:(S.bottom-x.bottom+m.bottom)/w.y,left:(x.left-S.left+m.left)/w.x,right:(S.right-x.right+m.right)/w.x}}const Pse=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:a,rects:i,platform:s,elements:o,middlewareData:c}=e,{element:u,padding:d=0}=Af(t,e)||{};if(u==null)return{};const f=fI(d),h={x:r,y:n},p=W2(a),m=H2(p),g=await s.getDimensions(u),y=p==="y",x=y?"top":"left",v=y?"bottom":"right",b=y?"clientHeight":"clientWidth",w=i.reference[m]+i.reference[p]-h[p]-i.floating[m],S=h[p]-i.reference[p],E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let j=E?E[b]:0;(!j||!await(s.isElement==null?void 0:s.isElement(E)))&&(j=o.floating[b]||i.floating[m]);const I=w/2-S/2,N=j/2-g[m]/2-1,T=Cc(f[x],N),F=Cc(f[v],N),C=T,A=j-g[m]-F,k=j/2-g[m]/2+I,O=ab(C,k,A),$=!c.arrow&&Tf(a)!=null&&k!==O&&i.reference[m]/2-(k<C?T:F)-g[m]/2<0,D=$?k<C?k-C:k-A:0;return{[p]:h[p]+D,data:{[p]:O,centerOffset:k-O-D,...$&&{alignmentOffset:D}},reset:$}}}),Rse=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Af(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Zo(a),v=ws(o),b=Zo(o)===o,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(b||!g?[xp(o)]:Ase(o)),E=m!=="none";!h&&E&&S.push(...Ise(o,g,m,w));const j=[o,...S],I=await hI(e,y),N=[];let T=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&N.push(I[x]),f){const k=jse(a,s,w);N.push(I[k[0]],I[k[1]])}if(T=[...T,{placement:a,overflows:N}],!N.every(k=>k<=0)){var F,C;const k=(((F=i.flip)==null?void 0:F.index)||0)+1,O=j[k];if(O&&(!(f==="alignment"?v!==ws(O):!1)||T.every(R=>R.overflows[0]>0&&ws(R.placement)===v)))return{data:{index:k,overflows:T},reset:{placement:O}};let $=(C=T.filter(D=>D.overflows[0]<=0).sort((D,R)=>D.overflows[1]-R.overflows[1])[0])==null?void 0:C.placement;if(!$)switch(p){case"bestFit":{var A;const D=(A=T.filter(R=>{if(E){const M=ws(R.placement);return M===v||M==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(M=>M>0).reduce((M,L)=>M+L,0)]).sort((R,M)=>R[1]-M[1])[0])==null?void 0:A[0];D&&($=D);break}case"initialPlacement":$=o;break}if(a!==$)return{reset:{placement:$}}}return{}}}};async function Mse(t,e){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),s=Zo(r),o=Tf(r),c=ws(r)==="y",u=["left","top"].includes(s)?-1:1,d=i&&c?-1:1,f=Af(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const Lse=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:a,y:i,placement:s,middlewareData:o}=e,c=await Mse(e,t);return s===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:s}}}}},Bse=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:a}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:y=>{let{x,y:v}=y;return{x,y:v}}},...c}=Af(t,e),u={x:r,y:n},d=await hI(e,c),f=ws(Zo(a)),h=dI(f);let p=u[h],m=u[f];if(i){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=p+d[y],b=p-d[x];p=ab(v,p,b)}if(s){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=m+d[y],b=m-d[x];m=ab(v,m,b)}const g=o.fn({...e,[h]:p,[f]:m});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:s}}}}}};function pI(t){const e=Ra(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const a=li(t),i=a?t.offsetWidth:r,s=a?t.offsetHeight:n,o=vp(r)!==i||vp(n)!==s;return o&&(r=i,n=s),{width:r,height:n,$:o}}function V2(t){return Pa(t)?t:t.contextElement}function rc(t){const e=V2(t);if(!li(e))return ai(1);const r=e.getBoundingClientRect(),{width:n,height:a,$:i}=pI(e);let s=(i?vp(r.width):r.width)/n,o=(i?vp(r.height):r.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Fse=ai(0);function mI(t){const e=Dn(t);return!z2()||!e.visualViewport?Fse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $se(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Dn(t)?!1:e}function Qo(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=V2(t);let s=ai(1);e&&(n?Pa(n)&&(s=rc(n)):s=rc(t));const o=$se(i,r,n)?mI(i):ai(0);let c=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,f=a.height/s.y;if(i){const h=Dn(i),p=n&&Pa(n)?Dn(n):n;let m=h,g=nb(m);for(;g&&n&&p!==m;){const y=rc(g),x=g.getBoundingClientRect(),v=Ra(g),b=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,w=x.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,f*=y.y,c+=b,u+=w,m=Dn(g),g=nb(m)}}return yp({width:d,height:f,x:c,y:u})}function G2(t,e){const r=Um(t).scrollLeft;return e?e.left+r:Qo(hi(t)).left+r}function gI(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+e.scrollLeft-(r?0:G2(t,n)),i=n.top+e.scrollTop;return{x:a,y:i}}function Use(t){let{elements:e,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",s=hi(n),o=e?$m(e.floating):!1;if(n===s||o&&i)return r;let c={scrollLeft:0,scrollTop:0},u=ai(1);const d=ai(0),f=li(n);if((f||!f&&!i)&&((zc(n)!=="body"||jf(s))&&(c=Um(n)),li(n))){const p=Qo(n);u=rc(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const h=s&&!f&&!i?gI(s,c,!0):ai(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function zse(t){return Array.from(t.getClientRects())}function Hse(t){const e=hi(t),r=Um(t),n=t.ownerDocument.body,a=Fo(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Fo(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+G2(t);const o=-r.scrollTop;return Ra(n).direction==="rtl"&&(s+=Fo(e.clientWidth,n.clientWidth)-a),{width:a,height:i,x:s,y:o}}function Wse(t,e){const r=Dn(t),n=hi(t),a=r.visualViewport;let i=n.clientWidth,s=n.clientHeight,o=0,c=0;if(a){i=a.width,s=a.height;const u=z2();(!u||u&&e==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:s,x:o,y:c}}function Vse(t,e){const r=Qo(t,!0,e==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=li(t)?rc(t):ai(1),s=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:s,height:o,x:c,y:u}}function z4(t,e,r){let n;if(e==="viewport")n=Wse(t,r);else if(e==="document")n=Hse(hi(t));else if(Pa(e))n=Vse(e,r);else{const a=mI(t);n={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return yp(n)}function vI(t,e){const r=Hs(t);return r===e||!Pa(r)||Ec(r)?!1:Ra(r).position==="fixed"||vI(r,e)}function Gse(t,e){const r=e.get(t);if(r)return r;let n=zd(t,[],!1).filter(o=>Pa(o)&&zc(o)!=="body"),a=null;const i=Ra(t).position==="fixed";let s=i?Hs(t):t;for(;Pa(s)&&!Ec(s);){const o=Ra(s),c=U2(s);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||jf(s)&&!c&&vI(t,s))?n=n.filter(d=>d!==s):a=o,s=Hs(s)}return e.set(t,n),n}function Xse(t){let{element:e,boundary:r,rootBoundary:n,strategy:a}=t;const s=[...r==="clippingAncestors"?$m(e)?[]:Gse(e,this._c):[].concat(r),n],o=s[0],c=s.reduce((u,d)=>{const f=z4(e,d,a);return u.top=Fo(f.top,u.top),u.right=Cc(f.right,u.right),u.bottom=Cc(f.bottom,u.bottom),u.left=Fo(f.left,u.left),u},z4(e,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qse(t){const{width:e,height:r}=pI(t);return{width:e,height:r}}function Yse(t,e,r){const n=li(e),a=hi(e),i=r==="fixed",s=Qo(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const c=ai(0);function u(){c.x=G2(a)}if(n||!n&&!i)if((zc(e)!=="body"||jf(a))&&(o=Um(e)),n){const p=Qo(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?gI(a,o):ai(0),f=s.left+o.scrollLeft-c.x-d.x,h=s.top+o.scrollTop-c.y-d.y;return{x:f,y:h,width:s.width,height:s.height}}function Hv(t){return Ra(t).position==="static"}function H4(t,e){if(!li(t)||Ra(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return hi(t)===r&&(r=r.ownerDocument.body),r}function xI(t,e){const r=Dn(t);if($m(t))return r;if(!li(t)){let a=Hs(t);for(;a&&!Ec(a);){if(Pa(a)&&!Hv(a))return a;a=Hs(a)}return r}let n=H4(t,e);for(;n&&Nse(n)&&Hv(n);)n=H4(n,e);return n&&Ec(n)&&Hv(n)&&!U2(n)?r:n||Sse(t)||r}const Kse=async function(t){const e=this.getOffsetParent||xI,r=this.getDimensions,n=await r(t.floating);return{reference:Yse(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Zse(t){return Ra(t).direction==="rtl"}const Qse={convertOffsetParentRelativeRectToViewportRelativeRect:Use,getDocumentElement:hi,getClippingRect:Xse,getOffsetParent:xI,getElementRects:Kse,getClientRects:zse,getDimensions:qse,getScale:rc,isElement:Pa,isRTL:Zse};function yI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Jse(t,e){let r=null,n;const a=hi(t);function i(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function s(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(o||e(),!h||!p)return;const m=Nh(f),g=Nh(a.clientWidth-(d+h)),y=Nh(a.clientHeight-(f+p)),x=Nh(d),b={rootMargin:-m+"px "+-g+"px "+-y+"px "+-x+"px",threshold:Fo(0,Cc(1,c))||1};let w=!0;function S(E){const j=E[0].intersectionRatio;if(j!==c){if(!w)return s();j?s(!1,j):n=setTimeout(()=>{s(!1,1e-7)},1e3)}j===1&&!yI(u,t.getBoundingClientRect())&&s(),w=!1}try{r=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(t)}return s(!0),i}function eoe(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=V2(t),d=a||i?[...u?zd(u):[],...zd(e)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const f=u&&o?Jse(u,r):null;let h=-1,p=null;s&&(p=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let m,g=c?Qo(t):null;c&&y();function y(){const x=Qo(t);g&&!yI(g,x)&&r(),g=x,m=requestAnimationFrame(y)}return r(),()=>{var x;d.forEach(v=>{a&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const toe=Lse,roe=Bse,noe=Rse,aoe=Pse,W4=(t,e,r)=>{const n=new Map,a={platform:Qse,...r},i={...a.platform,_c:n};return Dse(t,e,{...a,platform:i})};let zm=_.createContext(null);zm.displayName="OpenClosedContext";var ja=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(ja||{});function Hm(){return _.useContext(zm)}function ioe({value:t,children:e}){return ne.createElement(zm.Provider,{value:t},e)}function soe({children:t}){return ne.createElement(zm.Provider,{value:null},t)}function ooe(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let hs=[];ooe(()=>{function t(e){if(!bs(e.target)||e.target===document.body||hs[0]===e.target)return;let r=e.target;r=r.closest(gp),hs.unshift(r??e.target),hs=hs.filter(n=>n!=null&&n.isConnected),hs.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function bI(t){let e=pt(t),r=_.useRef(!1);_.useEffect(()=>(r.current=!1,()=>{r.current=!0,Lm(()=>{r.current&&e()})}),[e])}function loe(){let t=typeof document>"u";return"useSyncExternalStore"in Kv?(e=>e.useSyncExternalStore)(Kv)(()=>()=>{},()=>!1,()=>!t):!1}function If(){let t=loe(),[e,r]=_.useState(Bo.isHandoffComplete);return e&&Bo.isHandoffComplete===!1&&r(!1),_.useEffect(()=>{e!==!0&&r(!0)},[e]),_.useEffect(()=>Bo.handoff(),[]),t?!1:e}let wI=_.createContext(!1);function coe(){return _.useContext(wI)}function V4(t){return ne.createElement(wI.Provider,{value:t.force},t.children)}function uoe(t){let e=coe(),r=_.useContext(kI),[n,a]=_.useState(()=>{var i;if(!e&&r!==null)return(i=r.current)!=null?i:null;if(Bo.isServer)return null;let s=t==null?void 0:t.getElementById("headlessui-portal-root");if(s)return s;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return _.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),_.useEffect(()=>{e||r!==null&&a(r.current)},[r,a,e]),n}let _I=_.Fragment,doe=kn(function(t,e){let{ownerDocument:r=null,...n}=t,a=_.useRef(null),i=fi(kie(p=>{a.current=p}),e),s=Bm(a),o=r??s,c=uoe(o),[u]=_.useState(()=>{var p;return Bo.isServer?null:(p=o==null?void 0:o.createElement("div"))!=null?p:null}),d=_.useContext(sb),f=If();Lr(()=>{!c||!u||c.contains(u)||(u.setAttribute("data-headlessui-portal",""),c.appendChild(u))},[c,u]),Lr(()=>{if(u&&d)return d.register(u)},[d,u]),bI(()=>{var p;!c||!u||(X8(u)&&c.contains(u)&&c.removeChild(u),c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c)))});let h=pa();return f?!c||!u?null:Mp.createPortal(h({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:_I,name:"Portal"}),u):null});function foe(t,e){let r=fi(e),{enabled:n=!0,ownerDocument:a,...i}=t,s=pa();return n?ne.createElement(doe,{...i,ownerDocument:a,ref:r}):s({ourProps:{ref:r},theirProps:i,slot:{},defaultTag:_I,name:"Portal"})}let hoe=_.Fragment,kI=_.createContext(null);function poe(t,e){let{target:r,...n}=t,a={ref:fi(e)},i=pa();return ne.createElement(kI.Provider,{value:r},i({ourProps:a,theirProps:n,defaultTag:hoe,name:"Popover.Group"}))}let sb=_.createContext(null);function moe(){let t=_.useContext(sb),e=_.useRef([]),r=pt(i=>(e.current.push(i),t&&t.register(i),()=>n(i))),n=pt(i=>{let s=e.current.indexOf(i);s!==-1&&e.current.splice(s,1),t&&t.unregister(i)}),a=_.useMemo(()=>({register:r,unregister:n,portals:e}),[r,n,e]);return[e,_.useMemo(()=>function({children:i}){return ne.createElement(sb.Provider,{value:a},i)},[a])]}let goe=kn(foe),NI=kn(poe),voe=Object.assign(goe,{Group:NI});function xoe(t,e=typeof document<"u"?document.defaultView:null,r){let n=Cf(t,"escape");lI(e,"keydown",a=>{n&&(a.defaultPrevented||a.key===K8.Escape&&r(a))})}function yoe(){var t;let[e]=_.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=_.useState((t=e==null?void 0:e.matches)!=null?t:!1);return Lr(()=>{if(!e)return;function a(i){n(i.matches)}return e.addEventListener("change",a),()=>e.removeEventListener("change",a)},[e]),r}function boe({defaultContainers:t=[],portals:e,mainTreeNode:r}={}){let n=Bm(r),a=pt(()=>{var i,s;let o=[];for(let c of t)c!==null&&(Ls(c)?o.push(c):"current"in c&&Ls(c.current)&&o.push(c.current));if(e!=null&&e.current)for(let c of e.current)o.push(c);for(let c of(i=n==null?void 0:n.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&Ls(c)&&c.id!=="headlessui-portal-root"&&(r&&(c.contains(r)||c.contains((s=r==null?void 0:r.getRootNode())==null?void 0:s.host))||o.some(u=>c.contains(u))||o.push(c));return o});return{resolveContainers:a,contains:pt(i=>a().some(s=>s.contains(i)))}}let SI=_.createContext(null);function G4({children:t,node:e}){let[r,n]=_.useState(null),a=EI(e??r);return ne.createElement(SI.Provider,{value:a},t,a===null&&ne.createElement(eb,{features:mp.Hidden,ref:i=>{var s,o;if(i){for(let c of(o=(s=Mm(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?o:[])if(c!==document.body&&c!==document.head&&Ls(c)&&c!=null&&c.contains(i)){n(c);break}}}}))}function EI(t=null){var e;return(e=_.useContext(SI))!=null?e:t}function X2(){let t=_.useRef(!1);return Lr(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Ou=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Ou||{});function woe(){let t=_.useRef(0);return oI(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function CI(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let r of t.current)Ls(r.current)&&e.add(r.current);return e}let _oe="div";var wo=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(wo||{});function koe(t,e){let r=_.useRef(null),n=fi(r,e),{initialFocus:a,initialFocusFallback:i,containers:s,features:o=15,...c}=t;If()||(o=0);let u=Bm(r);Coe(o,{ownerDocument:u});let d=joe(o,{ownerDocument:u,container:r,initialFocus:a,initialFocusFallback:i});Aoe(o,{ownerDocument:u,container:r,containers:s,previousActiveElement:d});let f=woe(),h=pt(v=>{if(!Ko(r.current))return;let b=r.current;(w=>w())(()=>{$i(f.current,{[Ou.Forwards]:()=>{id(b,_i.First,{skipElements:[v.relatedTarget,i]})},[Ou.Backwards]:()=>{id(b,_i.Last,{skipElements:[v.relatedTarget,i]})}})})}),p=Cf(!!(o&2),"focus-trap#tab-lock"),m=B2(),g=_.useRef(!1),y={ref:n,onKeyDown(v){v.key=="Tab"&&(g.current=!0,m.requestAnimationFrame(()=>{g.current=!1}))},onBlur(v){if(!(o&4))return;let b=CI(s);Ko(r.current)&&b.add(r.current);let w=v.relatedTarget;bs(w)&&w.dataset.headlessuiFocusGuard!=="true"&&(jI(b,w)||(g.current?id(r.current,$i(f.current,{[Ou.Forwards]:()=>_i.Next,[Ou.Backwards]:()=>_i.Previous})|_i.WrapAround,{relativeTo:v.target}):bs(v.target)&&Ii(v.target)))}},x=pa();return ne.createElement(ne.Fragment,null,p&&ne.createElement(eb,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:mp.Focusable}),x({ourProps:y,theirProps:c,defaultTag:_oe,name:"FocusTrap"}),p&&ne.createElement(eb,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:mp.Focusable}))}let Noe=kn(koe),Soe=Object.assign(Noe,{features:wo});function Eoe(t=!0){let e=_.useRef(hs.slice());return $2(([r],[n])=>{n===!0&&r===!1&&Lm(()=>{e.current.splice(0)}),n===!1&&r===!0&&(e.current=hs.slice())},[t,hs,e]),pt(()=>{var r;return(r=e.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function Coe(t,{ownerDocument:e}){let r=!!(t&8),n=Eoe(r);$2(()=>{r||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Ii(n())},[r]),bI(()=>{r&&Ii(n())})}function joe(t,{ownerDocument:e,container:r,initialFocus:n,initialFocusFallback:a}){let i=_.useRef(null),s=Cf(!!(t&1),"focus-trap#initial-focus"),o=X2();return $2(()=>{if(t===0)return;if(!s){a!=null&&a.current&&Ii(a.current);return}let c=r.current;c&&Lm(()=>{if(!o.current)return;let u=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===u){i.current=u;return}}else if(c.contains(u)){i.current=u;return}if(n!=null&&n.current)Ii(n.current);else{if(t&16){if(id(c,_i.First|_i.AutoFocus)!==rb.Error)return}else if(id(c,_i.First)!==rb.Error)return;if(a!=null&&a.current&&(Ii(a.current),(e==null?void 0:e.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=e==null?void 0:e.activeElement})},[a,s,t]),i}function Aoe(t,{ownerDocument:e,container:r,containers:n,previousActiveElement:a}){let i=X2(),s=!!(t&4);lI(e==null?void 0:e.defaultView,"focus",o=>{if(!s||!i.current)return;let c=CI(n);Ko(r.current)&&c.add(r.current);let u=a.current;if(!u)return;let d=o.target;Ko(d)?jI(c,d)?(a.current=d,Ii(d)):(o.preventDefault(),o.stopPropagation(),Ii(u)):Ii(a.current)},!0)}function jI(t,e){for(let r of t)if(r.contains(e))return!0;return!1}function AI(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:II)!==_.Fragment||ne.Children.count(t.children)===1}let Wm=_.createContext(null);Wm.displayName="TransitionContext";var Toe=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Toe||{});function Ioe(){let t=_.useContext(Wm);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Ooe(){let t=_.useContext(Vm);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Vm=_.createContext(null);Vm.displayName="NestingContext";function Gm(t){return"children"in t?Gm(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function TI(t,e){let r=ll(t),n=_.useRef([]),a=X2(),i=B2(),s=pt((p,m=ys.Hidden)=>{let g=n.current.findIndex(({el:y})=>y===p);g!==-1&&($i(m,{[ys.Unmount](){n.current.splice(g,1)},[ys.Hidden](){n.current[g].state="hidden"}}),i.microTask(()=>{var y;!Gm(n)&&a.current&&((y=r.current)==null||y.call(r))}))}),o=pt(p=>{let m=n.current.find(({el:g})=>g===p);return m?m.state!=="visible"&&(m.state="visible"):n.current.push({el:p,state:"visible"}),()=>s(p,ys.Unmount)}),c=_.useRef([]),u=_.useRef(Promise.resolve()),d=_.useRef({enter:[],leave:[]}),f=pt((p,m,g)=>{c.current.splice(0),e&&(e.chains.current[m]=e.chains.current[m].filter(([y])=>y!==p)),e==null||e.chains.current[m].push([p,new Promise(y=>{c.current.push(y)})]),e==null||e.chains.current[m].push([p,new Promise(y=>{Promise.all(d.current[m].map(([x,v])=>v)).then(()=>y())})]),m==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(m)):g(m)}),h=pt((p,m,g)=>{Promise.all(d.current[m].splice(0).map(([y,x])=>x)).then(()=>{var y;(y=c.current.shift())==null||y()}).then(()=>g(m))});return _.useMemo(()=>({children:n,register:o,unregister:s,onStart:f,onStop:h,wait:u,chains:d}),[o,s,n,f,h,d,u])}let II=_.Fragment,OI=pp.RenderStrategy;function Doe(t,e){var r,n;let{transition:a=!0,beforeEnter:i,afterEnter:s,beforeLeave:o,afterLeave:c,enter:u,enterFrom:d,enterTo:f,entered:h,leave:p,leaveFrom:m,leaveTo:g,...y}=t,[x,v]=_.useState(null),b=_.useRef(null),w=AI(t),S=fi(...w?[b,e,v]:e===null?[]:[e]),E=(r=y.unmount)==null||r?ys.Unmount:ys.Hidden,{show:j,appear:I,initial:N}=Ioe(),[T,F]=_.useState(j?"visible":"hidden"),C=Ooe(),{register:A,unregister:k}=C;Lr(()=>A(b),[A,b]),Lr(()=>{if(E===ys.Hidden&&b.current){if(j&&T!=="visible"){F("visible");return}return $i(T,{hidden:()=>k(b),visible:()=>A(b)})}},[T,b,A,k,j,E]);let O=If();Lr(()=>{if(w&&O&&T==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,T,O,w]);let $=N&&!I,D=I&&j&&N,R=_.useRef(!1),M=TI(()=>{R.current||(F("hidden"),k(b))},C),L=pt(ue=>{R.current=!0;let ie=ue?"enter":"leave";M.onStart(b,ie,oe=>{oe==="enter"?i==null||i():oe==="leave"&&(o==null||o())})}),B=pt(ue=>{let ie=ue?"enter":"leave";R.current=!1,M.onStop(b,ie,oe=>{oe==="enter"?s==null||s():oe==="leave"&&(c==null||c())}),ie==="leave"&&!Gm(M)&&(F("hidden"),k(b))});_.useEffect(()=>{w&&a||(L(j),B(j))},[j,w,a]);let U=!(!a||!w||!O||$),[,q]=bse(U,x,j,{start:L,end:B}),te=xo({ref:S,className:((n=Jy(y.className,D&&u,D&&d,q.enter&&u,q.enter&&q.closed&&d,q.enter&&!q.closed&&f,q.leave&&p,q.leave&&!q.closed&&m,q.leave&&q.closed&&g,!q.transition&&j&&h))==null?void 0:n.trim())||void 0,...yse(q)}),V=0;T==="visible"&&(V|=ja.Open),T==="hidden"&&(V|=ja.Closed),j&&T==="hidden"&&(V|=ja.Opening),!j&&T==="visible"&&(V|=ja.Closing);let re=pa();return ne.createElement(Vm.Provider,{value:M},ne.createElement(ioe,{value:V},re({ourProps:te,theirProps:y,defaultTag:II,features:OI,visible:T==="visible",name:"Transition.Child"})))}function Poe(t,e){let{show:r,appear:n=!1,unmount:a=!0,...i}=t,s=_.useRef(null),o=AI(t),c=fi(...o?[s,e]:e===null?[]:[e]);If();let u=Hm();if(r===void 0&&u!==null&&(r=(u&ja.Open)===ja.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=_.useState(r?"visible":"hidden"),h=TI(()=>{r||f("hidden")}),[p,m]=_.useState(!0),g=_.useRef([r]);Lr(()=>{p!==!1&&g.current[g.current.length-1]!==r&&(g.current.push(r),m(!1))},[g,r]);let y=_.useMemo(()=>({show:r,appear:n,initial:p}),[r,n,p]);Lr(()=>{r?f("visible"):!Gm(h)&&s.current!==null&&f("hidden")},[r,h]);let x={unmount:a},v=pt(()=>{var S;p&&m(!1),(S=t.beforeEnter)==null||S.call(t)}),b=pt(()=>{var S;p&&m(!1),(S=t.beforeLeave)==null||S.call(t)}),w=pa();return ne.createElement(Vm.Provider,{value:h},ne.createElement(Wm.Provider,{value:y},w({ourProps:{...x,as:_.Fragment,children:ne.createElement(DI,{ref:c,...x,...i,beforeEnter:v,beforeLeave:b})},theirProps:{},defaultTag:_.Fragment,features:OI,visible:d==="visible",name:"Transition"})))}function Roe(t,e){let r=_.useContext(Wm)!==null,n=Hm()!==null;return ne.createElement(ne.Fragment,null,!r&&n?ne.createElement(ob,{ref:e,...t}):ne.createElement(DI,{ref:e,...t}))}let ob=kn(Poe),DI=kn(Doe),q2=kn(Roe),Moe=Object.assign(ob,{Child:q2,Root:ob});var Loe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Loe||{}),Boe=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Boe||{});let Foe={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Y2=_.createContext(null);Y2.displayName="DialogContext";function Xm(t){let e=_.useContext(Y2);if(e===null){let r=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Xm),r}return e}function $oe(t,e){return $i(e.type,Foe,t,e)}let X4=kn(function(t,e){let r=_.useId(),{id:n=`headlessui-dialog-${r}`,open:a,onClose:i,initialFocus:s,role:o="dialog",autoFocus:c=!0,__demoMode:u=!1,unmount:d=!1,...f}=t,h=_.useRef(!1);o=function(){return o==="dialog"||o==="alertdialog"?o:(h.current||(h.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let p=Hm();a===void 0&&p!==null&&(a=(p&ja.Open)===ja.Open);let m=_.useRef(null),g=fi(m,e),y=Bm(m),x=a?0:1,[v,b]=_.useReducer($oe,{titleId:null,descriptionId:null,panelRef:_.createRef()}),w=pt(()=>i(!1)),S=pt(q=>b({type:0,id:q})),E=If()?x===0:!1,[j,I]=moe(),N={get current(){var q;return(q=v.panelRef.current)!=null?q:m.current}},T=EI(),{resolveContainers:F}=boe({mainTreeNode:T,portals:j,defaultContainers:[N]}),C=p!==null?(p&ja.Closing)===ja.Closing:!1;Yie(u||C?!1:E,{allowed:pt(()=>{var q,te;return[(te=(q=m.current)==null?void 0:q.closest("[data-headlessui-portal]"))!=null?te:null]}),disallowed:pt(()=>{var q;return[(q=T==null?void 0:T.closest("body > *:not(#headlessui-portal-root)"))!=null?q:null]})});let A=tI.get(null);Lr(()=>{if(E)return A.actions.push(n),()=>A.actions.pop(n)},[A,n,E]);let k=aI(A,_.useCallback(q=>A.selectors.isTop(q,n),[A,n]));ose(k,F,q=>{q.preventDefault(),w()}),xoe(k,y==null?void 0:y.defaultView,q=>{q.preventDefault(),q.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),w()}),mse(u||C?!1:E,y,F),Kie(E,m,w);let[O,$]=Nie(),D=_.useMemo(()=>[{dialogState:x,close:w,setTitleId:S,unmount:d},v],[x,v,w,S,d]),R=_.useMemo(()=>({open:x===0}),[x]),M={ref:g,id:n,role:o,tabIndex:-1,"aria-modal":u?void 0:x===0?!0:void 0,"aria-labelledby":v.titleId,"aria-describedby":O,unmount:d},L=!yoe(),B=wo.None;E&&!u&&(B|=wo.RestoreFocus,B|=wo.TabLock,c&&(B|=wo.AutoFocus),L&&(B|=wo.InitialFocus));let U=pa();return ne.createElement(soe,null,ne.createElement(V4,{force:!0},ne.createElement(voe,null,ne.createElement(Y2.Provider,{value:D},ne.createElement(NI,{target:m},ne.createElement(V4,{force:!1},ne.createElement($,{slot:R},ne.createElement(I,null,ne.createElement(Soe,{initialFocus:s,initialFocusFallback:m,containers:F,features:B},ne.createElement(Tie,{value:w},U({ourProps:M,theirProps:f,slot:R,defaultTag:Uoe,features:zoe,visible:x===0,name:"Dialog"})))))))))))}),Uoe="div",zoe=pp.RenderStrategy|pp.Static;function Hoe(t,e){let{transition:r=!1,open:n,...a}=t,i=Hm(),s=t.hasOwnProperty("open")||i!==null,o=t.hasOwnProperty("onClose");if(!s&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(n!==void 0||r)&&!a.static?ne.createElement(G4,null,ne.createElement(Moe,{show:n,transition:r,unmount:a.unmount},ne.createElement(X4,{ref:e,...a}))):ne.createElement(G4,null,ne.createElement(X4,{ref:e,open:n,...a}))}let Woe="div";function Voe(t,e){let r=_.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:a=!1,...i}=t,[{dialogState:s,unmount:o},c]=Xm("Dialog.Panel"),u=fi(e,c.panelRef),d=_.useMemo(()=>({open:s===0}),[s]),f=pt(y=>{y.stopPropagation()}),h={ref:u,id:n,onClick:f},p=a?q2:_.Fragment,m=a?{unmount:o}:{},g=pa();return ne.createElement(p,{...m},g({ourProps:h,theirProps:i,slot:d,defaultTag:Woe,name:"Dialog.Panel"}))}let Goe="div";function Xoe(t,e){let{transition:r=!1,...n}=t,[{dialogState:a,unmount:i}]=Xm("Dialog.Backdrop"),s=_.useMemo(()=>({open:a===0}),[a]),o={ref:e,"aria-hidden":!0},c=r?q2:_.Fragment,u=r?{unmount:i}:{},d=pa();return ne.createElement(c,{...u},d({ourProps:o,theirProps:n,slot:s,defaultTag:Goe,name:"Dialog.Backdrop"}))}let qoe="h2";function Yoe(t,e){let r=_.useId(),{id:n=`headlessui-dialog-title-${r}`,...a}=t,[{dialogState:i,setTitleId:s}]=Xm("Dialog.Title"),o=fi(e);_.useEffect(()=>(s(n),()=>s(null)),[n,s]);let c=_.useMemo(()=>({open:i===0}),[i]),u={ref:o,id:n};return pa()({ourProps:u,theirProps:a,slot:c,defaultTag:qoe,name:"Dialog.Title"})}let Koe=kn(Hoe),Zoe=kn(Voe);kn(Xoe);let Qoe=kn(Yoe),Wv=Object.assign(Koe,{Panel:Zoe,Title:Qoe,Description:jie});const PI=t=>{if(!t)return"Дата не указана";try{return new Date(t).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}catch{return"Некорректная дата"}},lb=t=>{if(!t)return"--:--";try{return new Date(t).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},Joe=t=>{if(!t)return"Дата не указана";try{return new Date(t).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"})}catch{return"Некорректная дата"}},RI=t=>({conference:"Конференция",workshop:"Мастер-класс",meetup:"Встреча",seminar:"Семинар",webinar:"Вебинар",training:"Тренинг"})[t]||t,MI=t=>{switch(t){case"conference":return l.jsx(OM,{className:"w-3 h-3"});case"workshop":return l.jsx(Bj,{className:"w-3 h-3"});case"meetup":return l.jsx(Vt,{className:"w-3 h-3"});default:return l.jsx(Oe,{className:"w-3 h-3"})}},Sh=({event:t,isPast:e=!1,isCompact:r=!1})=>{const[n,a]=_.useState([]);_.useEffect(()=>{(async()=>{if(!(!t.speakers||!Array.isArray(t.speakers)))try{const h=t.speakers.filter(g=>typeof g=="string"&&g.length>0);if(h.length===0)return;const{data:p,error:m}=await de.from("speakers").select("id, name, photos").in("id",h).eq("active",!0);if(m)throw m;a(p||[])}catch(h){console.error("Error loading speakers:",h)}})()},[t.speakers]);const i=t.registrations||{},s=parseInt(i.current||"0")||0,o=parseInt(i.max_registrations||i.max_regs||"0")||0,c=o>0?s/o*100:0,u=()=>c>=90?"text-error-500":c>=70?"text-warning-500":"text-primary-500",d=f=>{if(!f.photos||!Array.isArray(f.photos))return null;const h=f.photos.find(p=>p.isMain)||f.photos[0];return h!=null&&h.url?zt(h.url):null};return l.jsxs("div",{className:`group relative bg-white dark:bg-dark-800 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 hover:border-primary-200 dark:hover:border-primary-600 ${r?"p-4":"p-6"}`,children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-400 via-primary-500 to-primary-600"}),l.jsxs("div",{className:r?"mt-2":"mt-4",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsxs("span",{className:"inline-flex items-center gap-1 bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 px-2 py-1 rounded-md text-xs font-medium",children:[MI(t.event_type),l.jsx("span",{className:"ml-1",children:RI(t.event_type)})]})}),l.jsx("h3",{className:`font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors ${r?"text-lg":"text-xl"}`,children:t.title||"Без названия"})]}),l.jsx("div",{className:"text-right ml-4",children:t.price>0?l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx(Zd,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"}),l.jsx("span",{className:`font-bold text-primary-600 dark:text-primary-400 ${r?"text-lg":"text-xl"}`,children:t.price.toLocaleString()}),l.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.currency||"RUB"})]})}):l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx(Dj,{className:`text-success-600 dark:text-success-400 ${r?"w-5 h-5":"w-6 h-6"}`}),l.jsx("span",{className:`font-bold text-success-600 dark:text-success-400 ${r?"text-sm":"text-base"}`,children:"Бесплатно"})]})})]}),l.jsxs("div",{className:`space-y-${r?"2":"4"}`,children:[l.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[l.jsx("div",{className:`flex items-center justify-center bg-primary-100 dark:bg-primary-900/30 rounded-lg mr-3 ${r?"w-6 h-6":"w-8 h-8"}`,children:l.jsx(Oe,{className:`text-primary-600 dark:text-primary-400 ${r?"w-3 h-3":"w-4 h-4"}`})}),l.jsx("span",{className:`font-medium ${r?"text-sm":""}`,children:PI(t.start_at)})]}),l.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[l.jsx("div",{className:`flex items-center justify-center bg-primary-100 dark:bg-primary-900/30 rounded-lg mr-3 ${r?"w-6 h-6":"w-8 h-8"}`,children:l.jsx(bn,{className:`text-primary-600 dark:text-primary-400 ${r?"w-3 h-3":"w-4 h-4"}`})}),l.jsxs("span",{className:`font-medium ${r?"text-sm":""}`,children:[lb(t.start_at)," - ",lb(t.end_at)]})]}),l.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[l.jsx("div",{className:`flex items-center justify-center bg-primary-100 dark:bg-primary-900/30 rounded-lg mr-3 ${r?"w-6 h-6":"w-8 h-8"}`,children:l.jsx(Vt,{className:`text-primary-600 dark:text-primary-400 ${r?"w-3 h-3":"w-4 h-4"}`})}),l.jsxs("span",{className:`font-medium ${r?"text-sm":""}`,children:[l.jsx("span",{className:u(),children:s})," из ",o," участников"]})]})]}),n.length>0&&!r&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Спикеры:"}),l.jsx("div",{className:"flex flex-wrap gap-3",children:n.map(f=>{const h=d(f);return l.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm font-medium",children:[h?l.jsx("img",{src:h,alt:f.name,className:"w-6 h-6 rounded-full object-cover border-2 border-primary-200 dark:border-primary-600"}):l.jsx("div",{className:"w-6 h-6 bg-primary-200 dark:bg-primary-600 rounded-full flex items-center justify-center",children:l.jsx(Vt,{className:"w-3 h-3 text-primary-600 dark:text-primary-300"})}),l.jsx("span",{children:f.name||"Без имени"})]},f.id)})})]}),e&&l.jsx("div",{className:"mt-4",children:l.jsxs("span",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-3 py-1 rounded-full text-sm font-medium",children:[l.jsx(jo,{className:"w-3 h-3 mr-1"}),"Завершено"]})})]})]})},Vv=({event:t,isPast:e=!1})=>{const r=t.registrations||{},n=parseInt(r.current||"0")||0,a=parseInt(r.max_registrations||r.max_regs||"0")||0;return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 hover:border-primary-200 dark:hover:border-primary-600 transition-all duration-200 hover:shadow-md relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-400 via-primary-500 to-primary-600"}),l.jsx("div",{className:"flex items-start justify-between mt-2",children:l.jsxs("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center",children:MI(t.event_type)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate mb-1",children:t.title&&t.title.length>50?`${t.title.substring(0,50)}...`:t.title||"Без названия"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Oe,{className:"w-3 h-3 mr-1"}),Joe(t.start_at)]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(bn,{className:"w-3 h-3 mr-1"}),lb(t.start_at)]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Vt,{className:"w-3 h-3 mr-1"}),n,"/",a]}),l.jsx("span",{className:"inline-flex items-center bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 px-2 py-0.5 rounded text-xs font-medium",children:RI(t.event_type)}),l.jsx("div",{className:"flex items-center gap-1",children:t.price>0?l.jsxs(l.Fragment,{children:[l.jsx(Zd,{className:"w-3 h-3"}),l.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.price.toLocaleString()," ",t.currency||"RUB"]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Dj,{className:"w-3 h-3 text-success-600"}),l.jsx("span",{className:"font-medium text-success-600",children:"Бесплатно"})]})}),e&&n>0&&l.jsx("button",{className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium text-xs underline",children:"Подробнее"})]})]})]})})]})},Eh=({title:t,value:e,subtitle:r,icon:n,color:a="primary"})=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all duration-200",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsx("div",{className:`w-6 h-6 bg-${a}-100 dark:bg-${a}-900/30 rounded-md flex items-center justify-center`,children:l.jsx(n,{className:`w-3 h-3 text-${a}-600 dark:text-${a}-400`})})}),l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t}),r&&l.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:r})]})]}),Ch=()=>l.jsxs("div",{className:"flex justify-center items-center py-12",children:[l.jsxs("div",{className:"relative",children:[l.jsx(mr,{className:"w-8 h-8 animate-spin text-primary-500"}),l.jsx("div",{className:"absolute inset-0 w-8 h-8 border-2 border-primary-200 dark:border-primary-800 rounded-full"})]}),l.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300 font-medium",children:"Загрузка данных..."})]}),Gv=({isListView:t,onToggle:e})=>l.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>e(!1),className:`p-2 rounded-md transition-all duration-200 ${t?"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300":"bg-white dark:bg-dark-700 text-primary-600 dark:text-primary-400 shadow-sm"}`,children:l.jsx(Pj,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>e(!0),className:`p-2 rounded-md transition-all duration-200 ${t?"bg-white dark:bg-dark-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:l.jsx(cw,{className:"w-4 h-4"})})]}),jh=async(t,e=0,r=10)=>{try{const n=new Date().toISOString();let a=de.from("events").select("*");if(t==="nearest"){const o=new Date(Date.now()+6048e5).toISOString();a=a.gte("start_at",n).lte("start_at",o).eq("status","active").order("start_at",{ascending:!0}).limit(1)}else t==="upcoming"?a=a.gte("start_at",n).eq("status","active").order("start_at",{ascending:!0}).range(e,e+r-1):t==="past"&&(a=a.or(`start_at.lt.${n},status.eq.past`).order("start_at",{ascending:!1}).range(e,e+r-1));const{data:i,error:s}=await a;if(s)throw console.error("Database error:",s),s;return{data:(i||[]).filter(o=>o&&o.id),hasMore:(i||[]).length===r}}catch(n){return console.error("Error loading events:",n),{data:[],hasMore:!1}}},ele=()=>{const[t,e]=_.useState("dashboard"),[r,n]=_.useState(!1),[a,i]=_.useState("all"),[s,o]=_.useState({start:"",end:""}),[c,u]=_.useState({nearest:[],upcoming:[],past:[]}),[d,f]=_.useState({nearest:!1,upcoming:!1,past:!1}),[h,p]=_.useState({upcoming:!1,past:!1}),[m,g]=_.useState({upcoming:{offset:0,hasMore:!0},past:{offset:0,hasMore:!0}}),[y,x]=_.useState({totalEvents:0,totalParticipants:0,totalRevenue:0,avgParticipants:0,completionRate:0}),[v,b]=_.useState(!1),[w,S]=_.useState("visitors"),E=async()=>{try{const O=new Map,$=["nearest","upcoming","past"];for(const L of $)for(const B of c[L]){const U=B.registrations||{};U.reg_list&&Array.isArray(U.reg_list)&&U.reg_list.forEach(q=>{if(q.email&&q.full_name){const te=q.email.toLowerCase().trim(),V=O.get(te);V?O.set(te,{full_name:V.full_name,count:V.count+1}):O.set(te,{full_name:q.full_name.trim(),count:1})}})}const D=Array.from(O.entries()).map(([L,B])=>({email:L,full_name:B.full_name,count:B.count})).sort((L,B)=>B.count-L.count);let M="\uFEFF"+`Имя,Email,Число посещений
`;D.forEach(L=>{M+=`"${L.full_name.replace(/"/g,'""')}","${L.email}",${L.count}
`}),I(M,"visitors_export"),alert(`Экспортировано ${D.length} уникальных посетителей`)}catch(O){console.error("Ошибка экспорта посетителей:",O),alert("Ошибка при экспорте данных посетителей")}},j=async()=>{try{const O=[],$=["nearest","upcoming","past"];for(const M of $)for(const L of c[M]){const U=(L.registrations||{}).reg_list||[],q=U.length,te=U.reduce((V,re)=>V+(re.total_amount||0),0);O.push({title:L.title||"Без названия",date:PI(L.start_at),participants:q,revenue:te})}let R="\uFEFF"+`Мероприятие,Дата,Участников,Выручка
`;O.forEach(M=>{R+=`"${M.title.replace(/"/g,'""')}","${M.date}",${M.participants},${M.revenue}
`}),I(R,"full_stats_export"),alert(`Экспортирована статистика по ${O.length} мероприятиям`)}catch(O){console.error("Ошибка экспорта статистики:",O),alert("Ошибка при экспорте полной статистики")}},I=(O,$)=>{const D=new Blob([O],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(D),M=document.createElement("a");M.setAttribute("href",R),M.setAttribute("download",`${$}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(M),M.click(),document.body.removeChild(M)},N=()=>{b(!0)},T=()=>{b(!1),w==="visitors"?E():j()},F=async()=>{try{let O=de.from("events").select("*");const $=new Date;let D,R;switch(a){case"today":D=new Date($.setHours(0,0,0,0)).toISOString(),R=new Date($.setHours(23,59,59,999)).toISOString();break;case"week":const V=new Date($.setDate($.getDate()-$.getDay()));D=new Date(V.setHours(0,0,0,0)).toISOString(),R=new Date().toISOString();break;case"month":D=new Date($.getFullYear(),$.getMonth(),1).toISOString(),R=new Date().toISOString();break;case"custom":s.start&&s.end?(D=new Date(s.start).toISOString(),R=new Date(s.end).toISOString()):(D=null,R=new Date().toISOString());break;default:R=new Date().toISOString()}a!=="all"?(D&&(O=O.gte("start_at",D)),O=O.lte("start_at",R)):O=O.or(`start_at.lt.${new Date().toISOString()},status.eq.past`);const{data:M,error:L}=await O;if(L)throw L;const B=(M==null?void 0:M.length)||0;let U=0,q=0,te=0;M==null||M.forEach(V=>{const re=V.registrations||{},ue=parseInt(re.current||"0")||0;U+=ue,V.price&&ue>0&&(q+=V.price*ue),(V.status==="completed"||ue>0)&&te++}),x({totalEvents:B,totalParticipants:U,totalRevenue:q,avgParticipants:B>0?Math.round(U/B):0,completionRate:B>0?Math.round(te/B*100):0})}catch(O){console.error("Error calculating stats:",O)}};_.useEffect(()=>{(async()=>{f({nearest:!0,upcoming:!0,past:!0});try{console.log("Loading initial data...");const[$,D,R]=await Promise.all([jh("nearest",0,1),jh("upcoming",0,6),jh("past",0,10)]);console.log("Loaded data:",{nearestResult:$,upcomingResult:D,pastResult:R}),u({nearest:$.data,upcoming:D.data,past:R.data}),g({upcoming:{offset:6,hasMore:D.hasMore},past:{offset:10,hasMore:R.hasMore}}),await F()}catch($){console.error("Error loading initial data:",$)}finally{f({nearest:!1,upcoming:!1,past:!1})}})()},[]),_.useEffect(()=>{F()},[a,s]);const C=async O=>{if(m[O].hasMore){p($=>({...$,[O]:!0}));try{const $=await jh(O,m[O].offset,10);u(D=>({...D,[O]:[...D[O],...$.data]})),g(D=>({...D,[O]:{offset:D[O].offset+10,hasMore:$.hasMore}}))}catch($){console.error(`Error loading more ${O} events:`,$)}finally{p($=>({...$,[O]:!1}))}}},A=[{id:"all",label:"Все время",icon:wk},{id:"today",label:"Сегодня",icon:Oe},{id:"week",label:"Неделя",icon:Oe},{id:"month",label:"Месяц",icon:Oe},{id:"custom",label:"Период",icon:wk}],k=[{id:"dashboard",label:"Дашборд",icon:Ed},{id:"upcoming",label:"Предстоящие",count:c.upcoming.length,icon:Oe},{id:"past",label:"Прошедшие",count:c.past.length,icon:jo}];return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-dark-900 dark:via-dark-900 dark:to-dark-800 py-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"mb-12 text-center",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-4",children:"Управление мероприятиями"}),l.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"Полная аналитика и контроль ваших событий"})]}),l.jsx("div",{className:"mb-10",children:l.jsx("div",{className:"flex flex-wrap justify-center gap-2 bg-white dark:bg-dark-800 p-2 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:k.map(O=>{const $=O.icon;return l.jsxs("button",{onClick:()=>e(O.id),className:`flex items-center justify-center px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${t===O.id?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg transform scale-105":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-dark-700"}`,children:[l.jsx($,{className:"w-5 h-5 mr-2"}),O.label,O.count&&O.count>0&&l.jsx("span",{className:`ml-3 px-2 py-1 text-sm rounded-full font-bold ${t===O.id?"bg-white/20 text-white":"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400"}`,children:O.count})]},O.id)})})}),l.jsxs("div",{className:"space-y-8",children:[t==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[l.jsx(Ed,{className:"w-5 h-5 mr-2 text-primary-500"}),"Статистика"]}),l.jsxs("button",{onClick:N,className:"flex items-center gap-2 bg-primary-500 hover:bg-primary-600 text-white px-3 py-1.5 rounded-lg transition-colors duration-200 shadow-sm text-sm",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Экспорт"]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Период:"}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.map(O=>{const $=O.icon;return l.jsxs("button",{onClick:()=>i(O.id),className:`flex items-center px-2 py-1 rounded-md font-medium transition-all duration-200 text-xs ${a===O.id?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[l.jsx($,{className:"w-3 h-3 mr-1"}),O.label]},O.id)})}),a==="custom"&&l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"От"}),l.jsx("input",{type:"date",value:s.start,onChange:O=>o($=>({...$,start:O.target.value})),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"До"}),l.jsx("input",{type:"date",value:s.end,onChange:O=>o($=>({...$,end:O.target.value})),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(Eh,{title:"Мероприятий",value:y.totalEvents,icon:Oe,color:"primary"}),l.jsx(Eh,{title:"Участников",value:y.totalParticipants.toLocaleString(),icon:Vt,color:"success"}),l.jsx(Eh,{title:"Выручка",value:`${Math.round(y.totalRevenue/1e3)}K ₽`,icon:Hu,color:"warning"}),l.jsx(Eh,{title:"Ср. посещ.",value:y.avgParticipants,subtitle:`${y.completionRate}% успех`,icon:jo,color:"error"})]})]})}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[l.jsx(bn,{className:"w-5 h-5 mr-2 text-primary-500"}),"Ближайшее мероприятие"]}),d.nearest?l.jsx(Ch,{}):c.nearest.length>0?l.jsx("div",{children:c.nearest.map(O=>l.jsx(Sh,{event:O},O.id))}):l.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/20 dark:to-primary-800/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Oe,{className:"w-8 h-8 text-primary-500"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Нет ближайших мероприятий"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Запланируйте новое мероприятие"})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[l.jsx(Oe,{className:"w-6 h-6 mr-3 text-primary-500"}),"Предстоящие мероприятия"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Gv,{isListView:r,onToggle:n}),l.jsxs("button",{onClick:()=>e("upcoming"),className:"flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:[l.jsx(Jd,{className:"w-4 h-4 mr-1"}),"Смотреть все"]})]})]}),d.upcoming?l.jsx(Ch,{}):c.upcoming.length>0?l.jsx("div",{children:r?l.jsx("div",{className:"space-y-3",children:c.upcoming.slice(0,6).map(O=>l.jsx(Vv,{event:O},O.id))}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:c.upcoming.slice(0,6).map(O=>l.jsx(Sh,{event:O,isCompact:!0},O.id))})}):l.jsxs("div",{className:"text-center py-12 bg-white dark:bg-dark-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/20 dark:to-primary-800/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Oe,{className:"w-8 h-8 text-primary-500"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Нет предстоящих мероприятий"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Создайте новое мероприятие"})]})]})]}),t==="upcoming"&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[l.jsx(Oe,{className:"w-6 h-6 mr-3 text-primary-500"}),"Предстоящие мероприятия"]}),l.jsx(Gv,{isListView:r,onToggle:n})]}),d.upcoming?l.jsx(Ch,{}):c.upcoming.length>0?l.jsxs("div",{className:"space-y-8",children:[r?l.jsx("div",{className:"space-y-3",children:c.upcoming.map(O=>l.jsx(Vv,{event:O},O.id))}):l.jsx("div",{className:"grid gap-8 md:grid-cols-2 xl:grid-cols-3",children:c.upcoming.map(O=>l.jsx(Sh,{event:O},O.id))}),m.upcoming.hasMore&&l.jsx("div",{className:"text-center pt-4",children:l.jsx("button",{onClick:()=>C("upcoming"),disabled:h.upcoming,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:h.upcoming?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"w-5 h-5 mr-2 animate-spin"}),"Загрузка..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Cd,{className:"w-5 h-5 mr-2"}),"Показать еще 10 мероприятий"]})})})]}):l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/20 dark:to-primary-800/20 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Oe,{className:"w-12 h-12 text-primary-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Нет предстоящих мероприятий"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Создайте новое мероприятие, чтобы начать привлекать участников"})]})]}),t==="past"&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[l.jsx(jo,{className:"w-6 h-6 mr-3 text-primary-500"}),"Прошедшие мероприятия"]}),l.jsx(Gv,{isListView:r,onToggle:n})]}),d.past?l.jsx(Ch,{}):c.past.length>0?l.jsxs("div",{className:"space-y-8",children:[r?l.jsx("div",{className:"space-y-3",children:c.past.map(O=>l.jsx(Vv,{event:O,isPast:!0},O.id))}):l.jsx("div",{className:"grid gap-8 md:grid-cols-2 xl:grid-cols-3",children:c.past.map(O=>l.jsx(Sh,{event:O,isPast:!0},O.id))}),m.past.hasMore&&l.jsx("div",{className:"text-center pt-4",children:l.jsx("button",{onClick:()=>C("past"),disabled:h.past,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:h.past?l.jsxs(l.Fragment,{children:[l.jsx(mr,{className:"w-5 h-5 mr-2 animate-spin"}),"Загрузка..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Cd,{className:"w-5 h-5 mr-2"}),"Показать еще 10 мероприятий"]})})})]}):l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary-100 to-primary-200 dark:from-primary-900/20 dark:to-primary-800/20 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(jo,{className:"w-12 h-12 text-primary-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Нет прошедших мероприятий"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Здесь появится история ваших завершенных мероприятий"})]})]})]}),l.jsx(Wv,{open:v,onClose:()=>b(!1),className:"fixed z-50 inset-0 overflow-y-auto",children:l.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx(Wv.Overlay,{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity"}),l.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),l.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[l.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[l.jsx(Wv.Title,{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Выберите тип экспорта"}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{id:"visitors-export",type:"radio",checked:w==="visitors",onChange:()=>S("visitors"),className:"h-4 w-4 mt-1 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600"}),l.jsxs("label",{htmlFor:"visitors-export",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:[l.jsx("span",{className:"font-semibold",children:"Только посетители"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Содержит: Имя, Email, Число посещений"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{id:"fullstats-export",type:"radio",checked:w==="full_stats",onChange:()=>S("full_stats"),className:"h-4 w-4 mt-1 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600"}),l.jsxs("label",{htmlFor:"fullstats-export",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:[l.jsx("span",{className:"font-semibold",children:"Полная статистика"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Содержит: Мероприятие, Дата, Участников, Выручка"})]})]})]})]}),l.jsxs("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[l.jsx("button",{type:"button",onClick:T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:"Экспортировать"}),l.jsx("button",{type:"button",onClick:()=>b(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-dark-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Отмена"})]})]})]})})]})})},tle=()=>{const[t,e]=_.useState([]),[r,n]=_.useState({totalToday:0,totalThisWeek:0,totalThisMonth:0,uniqueUsersToday:0,uniqueUsersThisMonth:0,eventAttendance:0,generalAttendance:0}),[a,i]=_.useState(!0),[s,o]=_.useState(!1),[c,u]=_.useState(""),[d,f]=_.useState("all"),[h,p]=_.useState("week"),[m,g]=_.useState(1),[y,x]=_.useState(!0),v=20;_.useEffect(()=>{b()},[d,h,c]);const b=async()=>{try{i(!0),await Promise.all([w(),S(1)])}catch(T){console.error("Error fetching data:",T),K.error("Ошибка загрузки данных")}finally{i(!1)}},w=async()=>{try{const T=new Date,F=new Date(T.getFullYear(),T.getMonth(),T.getDate()),C=Gk(T,7),A=Ad(T),{data:k,error:O}=await de.from("user_attendance").select(`
          id,
          scanned_at,
          attendance_type,
          user_id
        `);if(O)throw O;const $=k.filter(B=>new Date(B.scanned_at)>=F),D=k.filter(B=>new Date(B.scanned_at)>=C),R=k.filter(B=>new Date(B.scanned_at)>=A),M=new Set($.map(B=>B.user_id)).size,L=new Set(R.map(B=>B.user_id)).size;n({totalToday:$.length,totalThisWeek:D.length,totalThisMonth:R.length,uniqueUsersToday:M,uniqueUsersThisMonth:L,eventAttendance:k.filter(B=>B.attendance_type==="event").length,generalAttendance:k.filter(B=>B.attendance_type==="general").length})}catch(T){console.error("Error fetching stats:",T)}},S=async T=>{try{let F=de.from("user_attendance").select(`
          *,
          user_profile:profiles!user_attendance_user_id_fkey(name),
          scanned_by_profile:profiles!user_attendance_scanned_by_fkey(name),
          event:events(title, event_type)
        `).order("scanned_at",{ascending:!1});if(d!=="all"&&(F=F.eq("attendance_type",d)),h!=="all"){const $=new Date;let D;switch(h){case"today":D=new Date($.getFullYear(),$.getMonth(),$.getDate());break;case"week":D=Gk($,7);break;case"month":D=Ad($);break;default:D=new Date(0)}F=F.gte("scanned_at",D.toISOString())}if(c){const{data:$,error:D}=await de.from("profiles").select("id").ilike("name",`%${c}%`);if(D)throw D;if($&&$.length>0){const R=$.map(M=>M.id);F=F.in("user_id",R)}else{e([]),x(!1);return}}const C=(T-1)*v,A=C+v-1;F=F.range(C,A);const{data:k,error:O}=await F;if(O)throw O;e(T===1?k||[]:$=>[...$,...k||[]]),x(((k==null?void 0:k.length)||0)===v),g(T)}catch(F){console.error("Error fetching attendance records:",F),K.error("Ошибка загрузки записей посещений")}},E=async()=>{try{const{data:T,error:F}=await de.from("user_attendance").select(`
          scanned_at,
          attendance_type,
          location,
          notes,
          user_profile:profiles!user_attendance_user_id_fkey(name),
          scanned_by_profile:profiles!user_attendance_scanned_by_fkey(name),
          event:events(title, event_type)
        `).order("scanned_at",{ascending:!1});if(F)throw F;const A=[["Дата и время","Пользователь","Тип посещения","Мероприятие","Местоположение","Заметки","Отметил"].join(","),...T.map(D=>[lt(new Date(D.scanned_at),"dd.MM.yyyy HH:mm"),`"${D.user_profile.name}"`,D.attendance_type==="event"?"Мероприятие":"Общее",D.event?`"${D.event.title}"`:"",D.location?`"${D.location}"`:"",D.notes?`"${D.notes}"`:"",`"${D.scanned_by_profile.name}"`].join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),$=URL.createObjectURL(k);O.setAttribute("href",$),O.setAttribute("download",`attendance_${lt(new Date,"yyyy-MM-dd")}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O),K.success("Данные экспортированы")}catch(T){console.error("Error exporting data:",T),K.error("Ошибка экспорта данных")}},j=()=>{y&&!a&&S(m+1)},I=T=>lt(new Date(T),"dd.MM.yyyy HH:mm"),N=T=>{switch(T){case"event":return"Мероприятие";case"coworking":return"Коворкинг";default:return"Общее"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-500 bg-clip-text text-transparent mb-2",children:"Управление посещениями"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Сканирование QR-кодов и учет посещений пользователей"})]}),l.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center gap-2",children:[l.jsx(dc,{className:"h-5 w-5"}),"Сканировать QR-код"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Сегодня"}),l.jsx("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:r.totalToday}),l.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:[r.uniqueUsersToday," уникальных пользователей"]})]}),l.jsx(Oe,{className:"h-12 w-12 text-blue-500 opacity-80"})]})}),l.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-6 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:"За неделю"}),l.jsx("p",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:r.totalThisWeek}),l.jsx("p",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:"посещений"})]}),l.jsx(jo,{className:"h-12 w-12 text-green-500 opacity-80"})]})}),l.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 mb-1",children:"За месяц"}),l.jsx("p",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:r.totalThisMonth}),l.jsxs("p",{className:"text-xs text-purple-500 dark:text-purple-400 mt-1",children:[r.uniqueUsersThisMonth," уникальных пользователей"]})]}),l.jsx(Vt,{className:"h-12 w-12 text-purple-500 opacity-80"})]})}),l.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-6 rounded-xl",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 mb-1",children:"Мероприятия"}),l.jsx("p",{className:"text-3xl font-bold text-orange-700 dark:text-orange-300",children:r.eventAttendance}),l.jsxs("p",{className:"text-xs text-orange-500 dark:text-orange-400 mt-1",children:["vs ",r.generalAttendance," общих"]})]}),l.jsx(Ed,{className:"h-12 w-12 text-orange-500 opacity-80"})]})})]}),l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md p-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"relative",children:[l.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Поиск по имени...",value:c,onChange:T=>u(T.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg dark:bg-dark-700 w-64"})]}),l.jsxs("select",{value:d,onChange:T=>f(T.target.value),className:"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg dark:bg-dark-700",children:[l.jsx("option",{value:"all",children:"Все типы"}),l.jsx("option",{value:"event",children:"Мероприятия"}),l.jsx("option",{value:"general",children:"Общие посещения"})]}),l.jsxs("select",{value:h,onChange:T=>p(T.target.value),className:"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg dark:bg-dark-700",children:[l.jsx("option",{value:"today",children:"Сегодня"}),l.jsx("option",{value:"week",children:"Последние 7 дней"}),l.jsx("option",{value:"month",children:"Этот месяц"}),l.jsx("option",{value:"all",children:"Все время"})]})]}),l.jsxs("button",{onClick:E,className:"btn-outline flex items-center gap-2",children:[l.jsx(Qd,{className:"h-4 w-4"}),"Экспорт CSV"]})]})}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-600",children:l.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[l.jsx(Jd,{className:"h-5 w-5"}),"Записи посещений"]})}),a&&t.length===0?l.jsx("div",{className:"p-8",children:l.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((T,F)=>l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-dark-600 rounded-full"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-600 rounded w-1/4 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 dark:bg-dark-600 rounded w-1/2"})]}),l.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-600 rounded w-20"})]},F))})}):t.length>0?l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-dark-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Пользователь"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Дата и время"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Тип"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Мероприятие/Место"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Отметил"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Заметки"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-600",children:t.map(T=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.user_profile.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:I(T.scanned_at)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.attendance_type==="event"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:N(T.attendance_type)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:T.event?l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:T.event.title}),l.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:T.event.event_type})]}):T.location||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:T.scanned_by_profile.name})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white max-w-xs",children:T.notes?l.jsx("div",{className:"truncate",title:T.notes,children:T.notes}):"-"})]},T.id))})]}),y&&l.jsx("div",{className:"p-6 text-center border-t border-gray-200 dark:border-dark-600",children:l.jsx("button",{onClick:j,disabled:a,className:"btn-outline",children:a?"Загрузка...":"Показать больше"})})]}):l.jsxs("div",{className:"p-12 text-center text-gray-500 dark:text-gray-400",children:[l.jsx(Vt,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Нет записей посещений"}),l.jsx("p",{className:"text-sm",children:c||d!=="all"||h!=="all"?"Попробуйте изменить фильтры поиска":"Начните сканировать QR-коды пользователей для отметки посещений"})]})]}),s&&l.jsx(aT,{isOpen:s,onClose:()=>{o(!1),b()}})]})},Xv=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),rle=({children:t})=>{const[e,r]=_.useState(null),[n,a]=_.useState(null),[i,s]=_.useState(!1),o=Ma();_.useEffect(()=>{c();const{data:{subscription:d}}=Xv.auth.onAuthStateChange((f,h)=>{f==="SIGNED_IN"?(u(h==null?void 0:h.user.id),r(!0),s(!1)):f==="SIGNED_OUT"&&(r(!1),a(!1),s(!0),o("/"))});return()=>{d.unsubscribe()}},[o]);const c=async()=>{try{const{data:{session:d}}=await Xv.auth.getSession(),f=!!d;r(f),f?await u(d.user.id):s(!0)}catch(d){console.error("Error checking auth status:",d),r(!1),a(!1),s(!0)}},u=async d=>{try{const{data:f,error:h}=await Xv.from("profiles").select("role").eq("id",d).single();if(h)throw h;const p=(f==null?void 0:f.role)==="Admin";a(p),p||(K.error("У вас нет доступа к панели управления"),o("/"))}catch(f){console.error("Error checking user role:",f),a(!1),K.error("Ошибка при проверке прав доступа"),o("/")}};return e===null||n===null?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsxs(l.Fragment,{children:[!e&&l.jsx(vw,{isOpen:i,onClose:()=>{s(!1),o("/")}}),e&&n?t:null]})},nle=({children:t})=>{const[e,r]=_.useState(null),[n,a]=_.useState(!1),i=Hi();_.useEffect(()=>{s();const{data:{subscription:o}}=de.auth.onAuthStateChange((c,u)=>{c==="SIGNED_IN"?(r(!0),a(!1)):c==="SIGNED_OUT"&&r(!1)});return()=>{o.unsubscribe()}},[]);const s=async()=>{try{const{data:{session:o}}=await de.auth.getSession(),c=!!o;r(c),c||a(!0)}catch(o){console.error("Error checking auth status:",o),r(!1),a(!0)}};return e===null?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.jsxs(l.Fragment,{children:[!e&&l.jsx(vw,{isOpen:n,onClose:()=>a(!1)}),e?t:l.jsx(yR,{to:"/",state:{from:i},replace:!0})]})};var q4={};const ale="react-tooltip-core-styles",ile="react-tooltip-base-styles",Y4={core:!1,base:!1};function K4({css:t,id:e=ile,type:r="base",ref:n}){var a,i;if(!t||typeof document>"u"||Y4[r]||r==="core"&&typeof process<"u"&&(!((a=process==null?void 0:q4)===null||a===void 0)&&a.REACT_TOOLTIP_DISABLE_CORE_STYLES)||r!=="base"&&typeof process<"u"&&(!((i=process==null?void 0:q4)===null||i===void 0)&&i.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;r==="core"&&(e=ale),n||(n={});const{insertAt:s}=n;if(document.getElementById(e))return;const o=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.id=e,c.type="text/css",s==="top"&&o.firstChild?o.insertBefore(c,o.firstChild):o.appendChild(c),c.styleSheet?c.styleSheet.cssText=t:c.appendChild(document.createTextNode(t)),Y4[r]=!0}const Z4=async({elementReference:t=null,tooltipReference:e=null,tooltipArrowReference:r=null,place:n="top",offset:a=10,strategy:i="absolute",middlewares:s=[toe(Number(a)),noe({fallbackAxisSideDirection:"start"}),roe({padding:5})],border:o,arrowSize:c=8})=>{if(!t)return{tooltipStyles:{},tooltipArrowStyles:{},place:n};if(e===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:n};const u=s;return r?(u.push(aoe({element:r,padding:5})),W4(t,e,{placement:n,strategy:i,middleware:u}).then(({x:d,y:f,placement:h,middlewareData:p})=>{var m,g;const y={left:`${d}px`,top:`${f}px`,border:o},{x,y:v}=(m=p.arrow)!==null&&m!==void 0?m:{x:0,y:0},b=(g={top:"bottom",right:"left",bottom:"top",left:"right"}[h.split("-")[0]])!==null&&g!==void 0?g:"bottom",w=o&&{borderBottom:o,borderRight:o};let S=0;if(o){const E=`${o}`.match(/(\d+)px/);S=E!=null&&E[1]?Number(E[1]):1}return{tooltipStyles:y,tooltipArrowStyles:{left:x!=null?`${x}px`:"",top:v!=null?`${v}px`:"",right:"",bottom:"",...w,[b]:`-${c/2+S}px`},place:h}})):W4(t,e,{placement:"bottom",strategy:i,middleware:u}).then(({x:d,y:f,placement:h})=>({tooltipStyles:{left:`${d}px`,top:`${f}px`},tooltipArrowStyles:{},place:h}))},Q4=(t,e)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(t,e),J4=(t,e,r)=>{let n=null;const a=function(...i){const s=()=>{n=null};!n&&(t.apply(this,i),n=setTimeout(s,e))};return a.cancel=()=>{n&&(clearTimeout(n),n=null)},a},eE=t=>t!==null&&!Array.isArray(t)&&typeof t=="object",cb=(t,e)=>{if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((a,i)=>cb(a,e[i]));if(Array.isArray(t)!==Array.isArray(e))return!1;if(!eE(t)||!eE(e))return t===e;const r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(a=>cb(t[a],e[a]))},sle=t=>{if(!(t instanceof HTMLElement||t instanceof SVGElement))return!1;const e=getComputedStyle(t);return["overflow","overflow-x","overflow-y"].some(r=>{const n=e.getPropertyValue(r);return n==="auto"||n==="scroll"})},tE=t=>{if(!t)return null;let e=t.parentElement;for(;e;){if(sle(e))return e;e=e.parentElement}return document.scrollingElement||document.documentElement},ole=typeof window<"u"?_.useLayoutEffect:_.useEffect,Yn=t=>{t.current&&(clearTimeout(t.current),t.current=null)},lle="DEFAULT_TOOLTIP_ID",cle={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},ule=_.createContext({getTooltipData:()=>cle});function LI(t=lle){return _.useContext(ule).getTooltipData(t)}var yl={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},qv={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const dle=({forwardRef:t,id:e,className:r,classNameArrow:n,variant:a="dark",anchorId:i,anchorSelect:s,place:o="top",offset:c=10,events:u=["hover"],openOnClick:d=!1,positionStrategy:f="absolute",middlewares:h,wrapper:p,delayShow:m=0,delayHide:g=0,float:y=!1,hidden:x=!1,noArrow:v=!1,clickable:b=!1,closeOnEsc:w=!1,closeOnScroll:S=!1,closeOnResize:E=!1,openEvents:j,closeEvents:I,globalCloseEvents:N,imperativeModeOnly:T,style:F,position:C,afterShow:A,afterHide:k,disableTooltip:O,content:$,contentWrapperRef:D,isOpen:R,defaultIsOpen:M=!1,setIsOpen:L,activeAnchor:B,setActiveAnchor:U,border:q,opacity:te,arrowColor:V,arrowSize:re=8,role:ue="tooltip"})=>{var ie;const oe=_.useRef(null),ye=_.useRef(null),se=_.useRef(null),Te=_.useRef(null),Fe=_.useRef(null),[P,Q]=_.useState({tooltipStyles:{},tooltipArrowStyles:{},place:o}),[X,W]=_.useState(!1),[H,G]=_.useState(!1),[J,ae]=_.useState(null),Z=_.useRef(!1),ce=_.useRef(null),{anchorRefs:ve,setActiveAnchor:fe}=LI(e),_e=_.useRef(!1),[Ve,Re]=_.useState([]),Gt=_.useRef(!1),Un=d||u.includes("click"),an=Un||(j==null?void 0:j.click)||(j==null?void 0:j.dblclick)||(j==null?void 0:j.mousedown),zn=j?{...j}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!j&&Un&&Object.assign(zn,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const nt=I?{...I}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!I&&Un&&Object.assign(nt,{mouseleave:!1,blur:!1,mouseout:!1});const Tr=N?{...N}:{escape:w||!1,scroll:S||!1,resize:E||!1,clickOutsideAnchor:an||!1};T&&(Object.assign(zn,{mouseover:!1,focus:!1,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(nt,{mouseout:!1,blur:!1,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(Tr,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),ole(()=>(Gt.current=!0,()=>{Gt.current=!1}),[]);const St=xe=>{Gt.current&&(xe&&G(!0),setTimeout(()=>{Gt.current&&(L==null||L(xe),R===void 0&&W(xe))},10))};_.useEffect(()=>{if(R===void 0)return()=>null;R&&G(!0);const xe=setTimeout(()=>{W(R)},10);return()=>{clearTimeout(xe)}},[R]),_.useEffect(()=>{if(X!==Z.current)if(Yn(Fe),Z.current=X,X)A==null||A();else{const xe=(Ie=>{const De=Ie.match(/^([\d.]+)(ms|s)$/);if(!De)return 0;const[,Zt,Ir]=De;return Number(Zt)*(Ir==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));Fe.current=setTimeout(()=>{G(!1),ae(null),k==null||k()},xe+25)}},[X]);const sn=xe=>{Q(Ie=>cb(Ie,xe)?Ie:xe)},Vi=(xe=m)=>{Yn(se),H?St(!0):se.current=setTimeout(()=>{St(!0)},xe)},Gi=(xe=g)=>{Yn(Te),Te.current=setTimeout(()=>{_e.current||St(!1)},xe)},Qs=xe=>{var Ie;if(!xe)return;const De=(Ie=xe.currentTarget)!==null&&Ie!==void 0?Ie:xe.target;if(!(De!=null&&De.isConnected))return U(null),void fe({current:null});m?Vi():St(!0),U(De),fe({current:De}),Yn(Te)},Xi=()=>{b?Gi(g||100):g?Gi():St(!1),Yn(se)},pi=({x:xe,y:Ie})=>{var De;const Zt={getBoundingClientRect:()=>({x:xe,y:Ie,width:0,height:0,top:Ie,left:xe,right:xe,bottom:Ie})};Z4({place:(De=J==null?void 0:J.place)!==null&&De!==void 0?De:o,offset:c,elementReference:Zt,tooltipReference:oe.current,tooltipArrowReference:ye.current,strategy:f,middlewares:h,border:q,arrowSize:re}).then(Ir=>{sn(Ir)})},Hn=xe=>{if(!xe)return;const Ie=xe,De={x:Ie.clientX,y:Ie.clientY};pi(De),ce.current=De},Ba=xe=>{var Ie;if(!X)return;const De=xe.target;De.isConnected&&(!((Ie=oe.current)===null||Ie===void 0)&&Ie.contains(De)||[document.querySelector(`[id='${i}']`),...Ve].some(Zt=>Zt==null?void 0:Zt.contains(De))||(St(!1),Yn(se)))},Df=J4(Qs,50),sr=J4(Xi,50),Wn=xe=>{sr.cancel(),Df(xe)},je=()=>{Df.cancel(),sr()},Xe=_.useCallback(()=>{var xe,Ie;const De=(xe=J==null?void 0:J.position)!==null&&xe!==void 0?xe:C;De?pi(De):y?ce.current&&pi(ce.current):B!=null&&B.isConnected&&Z4({place:(Ie=J==null?void 0:J.place)!==null&&Ie!==void 0?Ie:o,offset:c,elementReference:B,tooltipReference:oe.current,tooltipArrowReference:ye.current,strategy:f,middlewares:h,border:q,arrowSize:re}).then(Zt=>{Gt.current&&sn(Zt)})},[X,B,$,F,o,J==null?void 0:J.place,c,f,C,J==null?void 0:J.position,y,re]);_.useEffect(()=>{var xe,Ie;const De=new Set(ve);Ve.forEach(at=>{O!=null&&O(at)||De.add({current:at})});const Zt=document.querySelector(`[id='${i}']`);Zt&&!(O!=null&&O(Zt))&&De.add({current:Zt});const Ir=()=>{St(!1)},Fa=tE(B),$a=tE(oe.current);Tr.scroll&&(window.addEventListener("scroll",Ir),Fa==null||Fa.addEventListener("scroll",Ir),$a==null||$a.addEventListener("scroll",Ir));let Ur=null;Tr.resize?window.addEventListener("resize",Ir):B&&oe.current&&(Ur=eoe(B,oe.current,Xe,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const Vn=at=>{at.key==="Escape"&&St(!1)};Tr.escape&&window.addEventListener("keydown",Vn),Tr.clickOutsideAnchor&&window.addEventListener("click",Ba);const Et=[],cl=at=>!!(at!=null&&at.target&&(B!=null&&B.contains(at.target))),QI=at=>{X&&cl(at)||Qs(at)},JI=at=>{X&&cl(at)&&Xi()},J2=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],e_=["click","dblclick","mousedown","mouseup"];Object.entries(zn).forEach(([at,mi])=>{mi&&(J2.includes(at)?Et.push({event:at,listener:Wn}):e_.includes(at)&&Et.push({event:at,listener:QI}))}),Object.entries(nt).forEach(([at,mi])=>{mi&&(J2.includes(at)?Et.push({event:at,listener:je}):e_.includes(at)&&Et.push({event:at,listener:JI}))}),y&&Et.push({event:"pointermove",listener:Hn});const t_=()=>{_e.current=!0},r_=()=>{_e.current=!1,Xi()},n_=b&&(nt.mouseout||nt.mouseleave);return n_&&((xe=oe.current)===null||xe===void 0||xe.addEventListener("mouseover",t_),(Ie=oe.current)===null||Ie===void 0||Ie.addEventListener("mouseout",r_)),Et.forEach(({event:at,listener:mi})=>{De.forEach(Km=>{var Hc;(Hc=Km.current)===null||Hc===void 0||Hc.addEventListener(at,mi)})}),()=>{var at,mi;Tr.scroll&&(window.removeEventListener("scroll",Ir),Fa==null||Fa.removeEventListener("scroll",Ir),$a==null||$a.removeEventListener("scroll",Ir)),Tr.resize?window.removeEventListener("resize",Ir):Ur==null||Ur(),Tr.clickOutsideAnchor&&window.removeEventListener("click",Ba),Tr.escape&&window.removeEventListener("keydown",Vn),n_&&((at=oe.current)===null||at===void 0||at.removeEventListener("mouseover",t_),(mi=oe.current)===null||mi===void 0||mi.removeEventListener("mouseout",r_)),Et.forEach(({event:Km,listener:Hc})=>{De.forEach(eO=>{var Zm;(Zm=eO.current)===null||Zm===void 0||Zm.removeEventListener(Km,Hc)})})}},[B,Xe,H,ve,Ve,j,I,N,Un,m,g]),_.useEffect(()=>{var xe,Ie;let De=(Ie=(xe=J==null?void 0:J.anchorSelect)!==null&&xe!==void 0?xe:s)!==null&&Ie!==void 0?Ie:"";!De&&e&&(De=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`);const Zt=new MutationObserver(Ir=>{const Fa=[],$a=[];Ir.forEach(Ur=>{if(Ur.type==="attributes"&&Ur.attributeName==="data-tooltip-id"&&(Ur.target.getAttribute("data-tooltip-id")===e?Fa.push(Ur.target):Ur.oldValue===e&&$a.push(Ur.target)),Ur.type==="childList"){if(B){const Vn=[...Ur.removedNodes].filter(Et=>Et.nodeType===1);if(De)try{$a.push(...Vn.filter(Et=>Et.matches(De))),$a.push(...Vn.flatMap(Et=>[...Et.querySelectorAll(De)]))}catch{}Vn.some(Et=>{var cl;return!!(!((cl=Et==null?void 0:Et.contains)===null||cl===void 0)&&cl.call(Et,B))&&(G(!1),St(!1),U(null),Yn(se),Yn(Te),!0)})}if(De)try{const Vn=[...Ur.addedNodes].filter(Et=>Et.nodeType===1);Fa.push(...Vn.filter(Et=>Et.matches(De))),Fa.push(...Vn.flatMap(Et=>[...Et.querySelectorAll(De)]))}catch{}}}),(Fa.length||$a.length)&&Re(Ur=>[...Ur.filter(Vn=>!$a.includes(Vn)),...Fa])});return Zt.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{Zt.disconnect()}},[e,s,J==null?void 0:J.anchorSelect,B]),_.useEffect(()=>{Xe()},[Xe]),_.useEffect(()=>{if(!(D!=null&&D.current))return()=>null;const xe=new ResizeObserver(()=>{setTimeout(()=>Xe())});return xe.observe(D.current),()=>{xe.disconnect()}},[$,D==null?void 0:D.current]),_.useEffect(()=>{var xe;const Ie=document.querySelector(`[id='${i}']`),De=[...Ve,Ie];B&&De.includes(B)||U((xe=Ve[0])!==null&&xe!==void 0?xe:Ie)},[i,Ve,B]),_.useEffect(()=>(M&&St(!0),()=>{Yn(se),Yn(Te)}),[]),_.useEffect(()=>{var xe;let Ie=(xe=J==null?void 0:J.anchorSelect)!==null&&xe!==void 0?xe:s;if(!Ie&&e&&(Ie=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`),Ie)try{const De=Array.from(document.querySelectorAll(Ie));Re(De)}catch{Re([])}},[e,s,J==null?void 0:J.anchorSelect]),_.useEffect(()=>{se.current&&(Yn(se),Vi(m))},[m]);const Nn=(ie=J==null?void 0:J.content)!==null&&ie!==void 0?ie:$,Js=X&&Object.keys(P.tooltipStyles).length>0;return _.useImperativeHandle(t,()=>({open:xe=>{if(xe!=null&&xe.anchorSelect)try{document.querySelector(xe.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${xe.anchorSelect}" is not a valid CSS selector`)}ae(xe??null),xe!=null&&xe.delay?Vi(xe.delay):St(!0)},close:xe=>{xe!=null&&xe.delay?Gi(xe.delay):St(!1)},activeAnchor:B,place:P.place,isOpen:!!(H&&!x&&Nn&&Js)})),H&&!x&&Nn?ne.createElement(p,{id:e,role:ue,className:Y1("react-tooltip",yl.tooltip,qv.tooltip,qv[a],r,`react-tooltip__place-${P.place}`,yl[Js?"show":"closing"],Js?"react-tooltip__show":"react-tooltip__closing",f==="fixed"&&yl.fixed,b&&yl.clickable),onTransitionEnd:xe=>{Yn(Fe),X||xe.propertyName!=="opacity"||(G(!1),ae(null),k==null||k())},style:{...F,...P.tooltipStyles,opacity:te!==void 0&&Js?te:void 0},ref:oe},Nn,ne.createElement(p,{className:Y1("react-tooltip-arrow",yl.arrow,qv.arrow,n,v&&yl.noArrow),style:{...P.tooltipArrowStyles,background:V?`linear-gradient(to right bottom, transparent 50%, ${V} 50%)`:void 0,"--rt-arrow-size":`${re}px`},ref:ye})):null},fle=({content:t})=>ne.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),hle=ne.forwardRef(({id:t,anchorId:e,anchorSelect:r,content:n,html:a,render:i,className:s,classNameArrow:o,variant:c="dark",place:u="top",offset:d=10,wrapper:f="div",children:h=null,events:p=["hover"],openOnClick:m=!1,positionStrategy:g="absolute",middlewares:y,delayShow:x=0,delayHide:v=0,float:b=!1,hidden:w=!1,noArrow:S=!1,clickable:E=!1,closeOnEsc:j=!1,closeOnScroll:I=!1,closeOnResize:N=!1,openEvents:T,closeEvents:F,globalCloseEvents:C,imperativeModeOnly:A=!1,style:k,position:O,isOpen:$,defaultIsOpen:D=!1,disableStyleInjection:R=!1,border:M,opacity:L,arrowColor:B,arrowSize:U,setIsOpen:q,afterShow:te,afterHide:V,disableTooltip:re,role:ue="tooltip"},ie)=>{const[oe,ye]=_.useState(n),[se,Te]=_.useState(a),[Fe,P]=_.useState(u),[Q,X]=_.useState(c),[W,H]=_.useState(d),[G,J]=_.useState(x),[ae,Z]=_.useState(v),[ce,ve]=_.useState(b),[fe,_e]=_.useState(w),[Ve,Re]=_.useState(f),[Gt,Un]=_.useState(p),[an,zn]=_.useState(g),[nt,Tr]=_.useState(null),[St,sn]=_.useState(null),Vi=_.useRef(R),{anchorRefs:Gi,activeAnchor:Qs}=LI(t),Xi=sr=>sr==null?void 0:sr.getAttributeNames().reduce((Wn,je)=>{var Xe;return je.startsWith("data-tooltip-")&&(Wn[je.replace(/^data-tooltip-/,"")]=(Xe=sr==null?void 0:sr.getAttribute(je))!==null&&Xe!==void 0?Xe:null),Wn},{}),pi=sr=>{const Wn={place:je=>{var Xe;P((Xe=je)!==null&&Xe!==void 0?Xe:u)},content:je=>{ye(je??n)},html:je=>{Te(je??a)},variant:je=>{var Xe;X((Xe=je)!==null&&Xe!==void 0?Xe:c)},offset:je=>{H(je===null?d:Number(je))},wrapper:je=>{var Xe;Re((Xe=je)!==null&&Xe!==void 0?Xe:f)},events:je=>{const Xe=je==null?void 0:je.split(" ");Un(Xe??p)},"position-strategy":je=>{var Xe;zn((Xe=je)!==null&&Xe!==void 0?Xe:g)},"delay-show":je=>{J(je===null?x:Number(je))},"delay-hide":je=>{Z(je===null?v:Number(je))},float:je=>{ve(je===null?b:je==="true")},hidden:je=>{_e(je===null?w:je==="true")},"class-name":je=>{Tr(je)}};Object.values(Wn).forEach(je=>je(null)),Object.entries(sr).forEach(([je,Xe])=>{var Nn;(Nn=Wn[je])===null||Nn===void 0||Nn.call(Wn,Xe)})};_.useEffect(()=>{ye(n)},[n]),_.useEffect(()=>{Te(a)},[a]),_.useEffect(()=>{P(u)},[u]),_.useEffect(()=>{X(c)},[c]),_.useEffect(()=>{H(d)},[d]),_.useEffect(()=>{J(x)},[x]),_.useEffect(()=>{Z(v)},[v]),_.useEffect(()=>{ve(b)},[b]),_.useEffect(()=>{_e(w)},[w]),_.useEffect(()=>{zn(g)},[g]),_.useEffect(()=>{Vi.current!==R&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[R]),_.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:R==="core",disableBase:R}}))},[]),_.useEffect(()=>{var sr;const Wn=new Set(Gi);let je=r;if(!je&&t&&(je=`[data-tooltip-id='${t.replace(/'/g,"\\'")}']`),je)try{document.querySelectorAll(je).forEach(Ie=>{Wn.add({current:Ie})})}catch{console.warn(`[react-tooltip] "${je}" is not a valid CSS selector`)}const Xe=document.querySelector(`[id='${e}']`);if(Xe&&Wn.add({current:Xe}),!Wn.size)return()=>null;const Nn=(sr=St??Xe)!==null&&sr!==void 0?sr:Qs.current,Js=new MutationObserver(Ie=>{Ie.forEach(De=>{var Zt;if(!Nn||De.type!=="attributes"||!(!((Zt=De.attributeName)===null||Zt===void 0)&&Zt.startsWith("data-tooltip-")))return;const Ir=Xi(Nn);pi(Ir)})}),xe={attributes:!0,childList:!1,subtree:!1};if(Nn){const Ie=Xi(Nn);pi(Ie),Js.observe(Nn,xe)}return()=>{Js.disconnect()}},[Gi,Qs,St,e,r]),_.useEffect(()=>{k!=null&&k.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),M&&!Q4("border",`${M}`)&&console.warn(`[react-tooltip] "${M}" is not a valid \`border\`.`),k!=null&&k.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),L&&!Q4("opacity",`${L}`)&&console.warn(`[react-tooltip] "${L}" is not a valid \`opacity\`.`)},[]);let Hn=h;const Ba=_.useRef(null);if(i){const sr=i({content:(St==null?void 0:St.getAttribute("data-tooltip-content"))||oe||null,activeAnchor:St});Hn=sr?ne.createElement("div",{ref:Ba,className:"react-tooltip-content-wrapper"},sr):null}else oe&&(Hn=oe);se&&(Hn=ne.createElement(fle,{content:se}));const Df={forwardRef:ie,id:t,anchorId:e,anchorSelect:r,className:Y1(s,nt),classNameArrow:o,content:Hn,contentWrapperRef:Ba,place:Fe,variant:Q,offset:W,wrapper:Ve,events:Gt,openOnClick:m,positionStrategy:an,middlewares:y,delayShow:G,delayHide:ae,float:ce,hidden:fe,noArrow:S,clickable:E,closeOnEsc:j,closeOnScroll:I,closeOnResize:N,openEvents:T,closeEvents:F,globalCloseEvents:C,imperativeModeOnly:A,style:k,position:O,isOpen:$,defaultIsOpen:D,border:M,opacity:L,arrowColor:B,arrowSize:U,setIsOpen:q,afterShow:te,afterHide:V,disableTooltip:re,activeAnchor:St,setActiveAnchor:sr=>sn(sr),role:ue};return ne.createElement(dle,{...Df})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",t=>{t.detail.disableCore||K4({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s;--rt-arrow-size:8px}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit;z-index:-1}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),t.detail.disableBase||K4({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:var(--rt-arrow-size);height:var(--rt-arrow-size)}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});const yu=Kt("https://jfvinriqydjtwsmayxix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdmlucmlxeWRqdHdzbWF5eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjE4NTgsImV4cCI6MjA2MzU5Nzg1OH0.KNXG-gdypUXVH3zRQkZDn5Az2ct4IvIb73izuER48X8"),ki={start:9,end:23},ple=["day","week","month"],_o={locale:na,weekStartsOn:1},BI=()=>{const t=_.useCallback(i=>{if(i.includes(" ")&&i.includes("+")){const[s,o]=i.split(" "),[c,u]=o.split("+");let d;u==="00"?d="+00:00":u.length===2?d=`+${u}:00`:d=`+${u}`;const f=`${s}T${c}${d}`;return new Date(f)}return ji(i)},[]),e=_.useCallback(i=>t(i).toLocaleString("sr-RS",{timeZone:"Europe/Belgrade",hour:"2-digit",minute:"2-digit",hour12:!1}),[t]),r=_.useCallback(i=>t(i).toLocaleDateString("sr-RS",{timeZone:"Europe/Belgrade",year:"numeric",month:"2-digit",day:"2-digit"}).split(".").reverse().join("-"),[t]),n=_.useCallback(i=>{const s=t(i),o=s.getFullYear(),c=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0"),d=s.getHours().toString().padStart(2,"0"),f=s.getMinutes().toString().padStart(2,"0");return`${o}-${c}-${u}T${d}:${f}`},[t]),a=_.useCallback(i=>HB(t(i),new Date),[t]);return{parseTimestamp:t,formatSlotTime:e,getSlotDate:r,formatForInput:n,isSlotPast:a}},mle=t=>_.useMemo(()=>t.reduce((e,r)=>{const n=lt(new Date(r.start_at),"yyyy-MM-dd"),a=r.slot_details.title||"Без названия",i=`${n}-${a}`;return e[i]?e[i].slots.push(r):e[i]={...r,slots:[r]},e},{}),[t]),gle=()=>_.useCallback((t,e)=>{const r=new Date(t),n=new Date(e),a=r.getHours()*60+r.getMinutes(),i=n.getHours()*60+n.getMinutes(),s=(a-ki.start*60)/((ki.end-ki.start)*60)*100,o=(i-a)/((ki.end-ki.start)*60)*100;return{top:Math.max(0,s),height:Math.max(1,o)}},[]),vle=(t,e,r)=>_.useMemo(()=>{const a=(()=>{switch(r){case"day":return{start:e,end:e};case"week":return{start:Vh(e,_o),end:u1(e,_o)};case"month":return{start:Ad(e),end:xw(e)}}})(),i=a.start.toISOString(),s=new Date(a.end.getTime()+24*60*60*1e3-1).toISOString();return t.filter(o=>o.start_at>=i&&o.start_at<=s)},[t,e,r]),xle=(t,e,r=!1)=>{if(r)return"bg-gray-100 dark:bg-gray-800 border-l-4 border-gray-400 opacity-60";if(e==="draft")return"bg-gray-50 dark:bg-gray-700/50 border-l-4 border-gray-300 opacity-80";switch(t){case"event":return"bg-green-50 dark:bg-green-900/30 border-l-4 border-green-500";case"rent":return"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500";default:return"bg-gray-50 dark:bg-gray-700 border-l-4 border-gray-300"}},e0=t=>{const e=[];for(let r=ki.start;r<ki.end;r++)e.push({time:cF(lF(t,r),0),label:`${r}:00`});return e},Yv=({slot:t,groupedSlot:e,onEdit:r,onDelete:n,style:a,className:i=""})=>{const{formatSlotTime:s,isSlotPast:o}=BI(),c=o(t.end_at),u=(e==null?void 0:e.slots[0])||t,d=(e==null?void 0:e.slots[(e==null?void 0:e.slots.length)-1])||t,f=`
    ${t.slot_details.title||"Слот"}
    Время: ${s(u.start_at)}-${s(d.end_at)}
    ${t.slot_details.description||""}
    ${t.slot_details.user_name?`Клиент: ${t.slot_details.user_name}`:""}
    ${t.slot_details.status==="draft"?"Статус: Черновик":""}
    ${c?"Прошедшее мероприятие":""}
  `;return l.jsxs("div",{"data-tooltip-id":`tooltip-${t.id}`,"data-tooltip-content":f,className:`rounded cursor-pointer ${xle(t.slot_details.type,t.slot_details.status,c)} ${i}`,style:a,onClick:h=>{h.stopPropagation(),t.slot_details.type==="rent"&&r(t)},children:[l.jsxs("div",{className:"font-medium truncate",children:[s(u.start_at)," ",t.slot_details.title&&`- ${t.slot_details.title}`,t.slot_details.status==="draft"&&l.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(черновик)"}),c&&l.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(прошло)"})]}),t.slot_details.description&&l.jsx("div",{className:"text-xs truncate opacity-75",children:t.slot_details.description}),t.slot_details.type!=="event"&&!c&&l.jsx("button",{onClick:h=>{h.stopPropagation(),n(t.id,t.slot_details.type)},className:"absolute bottom-1 right-1 text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Удалить"}),l.jsx(hle,{id:`tooltip-${t.id}`,className:"z-50 whitespace-pre-line",style:{zIndex:9999}})]})},yle=({children:t})=>l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"w-16 flex-shrink-0 pr-2 text-right text-xs text-gray-500 dark:text-gray-400 pt-1",children:e0(new Date).map((e,r)=>l.jsx("div",{className:"h-12 flex items-center justify-end",children:e.label},r))}),l.jsx("div",{className:"flex-1 relative",children:t})]}),ble=()=>{var N,T,F,C;const[t,e]=_.useState(new Date),[r,n]=_.useState("week"),[a,i]=_.useState([]),[s,o]=_.useState(!0),[c,u]=_.useState({isOpen:!1,mode:"create",data:null}),{parseTimestamp:d,formatSlotTime:f,formatForInput:h}=BI(),p=vle(a,t,r),m=mle(p),g=gle(),y=_.useCallback(async()=>{try{o(!0);const{data:A,error:k}=await yu.from("time_slots_table").select("*").order("start_at",{ascending:!0});if(k)throw k;i(A||[])}catch(A){console.error("Error fetching time slots:",A),K.error("Ошибка загрузки слотов")}finally{o(!1)}},[]);_.useEffect(()=>{y()},[y]);const x=_.useCallback(A=>{e({day:Yu,week:FL,month:c1}[r](t,A==="prev"?-1:1))},[t,r]),v=_.useCallback((A,k)=>{const O=new Date(A);O.setHours(k,0,0,0);const $=new Date(O);$.setHours(k+1,0,0,0),u({isOpen:!0,mode:"create",data:{id:"",start_at:O.toISOString(),end_at:$.toISOString(),slot_details:{type:"rent",title:"",booked:!1}}})},[]),b=_.useCallback(A=>{u({isOpen:!0,mode:"edit",data:A})},[]),w=_.useCallback(async()=>{if(c.data)try{const{start_at:A,end_at:k,slot_details:O}=c.data;if(!A||!k){K.error("Заполните все обязательные поля");return}if(new Date(k)<=new Date(A)){K.error("Время окончания должно быть позже времени начала");return}const{data:$,error:D}=await yu.from("time_slots_table").select("*").or(`and(start_at.lte.${k},end_at.gte.${A})`).neq("id",c.mode==="edit"?c.data.id:"");if(D)throw D;if($&&$.length>0){const R=$.map(M=>{var q,te;const L=((q=M.slot_details)==null?void 0:q.type)==="event"?"Мероприятие":"Аренда",B=((te=M.slot_details)==null?void 0:te.title)||"Без названия",U=`${f(M.start_at)}-${f(M.end_at)}`;return`• ${L}: ${B} (${U})`}).join(`
`);K.error(`Время пересекается с:
${R}`,{duration:8e3});return}if(c.mode==="edit"){const{error:R}=await yu.from("time_slots_table").update({start_at:A,end_at:k,slot_details:O}).eq("id",c.data.id);if(R)throw R;K.success("Слот обновлен")}else{const{error:R}=await yu.from("time_slots_table").insert([{start_at:A,end_at:k,slot_details:{...O,type:"rent"}}]);if(R)throw R;K.success("Слот создан")}u({isOpen:!1,mode:"create",data:null}),y()}catch(A){console.error("Error saving time slot:",A),K.error("Ошибка сохранения слота")}},[c,f,y]),S=_.useCallback(async(A,k)=>{if(k==="event"){K.error("Мероприятия удаляются через страницу управления мероприятиями");return}if(window.confirm("Удалить слот?"))try{const{error:O}=await yu.from("time_slots_table").delete().eq("id",A);if(O)throw O;K.success("Слот удален"),y()}catch(O){console.error("Error deleting time slot:",O),K.error("Ошибка удаления слота")}},[y]),E=()=>{const A=Ad(t),k=xw(t),O=Vh(A,_o),$=u1(k,_o),D=Gh({start:O,end:$});return l.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Gh({start:O,end:Yu(O,6)}).map(R=>l.jsx("div",{className:"text-center py-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:lt(R,"EEEEEE",{locale:na})},R.toString())),D.map(R=>{const M=p.filter(U=>Ku(d(U.start_at),R)),L=y6(R,t),B=tu(R);return l.jsxs("div",{onClick:()=>{e(R),n("day")},className:`min-h-24 p-1.5 border rounded-md flex flex-col cursor-pointer ${L?B?"bg-primary/5 border-primary":"bg-white dark:bg-dark-800 border-gray-200 dark:border-dark-600":"bg-gray-50 dark:bg-dark-700 opacity-50"}`,children:[l.jsx("div",{className:`text-sm font-medium mb-1 self-end px-1 rounded-full ${B?"bg-primary text-white px-2":""}`,children:lt(R,"d")}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1",children:M.map(U=>l.jsx(Yv,{slot:U,onEdit:b,onDelete:S,className:"text-xs p-1"},U.id))})]},R.toString())})]})},j=()=>{const A=Vh(t,_o),k=Gh({start:A,end:Yu(A,6)});return l.jsxs("div",{className:"grid grid-cols-8 gap-1",children:[l.jsx("div",{className:"row-span-25 pt-8 pr-2 text-right text-xs text-gray-500 dark:text-gray-400",children:e0(t).map((O,$)=>l.jsx("div",{className:"h-12 flex items-center justify-end",children:O.label},$))}),k.map(O=>{const $=lt(O,"yyyy-MM-dd"),D=Object.values(m).filter(R=>lt(d(R.start_at),"yyyy-MM-dd")===$);return l.jsxs("div",{className:`col-span-1 ${tu(O)?"bg-primary/5":"bg-white dark:bg-dark-800"}`,children:[l.jsxs("div",{className:`text-center py-2 border-b ${tu(O)?"border-primary":"border-gray-200 dark:border-dark-600"}`,children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:lt(O,"EEEEEE",{locale:na})}),l.jsx("div",{className:`text-lg font-semibold ${tu(O)?"text-primary":""}`,children:lt(O,"d")})]}),l.jsxs("div",{className:"relative",children:[e0(O).map((R,M)=>l.jsx("div",{className:"h-12 border-b border-gray-100 dark:border-dark-700 relative hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer",onClick:()=>v(O,ki.start+M)},M)),D.map((R,M)=>{const L=R.slots[0],B=R.slots[R.slots.length-1],{top:U,height:q}=g(L.start_at,B.end_at);return l.jsx(Yv,{slot:R,groupedSlot:R,onEdit:b,onDelete:S,className:"absolute left-0 right-0 mx-1 p-1 text-xs overflow-hidden",style:{top:`${U}%`,height:`${q}%`,zIndex:10+M}},M)})]})]},O.toString())})]})},I=()=>{const A=lt(t,"yyyy-MM-dd"),k=Object.values(m).filter(O=>lt(d(O.start_at),"yyyy-MM-dd")===A);return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 overflow-hidden",children:[l.jsx("h2",{className:"text-xl font-semibold p-6 pb-4",children:lt(t,"EEEE, d MMMM yyyy",{locale:na})}),l.jsxs(yle,{children:[e0(t).map((O,$)=>l.jsx("div",{className:"h-12 border-b border-gray-100 dark:border-dark-700 relative hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer",onClick:()=>v(t,ki.start+$),children:tu(t)&&new Date().getHours()===O.time.getHours()&&l.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-red-500 z-20",style:{top:`${new Date().getMinutes()/60*100}%`},children:l.jsx("div",{className:"absolute -top-1.5 -left-1 w-3 h-3 rounded-full bg-red-500"})})},$)),k.map((O,$)=>{const D=O.slots[0],R=O.slots[O.slots.length-1],{top:M,height:L}=g(D.start_at,R.end_at);return l.jsx(Yv,{slot:O,groupedSlot:O,onEdit:b,onDelete:S,className:"absolute left-2 right-2 p-2 text-sm shadow-sm",style:{top:`${M}%`,height:`${L}%`,zIndex:10+$}},$)})]})]})};return l.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900",children:[l.jsxs("div",{className:"container py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Календарь слотов"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>x("prev"),className:"p-2 rounded-md bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-600",children:l.jsx(Yd,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-lg font-medium min-w-[200px] text-center text-gray-800 dark:text-gray-200",children:[r==="month"&&lt(t,"MMMM yyyy",{locale:na}),r==="week"&&`${lt(Vh(t,_o),"d MMM")} - ${lt(u1(t,_o),"d MMM yyyy")}`,r==="day"&&lt(t,"d MMMM yyyy",{locale:na})]}),l.jsx("button",{onClick:()=>x("next"),className:"p-2 rounded-md bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-600",children:l.jsx(Kd,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"flex rounded-md shadow-sm border border-gray-200 dark:border-dark-600 overflow-hidden bg-white dark:bg-dark-700",children:ple.map(A=>l.jsxs("button",{onClick:()=>n(A),className:`px-3 py-2 text-sm flex items-center gap-1 transition-colors ${r===A?"bg-primary text-white":"hover:bg-gray-50 dark:hover:bg-dark-600"}`,children:[A==="day"&&l.jsx(Oe,{className:"w-4 h-4"}),A==="week"&&l.jsx(cw,{className:"w-4 h-4"}),A==="month"&&l.jsx(Pj,{className:"w-4 h-4"}),A==="day"&&"День",A==="week"&&"Неделя",A==="month"&&"Месяц"]},A))}),l.jsxs("button",{onClick:()=>v(t,10),className:"p-2 rounded-md bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-1",children:[l.jsx(ha,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:"Создать"})]})]})]}),l.jsx("div",{className:"flex items-center gap-4 mb-2 text-sm text-gray-600 dark:text-gray-400",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:"🕐"}),l.jsx("span",{children:"Время отображается по Белграду (Europe/Belgrade)"})]})}),l.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-green-200 border-l-4 border-green-500 rounded-sm"}),l.jsx("span",{children:"Мероприятия"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-blue-200 border-l-4 border-blue-500 rounded-sm"}),l.jsx("span",{children:"Аренда"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-gray-100 border-l-4 border-gray-300 rounded-sm"}),l.jsx("span",{children:"Черновики"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-gray-200 border-l-4 border-gray-400 rounded-sm opacity-60"}),l.jsx("span",{children:"Прошедшие"})]})]}),s?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-gray-200 dark:border-dark-600 overflow-hidden",children:[r==="month"&&E(),r==="week"&&j(),r==="day"&&I()]})]}),c.isOpen&&c.data&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:c.mode==="edit"?"Редактировать слот":"Создать новый слот"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Дата и время начала"}),l.jsx("input",{type:"datetime-local",value:c.data.start_at?h(c.data.start_at):"",onChange:A=>{if(A.target.value){const k=new Date(A.target.value).toISOString();u(O=>({...O,data:O.data?{...O.data,start_at:k,end_at:!O.data.end_at||new Date(O.data.end_at)<=new Date(k)?new Date(new Date(k).getTime()+60*60*1e3).toISOString():O.data.end_at}:null}))}},className:"w-full p-2 border rounded-md dark:bg-dark-700 border-gray-300 dark:border-dark-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Дата и время окончания"}),l.jsx("input",{type:"datetime-local",value:c.data.end_at?h(c.data.end_at):"",onChange:A=>{A.target.value&&u(k=>({...k,data:k.data?{...k.data,end_at:new Date(A.target.value).toISOString()}:null}))},className:"w-full p-2 border rounded-md dark:bg-dark-700 border-gray-300 dark:border-dark-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Название"}),l.jsx("input",{type:"text",value:((N=c.data.slot_details)==null?void 0:N.title)||"",onChange:A=>u(k=>({...k,data:k.data?{...k.data,slot_details:{...k.data.slot_details,title:A.target.value}}:null})),className:"w-full p-2 border rounded-md dark:bg-dark-700 border-gray-300 dark:border-dark-600",placeholder:"Название аренды"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Описание"}),l.jsx("textarea",{value:((T=c.data.slot_details)==null?void 0:T.description)||"",onChange:A=>u(k=>({...k,data:k.data?{...k.data,slot_details:{...k.data.slot_details,description:A.target.value}}:null})),className:"w-full p-2 border rounded-md dark:bg-dark-700 border-gray-300 dark:border-dark-600",rows:3,placeholder:"Дополнительная информация"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Статус"}),l.jsxs("select",{value:((F=c.data.slot_details)==null?void 0:F.status)||"published",onChange:A=>u(k=>({...k,data:k.data?{...k.data,slot_details:{...k.data.slot_details,status:A.target.value}}:null})),className:"w-full p-2 border rounded-md dark:bg-dark-700 border-gray-300 dark:border-dark-600",children:[l.jsx("option",{value:"published",children:"Опубликован"}),l.jsx("option",{value:"draft",children:"Черновик"}),l.jsx("option",{value:"cancelled",children:"Отменен"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"booked",checked:((C=c.data.slot_details)==null?void 0:C.booked)||!1,onChange:A=>u(k=>({...k,data:k.data?{...k.data,slot_details:{...k.data.slot_details,booked:A.target.checked}}:null})),className:"mr-2"}),l.jsx("label",{htmlFor:"booked",className:"text-sm text-gray-700 dark:text-gray-300",children:"Забронировано"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>u({isOpen:!1,mode:"create",data:null}),className:"px-4 py-2 border rounded-md border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"Отмена"}),l.jsx("button",{onClick:w,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:c.mode==="edit"?"Сохранить":"Создать"})]})]})})]})};var qm={},FI={L:1,M:0,Q:3,H:2},$I={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},wle=$I;function UI(t){this.mode=wle.MODE_8BIT_BYTE,this.data=t}UI.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var _le=UI,Ah=FI;function Xa(t,e){this.totalCount=t,this.dataCount=e}Xa.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Xa.getRSBlocks=function(t,e){var r=Xa.getRsBlockTable(t,e);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,a=new Array,i=0;i<n;i++)for(var s=r[i*3+0],o=r[i*3+1],c=r[i*3+2],u=0;u<s;u++)a.push(new Xa(o,c));return a};Xa.getRsBlockTable=function(t,e){switch(e){case Ah.L:return Xa.RS_BLOCK_TABLE[(t-1)*4+0];case Ah.M:return Xa.RS_BLOCK_TABLE[(t-1)*4+1];case Ah.Q:return Xa.RS_BLOCK_TABLE[(t-1)*4+2];case Ah.H:return Xa.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var kle=Xa;function zI(){this.buffer=new Array,this.length=0}zI.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Nle=zI,Ea={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Ea.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Ea.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Sr=0;Sr<8;Sr++)Ea.EXP_TABLE[Sr]=1<<Sr;for(var Sr=8;Sr<256;Sr++)Ea.EXP_TABLE[Sr]=Ea.EXP_TABLE[Sr-4]^Ea.EXP_TABLE[Sr-5]^Ea.EXP_TABLE[Sr-6]^Ea.EXP_TABLE[Sr-8];for(var Sr=0;Sr<255;Sr++)Ea.LOG_TABLE[Ea.EXP_TABLE[Sr]]=Sr;var HI=Ea,oo=HI;function t0(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}t0.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=oo.gexp(oo.glog(this.get(r))+oo.glog(t.get(n)));return new t0(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=oo.glog(this.get(0))-oo.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=oo.gexp(oo.glog(t.get(n))+e);return new t0(r,0).mod(t)}};var WI=t0,Kn=$I,rE=WI,Sle=HI,Ji={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},wr={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;wr.getBCHDigit(e)-wr.getBCHDigit(wr.G15)>=0;)e^=wr.G15<<wr.getBCHDigit(e)-wr.getBCHDigit(wr.G15);return(t<<10|e)^wr.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;wr.getBCHDigit(e)-wr.getBCHDigit(wr.G18)>=0;)e^=wr.G18<<wr.getBCHDigit(e)-wr.getBCHDigit(wr.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return wr.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case Ji.PATTERN000:return(e+r)%2==0;case Ji.PATTERN001:return e%2==0;case Ji.PATTERN010:return r%3==0;case Ji.PATTERN011:return(e+r)%3==0;case Ji.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case Ji.PATTERN101:return e*r%2+e*r%3==0;case Ji.PATTERN110:return(e*r%2+e*r%3)%2==0;case Ji.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new rE([1],0),r=0;r<t;r++)e=e.multiply(new rE([1,Sle.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Kn.MODE_NUMBER:return 10;case Kn.MODE_ALPHA_NUM:return 9;case Kn.MODE_8BIT_BYTE:return 8;case Kn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Kn.MODE_NUMBER:return 12;case Kn.MODE_ALPHA_NUM:return 11;case Kn.MODE_8BIT_BYTE:return 16;case Kn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Kn.MODE_NUMBER:return 14;case Kn.MODE_ALPHA_NUM:return 13;case Kn.MODE_8BIT_BYTE:return 16;case Kn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var a=0;a<e;a++){for(var i=0,s=t.isDark(n,a),o=-1;o<=1;o++)if(!(n+o<0||e<=n+o))for(var c=-1;c<=1;c++)a+c<0||e<=a+c||o==0&&c==0||s==t.isDark(n+o,a+c)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<e-1;n++)for(var a=0;a<e-1;a++){var u=0;t.isDark(n,a)&&u++,t.isDark(n+1,a)&&u++,t.isDark(n,a+1)&&u++,t.isDark(n+1,a+1)&&u++,(u==0||u==4)&&(r+=3)}for(var n=0;n<e;n++)for(var a=0;a<e-6;a++)t.isDark(n,a)&&!t.isDark(n,a+1)&&t.isDark(n,a+2)&&t.isDark(n,a+3)&&t.isDark(n,a+4)&&!t.isDark(n,a+5)&&t.isDark(n,a+6)&&(r+=40);for(var a=0;a<e;a++)for(var n=0;n<e-6;n++)t.isDark(n,a)&&!t.isDark(n+1,a)&&t.isDark(n+2,a)&&t.isDark(n+3,a)&&t.isDark(n+4,a)&&!t.isDark(n+5,a)&&t.isDark(n+6,a)&&(r+=40);for(var d=0,a=0;a<e;a++)for(var n=0;n<e;n++)t.isDark(n,a)&&d++;var f=Math.abs(100*d/e/e-50)/5;return r+=f*10,r}},Ele=wr,Cle=_le,VI=kle,GI=Nle,Zs=Ele,jle=WI;function Ka(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var $n=Ka.prototype;$n.addData=function(t){var e=new Cle(t);this.dataList.push(e),this.dataCache=null};$n.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};$n.getModuleCount=function(){return this.moduleCount};$n.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=VI.getRSBlocks(t,this.errorCorrectLevel),r=new GI,n=0,a=0;a<e.length;a++)n+=e[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];r.put(i.mode,4),r.put(i.getLength(),Zs.getLengthInBits(i.mode,t)),i.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};$n.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Ka.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};$n.setupPositionProbePattern=function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)};$n.getBestMaskPattern=function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=Zs.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e};$n.createMovieClip=function(t,e,r){var n=t.createEmptyMovieClip(e,r),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var s=i*a,o=0;o<this.modules[i].length;o++){var c=o*a,u=this.modules[i][o];u&&(n.beginFill(0,100),n.moveTo(c,s),n.lineTo(c+a,s),n.lineTo(c+a,s+a),n.lineTo(c,s+a),n.endFill())}return n};$n.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};$n.setupPositionAdjustPattern=function(){for(var t=Zs.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],a=t[r];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)i==-2||i==2||s==-2||s==2||i==0&&s==0?this.modules[n+i][a+s]=!0:this.modules[n+i][a+s]=!1}};$n.setupTypeNumber=function(t){for(var e=Zs.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};$n.setupTypeInfo=function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=Zs.getBCHTypeInfo(r),a=0;a<15;a++){var i=!t&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!t&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!t};$n.mapData=function(t,e){for(var r=-1,n=this.moduleCount-1,a=7,i=0,s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(var o=0;o<2;o++)if(this.modules[n][s-o]==null){var c=!1;i<t.length&&(c=(t[i]>>>a&1)==1);var u=Zs.getMask(e,n,s-o);u&&(c=!c),this.modules[n][s-o]=c,a--,a==-1&&(i++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};Ka.PAD0=236;Ka.PAD1=17;Ka.createData=function(t,e,r){for(var n=VI.getRSBlocks(t,e),a=new GI,i=0;i<r.length;i++){var s=r[i];a.put(s.mode,4),a.put(s.getLength(),Zs.getLengthInBits(s.mode,t)),s.write(a)}for(var o=0,i=0;i<n.length;i++)o+=n[i].dataCount;if(a.getLengthInBits()>o*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+o*8+")");for(a.getLengthInBits()+4<=o*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=o*8||(a.put(Ka.PAD0,8),a.getLengthInBits()>=o*8));)a.put(Ka.PAD1,8);return Ka.createBytes(a,n)};Ka.createBytes=function(t,e){for(var r=0,n=0,a=0,i=new Array(e.length),s=new Array(e.length),o=0;o<e.length;o++){var c=e[o].dataCount,u=e[o].totalCount-c;n=Math.max(n,c),a=Math.max(a,u),i[o]=new Array(c);for(var d=0;d<i[o].length;d++)i[o][d]=255&t.buffer[d+r];r+=c;var f=Zs.getErrorCorrectPolynomial(u),h=new jle(i[o],f.getLength()-1),p=h.mod(f);s[o]=new Array(f.getLength()-1);for(var d=0;d<s[o].length;d++){var m=d+p.getLength()-s[o].length;s[o][d]=m>=0?p.get(m):0}}for(var g=0,d=0;d<e.length;d++)g+=e[d].totalCount;for(var y=new Array(g),x=0,d=0;d<n;d++)for(var o=0;o<e.length;o++)d<i[o].length&&(y[x++]=i[o][d]);for(var d=0;d<a;d++)for(var o=0;o<e.length;o++)d<s[o].length&&(y[x++]=s[o][d]);return y};var Ale=Ka,K2={};Object.defineProperty(K2,"__esModule",{value:!0});var Tle=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ile=jT,Zn=qI(Ile),XI=_,Th=qI(XI);function qI(t){return t&&t.__esModule?t:{default:t}}function Ole(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var Dle={bgColor:Zn.default.oneOfType([Zn.default.object,Zn.default.string]).isRequired,bgD:Zn.default.string.isRequired,fgColor:Zn.default.oneOfType([Zn.default.object,Zn.default.string]).isRequired,fgD:Zn.default.string.isRequired,size:Zn.default.number.isRequired,title:Zn.default.string,viewBoxSize:Zn.default.number.isRequired,xmlns:Zn.default.string},Z2=(0,XI.forwardRef)(function(t,e){var r=t.bgColor,n=t.bgD,a=t.fgD,i=t.fgColor,s=t.size,o=t.title,c=t.viewBoxSize,u=t.xmlns,d=u===void 0?"http://www.w3.org/2000/svg":u,f=Ole(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Th.default.createElement("svg",Tle({},f,{height:s,ref:e,viewBox:"0 0 "+c+" "+c,width:s,xmlns:d}),o?Th.default.createElement("title",null,o):null,Th.default.createElement("path",{d:n,fill:r}),Th.default.createElement("path",{d:a,fill:i}))});Z2.displayName="QRCodeSvg";Z2.propTypes=Dle;K2.default=Z2;Object.defineProperty(qm,"__esModule",{value:!0});qm.QRCode=void 0;var Ple=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rle=jT,vi=Of(Rle),Mle=FI,Lle=Of(Mle),Ble=Ale,Fle=Of(Ble),YI=_,$le=Of(YI),Ule=K2,zle=Of(Ule);function Of(t){return t&&t.__esModule?t:{default:t}}function Hle(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var Wle={bgColor:vi.default.oneOfType([vi.default.object,vi.default.string]),fgColor:vi.default.oneOfType([vi.default.object,vi.default.string]),level:vi.default.string,size:vi.default.number,value:vi.default.string.isRequired},Ym=(0,YI.forwardRef)(function(t,e){var r=t.bgColor,n=r===void 0?"#FFFFFF":r,a=t.fgColor,i=a===void 0?"#000000":a,s=t.level,o=s===void 0?"L":s,c=t.size,u=c===void 0?256:c,d=t.value,f=Hle(t,["bgColor","fgColor","level","size","value"]),h=new Fle.default(-1,Lle.default[o]);h.addData(d),h.make();var p=h.modules;return $le.default.createElement(zle.default,Ple({},f,{bgColor:n,bgD:p.map(function(m,g){return m.map(function(y,x){return y?"":"M "+x+" "+g+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:p.map(function(m,g){return m.map(function(y,x){return y?"M "+x+" "+g+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:u,viewBoxSize:p.length}))});qm.QRCode=Ym;Ym.displayName="QRCode";Ym.propTypes=Wle;var Q2=qm.default=Ym;const Vle=()=>{var d,f,h;const[t,e]=_.useState([]),[r,n]=_.useState(0),[a,i]=_.useState(!0);_.useEffect(()=>{const p=async()=>{i(!0),new Date().toISOString();try{const{data:y,error:x}=await de.from("events").select("*").eq("status","active");if(x)throw x;const v=await Promise.all(y.map(async b=>{if(b.speakers&&b.speakers.length>0){const{data:w,error:S}=await de.from("speakers").select("*").in("id",b.speakers);if(!S)return{...b,speakerDetails:w}}return b}));e(v),i(!1)}catch(y){console.error("Error fetching events:",y),i(!1)}};p();const m=setInterval(p,60*60*1e3),g=setInterval(()=>{n(y=>(y+1)%Math.max(1,t.length))},1e4);return()=>{clearInterval(m),clearInterval(g)}},[t.length]);const s=p=>{n(p)};if(a)return l.jsx("div",{className:"loading",children:"Loading events..."});if(t.length===0)return l.jsx("div",{className:"no-events",children:"No active events at this time."});const o=t[r],c=`${window.location.origin}/event/${o.id}`,u=(d=o.speakerDetails)==null?void 0:d[0];return l.jsxs("div",{className:"posters-container",children:[l.jsxs("div",{className:"poster-slide",children:[l.jsx("div",{className:"poster-bg-image",style:{backgroundImage:`url(${zt(o.bg_image)})`,height:"50vh"},children:l.jsx("h1",{className:"poster-title",children:o.title})}),l.jsx("p",{className:"poster-description",children:o.short_description}),u&&l.jsxs("div",{className:"speaker-block",children:[l.jsx("div",{className:"speaker-photo-container",children:l.jsx("div",{className:"hexagon",children:l.jsx("div",{className:"hexagon-inner",style:{backgroundImage:`url(${zt(((h=(f=u.photos)==null?void 0:f[0])==null?void 0:h.url)||"")})`}})})}),l.jsx("div",{className:"speaker-info",children:l.jsx("h3",{className:"speaker-name",children:u.name})})]}),l.jsxs("div",{className:"qr-container",children:[l.jsx(Q2,{value:c,size:128,bgColor:"#ffffff",fgColor:"#000000"}),l.jsx("p",{className:"qr-text",children:"Scan to learn more"})]}),l.jsxs("div",{className:"event-time",children:[l.jsx("p",{className:"event-date",children:o.date}),l.jsxs("p",{className:"event-hours",children:[new Date(o.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(o.end_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),l.jsx("div",{className:"slide-indicators",children:t.map((p,m)=>l.jsx("button",{className:`indicator ${m===r?"active":""}`,onClick:()=>s(m),"aria-label":`Go to slide ${m+1}`},m))})]})},Gle=()=>{const[t,e]=_.useState("loading"),[r,n]=_.useState("Проверка аутентификации..."),a=Ma();return _.useEffect(()=>{(async()=>{try{const{error:s}=await de.auth.getSession();if(s)throw s;e("success"),n("Аутентификация успешна! Перенаправление..."),setTimeout(()=>{a("/")},2e3)}catch(s){console.error("Error during auth callback:",s),e("error"),n("Произошла ошибка при аутентификации. Пожалуйста, попробуйте снова.")}})()},[a]),l.jsx(Ot,{children:l.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:l.jsxs("div",{className:"w-full max-w-md p-8 bg-white dark:bg-dark-800 rounded-lg shadow-lg text-center",children:[t==="loading"&&l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),t==="success"&&l.jsx(fc,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),t==="error"&&l.jsx(i7,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-2xl font-bold mb-4",children:t==="loading"?"Подождите...":t==="success"?"Успешно!":"Ошибка"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),t==="error"&&l.jsx("button",{onClick:()=>a("/"),className:"btn-primary",children:"Вернуться на главную"})]})})})},Xle=()=>{const[t,e]=_.useState(""),[r,n]=_.useState(""),[a,i]=_.useState(!1),[s,o]=_.useState(null),[c,u]=_.useState(!1),d=Ma();_.useEffect(()=>{const h=window.location.hash;(!h||!h.includes("type=recovery"))&&o("Недействительная или истекшая ссылка для сброса пароля")},[]);const f=async h=>{if(h.preventDefault(),t!==r){o("Пароли не совпадают");return}if(t.length<6){o("Пароль должен содержать не менее 6 символов");return}i(!0),o(null);try{const{error:p}=await de.auth.updateUser({password:t});if(p)throw p;u(!0),setTimeout(()=>{d("/")},3e3)}catch(p){console.error("Error resetting password:",p),o(p.message||"Ошибка при сбросе пароля")}finally{i(!1)}};return l.jsx(Ot,{children:l.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:l.jsxs("div",{className:"w-full max-w-md p-8 bg-white dark:bg-dark-800 rounded-lg shadow-lg",children:[l.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Сброс пароля"}),s&&l.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm flex items-start",children:[l.jsx(Sd,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:s})]}),c?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(fc,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Пароль успешно изменен!"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Вы будете перенаправлены на главную страницу через несколько секунд."}),l.jsx("button",{onClick:()=>d("/"),className:"btn-primary",children:"Вернуться на главную"})]}):l.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",className:"block font-medium mb-2",children:"Новый пароль"}),l.jsxs("div",{className:"relative",children:[l.jsx(Qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"password",id:"password",value:t,onChange:h=>e(h.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-dark-600 dark:bg-dark-800",required:!0,minLength:6})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block font-medium mb-2",children:"Подтвердите пароль"}),l.jsxs("div",{className:"relative",children:[l.jsx(Qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 dark:border-dark-600 dark:bg-dark-800",required:!0,minLength:6})]})]}),l.jsx("button",{type:"submit",disabled:a,className:"w-full btn-primary py-2",children:a?"Сохранение...":"Сохранить новый пароль"})]})]})})})},ub="https://jfvinriqydjtwsmayxix.supabase.co/storage/v1/object/public/images/avatars/",KI=async()=>{try{const{data:t,error:e}=await de.storage.from("images").list("avatars",{limit:1e3,sortBy:{column:"name",order:"asc"}});if(e)throw console.error("Error fetching avatars:",e),e;return t?t.filter(n=>{const a=/\.(png|jpg|jpeg|gif|webp)$/i.test(n.name);return n.name&&a}).map(n=>({name:n.name,url:ub+n.name,id:n.id})):[]}catch(t){return console.error("Failed to fetch avatars:",t),[]}},qle=async()=>{try{const t=await KI();if(t.length===0)return ub+"ava_00001.png";const e=Math.floor(Math.random()*t.length);return t[e].url}catch(t){return console.error("Failed to get random avatar:",t),ub+"ava_00001.png"}},ko=class ko{constructor(){Wc(this,"cache",null);Wc(this,"cacheTimestamp",0);Wc(this,"CACHE_DURATION",5*60*1e3)}static getInstance(){return ko.instance||(ko.instance=new ko),ko.instance}async getAvatars(){const e=Date.now();if(this.cache&&e-this.cacheTimestamp<this.CACHE_DURATION)return this.cache;try{return this.cache=await KI(),this.cacheTimestamp=e,this.cache}catch(r){return console.error("Failed to update avatar cache:",r),this.cache||[]}}invalidateCache(){this.cache=null,this.cacheTimestamp=0}};Wc(ko,"instance");let db=ko;const ZI=db.getInstance(),Yle=async()=>ZI.getAvatars(),Kle=()=>{ZI.invalidateCache()},Zle=({currentAvatar:t,onAvatarSelect:e,onClose:r})=>{const[n,a]=_.useState(t||""),[i,s]=_.useState(!1),[o,c]=_.useState(1),[u,d]=_.useState([]),[f,h]=_.useState(!0),[p,m]=_.useState(null),g=24;_.useEffect(()=>{y()},[]);const y=async()=>{try{h(!0),m(null);const N=await Yle();d(N),N.length===0&&m("Аватары не найдены")}catch(N){console.error("Failed to load avatars:",N),m("Ошибка загрузки аватаров")}finally{h(!1)}},x=async()=>{Kle(),await y(),K.success("Список аватаров обновлен")},v=Math.ceil(u.length/g),b=(o-1)*g,w=b+g,S=u.slice(b,w),E=()=>{if(u.length===0){K.error("Аватары не загружены");return}const N=Math.floor(Math.random()*u.length),T=u[N].url;a(T)},j=async()=>{if(!n){K.error("Выберите аватар");return}s(!0);try{await e(n),r()}catch(N){console.error("Error saving avatar:",N)}finally{s(!1)}},I=({avatar:N})=>{const T=n===N.url;return l.jsx("div",{className:"relative",children:l.jsxs("div",{className:`
            relative cursor-pointer rounded-xl overflow-hidden transition-all duration-300 aspect-square
            ${T?"ring-4 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-dark-800 scale-105":"hover:scale-105 hover:shadow-lg"}
          `,onClick:()=>a(N.url),children:[l.jsx("img",{src:N.url,alt:"Аватар",className:"w-full h-full object-cover",loading:"lazy",onError:F=>{const C=F.target;C.style.opacity="0.5"}}),T&&l.jsx("div",{className:"absolute inset-0 bg-primary-500/20 flex items-center justify-center",children:l.jsx("div",{className:"bg-primary-500 text-white rounded-full p-2",children:l.jsx(Up,{className:"h-5 w-5"})})})]})})};return f?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-xl p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Загрузка аватаров..."})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Выбор аватара"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:p?l.jsxs("span",{className:"text-red-500 flex items-center gap-1",children:[l.jsx(Sd,{className:"h-4 w-4"}),p]}):`${u.length} аватаров`})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-colors",title:"Обновить список аватаров",children:l.jsx(Lj,{className:"h-5 w-5 text-gray-500"})}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-colors",children:l.jsx(Bt,{className:"h-5 w-5 text-gray-500"})})]})]})}),l.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:[n&&l.jsx("div",{className:"text-center mb-6",children:l.jsxs("div",{className:"inline-block relative",children:[l.jsx("div",{className:"w-50 h-50 rounded-xl overflow-hidden border-4 border-primary-500 shadow-lg mb-3",style:{width:"200px",height:"200px"},children:l.jsx("img",{src:n,alt:"Выбранный аватар",className:"w-full h-full object-cover"})}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Выбранный аватар"})]})}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:E,disabled:u.length===0,className:"px-6 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-dark-700 dark:hover:bg-dark-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(e7,{className:"h-4 w-4"}),"Случайный аватар"]})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"p-6",children:S.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-12 gap-3 mb-6",children:S.map(N=>l.jsx(I,{avatar:N},N.url))}),v>1&&l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>c(N=>Math.max(1,N-1)),disabled:o===1,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700",children:l.jsx(Yd,{className:"h-4 w-4"})}),l.jsxs("span",{className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400",children:[o," из ",v]}),l.jsx("button",{onClick:()=>c(N=>Math.min(v,N+1)),disabled:o===v,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700",children:l.jsx(Kd,{className:"h-4 w-4"})})]})]}):l.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[l.jsx(Sd,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Аватары не найдены"}),l.jsx("p",{className:"text-sm",children:"Аватары не загружены или произошла ошибка"}),p&&l.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors",children:"Попробовать снова"})]})})}),l.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-dark-700 flex justify-end gap-3",children:[l.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Отмена"}),l.jsxs("button",{onClick:j,disabled:i||!n,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i?"Сохранение...":"Сохранить"]})]})]})})},Qle=({registration:t,isOpen:e,onClose:r})=>{var h,p,m;const[n,a]=_.useState(256);if(!e)return null;const i=()=>JSON.stringify({type:"event_registration",registrationId:t.registration_id,eventId:t.event_id,userId:t.id,fullName:t.full_name,email:t.email,adultTickets:t.adult_tickets,childTickets:t.child_tickets,totalAmount:t.total_amount,paymentStatus:t.payment_status,timestamp:Date.now()}),s=()=>{const g=document.getElementById("registration-qr-code");if(!g)return;const y=new XMLSerializer().serializeToString(g),x=document.createElement("canvas"),v=x.getContext("2d"),b=new Image;x.width=512,x.height=512,b.onload=()=>{v&&(v.fillStyle="white",v.fillRect(0,0,512,512),v.drawImage(b,0,0,512,512));const w=document.createElement("a");w.download=`registration-qr-${t.registration_id}.png`,w.href=x.toDataURL(),w.click()},b.src="data:image/svg+xml;base64,"+btoa(y)},o=async()=>{const g=i();try{await navigator.clipboard.writeText(g),K.success("Данные регистрации скопированы")}catch(y){console.error("Error copying QR data:",y),K.error("Ошибка копирования")}},c=async()=>{var y;const g=i();if(navigator.share)try{await navigator.share({title:`Регистрация на ${(y=t.event)==null?void 0:y.title}`,text:"QR-код регистрации на мероприятие",url:g})}catch(x){console.error("Error sharing:",x)}else o()},u=g=>{switch(g){case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"free":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}},d=g=>{switch(g){case"paid":return"Оплачено";case"pending":return"Ожидает оплаты";case"free":return"Бесплатно";default:return"Неизвестно"}},f=i();return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ql,{className:"h-5 w-5"}),l.jsx("h2",{className:"text-lg font-semibold",children:"QR-код регистрации"})]}),l.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 transition-colors",children:l.jsx(Bt,{className:"h-6 w-6"})})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-white",children:((h=t.event)==null?void 0:h.title)||"Мероприятие"}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[((p=t.event)==null?void 0:p.start_at)&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{className:"h-4 w-4"}),l.jsxs("span",{children:[en(t.event.start_at),t.event.start_at&&l.jsxs(l.Fragment,{children:[" в ",Li(t.event.start_at)]})]})]}),((m=t.event)==null?void 0:m.location)&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vr,{className:"h-4 w-4"}),l.jsx("span",{children:t.event.location})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vt,{className:"h-4 w-4"}),l.jsxs("span",{children:[t.adult_tickets," взрослых",t.child_tickets>0&&`, ${t.child_tickets} детей`]})]})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${u(t.payment_status)}`,children:d(t.payment_status)}),t.total_amount>0&&l.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:[t.total_amount," ₽"]})]})]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm inline-block mb-4",children:l.jsx(Q2,{id:"registration-qr-code",value:f,size:n,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),l.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[l.jsx("button",{onClick:()=>a(200),className:`px-3 py-1 text-xs rounded ${n===200?"bg-primary-500 text-white":"bg-gray-200 dark:bg-dark-700"}`,children:"Маленький"}),l.jsx("button",{onClick:()=>a(256),className:`px-3 py-1 text-xs rounded ${n===256?"bg-primary-500 text-white":"bg-gray-200 dark:bg-dark-700"}`,children:"Средний"}),l.jsx("button",{onClick:()=>a(300),className:`px-3 py-1 text-xs rounded ${n===300?"bg-primary-500 text-white":"bg-gray-200 dark:bg-dark-700"}`,children:"Большой"})]}),l.jsxs("div",{className:"text-left bg-gray-50 dark:bg-dark-700 rounded-lg p-3 mb-4",children:[l.jsx("p",{className:"text-sm font-medium mb-1",children:"Детали регистрации:"}),l.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("strong",{children:"ID:"})," ",t.registration_id]}),l.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("strong",{children:"Имя:"})," ",t.full_name]}),l.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("strong",{children:"Email:"})," ",t.email]}),l.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("strong",{children:"Дата регистрации:"})," ",new Date(t.registration_date).toLocaleDateString("ru-RU")]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[l.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:[l.jsx(Qd,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Скачать"})]}),l.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:[l.jsx(MM,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Копировать"})]}),l.jsxs("button",{onClick:c,className:"flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:[l.jsx(uw,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Поделиться"})]})]}),t.event&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-dark-600",children:l.jsxs("a",{href:`/events/${t.event_id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors",children:[l.jsx(Wu,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Перейти к мероприятию"})]})}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:l.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"💡 Покажите этот QR-код администратору на входе в мероприятие для подтверждения регистрации"})})]})]})})},Jle=({userId:t})=>{const[e,r]=_.useState([]),[n,a]=_.useState(!0),[i,s]=_.useState(""),[o,c]=_.useState("all"),[u,d]=_.useState("all"),[f,h]=_.useState(null),[p,m]=_.useState(!1);_.useEffect(()=>{g()},[t]);const g=async()=>{try{a(!0);const{data:N,error:T}=await de.from("user_event_registrations").select(`
          *,
          event:events(
            id,
            title,
            start_at,
            end_at,
            location,
            event_type,
            bg_image,
            status
          )
        `).eq("user_id",t).order("registration_date",{ascending:!1});if(T)throw T;r(N||[])}catch(N){console.error("Error fetching registrations:",N)}finally{a(!1)}},y=N=>{var C;return N.status==="cancelled"?"cancelled":(C=N.event)!=null&&C.start_at&&new Date(N.event.start_at)<new Date?"past":"active"},x=N=>{switch(N){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"past":return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}},v=N=>{switch(N){case"active":return"Активная";case"past":return"Прошедшее";case"cancelled":return"Отменена";default:return"Неизвестно"}},b=N=>{switch(N){case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"free":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}},w=N=>{switch(N){case"paid":return"Оплачено";case"pending":return"Ожидает оплаты";case"free":return"Бесплатно";default:return"Неизвестно"}},S=e.filter(N=>{var k,O,$,D;const T=((O=(k=N.event)==null?void 0:k.title)==null?void 0:O.toLowerCase().includes(i.toLowerCase()))||((D=($=N.event)==null?void 0:$.location)==null?void 0:D.toLowerCase().includes(i.toLowerCase())),F=y(N),C=o==="all"||F===o,A=u==="all"||N.payment_status===u;return T&&C&&A}),E=N=>{h(N),m(!0)},j=()=>{h(null),m(!1)},I={total:e.length,active:e.filter(N=>y(N)==="active").length,past:e.filter(N=>y(N)==="past").length,cancelled:e.filter(N=>y(N)==="cancelled").length,paid:e.filter(N=>N.payment_status==="paid").length,pending:e.filter(N=>N.payment_status==="pending").length,free:e.filter(N=>N.payment_status==="free").length};return n?l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-6",children:l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-700 rounded w-1/4"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"h-3 bg-gray-200 dark:bg-dark-700 rounded"}),l.jsx("div",{className:"h-3 bg-gray-200 dark:bg-dark-700 rounded w-5/6"})]})]})}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:[l.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[l.jsx(Oe,{className:"h-5 w-5"}),"Мои регистрации"]}),l.jsx("p",{className:"text-primary-100 text-sm mt-1",children:"История регистраций на мероприятия"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold",children:I.total}),l.jsx("div",{className:"text-primary-100 text-xs",children:"всего регистраций"})]})]})}),l.jsx("div",{className:"p-4 bg-gray-50 dark:bg-dark-700 border-b border-gray-200 dark:border-dark-600",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:I.active}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Активные"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400",children:I.past}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Прошедшие"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:I.paid}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Оплачено"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-yellow-600 dark:text-yellow-400",children:I.pending}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"К оплате"})]})]})}),l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-dark-600",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Поиск по названию мероприятия...",value:i,onChange:N=>s(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg text-sm dark:bg-dark-800"})]}),l.jsxs("select",{value:o,onChange:N=>c(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg text-sm dark:bg-dark-800",children:[l.jsxs("option",{value:"all",children:["Все статусы (",I.total,")"]}),l.jsxs("option",{value:"active",children:["Активные (",I.active,")"]}),l.jsxs("option",{value:"past",children:["Прошедшие (",I.past,")"]}),l.jsxs("option",{value:"cancelled",children:["Отмененные (",I.cancelled,")"]})]}),l.jsxs("select",{value:u,onChange:N=>d(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg text-sm dark:bg-dark-800",children:[l.jsx("option",{value:"all",children:"Все оплаты"}),l.jsxs("option",{value:"paid",children:["Оплачено (",I.paid,")"]}),l.jsxs("option",{value:"pending",children:["К оплате (",I.pending,")"]}),l.jsxs("option",{value:"free",children:["Бесплатно (",I.free,")"]})]})]})}),l.jsx("div",{className:"divide-y divide-gray-200 dark:divide-dark-600",children:S.length>0?S.map(N=>{var F,C,A,k;const T=y(N);return l.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[((F=N.event)==null?void 0:F.bg_image)&&l.jsx("div",{className:"md:w-20 h-20 bg-gray-200 dark:bg-dark-700 rounded-lg overflow-hidden flex-shrink-0",children:l.jsx("img",{src:zt(N.event.bg_image),alt:N.event.title,className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:l.jsxs(Be,{to:`/events/${N.event_id}`,className:"hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:[((C=N.event)==null?void 0:C.title)||"Мероприятие",l.jsx(Wu,{className:"h-4 w-4 inline ml-1"})]})}),l.jsxs("div",{className:"flex gap-2 ml-4",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x(T)}`,children:v(T)}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b(N.payment_status)}`,children:w(N.payment_status)})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[((A=N.event)==null?void 0:A.start_at)&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Oe,{className:"h-4 w-4"}),new Date(N.event.start_at).toLocaleDateString("ru-RU")]}),((k=N.event)==null?void 0:k.location)&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(vr,{className:"h-4 w-4"}),N.event.location]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Vt,{className:"h-4 w-4"}),N.adult_tickets," взрослых",N.child_tickets>0&&`, ${N.child_tickets} детей`]}),N.total_amount>0&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Zd,{className:"h-4 w-4"}),N.total_amount," ₽"]})]}),l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:[l.jsxs("span",{children:["ID регистрации: ",N.registration_id]}),l.jsx("span",{className:"mx-2",children:"•"}),l.jsxs("span",{children:["Зарегистрирован: ",new Date(N.registration_date).toLocaleDateString("ru-RU")]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[N.full_name," • ",N.email]}),l.jsxs("button",{onClick:()=>E(N),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors text-sm font-medium",children:[l.jsx(ql,{className:"h-4 w-4"}),"Показать QR-код"]})]})]})]})},N.id)}):l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(Oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Нет регистраций"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i||o!=="all"||u!=="all"?"Попробуйте изменить фильтры поиска":"Вы еще не зарегистрировались ни на одно мероприятие"})]})}),f&&l.jsx(Qle,{registration:f,isOpen:p,onClose:j})]})},ece=({userId:t,userName:e,userEmail:r})=>{const[n,a]=_.useState(""),[i,s]=_.useState(!0),[o,c]=_.useState(!1);_.useEffect(()=>{u()},[t]);const u=async()=>{try{s(!0);const{data:y,error:x}=await de.from("profiles").select("qr_token").eq("id",t).single();if(x)throw x;y!=null&&y.qr_token?a(y.qr_token):await d()}catch(y){console.error("Error fetching QR token:",y),K.error("Ошибка загрузки QR-кода")}finally{s(!1)}},d=async()=>{try{c(!0);const{data:y,error:x}=await de.rpc("regenerate_qr_token",{profile_id:t});if(x)throw x;a(y),K.success("QR-код обновлен")}catch(y){console.error("Error regenerating QR token:",y),K.error("Ошибка обновления QR-кода")}finally{c(!1)}},f=()=>{const y=document.getElementById("user-qr-code");if(!y)return;const x=new XMLSerializer().serializeToString(y),v=document.createElement("canvas"),b=v.getContext("2d"),w=new Image;v.width=512,v.height=512,w.onload=()=>{b==null||b.drawImage(w,0,0,512,512);const S=document.createElement("a");S.download=`qr-code-${e.replace(/\s+/g,"-").toLowerCase()}.png`,S.href=v.toDataURL(),S.click()},w.src="data:image/svg+xml;base64,"+btoa(x)},h=async()=>{const y=m();try{await navigator.clipboard.writeText(y),K.success("Данные QR-кода скопированы")}catch(x){console.error("Error copying QR data:",x),K.error("Ошибка копирования")}},p=async()=>{const y=m();if(navigator.share)try{await navigator.share({title:`QR-код ${e}`,text:"QR-код для отметки посещений",url:y})}catch(x){console.error("Error sharing:",x)}else h()},m=()=>JSON.stringify({type:"user_attendance",userId:t,qrToken:n,userName:e,userEmail:r,timestamp:Date.now()});if(i)return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-6 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Загрузка QR-кода..."})]});const g=m();return l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-4 text-white",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ql,{className:"h-5 w-5"}),l.jsx("h3",{className:"text-lg font-semibold",children:"Мой QR-код"})]}),l.jsx("p",{className:"text-primary-100 text-sm mt-1",children:"Покажите этот код админу для отметки посещения"})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm inline-block mb-4",children:l.jsx(Q2,{id:"user-qr-code",value:g,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r}),l.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["ID: ",n.slice(0,8),"..."]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:f,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:[l.jsx(Qd,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Скачать"})]}),l.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:[l.jsx(uw,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Поделиться"})]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-dark-600",children:[l.jsxs("button",{onClick:d,disabled:o,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors disabled:opacity-50",children:[l.jsx(Lj,{className:`h-4 w-4 ${o?"animate-spin":""}`}),o?"Обновление...":"Обновить QR-код"]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Обновите код, если считаете, что он скомпрометирован"})]})]})]})},tce=()=>{var C;const t=Ma(),{user:e,loading:r}=il(),[n,a]=_.useState(null),[i,s]=_.useState(!0),[o,c]=_.useState(!1),[u,d]=_.useState(!1),[f,h]=_.useState({name:""}),[p,m]=_.useState(!1);kw(e==null?void 0:e.id),Nw(e==null?void 0:e.id);const[g,y]=_.useState([]),[x,v]=_.useState([]),[b,w]=_.useState(!1);_.useEffect(()=>{!r&&!e&&t("/")},[e,r,t]),_.useEffect(()=>{const A=async()=>{var O,$,D;if(!e){s(!1);return}try{const{data:R,error:M}=await de.from("profiles").select("*").eq("id",e.id).maybeSingle();if(M&&M.code!=="PGRST116")throw console.error("Profile fetch error:",M),M;if(R)a(R);else try{const L=await qle(),B={id:e.id,name:e.name||((O=e.email)==null?void 0:O.split("@")[0])||"Пользователь",role:"Guest",email:e.email,avatar:L},{data:U,error:q}=await de.from("profiles").insert(B).select().single();if(q)throw q;a(U)}catch(L){console.error("Error creating profile:",L);const B={id:e.id,name:e.name||(($=e.email)==null?void 0:$.split("@")[0])||"Пользователь",role:"Guest",email:e.email,avatar:null},{data:U}=await de.from("profiles").insert(B).select().single();a(U)}h({name:(R==null?void 0:R.name)||e.name||((D=e.email)==null?void 0:D.split("@")[0])||"Пользователь"})}catch(R){console.error("Profile fetch error:",R),K.error("Ошибка загрузки профиля")}finally{s(!1)}},k=async()=>{e&&(w(!0),await Promise.all([S(),E()]),w(!1))};A(),k()},[e]);const S=async()=>{if(e)try{const{data:A,error:k}=await de.from("user_favorite_speakers").select(`
          speakers (
            id,
            name,
            description,
            field_of_expertise,
            photos
          )
        `).eq("user_id",e.id);if(k)throw k;const O=(A==null?void 0:A.map($=>$.speakers).filter(Boolean))||[];y(O)}catch(A){console.error("Error fetching favorite speakers:",A)}},E=async()=>{if(e)try{const{data:A,error:k}=await de.from("user_favorite_events").select(`
          events (
            id,
            title,
            description,
            start_at,
            location,
            bg_image,
            event_type
          )
        `).eq("user_id",e.id);if(k)throw k;const O=(A==null?void 0:A.map($=>$.events).filter(Boolean))||[];v(O)}catch(A){console.error("Error fetching favorite events:",A)}},j=async()=>{if(!(!n||!e))try{m(!0);const{error:A}=await de.from("profiles").update({name:f.name}).eq("id",e.id);if(A)throw A;a(k=>k&&{...k,name:f.name}),c(!1),K.success("Профиль обновлен")}catch(A){console.error("Error updating profile:",A),K.error("Ошибка при обновлении профиля")}finally{m(!1)}},I=()=>{var A;h({name:(n==null?void 0:n.name)||(e==null?void 0:e.name)||((A=e==null?void 0:e.email)==null?void 0:A.split("@")[0])||"Пользователь"}),c(!1)},N=async A=>{if(e)try{const{error:k}=await de.from("profiles").update({avatar:A}).eq("id",e.id);if(k)throw k;a(O=>O&&{...O,avatar:A}),d(!1),K.success("Аватар обновлен"),setTimeout(()=>{window.location.reload()},1e3)}catch(k){throw console.error("Error updating avatar:",k),K.error("Ошибка при обновлении аватара"),k}},T=async A=>{if(e)try{const{error:k}=await de.from("user_favorite_speakers").delete().eq("user_id",e.id).eq("speaker_id",A);if(k)throw k;y(O=>O.filter($=>$.id!==A)),K.success("Спикер удален из избранного")}catch(k){console.error("Error removing favorite speaker:",k),K.error("Ошибка при удалении спикера")}},F=async A=>{if(e)try{const{error:k}=await de.from("user_favorite_events").delete().eq("user_id",e.id).eq("event_id",A);if(k)throw k;v(O=>O.filter($=>$.id!==A)),K.success("Мероприятие удалено из избранного")}catch(k){console.error("Error removing favorite event:",k),K.error("Ошибка при удалении мероприятия")}};return r||i?l.jsx(Ot,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):e?l.jsxs(Ot,{children:[l.jsx("div",{className:"container mx-auto px-4 py-12",children:l.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:[l.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-6 text-white",children:l.jsx("h1",{className:"text-2xl font-bold",children:"Мой профиль"})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:n!=null&&n.avatar?l.jsx("img",{src:zt(n.avatar),alt:"Аватар пользователя",className:"w-full h-full object-cover"}):l.jsx(Cn,{className:"h-8 w-8 text-primary-600 dark:text-primary-400"})}),l.jsx("button",{onClick:()=>d(!0),className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary-500 hover:bg-primary-600 text-white rounded-full flex items-center justify-center transition-colors",title:"Изменить аватар",children:l.jsx(dc,{className:"h-3 w-3"})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:(n==null?void 0:n.name)||"Пользователь"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e.email})]})]}),l.jsxs("button",{onClick:()=>c(!o),className:"btn-outline",children:[l.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Редактировать"]})]}),o?l.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Имя"}),l.jsx("input",{type:"text",value:f.name,onChange:A=>h({...f,name:A.target.value}),className:"w-full p-3 border border-gray-300 dark:border-dark-600 rounded-lg dark:bg-dark-800",placeholder:"Введите ваше имя"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:j,disabled:p,className:"btn-primary flex-1",children:p?l.jsx(l.Fragment,{children:"Сохраняется..."}):l.jsxs(l.Fragment,{children:[l.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Сохранить"]})}),l.jsxs("button",{onClick:I,className:"btn-outline flex-1",children:[l.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Отмена"]})]})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ef,{className:"h-5 w-5 text-gray-400 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),l.jsx("p",{className:"font-medium",children:e.email})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(JM,{className:"h-5 w-5 text-gray-400 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Роль"}),l.jsx("p",{className:"font-medium",children:(n==null?void 0:n.role)||"Гость"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Oe,{className:"h-5 w-5 text-gray-400 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Дата регистрации"}),l.jsx("p",{className:"font-medium",children:n!=null&&n.created_at?new Date(n.created_at).toLocaleDateString("ru-RU"):"Не указано"})]})]})]})]})]}),n&&l.jsx(ece,{userId:n.id,userName:n.name||((C=n.email)==null?void 0:C.split("@")[0])||"Пользователь",userEmail:n.email||e.email}),n&&l.jsx(Jle,{userId:n.id}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ia,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"}),l.jsx("h3",{className:"text-lg font-medium",children:"Избранные спикеры"}),l.jsx("span",{className:"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full text-xs",children:g.length})]}),l.jsxs(Be,{to:"/speakers",className:"text-primary-600 hover:text-primary-700 text-sm flex items-center gap-1",children:["Все спикеры",l.jsx(Wu,{className:"h-4 w-4"})]})]})}),l.jsx("div",{className:"p-6",children:b?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((A,k)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"bg-gray-200 dark:bg-dark-700 h-20 rounded-lg"})},k))}):g.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(A=>{var k;return l.jsxs("div",{className:"group bg-gray-50 dark:bg-dark-700 rounded-lg p-4 hover:shadow-md transition-all duration-200 border border-gray-200 dark:border-dark-600",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-primary-100 dark:bg-primary-900/30 flex-shrink-0",children:A.photos&&A.photos.length>0?l.jsx("img",{src:zt(((k=A.photos.find(O=>O.isMain))==null?void 0:k.url)||A.photos[0].url),alt:A.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Cn,{className:"h-6 w-6 text-primary-600 dark:text-primary-400"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white line-clamp-2 group-hover:text-primary-700 dark:group-hover:text-primary-300 transition-colors",children:A.name}),A.field_of_expertise&&l.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 mt-1 line-clamp-2 font-medium",children:A.field_of_expertise})]})]}),l.jsx("button",{onClick:()=>T(A.id),className:"text-gray-400 hover:text-red-500 p-1.5 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-200 opacity-0 group-hover:opacity-100",title:"Удалить из избранного",children:l.jsx(Bt,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-gray-700",children:l.jsxs(Be,{to:`/speakers/${A.id}`,className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 text-sm flex items-center gap-1 transition-colors font-medium",children:["Посмотреть профиль",l.jsx(Wu,{className:"h-3 w-3"})]})})]},A.id)})}):l.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[l.jsx(Ia,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"У вас пока нет любимых спикеров"}),l.jsx("p",{className:"text-sm mt-1",children:"Добавьте спикеров в избранное на странице спикеров"})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vt,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"}),l.jsx("h3",{className:"text-lg font-medium",children:"Избранные мероприятия"}),l.jsx("span",{className:"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full text-xs",children:x.length})]}),l.jsxs(Be,{to:"/events",className:"text-primary-600 hover:text-primary-700 text-sm flex items-center gap-1",children:["Все мероприятия",l.jsx(Wu,{className:"h-4 w-4"})]})]})}),l.jsx("div",{className:"p-6",children:x.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(A=>l.jsxs("div",{className:"group bg-gray-50 dark:bg-dark-700 rounded-lg overflow-hidden hover:shadow-md transition-all duration-200 border border-gray-200 dark:border-dark-600",children:[A.bg_image&&l.jsx("div",{className:"h-32 bg-gray-200 dark:bg-dark-600",children:l.jsx("img",{src:zt(A.bg_image),alt:A.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900 dark:text-white line-clamp-2 group-hover:text-primary-700 dark:group-hover:text-primary-300 transition-colors",children:l.jsx(Be,{to:`/events/${A.id}`,children:A.title})}),l.jsx("button",{onClick:()=>F(A.id),className:"text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-200 opacity-0 group-hover:opacity-100 ml-2",title:"Удалить из избранного",children:l.jsx(Bt,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[A.start_at&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Oe,{className:"h-4 w-4"}),l.jsx("span",{children:new Date(A.start_at).toLocaleDateString("ru-RU")})]}),A.location&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(vr,{className:"h-4 w-4"}),l.jsx("span",{className:"line-clamp-1",children:A.location})]}),A.event_type&&l.jsx("span",{className:"inline-block bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 px-2 py-1 rounded text-xs",children:A.event_type})]}),A.description&&l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mt-2",children:A.description})]})]},A.id))}):l.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[l.jsx(Oe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"У вас пока нет любимых мероприятий"}),l.jsx("p",{className:"text-sm mt-1",children:"Добавьте мероприятия в избранное на странице событий"})]})})]}),l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md overflow-hidden",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Дополнительные функции"}),l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["🚧 ",l.jsx("strong",{children:"В разработке:"})," Статистика активности и настройки уведомлений будут добавлены в следующих обновлениях."]})})]})})]})}),u&&l.jsx(Zle,{currentAvatar:n==null?void 0:n.avatar,onAvatarSelect:N,onClose:()=>d(!1)})]}):null};function rce(){return l.jsxs("div",{className:"app",children:[l.jsx(EM,{position:"top-center"}),l.jsxs(_R,{children:[l.jsx(dt,{path:"/",element:l.jsx(eU,{})}),l.jsx(dt,{path:"/events",element:l.jsx(rH,{})}),l.jsx(dt,{path:"/events/:id",element:l.jsx(lH,{})}),l.jsx(dt,{path:"/speakers",element:l.jsx(fH,{})}),l.jsx(dt,{path:"/speakers/:id",element:l.jsx(AX,{})}),l.jsx(dt,{path:"/rent",element:l.jsx(xq,{})}),l.jsx(dt,{path:"/coworking",element:l.jsx(wq,{})}),l.jsx(dt,{path:"/about",element:l.jsx(Nq,{})}),l.jsx(dt,{path:"/posters",element:l.jsx(Vle,{})}),l.jsx(dt,{path:"/auth/callback",element:l.jsx(Gle,{})}),l.jsx(dt,{path:"/reset-password",element:l.jsx(Xle,{})}),l.jsx(dt,{path:"/profile",element:l.jsx(nle,{children:l.jsx(tce,{})})}),l.jsxs(dt,{path:"/admin",element:l.jsx(rle,{children:l.jsx(fQ,{})}),children:[l.jsx(dt,{index:!0,element:l.jsx(hQ,{})}),l.jsx(dt,{path:"events",element:l.jsx(gQ,{})}),l.jsx(dt,{path:"events/new",element:l.jsx(kS,{})}),l.jsx(dt,{path:"events/:id/edit",element:l.jsx(kS,{})}),l.jsx(dt,{path:"speakers",element:l.jsx(yJ,{})}),l.jsx(dt,{path:"rent",element:l.jsx(wJ,{})}),l.jsx(dt,{path:"coworking",element:l.jsx(_J,{})}),l.jsx(dt,{path:"about",element:l.jsx(kJ,{})}),l.jsx(dt,{path:"navigation",element:l.jsx(aie,{})}),l.jsx(dt,{path:"export",element:l.jsx(lie,{})}),l.jsx(dt,{path:"calendar",element:l.jsx(ble,{})}),l.jsx(dt,{path:"event-statistics",element:l.jsx(ele,{})}),l.jsx(dt,{path:"attendance",element:l.jsx(tle,{})})]}),l.jsx(dt,{path:"*",element:l.jsx(Sq,{})})]})]})}gj(document.getElementById("root")).render(l.jsx(_.StrictMode,{children:l.jsx(TR,{children:l.jsx(kL,{children:l.jsx(tU,{children:l.jsx(rce,{})})})})}));
